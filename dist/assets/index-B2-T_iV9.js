(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function L_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sg={exports:{}},xl={},og={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var go=Symbol.for("react.element"),z_=Symbol.for("react.portal"),U_=Symbol.for("react.fragment"),B_=Symbol.for("react.strict_mode"),$_=Symbol.for("react.profiler"),H_=Symbol.for("react.provider"),q_=Symbol.for("react.context"),W_=Symbol.for("react.forward_ref"),G_=Symbol.for("react.suspense"),K_=Symbol.for("react.memo"),Q_=Symbol.for("react.lazy"),Rf=Symbol.iterator;function Y_(t){return t===null||typeof t!="object"?null:(t=Rf&&t[Rf]||t["@@iterator"],typeof t=="function"?t:null)}var ag={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lg=Object.assign,ug={};function Ui(t,e,n){this.props=t,this.context=e,this.refs=ug,this.updater=n||ag}Ui.prototype.isReactComponent={};Ui.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ui.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cg(){}cg.prototype=Ui.prototype;function od(t,e,n){this.props=t,this.context=e,this.refs=ug,this.updater=n||ag}var ad=od.prototype=new cg;ad.constructor=od;lg(ad,Ui.prototype);ad.isPureReactComponent=!0;var Nf=Array.isArray,dg=Object.prototype.hasOwnProperty,ld={current:null},hg={key:!0,ref:!0,__self:!0,__source:!0};function fg(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)dg.call(e,r)&&!hg.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){for(var c=Array(u),h=0;h<u;h++)c[h]=arguments[h+2];i.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)i[r]===void 0&&(i[r]=u[r]);return{$$typeof:go,type:t,key:s,ref:o,props:i,_owner:ld.current}}function X_(t,e){return{$$typeof:go,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ud(t){return typeof t=="object"&&t!==null&&t.$$typeof===go}function J_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var bf=/\/+/g;function hu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?J_(""+t.key):e.toString(36)}function ma(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case go:case z_:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+hu(o,0):r,Nf(i)?(n="",t!=null&&(n=t.replace(bf,"$&/")+"/"),ma(i,e,n,"",function(h){return h})):i!=null&&(ud(i)&&(i=X_(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(bf,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Nf(t))for(var u=0;u<t.length;u++){s=t[u];var c=r+hu(s,u);o+=ma(s,e,n,c,i)}else if(c=Y_(t),typeof c=="function")for(t=c.call(t),u=0;!(s=t.next()).done;)s=s.value,c=r+hu(s,u++),o+=ma(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function $o(t,e,n){if(t==null)return t;var r=[],i=0;return ma(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Z_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Tt={current:null},pa={transition:null},e1={ReactCurrentDispatcher:Tt,ReactCurrentBatchConfig:pa,ReactCurrentOwner:ld};function mg(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:$o,forEach:function(t,e,n){$o(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $o(t,function(){e++}),e},toArray:function(t){return $o(t,function(e){return e})||[]},only:function(t){if(!ud(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};le.Component=Ui;le.Fragment=U_;le.Profiler=$_;le.PureComponent=od;le.StrictMode=B_;le.Suspense=G_;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=e1;le.act=mg;le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=lg({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ld.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)dg.call(e,c)&&!hg.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];r.children=u}return{$$typeof:go,type:t.type,key:i,ref:s,props:r,_owner:o}};le.createContext=function(t){return t={$$typeof:q_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:H_,_context:t},t.Consumer=t};le.createElement=fg;le.createFactory=function(t){var e=fg.bind(null,t);return e.type=t,e};le.createRef=function(){return{current:null}};le.forwardRef=function(t){return{$$typeof:W_,render:t}};le.isValidElement=ud;le.lazy=function(t){return{$$typeof:Q_,_payload:{_status:-1,_result:t},_init:Z_}};le.memo=function(t,e){return{$$typeof:K_,type:t,compare:e===void 0?null:e}};le.startTransition=function(t){var e=pa.transition;pa.transition={};try{t()}finally{pa.transition=e}};le.unstable_act=mg;le.useCallback=function(t,e){return Tt.current.useCallback(t,e)};le.useContext=function(t){return Tt.current.useContext(t)};le.useDebugValue=function(){};le.useDeferredValue=function(t){return Tt.current.useDeferredValue(t)};le.useEffect=function(t,e){return Tt.current.useEffect(t,e)};le.useId=function(){return Tt.current.useId()};le.useImperativeHandle=function(t,e,n){return Tt.current.useImperativeHandle(t,e,n)};le.useInsertionEffect=function(t,e){return Tt.current.useInsertionEffect(t,e)};le.useLayoutEffect=function(t,e){return Tt.current.useLayoutEffect(t,e)};le.useMemo=function(t,e){return Tt.current.useMemo(t,e)};le.useReducer=function(t,e,n){return Tt.current.useReducer(t,e,n)};le.useRef=function(t){return Tt.current.useRef(t)};le.useState=function(t){return Tt.current.useState(t)};le.useSyncExternalStore=function(t,e,n){return Tt.current.useSyncExternalStore(t,e,n)};le.useTransition=function(){return Tt.current.useTransition()};le.version="18.3.1";og.exports=le;var B=og.exports;const t1=L_(B);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n1=B,r1=Symbol.for("react.element"),i1=Symbol.for("react.fragment"),s1=Object.prototype.hasOwnProperty,o1=n1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a1={key:!0,ref:!0,__self:!0,__source:!0};function pg(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)s1.call(e,r)&&!a1.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:r1,type:t,key:s,ref:o,props:i,_owner:o1.current}}xl.Fragment=i1;xl.jsx=pg;xl.jsxs=pg;sg.exports=xl;var l=sg.exports,Wu={},gg={exports:{}},Lt={},yg={exports:{}},vg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,X){var re=U.length;U.push(X);e:for(;0<re;){var ye=re-1>>>1,me=U[ye];if(0<i(me,X))U[ye]=X,U[re]=me,re=ye;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var X=U[0],re=U.pop();if(re!==X){U[0]=re;e:for(var ye=0,me=U.length,we=me>>>1;ye<we;){var Ct=2*(ye+1)-1,_t=U[Ct],H=Ct+1,he=U[H];if(0>i(_t,re))H<me&&0>i(he,_t)?(U[ye]=he,U[H]=re,ye=H):(U[ye]=_t,U[Ct]=re,ye=Ct);else if(H<me&&0>i(he,re))U[ye]=he,U[H]=re,ye=H;else break e}}return X}function i(U,X){var re=U.sortIndex-X.sortIndex;return re!==0?re:U.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var c=[],h=[],p=1,y=null,g=3,E=!1,A=!1,R=!1,P=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(U){for(var X=n(h);X!==null;){if(X.callback===null)r(h);else if(X.startTime<=U)r(h),X.sortIndex=X.expirationTime,e(c,X);else break;X=n(h)}}function b(U){if(R=!1,C(U),!A)if(n(c)!==null)A=!0,Ut(D);else{var X=n(h);X!==null&&Me(b,X.startTime-U)}}function D(U,X){A=!1,R&&(R=!1,T(m),m=-1),E=!0;var re=g;try{for(C(X),y=n(c);y!==null&&(!(y.expirationTime>X)||U&&!S());){var ye=y.callback;if(typeof ye=="function"){y.callback=null,g=y.priorityLevel;var me=ye(y.expirationTime<=X);X=t.unstable_now(),typeof me=="function"?y.callback=me:y===n(c)&&r(c),C(X)}else r(c);y=n(c)}if(y!==null)var we=!0;else{var Ct=n(h);Ct!==null&&Me(b,Ct.startTime-X),we=!1}return we}finally{y=null,g=re,E=!1}}var F=!1,v=null,m=-1,_=5,x=-1;function S(){return!(t.unstable_now()-x<_)}function j(){if(v!==null){var U=t.unstable_now();x=U;var X=!0;try{X=v(!0,U)}finally{X?I():(F=!1,v=null)}}else F=!1}var I;if(typeof k=="function")I=function(){k(j)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,vt=xe.port2;xe.port1.onmessage=j,I=function(){vt.postMessage(null)}}else I=function(){P(j,0)};function Ut(U){v=U,F||(F=!0,I())}function Me(U,X){m=P(function(){U(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){A||E||(A=!0,Ut(D))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(U){switch(g){case 1:case 2:case 3:var X=3;break;default:X=g}var re=g;g=X;try{return U()}finally{g=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,X){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var re=g;g=U;try{return X()}finally{g=re}},t.unstable_scheduleCallback=function(U,X,re){var ye=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?ye+re:ye):re=ye,U){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=re+me,U={id:p++,callback:X,priorityLevel:U,startTime:re,expirationTime:me,sortIndex:-1},re>ye?(U.sortIndex=re,e(h,U),n(c)===null&&U===n(h)&&(R?(T(m),m=-1):R=!0,Me(b,re-ye))):(U.sortIndex=me,e(c,U),A||E||(A=!0,Ut(D))),U},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(U){var X=g;return function(){var re=g;g=X;try{return U.apply(this,arguments)}finally{g=re}}}})(vg);yg.exports=vg;var l1=yg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u1=B,Mt=l1;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _g=new Set,Bs={};function $r(t,e){Ai(t,e),Ai(t+"Capture",e)}function Ai(t,e){for(Bs[t]=e,t=0;t<e.length;t++)_g.add(e[t])}var Pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gu=Object.prototype.hasOwnProperty,c1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Df={},Vf={};function d1(t){return Gu.call(Vf,t)?!0:Gu.call(Df,t)?!1:c1.test(t)?Vf[t]=!0:(Df[t]=!0,!1)}function h1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function f1(t,e,n,r){if(e===null||typeof e>"u"||h1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function It(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ot[t]=new It(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ot[e]=new It(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ot[t]=new It(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ot[t]=new It(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ot[t]=new It(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ot[t]=new It(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ot[t]=new It(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ot[t]=new It(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ot[t]=new It(t,5,!1,t.toLowerCase(),null,!1,!1)});var cd=/[\-:]([a-z])/g;function dd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(cd,dd);ot[e]=new It(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(cd,dd);ot[e]=new It(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(cd,dd);ot[e]=new It(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ot[t]=new It(t,1,!1,t.toLowerCase(),null,!1,!1)});ot.xlinkHref=new It("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ot[t]=new It(t,1,!1,t.toLowerCase(),null,!0,!0)});function hd(t,e,n,r){var i=ot.hasOwnProperty(e)?ot[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(f1(e,n,i,r)&&(n=null),r||i===null?d1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Fn=u1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ho=Symbol.for("react.element"),si=Symbol.for("react.portal"),oi=Symbol.for("react.fragment"),fd=Symbol.for("react.strict_mode"),Ku=Symbol.for("react.profiler"),xg=Symbol.for("react.provider"),wg=Symbol.for("react.context"),md=Symbol.for("react.forward_ref"),Qu=Symbol.for("react.suspense"),Yu=Symbol.for("react.suspense_list"),pd=Symbol.for("react.memo"),Un=Symbol.for("react.lazy"),Eg=Symbol.for("react.offscreen"),Ff=Symbol.iterator;function cs(t){return t===null||typeof t!="object"?null:(t=Ff&&t[Ff]||t["@@iterator"],typeof t=="function"?t:null)}var Ne=Object.assign,fu;function xs(t){if(fu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);fu=e&&e[1]||""}return`
`+fu+t}var mu=!1;function pu(t,e){if(!t||mu)return"";mu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,u=s.length-1;1<=o&&0<=u&&i[o]!==s[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==s[u]){if(o!==1||u!==1)do if(o--,u--,0>u||i[o]!==s[u]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=u);break}}}finally{mu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?xs(t):""}function m1(t){switch(t.tag){case 5:return xs(t.type);case 16:return xs("Lazy");case 13:return xs("Suspense");case 19:return xs("SuspenseList");case 0:case 2:case 15:return t=pu(t.type,!1),t;case 11:return t=pu(t.type.render,!1),t;case 1:return t=pu(t.type,!0),t;default:return""}}function Xu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case oi:return"Fragment";case si:return"Portal";case Ku:return"Profiler";case fd:return"StrictMode";case Qu:return"Suspense";case Yu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case wg:return(t.displayName||"Context")+".Consumer";case xg:return(t._context.displayName||"Context")+".Provider";case md:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case pd:return e=t.displayName||null,e!==null?e:Xu(t.type)||"Memo";case Un:e=t._payload,t=t._init;try{return Xu(t(e))}catch{}}return null}function p1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xu(e);case 8:return e===fd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ar(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function kg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function g1(t){var e=kg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function qo(t){t._valueTracker||(t._valueTracker=g1(t))}function Sg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=kg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Va(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ju(t,e){var n=e.checked;return Ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Of(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ar(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Tg(t,e){e=e.checked,e!=null&&hd(t,"checked",e,!1)}function Zu(t,e){Tg(t,e);var n=ar(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ec(t,e.type,n):e.hasOwnProperty("defaultValue")&&ec(t,e.type,ar(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Mf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ec(t,e,n){(e!=="number"||Va(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ws=Array.isArray;function yi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ar(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function tc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return Ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Lf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(ws(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ar(n)}}function Ig(t,e){var n=ar(e.value),r=ar(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function zf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Cg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Cg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Wo,Ag=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Wo=Wo||document.createElement("div"),Wo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Wo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function $s(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var As={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},y1=["Webkit","ms","Moz","O"];Object.keys(As).forEach(function(t){y1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),As[e]=As[t]})});function Pg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||As.hasOwnProperty(t)&&As[t]?(""+e).trim():e+"px"}function jg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Pg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var v1=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rc(t,e){if(e){if(v1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function ic(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sc=null;function gd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var oc=null,vi=null,_i=null;function Uf(t){if(t=_o(t)){if(typeof oc!="function")throw Error($(280));var e=t.stateNode;e&&(e=Tl(e),oc(t.stateNode,t.type,e))}}function Rg(t){vi?_i?_i.push(t):_i=[t]:vi=t}function Ng(){if(vi){var t=vi,e=_i;if(_i=vi=null,Uf(t),e)for(t=0;t<e.length;t++)Uf(e[t])}}function bg(t,e){return t(e)}function Dg(){}var gu=!1;function Vg(t,e,n){if(gu)return t(e,n);gu=!0;try{return bg(t,e,n)}finally{gu=!1,(vi!==null||_i!==null)&&(Dg(),Ng())}}function Hs(t,e){var n=t.stateNode;if(n===null)return null;var r=Tl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var ac=!1;if(Pn)try{var ds={};Object.defineProperty(ds,"passive",{get:function(){ac=!0}}),window.addEventListener("test",ds,ds),window.removeEventListener("test",ds,ds)}catch{ac=!1}function _1(t,e,n,r,i,s,o,u,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var Ps=!1,Fa=null,Oa=!1,lc=null,x1={onError:function(t){Ps=!0,Fa=t}};function w1(t,e,n,r,i,s,o,u,c){Ps=!1,Fa=null,_1.apply(x1,arguments)}function E1(t,e,n,r,i,s,o,u,c){if(w1.apply(this,arguments),Ps){if(Ps){var h=Fa;Ps=!1,Fa=null}else throw Error($(198));Oa||(Oa=!0,lc=h)}}function Hr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Fg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Bf(t){if(Hr(t)!==t)throw Error($(188))}function k1(t){var e=t.alternate;if(!e){if(e=Hr(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Bf(i),t;if(s===r)return Bf(i),e;s=s.sibling}throw Error($(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,u=i.child;u;){if(u===n){o=!0,n=i,r=s;break}if(u===r){o=!0,r=i,n=s;break}u=u.sibling}if(!o){for(u=s.child;u;){if(u===n){o=!0,n=s,r=i;break}if(u===r){o=!0,r=s,n=i;break}u=u.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function Og(t){return t=k1(t),t!==null?Mg(t):null}function Mg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Mg(t);if(e!==null)return e;t=t.sibling}return null}var Lg=Mt.unstable_scheduleCallback,$f=Mt.unstable_cancelCallback,S1=Mt.unstable_shouldYield,T1=Mt.unstable_requestPaint,Oe=Mt.unstable_now,I1=Mt.unstable_getCurrentPriorityLevel,yd=Mt.unstable_ImmediatePriority,zg=Mt.unstable_UserBlockingPriority,Ma=Mt.unstable_NormalPriority,C1=Mt.unstable_LowPriority,Ug=Mt.unstable_IdlePriority,wl=null,mn=null;function A1(t){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(wl,t,void 0,(t.current.flags&128)===128)}catch{}}var rn=Math.clz32?Math.clz32:R1,P1=Math.log,j1=Math.LN2;function R1(t){return t>>>=0,t===0?32:31-(P1(t)/j1|0)|0}var Go=64,Ko=4194304;function Es(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function La(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var u=o&~i;u!==0?r=Es(u):(s&=o,s!==0&&(r=Es(s)))}else o=n&~i,o!==0?r=Es(o):s!==0&&(r=Es(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-rn(e),i=1<<n,r|=t[n],e&=~i;return r}function N1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function b1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-rn(s),u=1<<o,c=i[o];c===-1?(!(u&n)||u&r)&&(i[o]=N1(u,e)):c<=e&&(t.expiredLanes|=u),s&=~u}}function uc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Bg(){var t=Go;return Go<<=1,!(Go&4194240)&&(Go=64),t}function yu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function yo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-rn(e),t[e]=n}function D1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-rn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function vd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-rn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ve=0;function $g(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Hg,_d,qg,Wg,Gg,cc=!1,Qo=[],Kn=null,Qn=null,Yn=null,qs=new Map,Ws=new Map,$n=[],V1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hf(t,e){switch(t){case"focusin":case"focusout":Kn=null;break;case"dragenter":case"dragleave":Qn=null;break;case"mouseover":case"mouseout":Yn=null;break;case"pointerover":case"pointerout":qs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ws.delete(e.pointerId)}}function hs(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=_o(e),e!==null&&_d(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function F1(t,e,n,r,i){switch(e){case"focusin":return Kn=hs(Kn,t,e,n,r,i),!0;case"dragenter":return Qn=hs(Qn,t,e,n,r,i),!0;case"mouseover":return Yn=hs(Yn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return qs.set(s,hs(qs.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ws.set(s,hs(Ws.get(s)||null,t,e,n,r,i)),!0}return!1}function Kg(t){var e=Ar(t.target);if(e!==null){var n=Hr(e);if(n!==null){if(e=n.tag,e===13){if(e=Fg(n),e!==null){t.blockedOn=e,Gg(t.priority,function(){qg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ga(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=dc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);sc=r,n.target.dispatchEvent(r),sc=null}else return e=_o(n),e!==null&&_d(e),t.blockedOn=n,!1;e.shift()}return!0}function qf(t,e,n){ga(t)&&n.delete(e)}function O1(){cc=!1,Kn!==null&&ga(Kn)&&(Kn=null),Qn!==null&&ga(Qn)&&(Qn=null),Yn!==null&&ga(Yn)&&(Yn=null),qs.forEach(qf),Ws.forEach(qf)}function fs(t,e){t.blockedOn===e&&(t.blockedOn=null,cc||(cc=!0,Mt.unstable_scheduleCallback(Mt.unstable_NormalPriority,O1)))}function Gs(t){function e(i){return fs(i,t)}if(0<Qo.length){fs(Qo[0],t);for(var n=1;n<Qo.length;n++){var r=Qo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Kn!==null&&fs(Kn,t),Qn!==null&&fs(Qn,t),Yn!==null&&fs(Yn,t),qs.forEach(e),Ws.forEach(e),n=0;n<$n.length;n++)r=$n[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<$n.length&&(n=$n[0],n.blockedOn===null);)Kg(n),n.blockedOn===null&&$n.shift()}var xi=Fn.ReactCurrentBatchConfig,za=!0;function M1(t,e,n,r){var i=ve,s=xi.transition;xi.transition=null;try{ve=1,xd(t,e,n,r)}finally{ve=i,xi.transition=s}}function L1(t,e,n,r){var i=ve,s=xi.transition;xi.transition=null;try{ve=4,xd(t,e,n,r)}finally{ve=i,xi.transition=s}}function xd(t,e,n,r){if(za){var i=dc(t,e,n,r);if(i===null)Cu(t,e,r,Ua,n),Hf(t,r);else if(F1(i,t,e,n,r))r.stopPropagation();else if(Hf(t,r),e&4&&-1<V1.indexOf(t)){for(;i!==null;){var s=_o(i);if(s!==null&&Hg(s),s=dc(t,e,n,r),s===null&&Cu(t,e,r,Ua,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Cu(t,e,r,null,n)}}var Ua=null;function dc(t,e,n,r){if(Ua=null,t=gd(r),t=Ar(t),t!==null)if(e=Hr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Fg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ua=t,null}function Qg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(I1()){case yd:return 1;case zg:return 4;case Ma:case C1:return 16;case Ug:return 536870912;default:return 16}default:return 16}}var qn=null,wd=null,ya=null;function Yg(){if(ya)return ya;var t,e=wd,n=e.length,r,i="value"in qn?qn.value:qn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return ya=i.slice(t,1<r?1-r:void 0)}function va(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Yo(){return!0}function Wf(){return!1}function zt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(s):s[u]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Yo:Wf,this.isPropagationStopped=Wf,this}return Ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Yo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Yo)},persist:function(){},isPersistent:Yo}),e}var Bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ed=zt(Bi),vo=Ne({},Bi,{view:0,detail:0}),z1=zt(vo),vu,_u,ms,El=Ne({},vo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ms&&(ms&&t.type==="mousemove"?(vu=t.screenX-ms.screenX,_u=t.screenY-ms.screenY):_u=vu=0,ms=t),vu)},movementY:function(t){return"movementY"in t?t.movementY:_u}}),Gf=zt(El),U1=Ne({},El,{dataTransfer:0}),B1=zt(U1),$1=Ne({},vo,{relatedTarget:0}),xu=zt($1),H1=Ne({},Bi,{animationName:0,elapsedTime:0,pseudoElement:0}),q1=zt(H1),W1=Ne({},Bi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),G1=zt(W1),K1=Ne({},Bi,{data:0}),Kf=zt(K1),Q1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Y1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},X1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function J1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=X1[t])?!!e[t]:!1}function kd(){return J1}var Z1=Ne({},vo,{key:function(t){if(t.key){var e=Q1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=va(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Y1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kd,charCode:function(t){return t.type==="keypress"?va(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?va(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ex=zt(Z1),tx=Ne({},El,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qf=zt(tx),nx=Ne({},vo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kd}),rx=zt(nx),ix=Ne({},Bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),sx=zt(ix),ox=Ne({},El,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ax=zt(ox),lx=[9,13,27,32],Sd=Pn&&"CompositionEvent"in window,js=null;Pn&&"documentMode"in document&&(js=document.documentMode);var ux=Pn&&"TextEvent"in window&&!js,Xg=Pn&&(!Sd||js&&8<js&&11>=js),Yf=" ",Xf=!1;function Jg(t,e){switch(t){case"keyup":return lx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ai=!1;function cx(t,e){switch(t){case"compositionend":return Zg(e);case"keypress":return e.which!==32?null:(Xf=!0,Yf);case"textInput":return t=e.data,t===Yf&&Xf?null:t;default:return null}}function dx(t,e){if(ai)return t==="compositionend"||!Sd&&Jg(t,e)?(t=Yg(),ya=wd=qn=null,ai=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Xg&&e.locale!=="ko"?null:e.data;default:return null}}var hx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!hx[t.type]:e==="textarea"}function ey(t,e,n,r){Rg(r),e=Ba(e,"onChange"),0<e.length&&(n=new Ed("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Rs=null,Ks=null;function fx(t){dy(t,0)}function kl(t){var e=ci(t);if(Sg(e))return t}function mx(t,e){if(t==="change")return e}var ty=!1;if(Pn){var wu;if(Pn){var Eu="oninput"in document;if(!Eu){var Zf=document.createElement("div");Zf.setAttribute("oninput","return;"),Eu=typeof Zf.oninput=="function"}wu=Eu}else wu=!1;ty=wu&&(!document.documentMode||9<document.documentMode)}function em(){Rs&&(Rs.detachEvent("onpropertychange",ny),Ks=Rs=null)}function ny(t){if(t.propertyName==="value"&&kl(Ks)){var e=[];ey(e,Ks,t,gd(t)),Vg(fx,e)}}function px(t,e,n){t==="focusin"?(em(),Rs=e,Ks=n,Rs.attachEvent("onpropertychange",ny)):t==="focusout"&&em()}function gx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return kl(Ks)}function yx(t,e){if(t==="click")return kl(e)}function vx(t,e){if(t==="input"||t==="change")return kl(e)}function _x(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var an=typeof Object.is=="function"?Object.is:_x;function Qs(t,e){if(an(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Gu.call(e,i)||!an(t[i],e[i]))return!1}return!0}function tm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function nm(t,e){var n=tm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=tm(n)}}function ry(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ry(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function iy(){for(var t=window,e=Va();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Va(t.document)}return e}function Td(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function xx(t){var e=iy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ry(n.ownerDocument.documentElement,n)){if(r!==null&&Td(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=nm(n,s);var o=nm(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var wx=Pn&&"documentMode"in document&&11>=document.documentMode,li=null,hc=null,Ns=null,fc=!1;function rm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;fc||li==null||li!==Va(r)||(r=li,"selectionStart"in r&&Td(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ns&&Qs(Ns,r)||(Ns=r,r=Ba(hc,"onSelect"),0<r.length&&(e=new Ed("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=li)))}function Xo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ui={animationend:Xo("Animation","AnimationEnd"),animationiteration:Xo("Animation","AnimationIteration"),animationstart:Xo("Animation","AnimationStart"),transitionend:Xo("Transition","TransitionEnd")},ku={},sy={};Pn&&(sy=document.createElement("div").style,"AnimationEvent"in window||(delete ui.animationend.animation,delete ui.animationiteration.animation,delete ui.animationstart.animation),"TransitionEvent"in window||delete ui.transitionend.transition);function Sl(t){if(ku[t])return ku[t];if(!ui[t])return t;var e=ui[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in sy)return ku[t]=e[n];return t}var oy=Sl("animationend"),ay=Sl("animationiteration"),ly=Sl("animationstart"),uy=Sl("transitionend"),cy=new Map,im="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gr(t,e){cy.set(t,e),$r(e,[t])}for(var Su=0;Su<im.length;Su++){var Tu=im[Su],Ex=Tu.toLowerCase(),kx=Tu[0].toUpperCase()+Tu.slice(1);gr(Ex,"on"+kx)}gr(oy,"onAnimationEnd");gr(ay,"onAnimationIteration");gr(ly,"onAnimationStart");gr("dblclick","onDoubleClick");gr("focusin","onFocus");gr("focusout","onBlur");gr(uy,"onTransitionEnd");Ai("onMouseEnter",["mouseout","mouseover"]);Ai("onMouseLeave",["mouseout","mouseover"]);Ai("onPointerEnter",["pointerout","pointerover"]);Ai("onPointerLeave",["pointerout","pointerover"]);$r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$r("onBeforeInput",["compositionend","keypress","textInput","paste"]);$r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ks="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sx=new Set("cancel close invalid load scroll toggle".split(" ").concat(ks));function sm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,E1(r,e,void 0,t),t.currentTarget=null}function dy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var u=r[o],c=u.instance,h=u.currentTarget;if(u=u.listener,c!==s&&i.isPropagationStopped())break e;sm(i,u,h),s=c}else for(o=0;o<r.length;o++){if(u=r[o],c=u.instance,h=u.currentTarget,u=u.listener,c!==s&&i.isPropagationStopped())break e;sm(i,u,h),s=c}}}if(Oa)throw t=lc,Oa=!1,lc=null,t}function Se(t,e){var n=e[vc];n===void 0&&(n=e[vc]=new Set);var r=t+"__bubble";n.has(r)||(hy(e,t,2,!1),n.add(r))}function Iu(t,e,n){var r=0;e&&(r|=4),hy(n,t,r,e)}var Jo="_reactListening"+Math.random().toString(36).slice(2);function Ys(t){if(!t[Jo]){t[Jo]=!0,_g.forEach(function(n){n!=="selectionchange"&&(Sx.has(n)||Iu(n,!1,t),Iu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Jo]||(e[Jo]=!0,Iu("selectionchange",!1,e))}}function hy(t,e,n,r){switch(Qg(e)){case 1:var i=M1;break;case 4:i=L1;break;default:i=xd}n=i.bind(null,e,n,t),i=void 0,!ac||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Cu(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var u=r.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;u!==null;){if(o=Ar(u),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}u=u.parentNode}}r=r.return}Vg(function(){var h=s,p=gd(n),y=[];e:{var g=cy.get(t);if(g!==void 0){var E=Ed,A=t;switch(t){case"keypress":if(va(n)===0)break e;case"keydown":case"keyup":E=ex;break;case"focusin":A="focus",E=xu;break;case"focusout":A="blur",E=xu;break;case"beforeblur":case"afterblur":E=xu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=Gf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=B1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=rx;break;case oy:case ay:case ly:E=q1;break;case uy:E=sx;break;case"scroll":E=z1;break;case"wheel":E=ax;break;case"copy":case"cut":case"paste":E=G1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=Qf}var R=(e&4)!==0,P=!R&&t==="scroll",T=R?g!==null?g+"Capture":null:g;R=[];for(var k=h,C;k!==null;){C=k;var b=C.stateNode;if(C.tag===5&&b!==null&&(C=b,T!==null&&(b=Hs(k,T),b!=null&&R.push(Xs(k,b,C)))),P)break;k=k.return}0<R.length&&(g=new E(g,A,null,n,p),y.push({event:g,listeners:R}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",g&&n!==sc&&(A=n.relatedTarget||n.fromElement)&&(Ar(A)||A[jn]))break e;if((E||g)&&(g=p.window===p?p:(g=p.ownerDocument)?g.defaultView||g.parentWindow:window,E?(A=n.relatedTarget||n.toElement,E=h,A=A?Ar(A):null,A!==null&&(P=Hr(A),A!==P||A.tag!==5&&A.tag!==6)&&(A=null)):(E=null,A=h),E!==A)){if(R=Gf,b="onMouseLeave",T="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(R=Qf,b="onPointerLeave",T="onPointerEnter",k="pointer"),P=E==null?g:ci(E),C=A==null?g:ci(A),g=new R(b,k+"leave",E,n,p),g.target=P,g.relatedTarget=C,b=null,Ar(p)===h&&(R=new R(T,k+"enter",A,n,p),R.target=C,R.relatedTarget=P,b=R),P=b,E&&A)t:{for(R=E,T=A,k=0,C=R;C;C=ei(C))k++;for(C=0,b=T;b;b=ei(b))C++;for(;0<k-C;)R=ei(R),k--;for(;0<C-k;)T=ei(T),C--;for(;k--;){if(R===T||T!==null&&R===T.alternate)break t;R=ei(R),T=ei(T)}R=null}else R=null;E!==null&&om(y,g,E,R,!1),A!==null&&P!==null&&om(y,P,A,R,!0)}}e:{if(g=h?ci(h):window,E=g.nodeName&&g.nodeName.toLowerCase(),E==="select"||E==="input"&&g.type==="file")var D=mx;else if(Jf(g))if(ty)D=vx;else{D=gx;var F=px}else(E=g.nodeName)&&E.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(D=yx);if(D&&(D=D(t,h))){ey(y,D,n,p);break e}F&&F(t,g,h),t==="focusout"&&(F=g._wrapperState)&&F.controlled&&g.type==="number"&&ec(g,"number",g.value)}switch(F=h?ci(h):window,t){case"focusin":(Jf(F)||F.contentEditable==="true")&&(li=F,hc=h,Ns=null);break;case"focusout":Ns=hc=li=null;break;case"mousedown":fc=!0;break;case"contextmenu":case"mouseup":case"dragend":fc=!1,rm(y,n,p);break;case"selectionchange":if(wx)break;case"keydown":case"keyup":rm(y,n,p)}var v;if(Sd)e:{switch(t){case"compositionstart":var m="onCompositionStart";break e;case"compositionend":m="onCompositionEnd";break e;case"compositionupdate":m="onCompositionUpdate";break e}m=void 0}else ai?Jg(t,n)&&(m="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(m="onCompositionStart");m&&(Xg&&n.locale!=="ko"&&(ai||m!=="onCompositionStart"?m==="onCompositionEnd"&&ai&&(v=Yg()):(qn=p,wd="value"in qn?qn.value:qn.textContent,ai=!0)),F=Ba(h,m),0<F.length&&(m=new Kf(m,t,null,n,p),y.push({event:m,listeners:F}),v?m.data=v:(v=Zg(n),v!==null&&(m.data=v)))),(v=ux?cx(t,n):dx(t,n))&&(h=Ba(h,"onBeforeInput"),0<h.length&&(p=new Kf("onBeforeInput","beforeinput",null,n,p),y.push({event:p,listeners:h}),p.data=v))}dy(y,e)})}function Xs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ba(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Hs(t,n),s!=null&&r.unshift(Xs(t,s,i)),s=Hs(t,e),s!=null&&r.push(Xs(t,s,i))),t=t.return}return r}function ei(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function om(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var u=n,c=u.alternate,h=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&h!==null&&(u=h,i?(c=Hs(n,s),c!=null&&o.unshift(Xs(n,c,u))):i||(c=Hs(n,s),c!=null&&o.push(Xs(n,c,u)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Tx=/\r\n?/g,Ix=/\u0000|\uFFFD/g;function am(t){return(typeof t=="string"?t:""+t).replace(Tx,`
`).replace(Ix,"")}function Zo(t,e,n){if(e=am(e),am(t)!==e&&n)throw Error($(425))}function $a(){}var mc=null,pc=null;function gc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var yc=typeof setTimeout=="function"?setTimeout:void 0,Cx=typeof clearTimeout=="function"?clearTimeout:void 0,lm=typeof Promise=="function"?Promise:void 0,Ax=typeof queueMicrotask=="function"?queueMicrotask:typeof lm<"u"?function(t){return lm.resolve(null).then(t).catch(Px)}:yc;function Px(t){setTimeout(function(){throw t})}function Au(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Gs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Gs(e)}function Xn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function um(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var $i=Math.random().toString(36).slice(2),fn="__reactFiber$"+$i,Js="__reactProps$"+$i,jn="__reactContainer$"+$i,vc="__reactEvents$"+$i,jx="__reactListeners$"+$i,Rx="__reactHandles$"+$i;function Ar(t){var e=t[fn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[jn]||n[fn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=um(t);t!==null;){if(n=t[fn])return n;t=um(t)}return e}t=n,n=t.parentNode}return null}function _o(t){return t=t[fn]||t[jn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ci(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function Tl(t){return t[Js]||null}var _c=[],di=-1;function yr(t){return{current:t}}function Ce(t){0>di||(t.current=_c[di],_c[di]=null,di--)}function Ee(t,e){di++,_c[di]=t.current,t.current=e}var lr={},yt=yr(lr),Rt=yr(!1),Dr=lr;function Pi(t,e){var n=t.type.contextTypes;if(!n)return lr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Nt(t){return t=t.childContextTypes,t!=null}function Ha(){Ce(Rt),Ce(yt)}function cm(t,e,n){if(yt.current!==lr)throw Error($(168));Ee(yt,e),Ee(Rt,n)}function fy(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error($(108,p1(t)||"Unknown",i));return Ne({},n,r)}function qa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||lr,Dr=yt.current,Ee(yt,t),Ee(Rt,Rt.current),!0}function dm(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=fy(t,e,Dr),r.__reactInternalMemoizedMergedChildContext=t,Ce(Rt),Ce(yt),Ee(yt,t)):Ce(Rt),Ee(Rt,n)}var Tn=null,Il=!1,Pu=!1;function my(t){Tn===null?Tn=[t]:Tn.push(t)}function Nx(t){Il=!0,my(t)}function vr(){if(!Pu&&Tn!==null){Pu=!0;var t=0,e=ve;try{var n=Tn;for(ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Tn=null,Il=!1}catch(i){throw Tn!==null&&(Tn=Tn.slice(t+1)),Lg(yd,vr),i}finally{ve=e,Pu=!1}}return null}var hi=[],fi=0,Wa=null,Ga=0,Bt=[],$t=0,Vr=null,In=1,Cn="";function Tr(t,e){hi[fi++]=Ga,hi[fi++]=Wa,Wa=t,Ga=e}function py(t,e,n){Bt[$t++]=In,Bt[$t++]=Cn,Bt[$t++]=Vr,Vr=t;var r=In;t=Cn;var i=32-rn(r)-1;r&=~(1<<i),n+=1;var s=32-rn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,In=1<<32-rn(e)+i|n<<i|r,Cn=s+t}else In=1<<s|n<<i|r,Cn=t}function Id(t){t.return!==null&&(Tr(t,1),py(t,1,0))}function Cd(t){for(;t===Wa;)Wa=hi[--fi],hi[fi]=null,Ga=hi[--fi],hi[fi]=null;for(;t===Vr;)Vr=Bt[--$t],Bt[$t]=null,Cn=Bt[--$t],Bt[$t]=null,In=Bt[--$t],Bt[$t]=null}var Ot=null,Ft=null,Ae=!1,tn=null;function gy(t,e){var n=Wt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function hm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ot=t,Ft=Xn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ot=t,Ft=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Vr!==null?{id:In,overflow:Cn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Wt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ot=t,Ft=null,!0):!1;default:return!1}}function xc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function wc(t){if(Ae){var e=Ft;if(e){var n=e;if(!hm(t,e)){if(xc(t))throw Error($(418));e=Xn(n.nextSibling);var r=Ot;e&&hm(t,e)?gy(r,n):(t.flags=t.flags&-4097|2,Ae=!1,Ot=t)}}else{if(xc(t))throw Error($(418));t.flags=t.flags&-4097|2,Ae=!1,Ot=t}}}function fm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ot=t}function ea(t){if(t!==Ot)return!1;if(!Ae)return fm(t),Ae=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!gc(t.type,t.memoizedProps)),e&&(e=Ft)){if(xc(t))throw yy(),Error($(418));for(;e;)gy(t,e),e=Xn(e.nextSibling)}if(fm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ft=Xn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ft=null}}else Ft=Ot?Xn(t.stateNode.nextSibling):null;return!0}function yy(){for(var t=Ft;t;)t=Xn(t.nextSibling)}function ji(){Ft=Ot=null,Ae=!1}function Ad(t){tn===null?tn=[t]:tn.push(t)}var bx=Fn.ReactCurrentBatchConfig;function ps(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var u=i.refs;o===null?delete u[s]:u[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function ta(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function mm(t){var e=t._init;return e(t._payload)}function vy(t){function e(T,k){if(t){var C=T.deletions;C===null?(T.deletions=[k],T.flags|=16):C.push(k)}}function n(T,k){if(!t)return null;for(;k!==null;)e(T,k),k=k.sibling;return null}function r(T,k){for(T=new Map;k!==null;)k.key!==null?T.set(k.key,k):T.set(k.index,k),k=k.sibling;return T}function i(T,k){return T=tr(T,k),T.index=0,T.sibling=null,T}function s(T,k,C){return T.index=C,t?(C=T.alternate,C!==null?(C=C.index,C<k?(T.flags|=2,k):C):(T.flags|=2,k)):(T.flags|=1048576,k)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function u(T,k,C,b){return k===null||k.tag!==6?(k=Fu(C,T.mode,b),k.return=T,k):(k=i(k,C),k.return=T,k)}function c(T,k,C,b){var D=C.type;return D===oi?p(T,k,C.props.children,b,C.key):k!==null&&(k.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Un&&mm(D)===k.type)?(b=i(k,C.props),b.ref=ps(T,k,C),b.return=T,b):(b=Ta(C.type,C.key,C.props,null,T.mode,b),b.ref=ps(T,k,C),b.return=T,b)}function h(T,k,C,b){return k===null||k.tag!==4||k.stateNode.containerInfo!==C.containerInfo||k.stateNode.implementation!==C.implementation?(k=Ou(C,T.mode,b),k.return=T,k):(k=i(k,C.children||[]),k.return=T,k)}function p(T,k,C,b,D){return k===null||k.tag!==7?(k=br(C,T.mode,b,D),k.return=T,k):(k=i(k,C),k.return=T,k)}function y(T,k,C){if(typeof k=="string"&&k!==""||typeof k=="number")return k=Fu(""+k,T.mode,C),k.return=T,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Ho:return C=Ta(k.type,k.key,k.props,null,T.mode,C),C.ref=ps(T,null,k),C.return=T,C;case si:return k=Ou(k,T.mode,C),k.return=T,k;case Un:var b=k._init;return y(T,b(k._payload),C)}if(ws(k)||cs(k))return k=br(k,T.mode,C,null),k.return=T,k;ta(T,k)}return null}function g(T,k,C,b){var D=k!==null?k.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return D!==null?null:u(T,k,""+C,b);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ho:return C.key===D?c(T,k,C,b):null;case si:return C.key===D?h(T,k,C,b):null;case Un:return D=C._init,g(T,k,D(C._payload),b)}if(ws(C)||cs(C))return D!==null?null:p(T,k,C,b,null);ta(T,C)}return null}function E(T,k,C,b,D){if(typeof b=="string"&&b!==""||typeof b=="number")return T=T.get(C)||null,u(k,T,""+b,D);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ho:return T=T.get(b.key===null?C:b.key)||null,c(k,T,b,D);case si:return T=T.get(b.key===null?C:b.key)||null,h(k,T,b,D);case Un:var F=b._init;return E(T,k,C,F(b._payload),D)}if(ws(b)||cs(b))return T=T.get(C)||null,p(k,T,b,D,null);ta(k,b)}return null}function A(T,k,C,b){for(var D=null,F=null,v=k,m=k=0,_=null;v!==null&&m<C.length;m++){v.index>m?(_=v,v=null):_=v.sibling;var x=g(T,v,C[m],b);if(x===null){v===null&&(v=_);break}t&&v&&x.alternate===null&&e(T,v),k=s(x,k,m),F===null?D=x:F.sibling=x,F=x,v=_}if(m===C.length)return n(T,v),Ae&&Tr(T,m),D;if(v===null){for(;m<C.length;m++)v=y(T,C[m],b),v!==null&&(k=s(v,k,m),F===null?D=v:F.sibling=v,F=v);return Ae&&Tr(T,m),D}for(v=r(T,v);m<C.length;m++)_=E(v,T,m,C[m],b),_!==null&&(t&&_.alternate!==null&&v.delete(_.key===null?m:_.key),k=s(_,k,m),F===null?D=_:F.sibling=_,F=_);return t&&v.forEach(function(S){return e(T,S)}),Ae&&Tr(T,m),D}function R(T,k,C,b){var D=cs(C);if(typeof D!="function")throw Error($(150));if(C=D.call(C),C==null)throw Error($(151));for(var F=D=null,v=k,m=k=0,_=null,x=C.next();v!==null&&!x.done;m++,x=C.next()){v.index>m?(_=v,v=null):_=v.sibling;var S=g(T,v,x.value,b);if(S===null){v===null&&(v=_);break}t&&v&&S.alternate===null&&e(T,v),k=s(S,k,m),F===null?D=S:F.sibling=S,F=S,v=_}if(x.done)return n(T,v),Ae&&Tr(T,m),D;if(v===null){for(;!x.done;m++,x=C.next())x=y(T,x.value,b),x!==null&&(k=s(x,k,m),F===null?D=x:F.sibling=x,F=x);return Ae&&Tr(T,m),D}for(v=r(T,v);!x.done;m++,x=C.next())x=E(v,T,m,x.value,b),x!==null&&(t&&x.alternate!==null&&v.delete(x.key===null?m:x.key),k=s(x,k,m),F===null?D=x:F.sibling=x,F=x);return t&&v.forEach(function(j){return e(T,j)}),Ae&&Tr(T,m),D}function P(T,k,C,b){if(typeof C=="object"&&C!==null&&C.type===oi&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Ho:e:{for(var D=C.key,F=k;F!==null;){if(F.key===D){if(D=C.type,D===oi){if(F.tag===7){n(T,F.sibling),k=i(F,C.props.children),k.return=T,T=k;break e}}else if(F.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Un&&mm(D)===F.type){n(T,F.sibling),k=i(F,C.props),k.ref=ps(T,F,C),k.return=T,T=k;break e}n(T,F);break}else e(T,F);F=F.sibling}C.type===oi?(k=br(C.props.children,T.mode,b,C.key),k.return=T,T=k):(b=Ta(C.type,C.key,C.props,null,T.mode,b),b.ref=ps(T,k,C),b.return=T,T=b)}return o(T);case si:e:{for(F=C.key;k!==null;){if(k.key===F)if(k.tag===4&&k.stateNode.containerInfo===C.containerInfo&&k.stateNode.implementation===C.implementation){n(T,k.sibling),k=i(k,C.children||[]),k.return=T,T=k;break e}else{n(T,k);break}else e(T,k);k=k.sibling}k=Ou(C,T.mode,b),k.return=T,T=k}return o(T);case Un:return F=C._init,P(T,k,F(C._payload),b)}if(ws(C))return A(T,k,C,b);if(cs(C))return R(T,k,C,b);ta(T,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,k!==null&&k.tag===6?(n(T,k.sibling),k=i(k,C),k.return=T,T=k):(n(T,k),k=Fu(C,T.mode,b),k.return=T,T=k),o(T)):n(T,k)}return P}var Ri=vy(!0),_y=vy(!1),Ka=yr(null),Qa=null,mi=null,Pd=null;function jd(){Pd=mi=Qa=null}function Rd(t){var e=Ka.current;Ce(Ka),t._currentValue=e}function Ec(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function wi(t,e){Qa=t,Pd=mi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(jt=!0),t.firstContext=null)}function Kt(t){var e=t._currentValue;if(Pd!==t)if(t={context:t,memoizedValue:e,next:null},mi===null){if(Qa===null)throw Error($(308));mi=t,Qa.dependencies={lanes:0,firstContext:t}}else mi=mi.next=t;return e}var Pr=null;function Nd(t){Pr===null?Pr=[t]:Pr.push(t)}function xy(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Nd(e)):(n.next=i.next,i.next=n),e.interleaved=n,Rn(t,r)}function Rn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Bn=!1;function bd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function An(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Jn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,fe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Rn(t,n)}return i=r.interleaved,i===null?(e.next=e,Nd(r)):(e.next=i.next,i.next=e),r.interleaved=e,Rn(t,n)}function _a(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vd(t,n)}}function pm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ya(t,e,n,r){var i=t.updateQueue;Bn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var c=u,h=c.next;c.next=null,o===null?s=h:o.next=h,o=c;var p=t.alternate;p!==null&&(p=p.updateQueue,u=p.lastBaseUpdate,u!==o&&(u===null?p.firstBaseUpdate=h:u.next=h,p.lastBaseUpdate=c))}if(s!==null){var y=i.baseState;o=0,p=h=c=null,u=s;do{var g=u.lane,E=u.eventTime;if((r&g)===g){p!==null&&(p=p.next={eventTime:E,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var A=t,R=u;switch(g=e,E=n,R.tag){case 1:if(A=R.payload,typeof A=="function"){y=A.call(E,y,g);break e}y=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=R.payload,g=typeof A=="function"?A.call(E,y,g):A,g==null)break e;y=Ne({},y,g);break e;case 2:Bn=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[u]:g.push(u))}else E={eventTime:E,lane:g,tag:u.tag,payload:u.payload,callback:u.callback,next:null},p===null?(h=p=E,c=y):p=p.next=E,o|=g;if(u=u.next,u===null){if(u=i.shared.pending,u===null)break;g=u,u=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(p===null&&(c=y),i.baseState=c,i.firstBaseUpdate=h,i.lastBaseUpdate=p,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Or|=o,t.lanes=o,t.memoizedState=y}}function gm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error($(191,i));i.call(r)}}}var xo={},pn=yr(xo),Zs=yr(xo),eo=yr(xo);function jr(t){if(t===xo)throw Error($(174));return t}function Dd(t,e){switch(Ee(eo,e),Ee(Zs,t),Ee(pn,xo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:nc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=nc(e,t)}Ce(pn),Ee(pn,e)}function Ni(){Ce(pn),Ce(Zs),Ce(eo)}function Ey(t){jr(eo.current);var e=jr(pn.current),n=nc(e,t.type);e!==n&&(Ee(Zs,t),Ee(pn,n))}function Vd(t){Zs.current===t&&(Ce(pn),Ce(Zs))}var je=yr(0);function Xa(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ju=[];function Fd(){for(var t=0;t<ju.length;t++)ju[t]._workInProgressVersionPrimary=null;ju.length=0}var xa=Fn.ReactCurrentDispatcher,Ru=Fn.ReactCurrentBatchConfig,Fr=0,Re=null,He=null,Je=null,Ja=!1,bs=!1,to=0,Dx=0;function dt(){throw Error($(321))}function Od(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!an(t[n],e[n]))return!1;return!0}function Md(t,e,n,r,i,s){if(Fr=s,Re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xa.current=t===null||t.memoizedState===null?Mx:Lx,t=n(r,i),bs){s=0;do{if(bs=!1,to=0,25<=s)throw Error($(301));s+=1,Je=He=null,e.updateQueue=null,xa.current=zx,t=n(r,i)}while(bs)}if(xa.current=Za,e=He!==null&&He.next!==null,Fr=0,Je=He=Re=null,Ja=!1,e)throw Error($(300));return t}function Ld(){var t=to!==0;return to=0,t}function dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?Re.memoizedState=Je=t:Je=Je.next=t,Je}function Qt(){if(He===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=He.next;var e=Je===null?Re.memoizedState:Je.next;if(e!==null)Je=e,He=t;else{if(t===null)throw Error($(310));He=t,t={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Je===null?Re.memoizedState=Je=t:Je=Je.next=t}return Je}function no(t,e){return typeof e=="function"?e(t):e}function Nu(t){var e=Qt(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=He,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var u=o=null,c=null,h=s;do{var p=h.lane;if((Fr&p)===p)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var y={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(u=c=y,o=r):c=c.next=y,Re.lanes|=p,Or|=p}h=h.next}while(h!==null&&h!==s);c===null?o=r:c.next=u,an(r,e.memoizedState)||(jt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Re.lanes|=s,Or|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function bu(t){var e=Qt(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);an(s,e.memoizedState)||(jt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function ky(){}function Sy(t,e){var n=Re,r=Qt(),i=e(),s=!an(r.memoizedState,i);if(s&&(r.memoizedState=i,jt=!0),r=r.queue,zd(Cy.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Je!==null&&Je.memoizedState.tag&1){if(n.flags|=2048,ro(9,Iy.bind(null,n,r,i,e),void 0,null),et===null)throw Error($(349));Fr&30||Ty(n,e,i)}return i}function Ty(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Iy(t,e,n,r){e.value=n,e.getSnapshot=r,Ay(e)&&Py(t)}function Cy(t,e,n){return n(function(){Ay(e)&&Py(t)})}function Ay(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!an(t,n)}catch{return!0}}function Py(t){var e=Rn(t,1);e!==null&&sn(e,t,1,-1)}function ym(t){var e=dn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:no,lastRenderedState:t},e.queue=t,t=t.dispatch=Ox.bind(null,Re,t),[e.memoizedState,t]}function ro(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function jy(){return Qt().memoizedState}function wa(t,e,n,r){var i=dn();Re.flags|=t,i.memoizedState=ro(1|e,n,void 0,r===void 0?null:r)}function Cl(t,e,n,r){var i=Qt();r=r===void 0?null:r;var s=void 0;if(He!==null){var o=He.memoizedState;if(s=o.destroy,r!==null&&Od(r,o.deps)){i.memoizedState=ro(e,n,s,r);return}}Re.flags|=t,i.memoizedState=ro(1|e,n,s,r)}function vm(t,e){return wa(8390656,8,t,e)}function zd(t,e){return Cl(2048,8,t,e)}function Ry(t,e){return Cl(4,2,t,e)}function Ny(t,e){return Cl(4,4,t,e)}function by(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Dy(t,e,n){return n=n!=null?n.concat([t]):null,Cl(4,4,by.bind(null,e,t),n)}function Ud(){}function Vy(t,e){var n=Qt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Od(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Fy(t,e){var n=Qt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Od(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Oy(t,e,n){return Fr&21?(an(n,e)||(n=Bg(),Re.lanes|=n,Or|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,jt=!0),t.memoizedState=n)}function Vx(t,e){var n=ve;ve=n!==0&&4>n?n:4,t(!0);var r=Ru.transition;Ru.transition={};try{t(!1),e()}finally{ve=n,Ru.transition=r}}function My(){return Qt().memoizedState}function Fx(t,e,n){var r=er(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ly(t))zy(e,n);else if(n=xy(t,e,n,r),n!==null){var i=St();sn(n,t,r,i),Uy(n,e,r)}}function Ox(t,e,n){var r=er(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ly(t))zy(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,u=s(o,n);if(i.hasEagerState=!0,i.eagerState=u,an(u,o)){var c=e.interleaved;c===null?(i.next=i,Nd(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=xy(t,e,i,r),n!==null&&(i=St(),sn(n,t,r,i),Uy(n,e,r))}}function Ly(t){var e=t.alternate;return t===Re||e!==null&&e===Re}function zy(t,e){bs=Ja=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Uy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vd(t,n)}}var Za={readContext:Kt,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useInsertionEffect:dt,useLayoutEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useMutableSource:dt,useSyncExternalStore:dt,useId:dt,unstable_isNewReconciler:!1},Mx={readContext:Kt,useCallback:function(t,e){return dn().memoizedState=[t,e===void 0?null:e],t},useContext:Kt,useEffect:vm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,wa(4194308,4,by.bind(null,e,t),n)},useLayoutEffect:function(t,e){return wa(4194308,4,t,e)},useInsertionEffect:function(t,e){return wa(4,2,t,e)},useMemo:function(t,e){var n=dn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=dn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Fx.bind(null,Re,t),[r.memoizedState,t]},useRef:function(t){var e=dn();return t={current:t},e.memoizedState=t},useState:ym,useDebugValue:Ud,useDeferredValue:function(t){return dn().memoizedState=t},useTransition:function(){var t=ym(!1),e=t[0];return t=Vx.bind(null,t[1]),dn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Re,i=dn();if(Ae){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),et===null)throw Error($(349));Fr&30||Ty(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,vm(Cy.bind(null,r,s,t),[t]),r.flags|=2048,ro(9,Iy.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=dn(),e=et.identifierPrefix;if(Ae){var n=Cn,r=In;n=(r&~(1<<32-rn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=to++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Dx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Lx={readContext:Kt,useCallback:Vy,useContext:Kt,useEffect:zd,useImperativeHandle:Dy,useInsertionEffect:Ry,useLayoutEffect:Ny,useMemo:Fy,useReducer:Nu,useRef:jy,useState:function(){return Nu(no)},useDebugValue:Ud,useDeferredValue:function(t){var e=Qt();return Oy(e,He.memoizedState,t)},useTransition:function(){var t=Nu(no)[0],e=Qt().memoizedState;return[t,e]},useMutableSource:ky,useSyncExternalStore:Sy,useId:My,unstable_isNewReconciler:!1},zx={readContext:Kt,useCallback:Vy,useContext:Kt,useEffect:zd,useImperativeHandle:Dy,useInsertionEffect:Ry,useLayoutEffect:Ny,useMemo:Fy,useReducer:bu,useRef:jy,useState:function(){return bu(no)},useDebugValue:Ud,useDeferredValue:function(t){var e=Qt();return He===null?e.memoizedState=t:Oy(e,He.memoizedState,t)},useTransition:function(){var t=bu(no)[0],e=Qt().memoizedState;return[t,e]},useMutableSource:ky,useSyncExternalStore:Sy,useId:My,unstable_isNewReconciler:!1};function Zt(t,e){if(t&&t.defaultProps){e=Ne({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function kc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ne({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Al={isMounted:function(t){return(t=t._reactInternals)?Hr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=St(),i=er(t),s=An(r,i);s.payload=e,n!=null&&(s.callback=n),e=Jn(t,s,i),e!==null&&(sn(e,t,i,r),_a(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=St(),i=er(t),s=An(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Jn(t,s,i),e!==null&&(sn(e,t,i,r),_a(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=St(),r=er(t),i=An(n,r);i.tag=2,e!=null&&(i.callback=e),e=Jn(t,i,r),e!==null&&(sn(e,t,r,n),_a(e,t,r))}};function _m(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Qs(n,r)||!Qs(i,s):!0}function By(t,e,n){var r=!1,i=lr,s=e.contextType;return typeof s=="object"&&s!==null?s=Kt(s):(i=Nt(e)?Dr:yt.current,r=e.contextTypes,s=(r=r!=null)?Pi(t,i):lr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Al,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function xm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Al.enqueueReplaceState(e,e.state,null)}function Sc(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},bd(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Kt(s):(s=Nt(e)?Dr:yt.current,i.context=Pi(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(kc(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Al.enqueueReplaceState(i,i.state,null),Ya(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function bi(t,e){try{var n="",r=e;do n+=m1(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Du(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Tc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Ux=typeof WeakMap=="function"?WeakMap:Map;function $y(t,e,n){n=An(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){tl||(tl=!0,Vc=r),Tc(t,e)},n}function Hy(t,e,n){n=An(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Tc(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Tc(t,e),typeof r!="function"&&(Zn===null?Zn=new Set([this]):Zn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function wm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Ux;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=tw.bind(null,t,e,n),e.then(t,t))}function Em(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function km(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=An(-1,1),e.tag=2,Jn(n,e,1))),n.lanes|=1),t)}var Bx=Fn.ReactCurrentOwner,jt=!1;function kt(t,e,n,r){e.child=t===null?_y(e,null,n,r):Ri(e,t.child,n,r)}function Sm(t,e,n,r,i){n=n.render;var s=e.ref;return wi(e,i),r=Md(t,e,n,r,s,i),n=Ld(),t!==null&&!jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Nn(t,e,i)):(Ae&&n&&Id(e),e.flags|=1,kt(t,e,r,i),e.child)}function Tm(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Qd(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,qy(t,e,s,r,i)):(t=Ta(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Qs,n(o,r)&&t.ref===e.ref)return Nn(t,e,i)}return e.flags|=1,t=tr(s,r),t.ref=e.ref,t.return=e,e.child=t}function qy(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Qs(s,r)&&t.ref===e.ref)if(jt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(jt=!0);else return e.lanes=t.lanes,Nn(t,e,i)}return Ic(t,e,n,r,i)}function Wy(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(gi,Vt),Vt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ee(gi,Vt),Vt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ee(gi,Vt),Vt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ee(gi,Vt),Vt|=r;return kt(t,e,i,n),e.child}function Gy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ic(t,e,n,r,i){var s=Nt(n)?Dr:yt.current;return s=Pi(e,s),wi(e,i),n=Md(t,e,n,r,s,i),r=Ld(),t!==null&&!jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Nn(t,e,i)):(Ae&&r&&Id(e),e.flags|=1,kt(t,e,n,i),e.child)}function Im(t,e,n,r,i){if(Nt(n)){var s=!0;qa(e)}else s=!1;if(wi(e,i),e.stateNode===null)Ea(t,e),By(e,n,r),Sc(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,u=e.memoizedProps;o.props=u;var c=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Kt(h):(h=Nt(n)?Dr:yt.current,h=Pi(e,h));var p=n.getDerivedStateFromProps,y=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";y||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==r||c!==h)&&xm(e,o,r,h),Bn=!1;var g=e.memoizedState;o.state=g,Ya(e,r,o,i),c=e.memoizedState,u!==r||g!==c||Rt.current||Bn?(typeof p=="function"&&(kc(e,n,p,r),c=e.memoizedState),(u=Bn||_m(e,n,u,r,g,c,h))?(y||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=h,r=u):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,wy(t,e),u=e.memoizedProps,h=e.type===e.elementType?u:Zt(e.type,u),o.props=h,y=e.pendingProps,g=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Kt(c):(c=Nt(n)?Dr:yt.current,c=Pi(e,c));var E=n.getDerivedStateFromProps;(p=typeof E=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==y||g!==c)&&xm(e,o,r,c),Bn=!1,g=e.memoizedState,o.state=g,Ya(e,r,o,i);var A=e.memoizedState;u!==y||g!==A||Rt.current||Bn?(typeof E=="function"&&(kc(e,n,E,r),A=e.memoizedState),(h=Bn||_m(e,n,h,r,g,A,c)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,A,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,A,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=A),o.props=r,o.state=A,o.context=c,r=h):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Cc(t,e,n,r,s,i)}function Cc(t,e,n,r,i,s){Gy(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&dm(e,n,!1),Nn(t,e,s);r=e.stateNode,Bx.current=e;var u=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ri(e,t.child,null,s),e.child=Ri(e,null,u,s)):kt(t,e,u,s),e.memoizedState=r.state,i&&dm(e,n,!0),e.child}function Ky(t){var e=t.stateNode;e.pendingContext?cm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&cm(t,e.context,!1),Dd(t,e.containerInfo)}function Cm(t,e,n,r,i){return ji(),Ad(i),e.flags|=256,kt(t,e,n,r),e.child}var Ac={dehydrated:null,treeContext:null,retryLane:0};function Pc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Qy(t,e,n){var r=e.pendingProps,i=je.current,s=!1,o=(e.flags&128)!==0,u;if((u=o)||(u=t!==null&&t.memoizedState===null?!1:(i&2)!==0),u?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ee(je,i&1),t===null)return wc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Rl(o,r,0,null),t=br(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Pc(n),e.memoizedState=Ac,t):Bd(e,o));if(i=t.memoizedState,i!==null&&(u=i.dehydrated,u!==null))return $x(t,e,o,r,u,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,u=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=tr(i,c),r.subtreeFlags=i.subtreeFlags&14680064),u!==null?s=tr(u,s):(s=br(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Pc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Ac,r}return s=t.child,t=s.sibling,r=tr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Bd(t,e){return e=Rl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function na(t,e,n,r){return r!==null&&Ad(r),Ri(e,t.child,null,n),t=Bd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $x(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Du(Error($(422))),na(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Rl({mode:"visible",children:r.children},i,0,null),s=br(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ri(e,t.child,null,o),e.child.memoizedState=Pc(o),e.memoizedState=Ac,s);if(!(e.mode&1))return na(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var u=r.dgst;return r=u,s=Error($(419)),r=Du(s,r,void 0),na(t,e,o,r)}if(u=(o&t.childLanes)!==0,jt||u){if(r=et,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Rn(t,i),sn(r,t,i,-1))}return Kd(),r=Du(Error($(421))),na(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=nw.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ft=Xn(i.nextSibling),Ot=e,Ae=!0,tn=null,t!==null&&(Bt[$t++]=In,Bt[$t++]=Cn,Bt[$t++]=Vr,In=t.id,Cn=t.overflow,Vr=e),e=Bd(e,r.children),e.flags|=4096,e)}function Am(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ec(t.return,e,n)}function Vu(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Yy(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(kt(t,e,r.children,n),r=je.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Am(t,n,e);else if(t.tag===19)Am(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ee(je,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Xa(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Vu(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Xa(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Vu(e,!0,n,null,s);break;case"together":Vu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ea(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Nn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Or|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=tr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=tr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Hx(t,e,n){switch(e.tag){case 3:Ky(e),ji();break;case 5:Ey(e);break;case 1:Nt(e.type)&&qa(e);break;case 4:Dd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ee(Ka,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ee(je,je.current&1),e.flags|=128,null):n&e.child.childLanes?Qy(t,e,n):(Ee(je,je.current&1),t=Nn(t,e,n),t!==null?t.sibling:null);Ee(je,je.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Yy(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ee(je,je.current),r)break;return null;case 22:case 23:return e.lanes=0,Wy(t,e,n)}return Nn(t,e,n)}var Xy,jc,Jy,Zy;Xy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};jc=function(){};Jy=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,jr(pn.current);var s=null;switch(n){case"input":i=Ju(t,i),r=Ju(t,r),s=[];break;case"select":i=Ne({},i,{value:void 0}),r=Ne({},r,{value:void 0}),s=[];break;case"textarea":i=tc(t,i),r=tc(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=$a)}rc(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var u=i[h];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Bs.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var c=r[h];if(u=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&c!==u&&(c!=null||u!=null))if(h==="style")if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(s=s||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Bs.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&Se("scroll",t),s||u===c||(s=[])):(s=s||[]).push(h,c))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};Zy=function(t,e,n,r){n!==r&&(e.flags|=4)};function gs(t,e){if(!Ae)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ht(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function qx(t,e,n){var r=e.pendingProps;switch(Cd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(e),null;case 1:return Nt(e.type)&&Ha(),ht(e),null;case 3:return r=e.stateNode,Ni(),Ce(Rt),Ce(yt),Fd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ea(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,tn!==null&&(Mc(tn),tn=null))),jc(t,e),ht(e),null;case 5:Vd(e);var i=jr(eo.current);if(n=e.type,t!==null&&e.stateNode!=null)Jy(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return ht(e),null}if(t=jr(pn.current),ea(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[fn]=e,r[Js]=s,t=(e.mode&1)!==0,n){case"dialog":Se("cancel",r),Se("close",r);break;case"iframe":case"object":case"embed":Se("load",r);break;case"video":case"audio":for(i=0;i<ks.length;i++)Se(ks[i],r);break;case"source":Se("error",r);break;case"img":case"image":case"link":Se("error",r),Se("load",r);break;case"details":Se("toggle",r);break;case"input":Of(r,s),Se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Se("invalid",r);break;case"textarea":Lf(r,s),Se("invalid",r)}rc(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var u=s[o];o==="children"?typeof u=="string"?r.textContent!==u&&(s.suppressHydrationWarning!==!0&&Zo(r.textContent,u,t),i=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(s.suppressHydrationWarning!==!0&&Zo(r.textContent,u,t),i=["children",""+u]):Bs.hasOwnProperty(o)&&u!=null&&o==="onScroll"&&Se("scroll",r)}switch(n){case"input":qo(r),Mf(r,s,!0);break;case"textarea":qo(r),zf(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=$a)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Cg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[fn]=e,t[Js]=r,Xy(t,e,!1,!1),e.stateNode=t;e:{switch(o=ic(n,r),n){case"dialog":Se("cancel",t),Se("close",t),i=r;break;case"iframe":case"object":case"embed":Se("load",t),i=r;break;case"video":case"audio":for(i=0;i<ks.length;i++)Se(ks[i],t);i=r;break;case"source":Se("error",t),i=r;break;case"img":case"image":case"link":Se("error",t),Se("load",t),i=r;break;case"details":Se("toggle",t),i=r;break;case"input":Of(t,r),i=Ju(t,r),Se("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ne({},r,{value:void 0}),Se("invalid",t);break;case"textarea":Lf(t,r),i=tc(t,r),Se("invalid",t);break;default:i=r}rc(n,i),u=i;for(s in u)if(u.hasOwnProperty(s)){var c=u[s];s==="style"?jg(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Ag(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&$s(t,c):typeof c=="number"&&$s(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Bs.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Se("scroll",t):c!=null&&hd(t,s,c,o))}switch(n){case"input":qo(t),Mf(t,r,!1);break;case"textarea":qo(t),zf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ar(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?yi(t,!!r.multiple,s,!1):r.defaultValue!=null&&yi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=$a)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ht(e),null;case 6:if(t&&e.stateNode!=null)Zy(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=jr(eo.current),jr(pn.current),ea(e)){if(r=e.stateNode,n=e.memoizedProps,r[fn]=e,(s=r.nodeValue!==n)&&(t=Ot,t!==null))switch(t.tag){case 3:Zo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Zo(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[fn]=e,e.stateNode=r}return ht(e),null;case 13:if(Ce(je),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ae&&Ft!==null&&e.mode&1&&!(e.flags&128))yy(),ji(),e.flags|=98560,s=!1;else if(s=ea(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error($(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($(317));s[fn]=e}else ji(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ht(e),s=!1}else tn!==null&&(Mc(tn),tn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||je.current&1?We===0&&(We=3):Kd())),e.updateQueue!==null&&(e.flags|=4),ht(e),null);case 4:return Ni(),jc(t,e),t===null&&Ys(e.stateNode.containerInfo),ht(e),null;case 10:return Rd(e.type._context),ht(e),null;case 17:return Nt(e.type)&&Ha(),ht(e),null;case 19:if(Ce(je),s=e.memoizedState,s===null)return ht(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)gs(s,!1);else{if(We!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Xa(t),o!==null){for(e.flags|=128,gs(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ee(je,je.current&1|2),e.child}t=t.sibling}s.tail!==null&&Oe()>Di&&(e.flags|=128,r=!0,gs(s,!1),e.lanes=4194304)}else{if(!r)if(t=Xa(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),gs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ae)return ht(e),null}else 2*Oe()-s.renderingStartTime>Di&&n!==1073741824&&(e.flags|=128,r=!0,gs(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Oe(),e.sibling=null,n=je.current,Ee(je,r?n&1|2:n&1),e):(ht(e),null);case 22:case 23:return Gd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Vt&1073741824&&(ht(e),e.subtreeFlags&6&&(e.flags|=8192)):ht(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function Wx(t,e){switch(Cd(e),e.tag){case 1:return Nt(e.type)&&Ha(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ni(),Ce(Rt),Ce(yt),Fd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Vd(e),null;case 13:if(Ce(je),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));ji()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ce(je),null;case 4:return Ni(),null;case 10:return Rd(e.type._context),null;case 22:case 23:return Gd(),null;case 24:return null;default:return null}}var ra=!1,pt=!1,Gx=typeof WeakSet=="function"?WeakSet:Set,K=null;function pi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ve(t,e,r)}else n.current=null}function Rc(t,e,n){try{n()}catch(r){Ve(t,e,r)}}var Pm=!1;function Kx(t,e){if(mc=za,t=iy(),Td(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,u=-1,c=-1,h=0,p=0,y=t,g=null;t:for(;;){for(var E;y!==n||i!==0&&y.nodeType!==3||(u=o+i),y!==s||r!==0&&y.nodeType!==3||(c=o+r),y.nodeType===3&&(o+=y.nodeValue.length),(E=y.firstChild)!==null;)g=y,y=E;for(;;){if(y===t)break t;if(g===n&&++h===i&&(u=o),g===s&&++p===r&&(c=o),(E=y.nextSibling)!==null)break;y=g,g=y.parentNode}y=E}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(pc={focusedElem:t,selectionRange:n},za=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var A=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var R=A.memoizedProps,P=A.memoizedState,T=e.stateNode,k=T.getSnapshotBeforeUpdate(e.elementType===e.type?R:Zt(e.type,R),P);T.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(b){Ve(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return A=Pm,Pm=!1,A}function Ds(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Rc(e,n,s)}i=i.next}while(i!==r)}}function Pl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Nc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ev(t){var e=t.alternate;e!==null&&(t.alternate=null,ev(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[fn],delete e[Js],delete e[vc],delete e[jx],delete e[Rx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function tv(t){return t.tag===5||t.tag===3||t.tag===4}function jm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function bc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=$a));else if(r!==4&&(t=t.child,t!==null))for(bc(t,e,n),t=t.sibling;t!==null;)bc(t,e,n),t=t.sibling}function Dc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Dc(t,e,n),t=t.sibling;t!==null;)Dc(t,e,n),t=t.sibling}var nt=null,en=!1;function zn(t,e,n){for(n=n.child;n!==null;)nv(t,e,n),n=n.sibling}function nv(t,e,n){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(wl,n)}catch{}switch(n.tag){case 5:pt||pi(n,e);case 6:var r=nt,i=en;nt=null,zn(t,e,n),nt=r,en=i,nt!==null&&(en?(t=nt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):nt.removeChild(n.stateNode));break;case 18:nt!==null&&(en?(t=nt,n=n.stateNode,t.nodeType===8?Au(t.parentNode,n):t.nodeType===1&&Au(t,n),Gs(t)):Au(nt,n.stateNode));break;case 4:r=nt,i=en,nt=n.stateNode.containerInfo,en=!0,zn(t,e,n),nt=r,en=i;break;case 0:case 11:case 14:case 15:if(!pt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Rc(n,e,o),i=i.next}while(i!==r)}zn(t,e,n);break;case 1:if(!pt&&(pi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ve(n,e,u)}zn(t,e,n);break;case 21:zn(t,e,n);break;case 22:n.mode&1?(pt=(r=pt)||n.memoizedState!==null,zn(t,e,n),pt=r):zn(t,e,n);break;default:zn(t,e,n)}}function Rm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Gx),e.forEach(function(r){var i=rw.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Jt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,u=o;e:for(;u!==null;){switch(u.tag){case 5:nt=u.stateNode,en=!1;break e;case 3:nt=u.stateNode.containerInfo,en=!0;break e;case 4:nt=u.stateNode.containerInfo,en=!0;break e}u=u.return}if(nt===null)throw Error($(160));nv(s,o,i),nt=null,en=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(h){Ve(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)rv(e,t),e=e.sibling}function rv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Jt(e,t),cn(t),r&4){try{Ds(3,t,t.return),Pl(3,t)}catch(R){Ve(t,t.return,R)}try{Ds(5,t,t.return)}catch(R){Ve(t,t.return,R)}}break;case 1:Jt(e,t),cn(t),r&512&&n!==null&&pi(n,n.return);break;case 5:if(Jt(e,t),cn(t),r&512&&n!==null&&pi(n,n.return),t.flags&32){var i=t.stateNode;try{$s(i,"")}catch(R){Ve(t,t.return,R)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&s.type==="radio"&&s.name!=null&&Tg(i,s),ic(u,o);var h=ic(u,s);for(o=0;o<c.length;o+=2){var p=c[o],y=c[o+1];p==="style"?jg(i,y):p==="dangerouslySetInnerHTML"?Ag(i,y):p==="children"?$s(i,y):hd(i,p,y,h)}switch(u){case"input":Zu(i,s);break;case"textarea":Ig(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var E=s.value;E!=null?yi(i,!!s.multiple,E,!1):g!==!!s.multiple&&(s.defaultValue!=null?yi(i,!!s.multiple,s.defaultValue,!0):yi(i,!!s.multiple,s.multiple?[]:"",!1))}i[Js]=s}catch(R){Ve(t,t.return,R)}}break;case 6:if(Jt(e,t),cn(t),r&4){if(t.stateNode===null)throw Error($(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(R){Ve(t,t.return,R)}}break;case 3:if(Jt(e,t),cn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Gs(e.containerInfo)}catch(R){Ve(t,t.return,R)}break;case 4:Jt(e,t),cn(t);break;case 13:Jt(e,t),cn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(qd=Oe())),r&4&&Rm(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(pt=(h=pt)||p,Jt(e,t),pt=h):Jt(e,t),cn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(K=t,p=t.child;p!==null;){for(y=K=p;K!==null;){switch(g=K,E=g.child,g.tag){case 0:case 11:case 14:case 15:Ds(4,g,g.return);break;case 1:pi(g,g.return);var A=g.stateNode;if(typeof A.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,A.props=e.memoizedProps,A.state=e.memoizedState,A.componentWillUnmount()}catch(R){Ve(r,n,R)}}break;case 5:pi(g,g.return);break;case 22:if(g.memoizedState!==null){bm(y);continue}}E!==null?(E.return=g,K=E):bm(y)}p=p.sibling}e:for(p=null,y=t;;){if(y.tag===5){if(p===null){p=y;try{i=y.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(u=y.stateNode,c=y.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=Pg("display",o))}catch(R){Ve(t,t.return,R)}}}else if(y.tag===6){if(p===null)try{y.stateNode.nodeValue=h?"":y.memoizedProps}catch(R){Ve(t,t.return,R)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;p===y&&(p=null),y=y.return}p===y&&(p=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Jt(e,t),cn(t),r&4&&Rm(t);break;case 21:break;default:Jt(e,t),cn(t)}}function cn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(tv(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&($s(i,""),r.flags&=-33);var s=jm(t);Dc(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,u=jm(t);bc(t,u,o);break;default:throw Error($(161))}}catch(c){Ve(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Qx(t,e,n){K=t,iv(t)}function iv(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var i=K,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ra;if(!o){var u=i.alternate,c=u!==null&&u.memoizedState!==null||pt;u=ra;var h=pt;if(ra=o,(pt=c)&&!h)for(K=i;K!==null;)o=K,c=o.child,o.tag===22&&o.memoizedState!==null?Dm(i):c!==null?(c.return=o,K=c):Dm(i);for(;s!==null;)K=s,iv(s),s=s.sibling;K=i,ra=u,pt=h}Nm(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,K=s):Nm(t)}}function Nm(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:pt||Pl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!pt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Zt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&gm(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}gm(e,o,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var y=p.dehydrated;y!==null&&Gs(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}pt||e.flags&512&&Nc(e)}catch(g){Ve(e,e.return,g)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function bm(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function Dm(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Pl(4,e)}catch(c){Ve(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Ve(e,i,c)}}var s=e.return;try{Nc(e)}catch(c){Ve(e,s,c)}break;case 5:var o=e.return;try{Nc(e)}catch(c){Ve(e,o,c)}}}catch(c){Ve(e,e.return,c)}if(e===t){K=null;break}var u=e.sibling;if(u!==null){u.return=e.return,K=u;break}K=e.return}}var Yx=Math.ceil,el=Fn.ReactCurrentDispatcher,$d=Fn.ReactCurrentOwner,Gt=Fn.ReactCurrentBatchConfig,fe=0,et=null,ze=null,st=0,Vt=0,gi=yr(0),We=0,io=null,Or=0,jl=0,Hd=0,Vs=null,Pt=null,qd=0,Di=1/0,Sn=null,tl=!1,Vc=null,Zn=null,ia=!1,Wn=null,nl=0,Fs=0,Fc=null,ka=-1,Sa=0;function St(){return fe&6?Oe():ka!==-1?ka:ka=Oe()}function er(t){return t.mode&1?fe&2&&st!==0?st&-st:bx.transition!==null?(Sa===0&&(Sa=Bg()),Sa):(t=ve,t!==0||(t=window.event,t=t===void 0?16:Qg(t.type)),t):1}function sn(t,e,n,r){if(50<Fs)throw Fs=0,Fc=null,Error($(185));yo(t,n,r),(!(fe&2)||t!==et)&&(t===et&&(!(fe&2)&&(jl|=n),We===4&&Hn(t,st)),bt(t,r),n===1&&fe===0&&!(e.mode&1)&&(Di=Oe()+500,Il&&vr()))}function bt(t,e){var n=t.callbackNode;b1(t,e);var r=La(t,t===et?st:0);if(r===0)n!==null&&$f(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&$f(n),e===1)t.tag===0?Nx(Vm.bind(null,t)):my(Vm.bind(null,t)),Ax(function(){!(fe&6)&&vr()}),n=null;else{switch($g(r)){case 1:n=yd;break;case 4:n=zg;break;case 16:n=Ma;break;case 536870912:n=Ug;break;default:n=Ma}n=hv(n,sv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function sv(t,e){if(ka=-1,Sa=0,fe&6)throw Error($(327));var n=t.callbackNode;if(Ei()&&t.callbackNode!==n)return null;var r=La(t,t===et?st:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=rl(t,r);else{e=r;var i=fe;fe|=2;var s=av();(et!==t||st!==e)&&(Sn=null,Di=Oe()+500,Nr(t,e));do try{Zx();break}catch(u){ov(t,u)}while(!0);jd(),el.current=s,fe=i,ze!==null?e=0:(et=null,st=0,e=We)}if(e!==0){if(e===2&&(i=uc(t),i!==0&&(r=i,e=Oc(t,i))),e===1)throw n=io,Nr(t,0),Hn(t,r),bt(t,Oe()),n;if(e===6)Hn(t,r);else{if(i=t.current.alternate,!(r&30)&&!Xx(i)&&(e=rl(t,r),e===2&&(s=uc(t),s!==0&&(r=s,e=Oc(t,s))),e===1))throw n=io,Nr(t,0),Hn(t,r),bt(t,Oe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:Ir(t,Pt,Sn);break;case 3:if(Hn(t,r),(r&130023424)===r&&(e=qd+500-Oe(),10<e)){if(La(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){St(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=yc(Ir.bind(null,t,Pt,Sn),e);break}Ir(t,Pt,Sn);break;case 4:if(Hn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-rn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Oe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Yx(r/1960))-r,10<r){t.timeoutHandle=yc(Ir.bind(null,t,Pt,Sn),r);break}Ir(t,Pt,Sn);break;case 5:Ir(t,Pt,Sn);break;default:throw Error($(329))}}}return bt(t,Oe()),t.callbackNode===n?sv.bind(null,t):null}function Oc(t,e){var n=Vs;return t.current.memoizedState.isDehydrated&&(Nr(t,e).flags|=256),t=rl(t,e),t!==2&&(e=Pt,Pt=n,e!==null&&Mc(e)),t}function Mc(t){Pt===null?Pt=t:Pt.push.apply(Pt,t)}function Xx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!an(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Hn(t,e){for(e&=~Hd,e&=~jl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-rn(e),r=1<<n;t[n]=-1,e&=~r}}function Vm(t){if(fe&6)throw Error($(327));Ei();var e=La(t,0);if(!(e&1))return bt(t,Oe()),null;var n=rl(t,e);if(t.tag!==0&&n===2){var r=uc(t);r!==0&&(e=r,n=Oc(t,r))}if(n===1)throw n=io,Nr(t,0),Hn(t,e),bt(t,Oe()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ir(t,Pt,Sn),bt(t,Oe()),null}function Wd(t,e){var n=fe;fe|=1;try{return t(e)}finally{fe=n,fe===0&&(Di=Oe()+500,Il&&vr())}}function Mr(t){Wn!==null&&Wn.tag===0&&!(fe&6)&&Ei();var e=fe;fe|=1;var n=Gt.transition,r=ve;try{if(Gt.transition=null,ve=1,t)return t()}finally{ve=r,Gt.transition=n,fe=e,!(fe&6)&&vr()}}function Gd(){Vt=gi.current,Ce(gi)}function Nr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Cx(n)),ze!==null)for(n=ze.return;n!==null;){var r=n;switch(Cd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ha();break;case 3:Ni(),Ce(Rt),Ce(yt),Fd();break;case 5:Vd(r);break;case 4:Ni();break;case 13:Ce(je);break;case 19:Ce(je);break;case 10:Rd(r.type._context);break;case 22:case 23:Gd()}n=n.return}if(et=t,ze=t=tr(t.current,null),st=Vt=e,We=0,io=null,Hd=jl=Or=0,Pt=Vs=null,Pr!==null){for(e=0;e<Pr.length;e++)if(n=Pr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Pr=null}return t}function ov(t,e){do{var n=ze;try{if(jd(),xa.current=Za,Ja){for(var r=Re.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ja=!1}if(Fr=0,Je=He=Re=null,bs=!1,to=0,$d.current=null,n===null||n.return===null){We=1,io=e,ze=null;break}e:{var s=t,o=n.return,u=n,c=e;if(e=st,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,p=u,y=p.tag;if(!(p.mode&1)&&(y===0||y===11||y===15)){var g=p.alternate;g?(p.updateQueue=g.updateQueue,p.memoizedState=g.memoizedState,p.lanes=g.lanes):(p.updateQueue=null,p.memoizedState=null)}var E=Em(o);if(E!==null){E.flags&=-257,km(E,o,u,s,e),E.mode&1&&wm(s,h,e),e=E,c=h;var A=e.updateQueue;if(A===null){var R=new Set;R.add(c),e.updateQueue=R}else A.add(c);break e}else{if(!(e&1)){wm(s,h,e),Kd();break e}c=Error($(426))}}else if(Ae&&u.mode&1){var P=Em(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),km(P,o,u,s,e),Ad(bi(c,u));break e}}s=c=bi(c,u),We!==4&&(We=2),Vs===null?Vs=[s]:Vs.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var T=$y(s,c,e);pm(s,T);break e;case 1:u=c;var k=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof k.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Zn===null||!Zn.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=Hy(s,u,e);pm(s,b);break e}}s=s.return}while(s!==null)}uv(n)}catch(D){e=D,ze===n&&n!==null&&(ze=n=n.return);continue}break}while(!0)}function av(){var t=el.current;return el.current=Za,t===null?Za:t}function Kd(){(We===0||We===3||We===2)&&(We=4),et===null||!(Or&268435455)&&!(jl&268435455)||Hn(et,st)}function rl(t,e){var n=fe;fe|=2;var r=av();(et!==t||st!==e)&&(Sn=null,Nr(t,e));do try{Jx();break}catch(i){ov(t,i)}while(!0);if(jd(),fe=n,el.current=r,ze!==null)throw Error($(261));return et=null,st=0,We}function Jx(){for(;ze!==null;)lv(ze)}function Zx(){for(;ze!==null&&!S1();)lv(ze)}function lv(t){var e=dv(t.alternate,t,Vt);t.memoizedProps=t.pendingProps,e===null?uv(t):ze=e,$d.current=null}function uv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Wx(n,e),n!==null){n.flags&=32767,ze=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{We=6,ze=null;return}}else if(n=qx(n,e,Vt),n!==null){ze=n;return}if(e=e.sibling,e!==null){ze=e;return}ze=e=t}while(e!==null);We===0&&(We=5)}function Ir(t,e,n){var r=ve,i=Gt.transition;try{Gt.transition=null,ve=1,ew(t,e,n,r)}finally{Gt.transition=i,ve=r}return null}function ew(t,e,n,r){do Ei();while(Wn!==null);if(fe&6)throw Error($(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(D1(t,s),t===et&&(ze=et=null,st=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ia||(ia=!0,hv(Ma,function(){return Ei(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Gt.transition,Gt.transition=null;var o=ve;ve=1;var u=fe;fe|=4,$d.current=null,Kx(t,n),rv(n,t),xx(pc),za=!!mc,pc=mc=null,t.current=n,Qx(n),T1(),fe=u,ve=o,Gt.transition=s}else t.current=n;if(ia&&(ia=!1,Wn=t,nl=i),s=t.pendingLanes,s===0&&(Zn=null),A1(n.stateNode),bt(t,Oe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(tl)throw tl=!1,t=Vc,Vc=null,t;return nl&1&&t.tag!==0&&Ei(),s=t.pendingLanes,s&1?t===Fc?Fs++:(Fs=0,Fc=t):Fs=0,vr(),null}function Ei(){if(Wn!==null){var t=$g(nl),e=Gt.transition,n=ve;try{if(Gt.transition=null,ve=16>t?16:t,Wn===null)var r=!1;else{if(t=Wn,Wn=null,nl=0,fe&6)throw Error($(331));var i=fe;for(fe|=4,K=t.current;K!==null;){var s=K,o=s.child;if(K.flags&16){var u=s.deletions;if(u!==null){for(var c=0;c<u.length;c++){var h=u[c];for(K=h;K!==null;){var p=K;switch(p.tag){case 0:case 11:case 15:Ds(8,p,s)}var y=p.child;if(y!==null)y.return=p,K=y;else for(;K!==null;){p=K;var g=p.sibling,E=p.return;if(ev(p),p===h){K=null;break}if(g!==null){g.return=E,K=g;break}K=E}}}var A=s.alternate;if(A!==null){var R=A.child;if(R!==null){A.child=null;do{var P=R.sibling;R.sibling=null,R=P}while(R!==null)}}K=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,K=o;else e:for(;K!==null;){if(s=K,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ds(9,s,s.return)}var T=s.sibling;if(T!==null){T.return=s.return,K=T;break e}K=s.return}}var k=t.current;for(K=k;K!==null;){o=K;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,K=C;else e:for(o=k;K!==null;){if(u=K,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Pl(9,u)}}catch(D){Ve(u,u.return,D)}if(u===o){K=null;break e}var b=u.sibling;if(b!==null){b.return=u.return,K=b;break e}K=u.return}}if(fe=i,vr(),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(wl,t)}catch{}r=!0}return r}finally{ve=n,Gt.transition=e}}return!1}function Fm(t,e,n){e=bi(n,e),e=$y(t,e,1),t=Jn(t,e,1),e=St(),t!==null&&(yo(t,1,e),bt(t,e))}function Ve(t,e,n){if(t.tag===3)Fm(t,t,n);else for(;e!==null;){if(e.tag===3){Fm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Zn===null||!Zn.has(r))){t=bi(n,t),t=Hy(e,t,1),e=Jn(e,t,1),t=St(),e!==null&&(yo(e,1,t),bt(e,t));break}}e=e.return}}function tw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=St(),t.pingedLanes|=t.suspendedLanes&n,et===t&&(st&n)===n&&(We===4||We===3&&(st&130023424)===st&&500>Oe()-qd?Nr(t,0):Hd|=n),bt(t,e)}function cv(t,e){e===0&&(t.mode&1?(e=Ko,Ko<<=1,!(Ko&130023424)&&(Ko=4194304)):e=1);var n=St();t=Rn(t,e),t!==null&&(yo(t,e,n),bt(t,n))}function nw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),cv(t,n)}function rw(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),cv(t,n)}var dv;dv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Rt.current)jt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return jt=!1,Hx(t,e,n);jt=!!(t.flags&131072)}else jt=!1,Ae&&e.flags&1048576&&py(e,Ga,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ea(t,e),t=e.pendingProps;var i=Pi(e,yt.current);wi(e,n),i=Md(null,e,r,t,i,n);var s=Ld();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Nt(r)?(s=!0,qa(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,bd(e),i.updater=Al,e.stateNode=i,i._reactInternals=e,Sc(e,r,t,n),e=Cc(null,e,r,!0,s,n)):(e.tag=0,Ae&&s&&Id(e),kt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ea(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=sw(r),t=Zt(r,t),i){case 0:e=Ic(null,e,r,t,n);break e;case 1:e=Im(null,e,r,t,n);break e;case 11:e=Sm(null,e,r,t,n);break e;case 14:e=Tm(null,e,r,Zt(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zt(r,i),Ic(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zt(r,i),Im(t,e,r,i,n);case 3:e:{if(Ky(e),t===null)throw Error($(387));r=e.pendingProps,s=e.memoizedState,i=s.element,wy(t,e),Ya(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=bi(Error($(423)),e),e=Cm(t,e,r,n,i);break e}else if(r!==i){i=bi(Error($(424)),e),e=Cm(t,e,r,n,i);break e}else for(Ft=Xn(e.stateNode.containerInfo.firstChild),Ot=e,Ae=!0,tn=null,n=_y(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ji(),r===i){e=Nn(t,e,n);break e}kt(t,e,r,n)}e=e.child}return e;case 5:return Ey(e),t===null&&wc(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,gc(r,i)?o=null:s!==null&&gc(r,s)&&(e.flags|=32),Gy(t,e),kt(t,e,o,n),e.child;case 6:return t===null&&wc(e),null;case 13:return Qy(t,e,n);case 4:return Dd(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ri(e,null,r,n):kt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zt(r,i),Sm(t,e,r,i,n);case 7:return kt(t,e,e.pendingProps,n),e.child;case 8:return kt(t,e,e.pendingProps.children,n),e.child;case 12:return kt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ee(Ka,r._currentValue),r._currentValue=o,s!==null)if(an(s.value,o)){if(s.children===i.children&&!Rt.current){e=Nn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var u=s.dependencies;if(u!==null){o=s.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=An(-1,n&-n),c.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?c.next=c:(c.next=p.next,p.next=c),h.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),Ec(s.return,n,e),u.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error($(341));o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Ec(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}kt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,wi(e,n),i=Kt(i),r=r(i),e.flags|=1,kt(t,e,r,n),e.child;case 14:return r=e.type,i=Zt(r,e.pendingProps),i=Zt(r.type,i),Tm(t,e,r,i,n);case 15:return qy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zt(r,i),Ea(t,e),e.tag=1,Nt(r)?(t=!0,qa(e)):t=!1,wi(e,n),By(e,r,i),Sc(e,r,i,n),Cc(null,e,r,!0,t,n);case 19:return Yy(t,e,n);case 22:return Wy(t,e,n)}throw Error($(156,e.tag))};function hv(t,e){return Lg(t,e)}function iw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(t,e,n,r){return new iw(t,e,n,r)}function Qd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function sw(t){if(typeof t=="function")return Qd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===md)return 11;if(t===pd)return 14}return 2}function tr(t,e){var n=t.alternate;return n===null?(n=Wt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ta(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Qd(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case oi:return br(n.children,i,s,e);case fd:o=8,i|=8;break;case Ku:return t=Wt(12,n,e,i|2),t.elementType=Ku,t.lanes=s,t;case Qu:return t=Wt(13,n,e,i),t.elementType=Qu,t.lanes=s,t;case Yu:return t=Wt(19,n,e,i),t.elementType=Yu,t.lanes=s,t;case Eg:return Rl(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case xg:o=10;break e;case wg:o=9;break e;case md:o=11;break e;case pd:o=14;break e;case Un:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=Wt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function br(t,e,n,r){return t=Wt(7,t,r,e),t.lanes=n,t}function Rl(t,e,n,r){return t=Wt(22,t,r,e),t.elementType=Eg,t.lanes=n,t.stateNode={isHidden:!1},t}function Fu(t,e,n){return t=Wt(6,t,null,e),t.lanes=n,t}function Ou(t,e,n){return e=Wt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ow(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yu(0),this.expirationTimes=yu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Yd(t,e,n,r,i,s,o,u,c){return t=new ow(t,e,n,u,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Wt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},bd(s),t}function aw(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:si,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function fv(t){if(!t)return lr;t=t._reactInternals;e:{if(Hr(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Nt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(Nt(n))return fy(t,n,e)}return e}function mv(t,e,n,r,i,s,o,u,c){return t=Yd(n,r,!0,t,i,s,o,u,c),t.context=fv(null),n=t.current,r=St(),i=er(n),s=An(r,i),s.callback=e??null,Jn(n,s,i),t.current.lanes=i,yo(t,i,r),bt(t,r),t}function Nl(t,e,n,r){var i=e.current,s=St(),o=er(i);return n=fv(n),e.context===null?e.context=n:e.pendingContext=n,e=An(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Jn(i,e,o),t!==null&&(sn(t,i,o,s),_a(t,i,o)),o}function il(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Om(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Xd(t,e){Om(t,e),(t=t.alternate)&&Om(t,e)}function lw(){return null}var pv=typeof reportError=="function"?reportError:function(t){console.error(t)};function Jd(t){this._internalRoot=t}bl.prototype.render=Jd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));Nl(t,e,null,null)};bl.prototype.unmount=Jd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Mr(function(){Nl(null,t,null,null)}),e[jn]=null}};function bl(t){this._internalRoot=t}bl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Wg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<$n.length&&e!==0&&e<$n[n].priority;n++);$n.splice(n,0,t),n===0&&Kg(t)}};function Zd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Dl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Mm(){}function uw(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=il(o);s.call(h)}}var o=mv(e,r,t,0,null,!1,!1,"",Mm);return t._reactRootContainer=o,t[jn]=o.current,Ys(t.nodeType===8?t.parentNode:t),Mr(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var u=r;r=function(){var h=il(c);u.call(h)}}var c=Yd(t,0,!1,null,null,!1,!1,"",Mm);return t._reactRootContainer=c,t[jn]=c.current,Ys(t.nodeType===8?t.parentNode:t),Mr(function(){Nl(e,c,n,r)}),c}function Vl(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var u=i;i=function(){var c=il(o);u.call(c)}}Nl(e,o,t,i)}else o=uw(n,e,t,i,r);return il(o)}Hg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Es(e.pendingLanes);n!==0&&(vd(e,n|1),bt(e,Oe()),!(fe&6)&&(Di=Oe()+500,vr()))}break;case 13:Mr(function(){var r=Rn(t,1);if(r!==null){var i=St();sn(r,t,1,i)}}),Xd(t,1)}};_d=function(t){if(t.tag===13){var e=Rn(t,134217728);if(e!==null){var n=St();sn(e,t,134217728,n)}Xd(t,134217728)}};qg=function(t){if(t.tag===13){var e=er(t),n=Rn(t,e);if(n!==null){var r=St();sn(n,t,e,r)}Xd(t,e)}};Wg=function(){return ve};Gg=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}};oc=function(t,e,n){switch(e){case"input":if(Zu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Tl(r);if(!i)throw Error($(90));Sg(r),Zu(r,i)}}}break;case"textarea":Ig(t,n);break;case"select":e=n.value,e!=null&&yi(t,!!n.multiple,e,!1)}};bg=Wd;Dg=Mr;var cw={usingClientEntryPoint:!1,Events:[_o,ci,Tl,Rg,Ng,Wd]},ys={findFiberByHostInstance:Ar,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dw={bundleType:ys.bundleType,version:ys.version,rendererPackageName:ys.rendererPackageName,rendererConfig:ys.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Og(t),t===null?null:t.stateNode},findFiberByHostInstance:ys.findFiberByHostInstance||lw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sa.isDisabled&&sa.supportsFiber)try{wl=sa.inject(dw),mn=sa}catch{}}Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cw;Lt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zd(e))throw Error($(200));return aw(t,e,null,n)};Lt.createRoot=function(t,e){if(!Zd(t))throw Error($(299));var n=!1,r="",i=pv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Yd(t,1,!1,null,null,n,!1,r,i),t[jn]=e.current,Ys(t.nodeType===8?t.parentNode:t),new Jd(e)};Lt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=Og(e),t=t===null?null:t.stateNode,t};Lt.flushSync=function(t){return Mr(t)};Lt.hydrate=function(t,e,n){if(!Dl(e))throw Error($(200));return Vl(null,t,e,!0,n)};Lt.hydrateRoot=function(t,e,n){if(!Zd(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=pv;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=mv(e,null,t,1,n??null,i,!1,s,o),t[jn]=e.current,Ys(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new bl(e)};Lt.render=function(t,e,n){if(!Dl(e))throw Error($(200));return Vl(null,t,e,!1,n)};Lt.unmountComponentAtNode=function(t){if(!Dl(t))throw Error($(40));return t._reactRootContainer?(Mr(function(){Vl(null,null,t,!1,function(){t._reactRootContainer=null,t[jn]=null})}),!0):!1};Lt.unstable_batchedUpdates=Wd;Lt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Dl(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return Vl(t,e,n,!1,r)};Lt.version="18.3.1-next-f1338f8080-20240426";function gv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gv)}catch(t){console.error(t)}}gv(),gg.exports=Lt;var hw=gg.exports,Lm=hw;Wu.createRoot=Lm.createRoot,Wu.hydrateRoot=Lm.hydrateRoot;const fw=()=>{};var zm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},mw=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],u=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},vv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,u=o?t[i+1]:0,c=i+2<t.length,h=c?t[i+2]:0,p=s>>2,y=(s&3)<<4|u>>4;let g=(u&15)<<2|h>>6,E=h&63;c||(E=64,o||(g=64)),r.push(n[p],n[y],n[g],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):mw(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],u=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const y=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||u==null||h==null||y==null)throw new pw;const g=s<<2|u>>4;if(r.push(g),h!==64){const E=u<<4&240|h>>2;if(r.push(E),y!==64){const A=h<<6&192|y;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class pw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gw=function(t){const e=yv(t);return vv.encodeByteArray(e,!0)},sl=function(t){return gw(t).replace(/\./g,"")},yw=function(t){try{return vv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w=()=>vw().__FIREBASE_DEFAULTS__,xw=()=>{if(typeof process>"u"||typeof zm>"u")return;const t=zm.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ww=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&yw(t[1]);return e&&JSON.parse(e)},eh=()=>{try{return fw()||_w()||xw()||ww()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ew=t=>{var e,n;return(n=(e=eh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},kw=t=>{const e=Ew(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},_v=()=>{var t;return(t=eh())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Tw(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[sl(JSON.stringify(n)),sl(JSON.stringify(o)),""].join(".")}const Os={};function Cw(){const t={prod:[],emulator:[]};for(const e of Object.keys(Os))Os[e]?t.emulator.push(e):t.prod.push(e);return t}function Aw(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Um=!1;function Pw(t,e){if(typeof window>"u"||typeof document>"u"||!th(window.location.host)||Os[t]===e||Os[t]||Um)return;Os[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",s=Cw().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function u(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,E){g.setAttribute("width","24"),g.setAttribute("id",E),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function h(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Um=!0,o()},g}function p(g,E){g.setAttribute("id",E),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function y(){const g=Aw(r),E=n("text"),A=document.getElementById(E)||document.createElement("span"),R=n("learnmore"),P=document.getElementById(R)||document.createElement("a"),T=n("preprendIcon"),k=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const C=g.element;u(C),p(P,R);const b=h();c(k,T),C.append(k,A,P,b),document.body.appendChild(C)}s?(A.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Rw(){var t;const e=(t=eh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Nw(){return!Rw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bw(){try{return typeof indexedDB=="object"}catch{return!1}}function Dw(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw="FirebaseError";class Hi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Vw,Object.setPrototypeOf(this,Hi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xv.prototype.create)}}class xv{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Fw(s,r):"Error",u=`${this.serviceName}: ${o} (${i}).`;return new Hi(i,u,r)}}function Fw(t,e){return t.replace(Ow,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Ow=/\{\$([^}]+)}/g;function ol(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Bm(s)&&Bm(o)){if(!ol(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Bm(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(t){return t&&t._delegate?t._delegate:t}class oo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Sw;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zw(e))try{this.getOrInitializeService({instanceIdentifier:Cr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Cr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Cr){return this.instances.has(e)}getOptions(e=Cr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(s);r===u&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Lw(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Cr){return this.component?this.component.multipleInstances?e:Cr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Lw(t){return t===Cr?void 0:t}function zw(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Mw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var de;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(de||(de={}));const Bw={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},$w=de.INFO,Hw={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},qw=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Hw[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wv{constructor(e){this.name=e,this._logLevel=$w,this._logHandler=qw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Bw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}}const Ww=(t,e)=>e.some(n=>t instanceof n);let $m,Hm;function Gw(){return $m||($m=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Kw(){return Hm||(Hm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ev=new WeakMap,Lc=new WeakMap,kv=new WeakMap,Mu=new WeakMap,nh=new WeakMap;function Qw(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(nr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Ev.set(n,t)}).catch(()=>{}),nh.set(e,t),e}function Yw(t){if(Lc.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Lc.set(t,e)}let zc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Lc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||kv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return nr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Xw(t){zc=t(zc)}function Jw(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Lu(this),e,...n);return kv.set(r,e.sort?e.sort():[e]),nr(r)}:Kw().includes(t)?function(...e){return t.apply(Lu(this),e),nr(Ev.get(this))}:function(...e){return nr(t.apply(Lu(this),e))}}function Zw(t){return typeof t=="function"?Jw(t):(t instanceof IDBTransaction&&Yw(t),Ww(t,Gw())?new Proxy(t,zc):t)}function nr(t){if(t instanceof IDBRequest)return Qw(t);if(Mu.has(t))return Mu.get(t);const e=Zw(t);return e!==t&&(Mu.set(t,e),nh.set(e,t)),e}const Lu=t=>nh.get(t);function eE(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),u=nr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(nr(o.result),c.oldVersion,c.newVersion,nr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const tE=["get","getKey","getAll","getAllKeys","count"],nE=["put","add","delete","clear"],zu=new Map;function qm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(zu.get(e))return zu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=nE.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||tE.includes(n)))return;const s=async function(o,...u){const c=this.transaction(o,i?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[n](...u),i&&c.done]))[0]};return zu.set(e,s),s}Xw(t=>({...t,get:(e,n,r)=>qm(e,n)||t.get(e,n,r),has:(e,n)=>!!qm(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(iE(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function iE(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Uc="@firebase/app",Wm="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bn=new wv("@firebase/app"),sE="@firebase/app-compat",oE="@firebase/analytics-compat",aE="@firebase/analytics",lE="@firebase/app-check-compat",uE="@firebase/app-check",cE="@firebase/auth",dE="@firebase/auth-compat",hE="@firebase/database",fE="@firebase/data-connect",mE="@firebase/database-compat",pE="@firebase/functions",gE="@firebase/functions-compat",yE="@firebase/installations",vE="@firebase/installations-compat",_E="@firebase/messaging",xE="@firebase/messaging-compat",wE="@firebase/performance",EE="@firebase/performance-compat",kE="@firebase/remote-config",SE="@firebase/remote-config-compat",TE="@firebase/storage",IE="@firebase/storage-compat",CE="@firebase/firestore",AE="@firebase/ai",PE="@firebase/firestore-compat",jE="firebase",RE="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc="[DEFAULT]",NE={[Uc]:"fire-core",[sE]:"fire-core-compat",[aE]:"fire-analytics",[oE]:"fire-analytics-compat",[uE]:"fire-app-check",[lE]:"fire-app-check-compat",[cE]:"fire-auth",[dE]:"fire-auth-compat",[hE]:"fire-rtdb",[fE]:"fire-data-connect",[mE]:"fire-rtdb-compat",[pE]:"fire-fn",[gE]:"fire-fn-compat",[yE]:"fire-iid",[vE]:"fire-iid-compat",[_E]:"fire-fcm",[xE]:"fire-fcm-compat",[wE]:"fire-perf",[EE]:"fire-perf-compat",[kE]:"fire-rc",[SE]:"fire-rc-compat",[TE]:"fire-gcs",[IE]:"fire-gcs-compat",[CE]:"fire-fst",[PE]:"fire-fst-compat",[AE]:"fire-vertex","fire-js":"fire-js",[jE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao=new Map,bE=new Map,$c=new Map;function Gm(t,e){try{t.container.addComponent(e)}catch(n){bn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function al(t){const e=t.name;if($c.has(e))return bn.debug(`There were multiple attempts to register component ${e}.`),!1;$c.set(e,t);for(const n of ao.values())Gm(n,t);for(const n of bE.values())Gm(n,t);return!0}function DE(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function VE(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rr=new xv("app","Firebase",FE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new oo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME=RE;function Sv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Bc,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw rr.create("bad-app-name",{appName:String(i)});if(n||(n=_v()),!n)throw rr.create("no-options");const s=ao.get(i);if(s){if(ol(n,s.options)&&ol(r,s.config))return s;throw rr.create("duplicate-app",{appName:i})}const o=new Uw(i);for(const c of $c.values())o.addComponent(c);const u=new OE(n,r,o);return ao.set(i,u),u}function LE(t=Bc){const e=ao.get(t);if(!e&&t===Bc&&_v())return Sv();if(!e)throw rr.create("no-app",{appName:t});return e}function Km(){return Array.from(ao.values())}function ki(t,e,n){var r;let i=(r=NE[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const u=[`Unable to register library "${i}" with version "${e}":`];s&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bn.warn(u.join(" "));return}al(new oo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE="firebase-heartbeat-database",UE=1,lo="firebase-heartbeat-store";let Uu=null;function Tv(){return Uu||(Uu=eE(zE,UE,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(lo)}catch(n){console.warn(n)}}}}).catch(t=>{throw rr.create("idb-open",{originalErrorMessage:t.message})})),Uu}async function BE(t){try{const n=(await Tv()).transaction(lo),r=await n.objectStore(lo).get(Iv(t));return await n.done,r}catch(e){if(e instanceof Hi)bn.warn(e.message);else{const n=rr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});bn.warn(n.message)}}}async function Qm(t,e){try{const r=(await Tv()).transaction(lo,"readwrite");await r.objectStore(lo).put(e,Iv(t)),await r.done}catch(n){if(n instanceof Hi)bn.warn(n.message);else{const r=rr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});bn.warn(r.message)}}}function Iv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E=1024,HE=30;class qE{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new GE(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Ym();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>HE){const o=KE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){bn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ym(),{heartbeatsToSend:r,unsentEntries:i}=WE(this._heartbeatsCache.heartbeats),s=sl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return bn.warn(n),""}}}function Ym(){return new Date().toISOString().substring(0,10)}function WE(t,e=$E){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Xm(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Xm(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class GE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bw()?Dw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await BE(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Qm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Qm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Xm(t){return sl(JSON.stringify({version:2,heartbeats:t})).length}function KE(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(t){al(new oo("platform-logger",e=>new rE(e),"PRIVATE")),al(new oo("heartbeat",e=>new qE(e),"PRIVATE")),ki(Uc,Wm,t),ki(Uc,Wm,"esm2017"),ki("fire-js","")}QE("");var YE="firebase",XE="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ki(YE,XE,"app");var Jm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ir,Cv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,m){function _(){}_.prototype=m.prototype,v.D=m.prototype,v.prototype=new _,v.prototype.constructor=v,v.C=function(x,S,j){for(var I=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)I[xe-2]=arguments[xe];return m.prototype[S].apply(x,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(v,m,_){_||(_=0);var x=Array(16);if(typeof m=="string")for(var S=0;16>S;++S)x[S]=m.charCodeAt(_++)|m.charCodeAt(_++)<<8|m.charCodeAt(_++)<<16|m.charCodeAt(_++)<<24;else for(S=0;16>S;++S)x[S]=m[_++]|m[_++]<<8|m[_++]<<16|m[_++]<<24;m=v.g[0],_=v.g[1],S=v.g[2];var j=v.g[3],I=m+(j^_&(S^j))+x[0]+3614090360&4294967295;m=_+(I<<7&4294967295|I>>>25),I=j+(S^m&(_^S))+x[1]+3905402710&4294967295,j=m+(I<<12&4294967295|I>>>20),I=S+(_^j&(m^_))+x[2]+606105819&4294967295,S=j+(I<<17&4294967295|I>>>15),I=_+(m^S&(j^m))+x[3]+3250441966&4294967295,_=S+(I<<22&4294967295|I>>>10),I=m+(j^_&(S^j))+x[4]+4118548399&4294967295,m=_+(I<<7&4294967295|I>>>25),I=j+(S^m&(_^S))+x[5]+1200080426&4294967295,j=m+(I<<12&4294967295|I>>>20),I=S+(_^j&(m^_))+x[6]+2821735955&4294967295,S=j+(I<<17&4294967295|I>>>15),I=_+(m^S&(j^m))+x[7]+4249261313&4294967295,_=S+(I<<22&4294967295|I>>>10),I=m+(j^_&(S^j))+x[8]+1770035416&4294967295,m=_+(I<<7&4294967295|I>>>25),I=j+(S^m&(_^S))+x[9]+2336552879&4294967295,j=m+(I<<12&4294967295|I>>>20),I=S+(_^j&(m^_))+x[10]+4294925233&4294967295,S=j+(I<<17&4294967295|I>>>15),I=_+(m^S&(j^m))+x[11]+2304563134&4294967295,_=S+(I<<22&4294967295|I>>>10),I=m+(j^_&(S^j))+x[12]+1804603682&4294967295,m=_+(I<<7&4294967295|I>>>25),I=j+(S^m&(_^S))+x[13]+4254626195&4294967295,j=m+(I<<12&4294967295|I>>>20),I=S+(_^j&(m^_))+x[14]+2792965006&4294967295,S=j+(I<<17&4294967295|I>>>15),I=_+(m^S&(j^m))+x[15]+1236535329&4294967295,_=S+(I<<22&4294967295|I>>>10),I=m+(S^j&(_^S))+x[1]+4129170786&4294967295,m=_+(I<<5&4294967295|I>>>27),I=j+(_^S&(m^_))+x[6]+3225465664&4294967295,j=m+(I<<9&4294967295|I>>>23),I=S+(m^_&(j^m))+x[11]+643717713&4294967295,S=j+(I<<14&4294967295|I>>>18),I=_+(j^m&(S^j))+x[0]+3921069994&4294967295,_=S+(I<<20&4294967295|I>>>12),I=m+(S^j&(_^S))+x[5]+3593408605&4294967295,m=_+(I<<5&4294967295|I>>>27),I=j+(_^S&(m^_))+x[10]+38016083&4294967295,j=m+(I<<9&4294967295|I>>>23),I=S+(m^_&(j^m))+x[15]+3634488961&4294967295,S=j+(I<<14&4294967295|I>>>18),I=_+(j^m&(S^j))+x[4]+3889429448&4294967295,_=S+(I<<20&4294967295|I>>>12),I=m+(S^j&(_^S))+x[9]+568446438&4294967295,m=_+(I<<5&4294967295|I>>>27),I=j+(_^S&(m^_))+x[14]+3275163606&4294967295,j=m+(I<<9&4294967295|I>>>23),I=S+(m^_&(j^m))+x[3]+4107603335&4294967295,S=j+(I<<14&4294967295|I>>>18),I=_+(j^m&(S^j))+x[8]+1163531501&4294967295,_=S+(I<<20&4294967295|I>>>12),I=m+(S^j&(_^S))+x[13]+2850285829&4294967295,m=_+(I<<5&4294967295|I>>>27),I=j+(_^S&(m^_))+x[2]+4243563512&4294967295,j=m+(I<<9&4294967295|I>>>23),I=S+(m^_&(j^m))+x[7]+1735328473&4294967295,S=j+(I<<14&4294967295|I>>>18),I=_+(j^m&(S^j))+x[12]+2368359562&4294967295,_=S+(I<<20&4294967295|I>>>12),I=m+(_^S^j)+x[5]+4294588738&4294967295,m=_+(I<<4&4294967295|I>>>28),I=j+(m^_^S)+x[8]+2272392833&4294967295,j=m+(I<<11&4294967295|I>>>21),I=S+(j^m^_)+x[11]+1839030562&4294967295,S=j+(I<<16&4294967295|I>>>16),I=_+(S^j^m)+x[14]+4259657740&4294967295,_=S+(I<<23&4294967295|I>>>9),I=m+(_^S^j)+x[1]+2763975236&4294967295,m=_+(I<<4&4294967295|I>>>28),I=j+(m^_^S)+x[4]+1272893353&4294967295,j=m+(I<<11&4294967295|I>>>21),I=S+(j^m^_)+x[7]+4139469664&4294967295,S=j+(I<<16&4294967295|I>>>16),I=_+(S^j^m)+x[10]+3200236656&4294967295,_=S+(I<<23&4294967295|I>>>9),I=m+(_^S^j)+x[13]+681279174&4294967295,m=_+(I<<4&4294967295|I>>>28),I=j+(m^_^S)+x[0]+3936430074&4294967295,j=m+(I<<11&4294967295|I>>>21),I=S+(j^m^_)+x[3]+3572445317&4294967295,S=j+(I<<16&4294967295|I>>>16),I=_+(S^j^m)+x[6]+76029189&4294967295,_=S+(I<<23&4294967295|I>>>9),I=m+(_^S^j)+x[9]+3654602809&4294967295,m=_+(I<<4&4294967295|I>>>28),I=j+(m^_^S)+x[12]+3873151461&4294967295,j=m+(I<<11&4294967295|I>>>21),I=S+(j^m^_)+x[15]+530742520&4294967295,S=j+(I<<16&4294967295|I>>>16),I=_+(S^j^m)+x[2]+3299628645&4294967295,_=S+(I<<23&4294967295|I>>>9),I=m+(S^(_|~j))+x[0]+4096336452&4294967295,m=_+(I<<6&4294967295|I>>>26),I=j+(_^(m|~S))+x[7]+1126891415&4294967295,j=m+(I<<10&4294967295|I>>>22),I=S+(m^(j|~_))+x[14]+2878612391&4294967295,S=j+(I<<15&4294967295|I>>>17),I=_+(j^(S|~m))+x[5]+4237533241&4294967295,_=S+(I<<21&4294967295|I>>>11),I=m+(S^(_|~j))+x[12]+1700485571&4294967295,m=_+(I<<6&4294967295|I>>>26),I=j+(_^(m|~S))+x[3]+2399980690&4294967295,j=m+(I<<10&4294967295|I>>>22),I=S+(m^(j|~_))+x[10]+4293915773&4294967295,S=j+(I<<15&4294967295|I>>>17),I=_+(j^(S|~m))+x[1]+2240044497&4294967295,_=S+(I<<21&4294967295|I>>>11),I=m+(S^(_|~j))+x[8]+1873313359&4294967295,m=_+(I<<6&4294967295|I>>>26),I=j+(_^(m|~S))+x[15]+4264355552&4294967295,j=m+(I<<10&4294967295|I>>>22),I=S+(m^(j|~_))+x[6]+2734768916&4294967295,S=j+(I<<15&4294967295|I>>>17),I=_+(j^(S|~m))+x[13]+1309151649&4294967295,_=S+(I<<21&4294967295|I>>>11),I=m+(S^(_|~j))+x[4]+4149444226&4294967295,m=_+(I<<6&4294967295|I>>>26),I=j+(_^(m|~S))+x[11]+3174756917&4294967295,j=m+(I<<10&4294967295|I>>>22),I=S+(m^(j|~_))+x[2]+718787259&4294967295,S=j+(I<<15&4294967295|I>>>17),I=_+(j^(S|~m))+x[9]+3951481745&4294967295,v.g[0]=v.g[0]+m&4294967295,v.g[1]=v.g[1]+(S+(I<<21&4294967295|I>>>11))&4294967295,v.g[2]=v.g[2]+S&4294967295,v.g[3]=v.g[3]+j&4294967295}r.prototype.u=function(v,m){m===void 0&&(m=v.length);for(var _=m-this.blockSize,x=this.B,S=this.h,j=0;j<m;){if(S==0)for(;j<=_;)i(this,v,j),j+=this.blockSize;if(typeof v=="string"){for(;j<m;)if(x[S++]=v.charCodeAt(j++),S==this.blockSize){i(this,x),S=0;break}}else for(;j<m;)if(x[S++]=v[j++],S==this.blockSize){i(this,x),S=0;break}}this.h=S,this.o+=m},r.prototype.v=function(){var v=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);v[0]=128;for(var m=1;m<v.length-8;++m)v[m]=0;var _=8*this.o;for(m=v.length-8;m<v.length;++m)v[m]=_&255,_/=256;for(this.u(v),v=Array(16),m=_=0;4>m;++m)for(var x=0;32>x;x+=8)v[_++]=this.g[m]>>>x&255;return v};function s(v,m){var _=u;return Object.prototype.hasOwnProperty.call(_,v)?_[v]:_[v]=m(v)}function o(v,m){this.h=m;for(var _=[],x=!0,S=v.length-1;0<=S;S--){var j=v[S]|0;x&&j==m||(_[S]=j,x=!1)}this.g=_}var u={};function c(v){return-128<=v&&128>v?s(v,function(m){return new o([m|0],0>m?-1:0)}):new o([v|0],0>v?-1:0)}function h(v){if(isNaN(v)||!isFinite(v))return y;if(0>v)return P(h(-v));for(var m=[],_=1,x=0;v>=_;x++)m[x]=v/_|0,_*=4294967296;return new o(m,0)}function p(v,m){if(v.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(v.charAt(0)=="-")return P(p(v.substring(1),m));if(0<=v.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=h(Math.pow(m,8)),x=y,S=0;S<v.length;S+=8){var j=Math.min(8,v.length-S),I=parseInt(v.substring(S,S+j),m);8>j?(j=h(Math.pow(m,j)),x=x.j(j).add(h(I))):(x=x.j(_),x=x.add(h(I)))}return x}var y=c(0),g=c(1),E=c(16777216);t=o.prototype,t.m=function(){if(R(this))return-P(this).m();for(var v=0,m=1,_=0;_<this.g.length;_++){var x=this.i(_);v+=(0<=x?x:4294967296+x)*m,m*=4294967296}return v},t.toString=function(v){if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(A(this))return"0";if(R(this))return"-"+P(this).toString(v);for(var m=h(Math.pow(v,6)),_=this,x="";;){var S=b(_,m).g;_=T(_,S.j(m));var j=((0<_.g.length?_.g[0]:_.h)>>>0).toString(v);if(_=S,A(_))return j+x;for(;6>j.length;)j="0"+j;x=j+x}},t.i=function(v){return 0>v?0:v<this.g.length?this.g[v]:this.h};function A(v){if(v.h!=0)return!1;for(var m=0;m<v.g.length;m++)if(v.g[m]!=0)return!1;return!0}function R(v){return v.h==-1}t.l=function(v){return v=T(this,v),R(v)?-1:A(v)?0:1};function P(v){for(var m=v.g.length,_=[],x=0;x<m;x++)_[x]=~v.g[x];return new o(_,~v.h).add(g)}t.abs=function(){return R(this)?P(this):this},t.add=function(v){for(var m=Math.max(this.g.length,v.g.length),_=[],x=0,S=0;S<=m;S++){var j=x+(this.i(S)&65535)+(v.i(S)&65535),I=(j>>>16)+(this.i(S)>>>16)+(v.i(S)>>>16);x=I>>>16,j&=65535,I&=65535,_[S]=I<<16|j}return new o(_,_[_.length-1]&-2147483648?-1:0)};function T(v,m){return v.add(P(m))}t.j=function(v){if(A(this)||A(v))return y;if(R(this))return R(v)?P(this).j(P(v)):P(P(this).j(v));if(R(v))return P(this.j(P(v)));if(0>this.l(E)&&0>v.l(E))return h(this.m()*v.m());for(var m=this.g.length+v.g.length,_=[],x=0;x<2*m;x++)_[x]=0;for(x=0;x<this.g.length;x++)for(var S=0;S<v.g.length;S++){var j=this.i(x)>>>16,I=this.i(x)&65535,xe=v.i(S)>>>16,vt=v.i(S)&65535;_[2*x+2*S]+=I*vt,k(_,2*x+2*S),_[2*x+2*S+1]+=j*vt,k(_,2*x+2*S+1),_[2*x+2*S+1]+=I*xe,k(_,2*x+2*S+1),_[2*x+2*S+2]+=j*xe,k(_,2*x+2*S+2)}for(x=0;x<m;x++)_[x]=_[2*x+1]<<16|_[2*x];for(x=m;x<2*m;x++)_[x]=0;return new o(_,0)};function k(v,m){for(;(v[m]&65535)!=v[m];)v[m+1]+=v[m]>>>16,v[m]&=65535,m++}function C(v,m){this.g=v,this.h=m}function b(v,m){if(A(m))throw Error("division by zero");if(A(v))return new C(y,y);if(R(v))return m=b(P(v),m),new C(P(m.g),P(m.h));if(R(m))return m=b(v,P(m)),new C(P(m.g),m.h);if(30<v.g.length){if(R(v)||R(m))throw Error("slowDivide_ only works with positive integers.");for(var _=g,x=m;0>=x.l(v);)_=D(_),x=D(x);var S=F(_,1),j=F(x,1);for(x=F(x,2),_=F(_,2);!A(x);){var I=j.add(x);0>=I.l(v)&&(S=S.add(_),j=I),x=F(x,1),_=F(_,1)}return m=T(v,S.j(m)),new C(S,m)}for(S=y;0<=v.l(m);){for(_=Math.max(1,Math.floor(v.m()/m.m())),x=Math.ceil(Math.log(_)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),j=h(_),I=j.j(m);R(I)||0<I.l(v);)_-=x,j=h(_),I=j.j(m);A(j)&&(j=g),S=S.add(j),v=T(v,I)}return new C(S,v)}t.A=function(v){return b(this,v).h},t.and=function(v){for(var m=Math.max(this.g.length,v.g.length),_=[],x=0;x<m;x++)_[x]=this.i(x)&v.i(x);return new o(_,this.h&v.h)},t.or=function(v){for(var m=Math.max(this.g.length,v.g.length),_=[],x=0;x<m;x++)_[x]=this.i(x)|v.i(x);return new o(_,this.h|v.h)},t.xor=function(v){for(var m=Math.max(this.g.length,v.g.length),_=[],x=0;x<m;x++)_[x]=this.i(x)^v.i(x);return new o(_,this.h^v.h)};function D(v){for(var m=v.g.length+1,_=[],x=0;x<m;x++)_[x]=v.i(x)<<1|v.i(x-1)>>>31;return new o(_,v.h)}function F(v,m){var _=m>>5;m%=32;for(var x=v.g.length-_,S=[],j=0;j<x;j++)S[j]=0<m?v.i(j+_)>>>m|v.i(j+_+1)<<32-m:v.i(j+_);return new o(S,v.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Cv=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,ir=o}).apply(typeof Jm<"u"?Jm:typeof self<"u"?self:typeof window<"u"?window:{});var oa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Av,Ss,Pv,Ia,Hc,jv,Rv,Nv;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof oa=="object"&&oa];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var f=r;a=a.split(".");for(var w=0;w<a.length-1;w++){var V=a[w];if(!(V in f))break e;f=f[V]}a=a[a.length-1],w=f[a],d=d(w),d!=w&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function s(a,d){a instanceof String&&(a+="");var f=0,w=!1,V={next:function(){if(!w&&f<a.length){var O=f++;return{value:d(O,a[O]),done:!1}}return w=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}i("Array.prototype.values",function(a){return a||function(){return s(this,function(d,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},u=this||self;function c(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function h(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function p(a,d,f){return a.call.apply(a.bind,arguments)}function y(a,d,f){if(!a)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,w),a.apply(d,V)}}return function(){return a.apply(d,arguments)}}function g(a,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:y,g.apply(null,arguments)}function E(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var w=f.slice();return w.push.apply(w,arguments),a.apply(this,w)}}function A(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(w,V,O){for(var W=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)W[_e-2]=arguments[_e];return d.prototype[V].apply(w,W)}}function R(a){const d=a.length;if(0<d){const f=Array(d);for(let w=0;w<d;w++)f[w]=a[w];return f}return[]}function P(a,d){for(let f=1;f<arguments.length;f++){const w=arguments[f];if(c(w)){const V=a.length||0,O=w.length||0;a.length=V+O;for(let W=0;W<O;W++)a[V+W]=w[W]}else a.push(w)}}class T{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function k(a){return/^[\s\xa0]*$/.test(a)}function C(){var a=u.navigator;return a&&(a=a.userAgent)?a:""}function b(a){return b[" "](a),a}b[" "]=function(){};var D=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function F(a,d,f){for(const w in a)d.call(f,a[w],w,a)}function v(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function m(a){const d={};for(const f in a)d[f]=a[f];return d}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(a,d){let f,w;for(let V=1;V<arguments.length;V++){w=arguments[V];for(f in w)a[f]=w[f];for(let O=0;O<_.length;O++)f=_[O],Object.prototype.hasOwnProperty.call(w,f)&&(a[f]=w[f])}}function S(a){var d=1;a=a.split(":");const f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function j(a){u.setTimeout(()=>{throw a},0)}function I(){var a=X;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class xe{constructor(){this.h=this.g=null}add(d,f){const w=vt.get();w.set(d,f),this.h?this.h.next=w:this.g=w,this.h=w}}var vt=new T(()=>new Ut,a=>a.reset());class Ut{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Me,U=!1,X=new xe,re=()=>{const a=u.Promise.resolve(void 0);Me=()=>{a.then(ye)}};var ye=()=>{for(var a;a=I();){try{a.h.call(a.g)}catch(f){j(f)}var d=vt;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}U=!1};function me(){this.s=this.s,this.C=this.C}me.prototype.s=!1,me.prototype.ma=function(){this.s||(this.s=!0,this.N())},me.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function we(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}we.prototype.h=function(){this.defaultPrevented=!0};var Ct=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};u.addEventListener("test",f,d),u.removeEventListener("test",f,d)}catch{}return a}();function _t(a,d){if(we.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,w=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(D){e:{try{b(d.nodeName);var V=!0;break e}catch{}V=!1}V||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:H[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&_t.aa.h.call(this)}}A(_t,we);var H={2:"touch",3:"pen",4:"mouse"};_t.prototype.h=function(){_t.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var he="closure_listenable_"+(1e6*Math.random()|0),_r=0;function N(a,d,f,w,V){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!w,this.ha=V,this.key=++_r,this.da=this.fa=!1}function M(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function q(a){this.src=a,this.g={},this.h=0}q.prototype.add=function(a,d,f,w,V){var O=a.toString();a=this.g[O],a||(a=this.g[O]=[],this.h++);var W=Q(a,d,w,V);return-1<W?(d=a[W],f||(d.fa=!1)):(d=new N(d,this.src,O,!!w,V),d.fa=f,a.push(d)),d};function Z(a,d){var f=d.type;if(f in a.g){var w=a.g[f],V=Array.prototype.indexOf.call(w,d,void 0),O;(O=0<=V)&&Array.prototype.splice.call(w,V,1),O&&(M(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Q(a,d,f,w){for(var V=0;V<a.length;++V){var O=a[V];if(!O.da&&O.listener==d&&O.capture==!!f&&O.ha==w)return V}return-1}var te="closure_lm_"+(1e6*Math.random()|0),oe={};function Be(a,d,f,w,V){if(Array.isArray(d)){for(var O=0;O<d.length;O++)Be(a,d[O],f,w,V);return null}return f=Dh(f),a&&a[he]?a.K(d,f,h(w)?!!w.capture:!1,V):Ye(a,d,f,!1,w,V)}function Ye(a,d,f,w,V,O){if(!d)throw Error("Invalid event type");var W=h(V)?!!V.capture:!!V,_e=un(a);if(_e||(a[te]=_e=new q(a)),f=_e.add(d,f,w,W,O),f.proxy)return f;if(w=Yt(),f.proxy=w,w.src=a,w.listener=f,a.addEventListener)Ct||(V=W),V===void 0&&(V=!1),a.addEventListener(d.toString(),w,V);else if(a.attachEvent)a.attachEvent(ln(d.toString()),w);else if(a.addListener&&a.removeListener)a.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Yt(){function a(f){return d.call(a.src,a.listener,f)}const d=xr;return a}function $e(a,d,f,w,V){if(Array.isArray(d))for(var O=0;O<d.length;O++)$e(a,d[O],f,w,V);else w=h(w)?!!w.capture:!!w,f=Dh(f),a&&a[he]?(a=a.i,d=String(d).toString(),d in a.g&&(O=a.g[d],f=Q(O,f,w,V),-1<f&&(M(O[f]),Array.prototype.splice.call(O,f,1),O.length==0&&(delete a.g[d],a.h--)))):a&&(a=un(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Q(d,f,w,V)),(f=-1<a?d[a]:null)&&xt(f))}function xt(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[he])Z(d.i,a);else{var f=a.type,w=a.proxy;d.removeEventListener?d.removeEventListener(f,w,a.capture):d.detachEvent?d.detachEvent(ln(f),w):d.addListener&&d.removeListener&&d.removeListener(w),(f=un(d))?(Z(f,a),f.h==0&&(f.src=null,d[te]=null)):M(a)}}}function ln(a){return a in oe?oe[a]:oe[a]="on"+a}function xr(a,d){if(a.da)a=!0;else{d=new _t(d,this);var f=a.listener,w=a.ha||a.src;a.fa&&xt(a),a=f.call(w,d)}return a}function un(a){return a=a[te],a instanceof q?a:null}var Yi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dh(a){return typeof a=="function"?a:(a[Yi]||(a[Yi]=function(d){return a.handleEvent(d)}),a[Yi])}function lt(){me.call(this),this.i=new q(this),this.M=this,this.F=null}A(lt,me),lt.prototype[he]=!0,lt.prototype.removeEventListener=function(a,d,f,w){$e(this,a,d,f,w)};function wt(a,d){var f,w=a.F;if(w)for(f=[];w;w=w.F)f.push(w);if(a=a.M,w=d.type||d,typeof d=="string")d=new we(d,a);else if(d instanceof we)d.target=d.target||a;else{var V=d;d=new we(w,a),x(d,V)}if(V=!0,f)for(var O=f.length-1;0<=O;O--){var W=d.g=f[O];V=Co(W,w,!0,d)&&V}if(W=d.g=a,V=Co(W,w,!0,d)&&V,V=Co(W,w,!1,d)&&V,f)for(O=0;O<f.length;O++)W=d.g=f[O],V=Co(W,w,!1,d)&&V}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],w=0;w<f.length;w++)M(f[w]);delete a.g[d],a.h--}}this.F=null},lt.prototype.K=function(a,d,f,w){return this.i.add(String(a),d,!1,f,w)},lt.prototype.L=function(a,d,f,w){return this.i.add(String(a),d,!0,f,w)};function Co(a,d,f,w){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var V=!0,O=0;O<d.length;++O){var W=d[O];if(W&&!W.da&&W.capture==f){var _e=W.listener,tt=W.ha||W.src;W.fa&&Z(a.i,W),V=_e.call(tt,w)!==!1&&V}}return V&&!w.defaultPrevented}function Vh(a,d,f){if(typeof a=="function")f&&(a=g(a,f));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:u.setTimeout(a,d||0)}function Fh(a){a.g=Vh(()=>{a.g=null,a.i&&(a.i=!1,Fh(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class f_ extends me{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Fh(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xi(a){me.call(this),this.h=a,this.g={}}A(Xi,me);var Oh=[];function Mh(a){F(a.g,function(d,f){this.g.hasOwnProperty(f)&&xt(d)},a),a.g={}}Xi.prototype.N=function(){Xi.aa.N.call(this),Mh(this)},Xi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yl=u.JSON.stringify,m_=u.JSON.parse,p_=class{stringify(a){return u.JSON.stringify(a,void 0)}parse(a){return u.JSON.parse(a,void 0)}};function Xl(){}Xl.prototype.h=null;function Lh(a){return a.h||(a.h=a.i())}function zh(){}var Ji={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Jl(){we.call(this,"d")}A(Jl,we);function Zl(){we.call(this,"c")}A(Zl,we);var wr={},Uh=null;function Ao(){return Uh=Uh||new lt}wr.La="serverreachability";function Bh(a){we.call(this,wr.La,a)}A(Bh,we);function Zi(a){const d=Ao();wt(d,new Bh(d))}wr.STAT_EVENT="statevent";function $h(a,d){we.call(this,wr.STAT_EVENT,a),this.stat=d}A($h,we);function Et(a){const d=Ao();wt(d,new $h(d,a))}wr.Ma="timingevent";function Hh(a,d){we.call(this,wr.Ma,a),this.size=d}A(Hh,we);function es(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){a()},d)}function ts(){this.g=!0}ts.prototype.xa=function(){this.g=!1};function g_(a,d,f,w,V,O){a.info(function(){if(a.g)if(O)for(var W="",_e=O.split("&"),tt=0;tt<_e.length;tt++){var pe=_e[tt].split("=");if(1<pe.length){var ut=pe[0];pe=pe[1];var ct=ut.split("_");W=2<=ct.length&&ct[1]=="type"?W+(ut+"="+pe+"&"):W+(ut+"=redacted&")}}else W=null;else W=O;return"XMLHTTP REQ ("+w+") [attempt "+V+"]: "+d+`
`+f+`
`+W})}function y_(a,d,f,w,V,O,W){a.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+V+"]: "+d+`
`+f+`
`+O+" "+W})}function Yr(a,d,f,w){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+__(a,f)+(w?" "+w:"")})}function v_(a,d){a.info(function(){return"TIMEOUT: "+d})}ts.prototype.info=function(){};function __(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var w=f[a];if(!(2>w.length)){var V=w[1];if(Array.isArray(V)&&!(1>V.length)){var O=V[0];if(O!="noop"&&O!="stop"&&O!="close")for(var W=1;W<V.length;W++)V[W]=""}}}}return Yl(f)}catch{return d}}var Po={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},qh={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},eu;function jo(){}A(jo,Xl),jo.prototype.g=function(){return new XMLHttpRequest},jo.prototype.i=function(){return{}},eu=new jo;function On(a,d,f,w){this.j=a,this.i=d,this.l=f,this.R=w||1,this.U=new Xi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Wh}function Wh(){this.i=null,this.g="",this.h=!1}var Gh={},tu={};function nu(a,d,f){a.L=1,a.v=Do(En(d)),a.m=f,a.P=!0,Kh(a,null)}function Kh(a,d){a.F=Date.now(),Ro(a),a.A=En(a.v);var f=a.A,w=a.R;Array.isArray(w)||(w=[String(w)]),uf(f.i,"t",w),a.C=0,f=a.j.J,a.h=new Wh,a.g=Cf(a.j,f?d:null,!a.m),0<a.O&&(a.M=new f_(g(a.Y,a,a.g),a.O)),d=a.U,f=a.g,w=a.ca;var V="readystatechange";Array.isArray(V)||(V&&(Oh[0]=V.toString()),V=Oh);for(var O=0;O<V.length;O++){var W=Be(f,V[O],w||d.handleEvent,!1,d.h||d);if(!W)break;d.g[W.key]=W}d=a.H?m(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),Zi(),g_(a.i,a.u,a.A,a.l,a.R,a.m)}On.prototype.ca=function(a){a=a.target;const d=this.M;d&&kn(a)==3?d.j():this.Y(a)},On.prototype.Y=function(a){try{if(a==this.g)e:{const ct=kn(this.g);var d=this.g.Ba();const Zr=this.g.Z();if(!(3>ct)&&(ct!=3||this.g&&(this.h.h||this.g.oa()||gf(this.g)))){this.J||ct!=4||d==7||(d==8||0>=Zr?Zi(3):Zi(2)),ru(this);var f=this.g.Z();this.X=f;t:if(Qh(this)){var w=gf(this.g);a="";var V=w.length,O=kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Er(this),ns(this);var W="";break t}this.h.i=new u.TextDecoder}for(d=0;d<V;d++)this.h.h=!0,a+=this.h.i.decode(w[d],{stream:!(O&&d==V-1)});w.length=0,this.h.g+=a,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=f==200,y_(this.i,this.u,this.A,this.l,this.R,ct,f),this.o){if(this.T&&!this.K){t:{if(this.g){var _e,tt=this.g;if((_e=tt.g?tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(_e)){var pe=_e;break t}}pe=null}if(f=pe)Yr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,iu(this,f);else{this.o=!1,this.s=3,Et(12),Er(this),ns(this);break e}}if(this.P){f=!0;let Xt;for(;!this.J&&this.C<W.length;)if(Xt=x_(this,W),Xt==tu){ct==4&&(this.s=4,Et(14),f=!1),Yr(this.i,this.l,null,"[Incomplete Response]");break}else if(Xt==Gh){this.s=4,Et(15),Yr(this.i,this.l,W,"[Invalid Chunk]"),f=!1;break}else Yr(this.i,this.l,Xt,null),iu(this,Xt);if(Qh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||W.length!=0||this.h.h||(this.s=1,Et(16),f=!1),this.o=this.o&&f,!f)Yr(this.i,this.l,W,"[Invalid Chunked Response]"),Er(this),ns(this);else if(0<W.length&&!this.W){this.W=!0;var ut=this.j;ut.g==this&&ut.ba&&!ut.M&&(ut.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),cu(ut),ut.M=!0,Et(11))}}else Yr(this.i,this.l,W,null),iu(this,W);ct==4&&Er(this),this.o&&!this.J&&(ct==4?kf(this.j,this):(this.o=!1,Ro(this)))}else O_(this.g),f==400&&0<W.indexOf("Unknown SID")?(this.s=3,Et(12)):(this.s=0,Et(13)),Er(this),ns(this)}}}catch{}finally{}};function Qh(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function x_(a,d){var f=a.C,w=d.indexOf(`
`,f);return w==-1?tu:(f=Number(d.substring(f,w)),isNaN(f)?Gh:(w+=1,w+f>d.length?tu:(d=d.slice(w,w+f),a.C=w+f,d)))}On.prototype.cancel=function(){this.J=!0,Er(this)};function Ro(a){a.S=Date.now()+a.I,Yh(a,a.I)}function Yh(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=es(g(a.ba,a),d)}function ru(a){a.B&&(u.clearTimeout(a.B),a.B=null)}On.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(v_(this.i,this.A),this.L!=2&&(Zi(),Et(17)),Er(this),this.s=2,ns(this)):Yh(this,this.S-a)};function ns(a){a.j.G==0||a.J||kf(a.j,a)}function Er(a){ru(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,Mh(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function iu(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||su(f.h,a))){if(!a.K&&su(f.h,a)&&f.G==3){try{var w=f.Da.g.parse(d)}catch{w=null}if(Array.isArray(w)&&w.length==3){var V=w;if(V[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)zo(f),Mo(f);else break e;uu(f),Et(18)}}else f.za=V[1],0<f.za-f.T&&37500>V[2]&&f.F&&f.v==0&&!f.C&&(f.C=es(g(f.Za,f),6e3));if(1>=Zh(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Sr(f,11)}else if((a.K||f.g==a)&&zo(f),!k(d))for(V=f.Da.g.parse(d),d=0;d<V.length;d++){let pe=V[d];if(f.T=pe[0],pe=pe[1],f.G==2)if(pe[0]=="c"){f.K=pe[1],f.ia=pe[2];const ut=pe[3];ut!=null&&(f.la=ut,f.j.info("VER="+f.la));const ct=pe[4];ct!=null&&(f.Aa=ct,f.j.info("SVER="+f.Aa));const Zr=pe[5];Zr!=null&&typeof Zr=="number"&&0<Zr&&(w=1.5*Zr,f.L=w,f.j.info("backChannelRequestTimeoutMs_="+w)),w=f;const Xt=a.g;if(Xt){const Bo=Xt.g?Xt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bo){var O=w.h;O.g||Bo.indexOf("spdy")==-1&&Bo.indexOf("quic")==-1&&Bo.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(ou(O,O.h),O.h=null))}if(w.D){const du=Xt.g?Xt.g.getResponseHeader("X-HTTP-Session-Id"):null;du&&(w.ya=du,ke(w.I,w.D,du))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),w=f;var W=a;if(w.qa=If(w,w.J?w.ia:null,w.W),W.K){ef(w.h,W);var _e=W,tt=w.L;tt&&(_e.I=tt),_e.B&&(ru(_e),Ro(_e)),w.g=W}else wf(w);0<f.i.length&&Lo(f)}else pe[0]!="stop"&&pe[0]!="close"||Sr(f,7);else f.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?Sr(f,7):lu(f):pe[0]!="noop"&&f.l&&f.l.ta(pe),f.v=0)}}Zi(4)}catch{}}var w_=class{constructor(a,d){this.g=a,this.map=d}};function Xh(a){this.l=a||10,u.PerformanceNavigationTiming?(a=u.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Jh(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Zh(a){return a.h?1:a.g?a.g.size:0}function su(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function ou(a,d){a.g?a.g.add(d):a.h=d}function ef(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}Xh.prototype.cancel=function(){if(this.i=tf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function tf(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.D);return d}return R(a.i)}function E_(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var d=[],f=a.length,w=0;w<f;w++)d.push(a[w]);return d}d=[],f=0;for(w in a)d[f++]=a[w];return d}function k_(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(const w in a)d[f++]=w;return d}}}function nf(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=k_(a),w=E_(a),V=w.length,O=0;O<V;O++)d.call(void 0,w[O],f&&f[O],a)}var rf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function S_(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var w=a[f].indexOf("="),V=null;if(0<=w){var O=a[f].substring(0,w);V=a[f].substring(w+1)}else O=a[f];d(O,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function kr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof kr){this.h=a.h,No(this,a.j),this.o=a.o,this.g=a.g,bo(this,a.s),this.l=a.l;var d=a.i,f=new ss;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),sf(this,f),this.m=a.m}else a&&(d=String(a).match(rf))?(this.h=!1,No(this,d[1]||"",!0),this.o=rs(d[2]||""),this.g=rs(d[3]||"",!0),bo(this,d[4]),this.l=rs(d[5]||"",!0),sf(this,d[6]||"",!0),this.m=rs(d[7]||"")):(this.h=!1,this.i=new ss(null,this.h))}kr.prototype.toString=function(){var a=[],d=this.j;d&&a.push(is(d,of,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(is(d,of,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(is(f,f.charAt(0)=="/"?C_:I_,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",is(f,P_)),a.join("")};function En(a){return new kr(a)}function No(a,d,f){a.j=f?rs(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function bo(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function sf(a,d,f){d instanceof ss?(a.i=d,j_(a.i,a.h)):(f||(d=is(d,A_)),a.i=new ss(d,a.h))}function ke(a,d,f){a.i.set(d,f)}function Do(a){return ke(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function rs(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function is(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,T_),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function T_(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var of=/[#\/\?@]/g,I_=/[#\?:]/g,C_=/[#\?]/g,A_=/[#\?@]/g,P_=/#/g;function ss(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Mn(a){a.g||(a.g=new Map,a.h=0,a.i&&S_(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=ss.prototype,t.add=function(a,d){Mn(this),this.i=null,a=Xr(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function af(a,d){Mn(a),d=Xr(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function lf(a,d){return Mn(a),d=Xr(a,d),a.g.has(d)}t.forEach=function(a,d){Mn(this),this.g.forEach(function(f,w){f.forEach(function(V){a.call(d,V,w,this)},this)},this)},t.na=function(){Mn(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let w=0;w<d.length;w++){const V=a[w];for(let O=0;O<V.length;O++)f.push(d[w])}return f},t.V=function(a){Mn(this);let d=[];if(typeof a=="string")lf(this,a)&&(d=d.concat(this.g.get(Xr(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return Mn(this),this.i=null,a=Xr(this,a),lf(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function uf(a,d,f){af(a,d),0<f.length&&(a.i=null,a.g.set(Xr(a,d),R(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var w=d[f];const O=encodeURIComponent(String(w)),W=this.V(w);for(w=0;w<W.length;w++){var V=O;W[w]!==""&&(V+="="+encodeURIComponent(String(W[w]))),a.push(V)}}return this.i=a.join("&")};function Xr(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function j_(a,d){d&&!a.j&&(Mn(a),a.i=null,a.g.forEach(function(f,w){var V=w.toLowerCase();w!=V&&(af(this,w),uf(this,V,f))},a)),a.j=d}function R_(a,d){const f=new ts;if(u.Image){const w=new Image;w.onload=E(Ln,f,"TestLoadImage: loaded",!0,d,w),w.onerror=E(Ln,f,"TestLoadImage: error",!1,d,w),w.onabort=E(Ln,f,"TestLoadImage: abort",!1,d,w),w.ontimeout=E(Ln,f,"TestLoadImage: timeout",!1,d,w),u.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=a}else d(!1)}function N_(a,d){const f=new ts,w=new AbortController,V=setTimeout(()=>{w.abort(),Ln(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:w.signal}).then(O=>{clearTimeout(V),O.ok?Ln(f,"TestPingServer: ok",!0,d):Ln(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(V),Ln(f,"TestPingServer: error",!1,d)})}function Ln(a,d,f,w,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),w(f)}catch{}}function b_(){this.g=new p_}function D_(a,d,f){const w=f||"";try{nf(a,function(V,O){let W=V;h(V)&&(W=Yl(V)),d.push(w+O+"="+encodeURIComponent(W))})}catch(V){throw d.push(w+"type="+encodeURIComponent("_badmap")),V}}function Vo(a){this.l=a.Ub||null,this.j=a.eb||!1}A(Vo,Xl),Vo.prototype.g=function(){return new Fo(this.l,this.j)},Vo.prototype.i=function(a){return function(){return a}}({});function Fo(a,d){lt.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Fo,lt),t=Fo.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,as(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||u).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,os(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,as(this)),this.g&&(this.readyState=3,as(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;cf(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function cf(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?os(this):as(this),this.readyState==3&&cf(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,os(this))},t.Qa=function(a){this.g&&(this.response=a,os(this))},t.ga=function(){this.g&&os(this)};function os(a){a.readyState=4,a.l=null,a.j=null,a.v=null,as(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function as(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Fo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function df(a){let d="";return F(a,function(f,w){d+=w,d+=":",d+=f,d+=`\r
`}),d}function au(a,d,f){e:{for(w in f){var w=!1;break e}w=!0}w||(f=df(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):ke(a,d,f))}function De(a){lt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(De,lt);var V_=/^https?$/i,F_=["POST","PUT"];t=De.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():eu.g(),this.v=this.o?Lh(this.o):Lh(eu),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(O){hf(this,O);return}if(a=f||"",f=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var V in w)f.set(V,w[V]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const O of w.keys())f.set(O,w.get(O));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(f.keys()).find(O=>O.toLowerCase()=="content-type"),V=u.FormData&&a instanceof u.FormData,!(0<=Array.prototype.indexOf.call(F_,d,void 0))||w||V||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,W]of f)this.g.setRequestHeader(O,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{pf(this),this.u=!0,this.g.send(a),this.u=!1}catch(O){hf(this,O)}};function hf(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,ff(a),Oo(a)}function ff(a){a.A||(a.A=!0,wt(a,"complete"),wt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,wt(this,"complete"),wt(this,"abort"),Oo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oo(this,!0)),De.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?mf(this):this.bb())},t.bb=function(){mf(this)};function mf(a){if(a.h&&typeof o<"u"&&(!a.v[1]||kn(a)!=4||a.Z()!=2)){if(a.u&&kn(a)==4)Vh(a.Ea,0,a);else if(wt(a,"readystatechange"),kn(a)==4){a.h=!1;try{const W=a.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var w;if(w=W===0){var V=String(a.D).match(rf)[1]||null;!V&&u.self&&u.self.location&&(V=u.self.location.protocol.slice(0,-1)),w=!V_.test(V?V.toLowerCase():"")}f=w}if(f)wt(a,"complete"),wt(a,"success");else{a.m=6;try{var O=2<kn(a)?a.g.statusText:""}catch{O=""}a.l=O+" ["+a.Z()+"]",ff(a)}}finally{Oo(a)}}}}function Oo(a,d){if(a.g){pf(a);const f=a.g,w=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||wt(a,"ready");try{f.onreadystatechange=w}catch{}}}function pf(a){a.I&&(u.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function kn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<kn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),m_(d)}};function gf(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function O_(a){const d={};a=(a.g&&2<=kn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<a.length;w++){if(k(a[w]))continue;var f=S(a[w]);const V=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const O=d[V]||[];d[V]=O,O.push(f)}v(d,function(w){return w.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ls(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function yf(a){this.Aa=0,this.i=[],this.j=new ts,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ls("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ls("baseRetryDelayMs",5e3,a),this.cb=ls("retryDelaySeedMs",1e4,a),this.Wa=ls("forwardChannelMaxRetries",2,a),this.wa=ls("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Xh(a&&a.concurrentRequestLimit),this.Da=new b_,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=yf.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,w){Et(0),this.W=a,this.H=d||{},f&&w!==void 0&&(this.H.OSID=f,this.H.OAID=w),this.F=this.X,this.I=If(this,null,this.W),Lo(this)};function lu(a){if(vf(a),a.G==3){var d=a.U++,f=En(a.I);if(ke(f,"SID",a.K),ke(f,"RID",d),ke(f,"TYPE","terminate"),us(a,f),d=new On(a,a.j,d),d.L=2,d.v=Do(En(f)),f=!1,u.navigator&&u.navigator.sendBeacon)try{f=u.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&u.Image&&(new Image().src=d.v,f=!0),f||(d.g=Cf(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Ro(d)}Tf(a)}function Mo(a){a.g&&(cu(a),a.g.cancel(),a.g=null)}function vf(a){Mo(a),a.u&&(u.clearTimeout(a.u),a.u=null),zo(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&u.clearTimeout(a.s),a.s=null)}function Lo(a){if(!Jh(a.h)&&!a.s){a.s=!0;var d=a.Ga;Me||re(),U||(Me(),U=!0),X.add(d,a),a.B=0}}function M_(a,d){return Zh(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=es(g(a.Ga,a,d),Sf(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const V=new On(this,this.j,a);let O=this.o;if(this.S&&(O?(O=m(O),x(O,this.S)):O=this.S),this.m!==null||this.O||(V.H=O,O=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var w=this.i[f];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(d+=w,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=xf(this,V,d),f=En(this.I),ke(f,"RID",a),ke(f,"CVER",22),this.D&&ke(f,"X-HTTP-Session-Id",this.D),us(this,f),O&&(this.O?d="headers="+encodeURIComponent(String(df(O)))+"&"+d:this.m&&au(f,this.m,O)),ou(this.h,V),this.Ua&&ke(f,"TYPE","init"),this.P?(ke(f,"$req",d),ke(f,"SID","null"),V.T=!0,nu(V,f,null)):nu(V,f,d),this.G=2}}else this.G==3&&(a?_f(this,a):this.i.length==0||Jh(this.h)||_f(this))};function _f(a,d){var f;d?f=d.l:f=a.U++;const w=En(a.I);ke(w,"SID",a.K),ke(w,"RID",f),ke(w,"AID",a.T),us(a,w),a.m&&a.o&&au(w,a.m,a.o),f=new On(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=xf(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),ou(a.h,f),nu(f,w,d)}function us(a,d){a.H&&F(a.H,function(f,w){ke(d,w,f)}),a.l&&nf({},function(f,w){ke(d,w,f)})}function xf(a,d,f){f=Math.min(a.i.length,f);var w=a.l?g(a.l.Na,a.l,a):null;e:{var V=a.i;let O=-1;for(;;){const W=["count="+f];O==-1?0<f?(O=V[0].g,W.push("ofs="+O)):O=0:W.push("ofs="+O);let _e=!0;for(let tt=0;tt<f;tt++){let pe=V[tt].g;const ut=V[tt].map;if(pe-=O,0>pe)O=Math.max(0,V[tt].g-100),_e=!1;else try{D_(ut,W,"req"+pe+"_")}catch{w&&w(ut)}}if(_e){w=W.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,w}function wf(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;Me||re(),U||(Me(),U=!0),X.add(d,a),a.v=0}}function uu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=es(g(a.Fa,a),Sf(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Ef(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=es(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Et(10),Mo(this),Ef(this))};function cu(a){a.A!=null&&(u.clearTimeout(a.A),a.A=null)}function Ef(a){a.g=new On(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=En(a.qa);ke(d,"RID","rpc"),ke(d,"SID",a.K),ke(d,"AID",a.T),ke(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&ke(d,"TO",a.ja),ke(d,"TYPE","xmlhttp"),us(a,d),a.m&&a.o&&au(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=Do(En(d)),f.m=null,f.P=!0,Kh(f,a)}t.Za=function(){this.C!=null&&(this.C=null,Mo(this),uu(this),Et(19))};function zo(a){a.C!=null&&(u.clearTimeout(a.C),a.C=null)}function kf(a,d){var f=null;if(a.g==d){zo(a),cu(a),a.g=null;var w=2}else if(su(a.h,d))f=d.D,ef(a.h,d),w=1;else return;if(a.G!=0){if(d.o)if(w==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var V=a.B;w=Ao(),wt(w,new Hh(w,f)),Lo(a)}else wf(a);else if(V=d.s,V==3||V==0&&0<d.X||!(w==1&&M_(a,d)||w==2&&uu(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),V){case 1:Sr(a,5);break;case 4:Sr(a,10);break;case 3:Sr(a,6);break;default:Sr(a,2)}}}function Sf(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function Sr(a,d){if(a.j.info("Error code "+d),d==2){var f=g(a.fb,a),w=a.Xa;const V=!w;w=new kr(w||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||No(w,"https"),Do(w),V?R_(w.toString(),f):N_(w.toString(),f)}else Et(2);a.G=0,a.l&&a.l.sa(d),Tf(a),vf(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function Tf(a){if(a.G=0,a.ka=[],a.l){const d=tf(a.h);(d.length!=0||a.i.length!=0)&&(P(a.ka,d),P(a.ka,a.i),a.h.i.length=0,R(a.i),a.i.length=0),a.l.ra()}}function If(a,d,f){var w=f instanceof kr?En(f):new kr(f);if(w.g!="")d&&(w.g=d+"."+w.g),bo(w,w.s);else{var V=u.location;w=V.protocol,d=d?d+"."+V.hostname:V.hostname,V=+V.port;var O=new kr(null);w&&No(O,w),d&&(O.g=d),V&&bo(O,V),f&&(O.l=f),w=O}return f=a.D,d=a.ya,f&&d&&ke(w,f,d),ke(w,"VER",a.la),us(a,w),w}function Cf(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new De(new Vo({eb:f})):new De(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Af(){}t=Af.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Uo(){}Uo.prototype.g=function(a,d){return new Dt(a,d)};function Dt(a,d){lt.call(this),this.g=new yf(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!k(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!k(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new Jr(this)}A(Dt,lt),Dt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dt.prototype.close=function(){lu(this.g)},Dt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=Yl(a),a=f);d.i.push(new w_(d.Ya++,a)),d.G==3&&Lo(d)},Dt.prototype.N=function(){this.g.l=null,delete this.j,lu(this.g),delete this.g,Dt.aa.N.call(this)};function Pf(a){Jl.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}A(Pf,Jl);function jf(){Zl.call(this),this.status=1}A(jf,Zl);function Jr(a){this.g=a}A(Jr,Af),Jr.prototype.ua=function(){wt(this.g,"a")},Jr.prototype.ta=function(a){wt(this.g,new Pf(a))},Jr.prototype.sa=function(a){wt(this.g,new jf)},Jr.prototype.ra=function(){wt(this.g,"b")},Uo.prototype.createWebChannel=Uo.prototype.g,Dt.prototype.send=Dt.prototype.o,Dt.prototype.open=Dt.prototype.m,Dt.prototype.close=Dt.prototype.close,Nv=function(){return new Uo},Rv=function(){return Ao()},jv=wr,Hc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Po.NO_ERROR=0,Po.TIMEOUT=8,Po.HTTP_ERROR=6,Ia=Po,qh.COMPLETE="complete",Pv=qh,zh.EventType=Ji,Ji.OPEN="a",Ji.CLOSE="b",Ji.ERROR="c",Ji.MESSAGE="d",lt.prototype.listen=lt.prototype.K,Ss=zh,De.prototype.listenOnce=De.prototype.L,De.prototype.getLastError=De.prototype.Ka,De.prototype.getLastErrorCode=De.prototype.Ba,De.prototype.getStatus=De.prototype.Z,De.prototype.getResponseJson=De.prototype.Oa,De.prototype.getResponseText=De.prototype.oa,De.prototype.send=De.prototype.ea,De.prototype.setWithCredentials=De.prototype.Ha,Av=De}).apply(typeof oa<"u"?oa:typeof self<"u"?self:typeof window<"u"?window:{});const Zm="@firebase/firestore",ep="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mt.UNAUTHENTICATED=new mt(null),mt.GOOGLE_CREDENTIALS=new mt("google-credentials-uid"),mt.FIRST_PARTY=new mt("first-party-uid"),mt.MOCK_USER=new mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qi="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr=new wv("@firebase/firestore");function ti(){return Lr.logLevel}function G(t,...e){if(Lr.logLevel<=de.DEBUG){const n=e.map(rh);Lr.debug(`Firestore (${qi}): ${t}`,...n)}}function Dn(t,...e){if(Lr.logLevel<=de.ERROR){const n=e.map(rh);Lr.error(`Firestore (${qi}): ${t}`,...n)}}function ur(t,...e){if(Lr.logLevel<=de.WARN){const n=e.map(rh);Lr.warn(`Firestore (${qi}): ${t}`,...n)}}function rh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,bv(t,r,n)}function bv(t,e,n){let r=`FIRESTORE (${qi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Dn(r),new Error(r)}function ge(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||bv(e,i,r)}function ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends Hi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class JE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(mt.UNAUTHENTICATED))}shutdown(){}}class ZE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ek{constructor(e){this.t=e,this.currentUser=mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ge(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new sr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new sr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},u=c=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new sr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ge(typeof r.accessToken=="string",31837,{l:r}),new Dv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string",2055,{h:e}),new mt(e)}}class tk{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=mt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class nk{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new tk(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rk{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,VE(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ge(this.o===void 0,3512);const r=s=>{s.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new tp(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ge(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new tp(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=ik(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function ae(t,e){return t<e?-1:t>e?1:0}function qc(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return ae(r,i);{const s=Vv(),o=sk(s.encode(np(t,n)),s.encode(np(e,n)));return o!==0?o:ae(r,i)}}n+=r>65535?2:1}return ae(t.length,e.length)}function np(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function sk(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ae(t[n],e[n]);return ae(t.length,e.length)}function Vi(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp="__name__";class hn{constructor(e,n,r){n===void 0?n=0:n>e.length&&ee(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ee(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return hn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof hn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=hn.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return ae(e.length,n.length)}static compareSegments(e,n){const r=hn.isNumericId(e),i=hn.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?hn.extractNumericId(e).compare(hn.extractNumericId(n)):qc(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ir.fromString(e.substring(4,e.length-2))}}class Te extends hn{construct(e,n,r){return new Te(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Te(n)}static emptyPath(){return new Te([])}}const ok=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class it extends hn{construct(e,n,r){return new it(e,n,r)}static isValidIdentifier(e){return ok.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),it.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===rp}static keyField(){return new it([rp])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Y(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new Y(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Y(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else u==="`"?(o=!o,i++):u!=="."||o?(r+=u,i++):(s(),i++)}if(s(),o)throw new Y(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new it(n)}static emptyPath(){return new it([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Te.fromString(e))}static fromName(e){return new J(Te.fromString(e).popFirst(5))}static empty(){return new J(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Te.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Te(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fv(t,e,n){if(!n)throw new Y(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ak(t,e,n,r){if(e===!0&&r===!0)throw new Y(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ip(t){if(!J.isDocumentKey(t))throw new Y(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sp(t){if(J.isDocumentKey(t))throw new Y(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ov(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function sh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ee(12329,{type:typeof t})}function zr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=sh(t);throw new Y(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(t,e){const n={typeString:t};return e&&(n.value=e),n}function wo(t,e){if(!Ov(t))throw new Y(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new Y(z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op=-62135596800,ap=1e6;class Ie{static now(){return Ie.fromMillis(Date.now())}static fromDate(e){return Ie.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*ap);return new Ie(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<op)throw new Y(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ap}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ie._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(wo(e,Ie._jsonSchema))return new Ie(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-op;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ie._jsonSchemaVersion="firestore/timestamp/1.0",Ie._jsonSchema={type:Ue("string",Ie._jsonSchemaVersion),seconds:Ue("number"),nanoseconds:Ue("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{static fromTimestamp(e){return new ne(e)}static min(){return new ne(new Ie(0,0))}static max(){return new ne(new Ie(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo=-1;function lk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ne.fromTimestamp(r===1e9?new Ie(n+1,0):new Ie(n,r));return new cr(i,J.empty(),e)}function uk(t){return new cr(t.readTime,t.key,uo)}class cr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new cr(ne.min(),J.empty(),uo)}static max(){return new cr(ne.max(),J.empty(),uo)}}function ck(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wi(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==dk)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let i=0,s=0,o=!1;e.forEach(u=>{++i,u.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(i=>i?L.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new L((r,i)=>{const s=e.length,o=new Array(s);let u=0;for(let c=0;c<s;c++){const h=c;n(e[h]).next(p=>{o[h]=p,++u,u===s&&r(o)},p=>i(p))}})}static doWhile(e,n){return new L((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function fk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Gi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Fl.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh=-1;function Ol(t){return t==null}function ll(t){return t===0&&1/t==-1/0}function mk(t){return typeof t=="number"&&Number.isInteger(t)&&!ll(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv="";function pk(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=lp(e)),e=gk(t.get(n),e);return lp(e)}function gk(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case Mv:n+="";break;default:n+=s}}return n}function lp(t){return t+Mv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function qr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Lv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e,n){this.comparator=e,this.root=n||rt.EMPTY}insert(e,n){return new be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rt.BLACK,null,null))}remove(e){return new be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new aa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new aa(this.root,e,this.comparator,!1)}getReverseIterator(){return new aa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new aa(this.root,e,this.comparator,!0)}}class aa{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??rt.RED,this.left=i??rt.EMPTY,this.right=s??rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new rt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return rt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ee(27949);return e+(this.isRed()?0:1)}}rt.EMPTY=null,rt.RED=!0,rt.BLACK=!1;rt.EMPTY=new class{constructor(){this.size=0}get key(){throw ee(57766)}get value(){throw ee(16141)}get color(){throw ee(16727)}get left(){throw ee(29726)}get right(){throw ee(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.comparator=e,this.data=new be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new cp(this.data.getIterator())}getIteratorFrom(e){return new cp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ge)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ge(this.comparator);return n.data=e,n}}class cp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.fields=e,e.sort(it.comparator)}static empty(){return new nn([])}unionWith(e){let n=new Ge(it.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new nn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Vi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new zv("Invalid base64 string: "+s):s}}(e);return new at(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new at(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}at.EMPTY_BYTE_STRING=new at("");const yk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dr(t){if(ge(!!t,39018),typeof t=="string"){let e=0;const n=yk.exec(t);if(ge(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(t.seconds),nanos:Fe(t.nanos)}}function Fe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function hr(t){return typeof t=="string"?at.fromBase64String(t):at.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv="server_timestamp",Bv="__type__",$v="__previous_value__",Hv="__local_write_time__";function ah(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Bv])===null||n===void 0?void 0:n.stringValue)===Uv}function Ml(t){const e=t.mapValue.fields[$v];return ah(e)?Ml(e):e}function co(t){const e=dr(t.mapValue.fields[Hv].timestampValue);return new Ie(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e,n,r,i,s,o,u,c,h,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=h,this.isUsingEmulator=p}}const ul="(default)";class ho{constructor(e,n){this.projectId=e,this.database=n||ul}static empty(){return new ho("","")}get isDefaultDatabase(){return this.database===ul}isEqual(e){return e instanceof ho&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="__type__",_k="__max__",la={mapValue:{}},Wv="__vector__",cl="value";function fr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ah(t)?4:wk(t)?9007199254740991:xk(t)?10:11:ee(28295,{value:t})}function xn(t,e){if(t===e)return!0;const n=fr(t);if(n!==fr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return co(t).isEqual(co(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=dr(i.timestampValue),u=dr(s.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return hr(i.bytesValue).isEqual(hr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Fe(i.geoPointValue.latitude)===Fe(s.geoPointValue.latitude)&&Fe(i.geoPointValue.longitude)===Fe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Fe(i.integerValue)===Fe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Fe(i.doubleValue),u=Fe(s.doubleValue);return o===u?ll(o)===ll(u):isNaN(o)&&isNaN(u)}return!1}(t,e);case 9:return Vi(t.arrayValue.values||[],e.arrayValue.values||[],xn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},u=s.mapValue.fields||{};if(up(o)!==up(u))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(u[c]===void 0||!xn(o[c],u[c])))return!1;return!0}(t,e);default:return ee(52216,{left:t})}}function fo(t,e){return(t.values||[]).find(n=>xn(n,e))!==void 0}function Fi(t,e){if(t===e)return 0;const n=fr(t),r=fr(e);if(n!==r)return ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(s,o){const u=Fe(s.integerValue||s.doubleValue),c=Fe(o.integerValue||o.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return dp(t.timestampValue,e.timestampValue);case 4:return dp(co(t),co(e));case 5:return qc(t.stringValue,e.stringValue);case 6:return function(s,o){const u=hr(s),c=hr(o);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const u=s.split("/"),c=o.split("/");for(let h=0;h<u.length&&h<c.length;h++){const p=ae(u[h],c[h]);if(p!==0)return p}return ae(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const u=ae(Fe(s.latitude),Fe(o.latitude));return u!==0?u:ae(Fe(s.longitude),Fe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return hp(t.arrayValue,e.arrayValue);case 10:return function(s,o){var u,c,h,p;const y=s.fields||{},g=o.fields||{},E=(u=y[cl])===null||u===void 0?void 0:u.arrayValue,A=(c=g[cl])===null||c===void 0?void 0:c.arrayValue,R=ae(((h=E==null?void 0:E.values)===null||h===void 0?void 0:h.length)||0,((p=A==null?void 0:A.values)===null||p===void 0?void 0:p.length)||0);return R!==0?R:hp(E,A)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===la.mapValue&&o===la.mapValue)return 0;if(s===la.mapValue)return 1;if(o===la.mapValue)return-1;const u=s.fields||{},c=Object.keys(u),h=o.fields||{},p=Object.keys(h);c.sort(),p.sort();for(let y=0;y<c.length&&y<p.length;++y){const g=qc(c[y],p[y]);if(g!==0)return g;const E=Fi(u[c[y]],h[p[y]]);if(E!==0)return E}return ae(c.length,p.length)}(t.mapValue,e.mapValue);default:throw ee(23264,{le:n})}}function dp(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);const n=dr(t),r=dr(e),i=ae(n.seconds,r.seconds);return i!==0?i:ae(n.nanos,r.nanos)}function hp(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Fi(n[i],r[i]);if(s)return s}return ae(n.length,r.length)}function Oi(t){return Wc(t)}function Wc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=dr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return hr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Wc(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Wc(n.fields[o])}`;return i+"}"}(t.mapValue):ee(61005,{value:t})}function Ca(t){switch(fr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ml(t);return e?16+Ca(e):16;case 5:return 2*t.stringValue.length;case 6:return hr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Ca(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return qr(r.fields,(s,o)=>{i+=s.length+Ca(o)}),i}(t.mapValue);default:throw ee(13486,{value:t})}}function Gc(t){return!!t&&"integerValue"in t}function lh(t){return!!t&&"arrayValue"in t}function fp(t){return!!t&&"nullValue"in t}function mp(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Aa(t){return!!t&&"mapValue"in t}function xk(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[qv])===null||n===void 0?void 0:n.stringValue)===Wv}function Ms(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return qr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ms(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ms(t.arrayValue.values[n]);return e}return Object.assign({},t)}function wk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===_k}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.value=e}static empty(){return new Ht({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Aa(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ms(n)}setAll(e){let n=it.emptyPath(),r={},i=[];e.forEach((o,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=u.popLast()}o?r[u.lastSegment()]=Ms(o):i.push(u.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Aa(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return xn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Aa(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){qr(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ht(Ms(this.value))}}function Gv(t){const e=[];return qr(t.fields,(n,r)=>{const i=new it([n]);if(Aa(r)){const s=Gv(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new nn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,n,r,i,s,o,u){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=u}static newInvalidDocument(e){return new gt(e,0,ne.min(),ne.min(),ne.min(),Ht.empty(),0)}static newFoundDocument(e,n,r,i){return new gt(e,1,n,ne.min(),r,i,0)}static newNoDocument(e,n){return new gt(e,2,n,ne.min(),ne.min(),Ht.empty(),0)}static newUnknownDocument(e,n){return new gt(e,3,n,ne.min(),ne.min(),Ht.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ht.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ht.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,n){this.position=e,this.inclusive=n}}function pp(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=Fi(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function gp(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!xn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e,n="asc"){this.field=e,this.dir=n}}function Ek(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{}class qe extends Kv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Sk(e,n,r):n==="array-contains"?new Ck(e,r):n==="in"?new Ak(e,r):n==="not-in"?new Pk(e,r):n==="array-contains-any"?new jk(e,r):new qe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Tk(e,r):new Ik(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Fi(n,this.value)):n!==null&&fr(this.value)===fr(n)&&this.matchesComparison(Fi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wn extends Kv{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new wn(e,n)}matches(e){return Qv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Qv(t){return t.op==="and"}function Yv(t){return kk(t)&&Qv(t)}function kk(t){for(const e of t.filters)if(e instanceof wn)return!1;return!0}function Kc(t){if(t instanceof qe)return t.field.canonicalString()+t.op.toString()+Oi(t.value);if(Yv(t))return t.filters.map(e=>Kc(e)).join(",");{const e=t.filters.map(n=>Kc(n)).join(",");return`${t.op}(${e})`}}function Xv(t,e){return t instanceof qe?function(r,i){return i instanceof qe&&r.op===i.op&&r.field.isEqual(i.field)&&xn(r.value,i.value)}(t,e):t instanceof wn?function(r,i){return i instanceof wn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,u)=>s&&Xv(o,i.filters[u]),!0):!1}(t,e):void ee(19439)}function Jv(t){return t instanceof qe?function(n){return`${n.field.canonicalString()} ${n.op} ${Oi(n.value)}`}(t):t instanceof wn?function(n){return n.op.toString()+" {"+n.getFilters().map(Jv).join(" ,")+"}"}(t):"Filter"}class Sk extends qe{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class Tk extends qe{constructor(e,n){super(e,"in",n),this.keys=Zv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Ik extends qe{constructor(e,n){super(e,"not-in",n),this.keys=Zv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Zv(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class Ck extends qe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return lh(n)&&fo(n.arrayValue,this.value)}}class Ak extends qe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&fo(this.value.arrayValue,n)}}class Pk extends qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(fo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!fo(this.value.arrayValue,n)}}class jk extends qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!lh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>fo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e,n=null,r=[],i=[],s=null,o=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=u,this.Pe=null}}function yp(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Rk(t,e,n,r,i,s,o)}function uh(t){const e=ie(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Kc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ol(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Oi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Oi(r)).join(",")),e.Pe=n}return e.Pe}function ch(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Ek(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Xv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!gp(t.startAt,e.startAt)&&gp(t.endAt,e.endAt)}function Qc(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,n=null,r=[],i=[],s=null,o="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=u,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Nk(t,e,n,r,i,s,o,u){return new Ll(t,e,n,r,i,s,o,u)}function e0(t){return new Ll(t)}function vp(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function bk(t){return t.collectionGroup!==null}function Ls(t){const e=ie(t);if(e.Te===null){e.Te=[];const n=new Set;for(const s of e.explicitOrderBy)e.Te.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new Ge(it.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(u=u.add(h.field))})}),u})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Te.push(new hl(s,r))}),n.has(it.keyField().canonicalString())||e.Te.push(new hl(it.keyField(),r))}return e.Te}function gn(t){const e=ie(t);return e.Ie||(e.Ie=Dk(e,Ls(t))),e.Ie}function Dk(t,e){if(t.limitType==="F")return yp(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new hl(i.field,s)});const n=t.endAt?new dl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new dl(t.startAt.position,t.startAt.inclusive):null;return yp(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Yc(t,e,n){return new Ll(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zl(t,e){return ch(gn(t),gn(e))&&t.limitType===e.limitType}function t0(t){return`${uh(gn(t))}|lt:${t.limitType}`}function ni(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Jv(i)).join(", ")}]`),Ol(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Oi(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Oi(i)).join(",")),`Target(${r})`}(gn(t))}; limitType=${t.limitType})`}function Ul(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):J.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Ls(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,u,c){const h=pp(o,u,c);return o.inclusive?h<=0:h<0}(r.startAt,Ls(r),i)||r.endAt&&!function(o,u,c){const h=pp(o,u,c);return o.inclusive?h>=0:h>0}(r.endAt,Ls(r),i))}(t,e)}function Vk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function n0(t){return(e,n)=>{let r=!1;for(const i of Ls(t)){const s=Fk(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Fk(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(s,o,u){const c=o.data.field(s),h=u.data.field(s);return c!==null&&h!==null?Fi(c,h):ee(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ee(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){qr(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Lv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok=new be(J.comparator);function Vn(){return Ok}const r0=new be(J.comparator);function Ts(...t){let e=r0;for(const n of t)e=e.insert(n.key,n);return e}function i0(t){let e=r0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Rr(){return zs()}function s0(){return zs()}function zs(){return new Wr(t=>t.toString(),(t,e)=>t.isEqual(e))}const Mk=new be(J.comparator),Lk=new Ge(J.comparator);function ue(...t){let e=Lk;for(const n of t)e=e.add(n);return e}const zk=new Ge(ae);function Uk(){return zk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ll(e)?"-0":e}}function o0(t){return{integerValue:""+t}}function Bk(t,e){return mk(e)?o0(e):dh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(){this._=void 0}}function $k(t,e,n){return t instanceof fl?function(i,s){const o={fields:{[Bv]:{stringValue:Uv},[Hv]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&ah(s)&&(s=Ml(s)),s&&(o.fields[$v]=s),{mapValue:o}}(n,e):t instanceof mo?l0(t,e):t instanceof po?u0(t,e):function(i,s){const o=a0(i,s),u=_p(o)+_p(i.Ee);return Gc(o)&&Gc(i.Ee)?o0(u):dh(i.serializer,u)}(t,e)}function Hk(t,e,n){return t instanceof mo?l0(t,e):t instanceof po?u0(t,e):n}function a0(t,e){return t instanceof ml?function(r){return Gc(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class fl extends Bl{}class mo extends Bl{constructor(e){super(),this.elements=e}}function l0(t,e){const n=c0(e);for(const r of t.elements)n.some(i=>xn(i,r))||n.push(r);return{arrayValue:{values:n}}}class po extends Bl{constructor(e){super(),this.elements=e}}function u0(t,e){let n=c0(e);for(const r of t.elements)n=n.filter(i=>!xn(i,r));return{arrayValue:{values:n}}}class ml extends Bl{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function _p(t){return Fe(t.integerValue||t.doubleValue)}function c0(t){return lh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function qk(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof mo&&i instanceof mo||r instanceof po&&i instanceof po?Vi(r.elements,i.elements,xn):r instanceof ml&&i instanceof ml?xn(r.Ee,i.Ee):r instanceof fl&&i instanceof fl}(t.transform,e.transform)}class Wk{constructor(e,n){this.version=e,this.transformResults=n}}class on{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class $l{}function d0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new hh(t.key,on.none()):new Eo(t.key,t.data,on.none());{const n=t.data,r=Ht.empty();let i=new Ge(it.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Gr(t.key,r,new nn(i.toArray()),on.none())}}function Gk(t,e,n){t instanceof Eo?function(i,s,o){const u=i.value.clone(),c=wp(i.fieldTransforms,s,o.transformResults);u.setAll(c),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Gr?function(i,s,o){if(!Pa(i.precondition,s))return void s.convertToUnknownDocument(o.version);const u=wp(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(h0(i)),c.setAll(u),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Us(t,e,n,r){return t instanceof Eo?function(s,o,u,c){if(!Pa(s.precondition,o))return u;const h=s.value.clone(),p=Ep(s.fieldTransforms,c,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Gr?function(s,o,u,c){if(!Pa(s.precondition,o))return u;const h=Ep(s.fieldTransforms,c,o),p=o.data;return p.setAll(h0(s)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(y=>y.field))}(t,e,n,r):function(s,o,u){return Pa(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u}(t,e,n)}function Kk(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=a0(r.transform,i||null);s!=null&&(n===null&&(n=Ht.empty()),n.set(r.field,s))}return n||null}function xp(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Vi(r,i,(s,o)=>qk(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Eo extends $l{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Gr extends $l{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function h0(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function wp(t,e,n){const r=new Map;ge(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,u=e.data.field(s.field);r.set(s.field,Hk(o,u,n[i]))}return r}function Ep(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,$k(s,o,e))}return r}class hh extends $l{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Qk extends $l{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Gk(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Us(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Us(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=s0();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let u=this.applyToLocalView(o,s.mutatedFields);u=n.has(i.key)?null:u;const c=d0(o,u);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ue())}isEqual(e){return this.batchId===e.batchId&&Vi(this.mutations,e.mutations,(n,r)=>xp(n,r))&&Vi(this.baseMutations,e.baseMutations,(n,r)=>xp(n,r))}}class fh{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ge(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return Mk}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new fh(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le,ce;function Zk(t){switch(t){case z.OK:return ee(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return ee(15467,{code:t})}}function f0(t){if(t===void 0)return Dn("GRPC error has no .code"),z.UNKNOWN;switch(t){case Le.OK:return z.OK;case Le.CANCELLED:return z.CANCELLED;case Le.UNKNOWN:return z.UNKNOWN;case Le.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case Le.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case Le.INTERNAL:return z.INTERNAL;case Le.UNAVAILABLE:return z.UNAVAILABLE;case Le.UNAUTHENTICATED:return z.UNAUTHENTICATED;case Le.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case Le.NOT_FOUND:return z.NOT_FOUND;case Le.ALREADY_EXISTS:return z.ALREADY_EXISTS;case Le.PERMISSION_DENIED:return z.PERMISSION_DENIED;case Le.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case Le.ABORTED:return z.ABORTED;case Le.OUT_OF_RANGE:return z.OUT_OF_RANGE;case Le.UNIMPLEMENTED:return z.UNIMPLEMENTED;case Le.DATA_LOSS:return z.DATA_LOSS;default:return ee(39323,{code:t})}}(ce=Le||(Le={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS=new ir([4294967295,4294967295],0);function kp(t){const e=Vv().encode(t),n=new Cv;return n.update(e),new Uint8Array(n.digest())}function Sp(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ir([n,r],0),new ir([i,s],0)]}class mh{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Is(`Invalid padding: ${n}`);if(r<0)throw new Is(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Is(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Is(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=ir.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(ir.fromNumber(r)));return i.compare(eS)===1&&(i=new ir([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=kp(e),[r,i]=Sp(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new mh(s,i,n);return r.forEach(u=>o.insert(u)),o}insert(e){if(this.fe===0)return;const n=kp(e),[r,i]=Sp(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(r,i,s);this.we(o)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Is extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ko.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Hl(ne.min(),i,new be(ae),Vn(),ue())}}class ko{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ko(r,n,ue(),ue(),ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class m0{constructor(e,n){this.targetId=e,this.De=n}}class p0{constructor(e,n,r=at.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Tp{constructor(){this.ve=0,this.Ce=Ip(),this.Fe=at.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ue(),n=ue(),r=ue();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ee(38017,{changeType:s})}}),new ko(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=Ip()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ge(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class tS{constructor(e){this.We=e,this.Ge=new Map,this.ze=Vn(),this.je=ua(),this.Je=ua(),this.He=new be(ae)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:ee(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const s=i.target;if(Qc(s))if(r===0){const o=new J(s.path);this.Xe(n,o,gt.newNoDocument(o,ne.min()))}else ge(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const u=this._t(e),c=u?this.ut(u,e,o):1;if(c!==0){this.rt(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,h)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,u;try{o=hr(r).toUint8Array()}catch(c){if(c instanceof zv)return ur("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new mh(o,i,s)}catch(c){return ur(c instanceof Is?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.fe===0?null:u}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.We.lt(),u=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(u)||(this.Xe(n,s,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((s,o)=>{const u=this.st(o);if(u){if(s.current&&Qc(u.target)){const c=new J(u.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,gt.newNoDocument(c,e))}s.Ne&&(n.set(o,s.Le()),s.ke())}});let r=ue();this.Je.forEach((s,o)=>{let u=!0;o.forEachWhile(c=>{const h=this.st(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));const i=new Hl(e,n,this.He,this.ze,r);return this.ze=Vn(),this.je=ua(),this.Je=ua(),this.He=new be(ae),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Tp,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Ge(ae),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Ge(ae),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Tp),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function ua(){return new be(J.comparator)}function Ip(){return new be(J.comparator)}const nS={asc:"ASCENDING",desc:"DESCENDING"},rS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iS={and:"AND",or:"OR"};class sS{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Xc(t,e){return t.useProto3Json||Ol(e)?e:{value:e}}function pl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function g0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function oS(t,e){return pl(t,e.toTimestamp())}function yn(t){return ge(!!t,49232),ne.fromTimestamp(function(n){const r=dr(n);return new Ie(r.seconds,r.nanos)}(t))}function ph(t,e){return Jc(t,e).canonicalString()}function Jc(t,e){const n=function(i){return new Te(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function y0(t){const e=Te.fromString(t);return ge(E0(e),10190,{key:e.toString()}),e}function Zc(t,e){return ph(t.databaseId,e.path)}function Bu(t,e){const n=y0(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(_0(n))}function v0(t,e){return ph(t.databaseId,e)}function aS(t){const e=y0(t);return e.length===4?Te.emptyPath():_0(e)}function ed(t){return new Te(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function _0(t){return ge(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Cp(t,e,n){return{name:Zc(t,e),fields:n.value.mapValue.fields}}function lS(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ee(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,p){return h.useProto3Json?(ge(p===void 0||typeof p=="string",58123),at.fromBase64String(p||"")):(ge(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),at.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(h){const p=h.code===void 0?z.UNKNOWN:f0(h.code);return new Y(p,h.message||"")}(o);n=new p0(r,i,s,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Bu(t,r.document.name),s=yn(r.document.updateTime),o=r.document.createTime?yn(r.document.createTime):ne.min(),u=new Ht({mapValue:{fields:r.document.fields}}),c=gt.newFoundDocument(i,s,o,u),h=r.targetIds||[],p=r.removedTargetIds||[];n=new ja(h,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Bu(t,r.document),s=r.readTime?yn(r.readTime):ne.min(),o=gt.newNoDocument(i,s),u=r.removedTargetIds||[];n=new ja([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Bu(t,r.document),s=r.removedTargetIds||[];n=new ja([],s,i,null)}else{if(!("filter"in e))return ee(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Jk(i,s),u=r.targetId;n=new m0(u,o)}}return n}function uS(t,e){let n;if(e instanceof Eo)n={update:Cp(t,e.key,e.value)};else if(e instanceof hh)n={delete:Zc(t,e.key)};else if(e instanceof Gr)n={update:Cp(t,e.key,e.data),updateMask:vS(e.fieldMask)};else{if(!(e instanceof Qk))return ee(16599,{Rt:e.type});n={verify:Zc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const u=o.transform;if(u instanceof fl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof mo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof po)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof ml)return{fieldPath:o.field.canonicalString(),increment:u.Ee};throw ee(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:oS(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ee(27497)}(t,e.precondition)),n}function cS(t,e){return t&&t.length>0?(ge(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?yn(i.updateTime):yn(s);return o.isEqual(ne.min())&&(o=yn(s)),new Wk(o,i.transformResults||[])}(n,e))):[]}function dS(t,e){return{documents:[v0(t,e.path)]}}function hS(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=v0(t,i);const s=function(h){if(h.length!==0)return w0(wn.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(p=>function(g){return{field:ri(g.field),direction:pS(g.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const u=Xc(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{Vt:n,parent:i}}function fS(t){let e=aS(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ge(r===1,65062);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=function(y){const g=x0(y);return g instanceof wn&&Yv(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(y){return y.map(g=>function(A){return new hl(ii(A.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(g))}(n.orderBy));let u=null;n.limit&&(u=function(y){let g;return g=typeof y=="object"?y.value:y,Ol(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(y){const g=!!y.before,E=y.values||[];return new dl(E,g)}(n.startAt));let h=null;return n.endAt&&(h=function(y){const g=!y.before,E=y.values||[];return new dl(E,g)}(n.endAt)),Nk(e,i,o,s,u,"F",c,h)}function mS(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function x0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ii(n.unaryFilter.field);return qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ii(n.unaryFilter.field);return qe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ii(n.unaryFilter.field);return qe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ii(n.unaryFilter.field);return qe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ee(61313);default:return ee(60726)}}(t):t.fieldFilter!==void 0?function(n){return qe.create(ii(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ee(58110);default:return ee(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return wn.create(n.compositeFilter.filters.map(r=>x0(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ee(1026)}}(n.compositeFilter.op))}(t):ee(30097,{filter:t})}function pS(t){return nS[t]}function gS(t){return rS[t]}function yS(t){return iS[t]}function ri(t){return{fieldPath:t.canonicalString()}}function ii(t){return it.fromServerFormat(t.fieldPath)}function w0(t){return t instanceof qe?function(n){if(n.op==="=="){if(mp(n.value))return{unaryFilter:{field:ri(n.field),op:"IS_NAN"}};if(fp(n.value))return{unaryFilter:{field:ri(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(mp(n.value))return{unaryFilter:{field:ri(n.field),op:"IS_NOT_NAN"}};if(fp(n.value))return{unaryFilter:{field:ri(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ri(n.field),op:gS(n.op),value:n.value}}}(t):t instanceof wn?function(n){const r=n.getFilters().map(i=>w0(i));return r.length===1?r[0]:{compositeFilter:{op:yS(n.op),filters:r}}}(t):ee(54877,{filter:t})}function vS(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function E0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e,n,r,i,s=ne.min(),o=ne.min(),u=at.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new Gn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Gn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e){this.gt=e}}function xS(t){const e=fS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Yc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(){this.Dn=new ES}addToCollectionParentIndex(e,n){return this.Dn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(cr.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(cr.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class ES{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ge(Te.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ge(Te.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},k0=41943040;class At{static withCacheSize(e){return new At(e,At.DEFAULT_COLLECTION_PERCENTILE,At.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */At.DEFAULT_COLLECTION_PERCENTILE=10,At.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,At.DEFAULT=new At(k0,At.DEFAULT_COLLECTION_PERCENTILE,At.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),At.DISABLED=new At(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Mi(0)}static ur(){return new Mi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp="LruGarbageCollector",kS=1048576;function jp([t,e],[n,r]){const i=ae(t,n);return i===0?ae(e,r):i}class SS{constructor(e){this.Tr=e,this.buffer=new Ge(jp),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();jp(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class TS{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){G(Pp,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Gi(n)?G(Pp,"Ignoring IndexedDB error during garbage collection: ",n):await Wi(n)}await this.Rr(3e5)})}}class IS{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(Fl.ue);const r=new SS(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(Ap)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ap):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,s,o,u,c,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),i=this.params.maximumSequenceNumbersToCollect):i=y,o=Date.now(),this.nthSequenceNumber(e,i))).next(y=>(r=y,u=Date.now(),this.removeTargets(e,r,n))).next(y=>(s=y,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(h=Date.now(),ti()<=de.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${i} in `+(u-o)+`ms
	Removed ${s} targets in `+(c-u)+`ms
	Removed ${y} documents in `+(h-c)+`ms
Total Duration: ${h-p}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:y})))}}function CS(t,e){return new IS(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(){this.changes=new Wr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,gt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Us(r.mutation,i,nn.empty(),Ie.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ue()){const i=Rr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ts();return s.forEach((u,c)=>{o=o.insert(u,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Rr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ue()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,u)=>{n.set(o,u)})})}computeViews(e,n,r,i){let s=Vn();const o=zs(),u=function(){return zs()}();return n.forEach((c,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof Gr)?s=s.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),Us(p.mutation,h,p.mutation.getFieldMask(),Ie.now())):o.set(h.key,nn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>{var y;return u.set(h,new PS(p,(y=o.get(h))!==null&&y!==void 0?y:null))}),u))}recalculateAndSaveOverlays(e,n){const r=zs();let i=new be((o,u)=>o-u),s=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const u of o)u.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let p=r.get(c)||nn.empty();p=u.applyToLocalView(h,p),r.set(c,p);const y=(i.get(u.batchId)||ue()).add(c);i=i.insert(u.batchId,y)})}).next(()=>{const o=[],u=i.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),h=c.key,p=c.value,y=s0();p.forEach(g=>{if(!s.has(g)){const E=d0(n.get(g),r.get(g));E!==null&&y.set(g,E),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,y))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):bk(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):L.resolve(Rr());let u=uo,c=s;return o.next(h=>L.forEach(h,(p,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),s.get(p)?L.resolve():this.remoteDocumentCache.getEntry(e,p).next(g=>{c=c.insert(p,g)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,c,h,ue())).next(p=>({batchId:u,changes:i0(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let i=Ts();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Ts();return this.indexManager.getCollectionParents(e,s).next(u=>L.forEach(u,c=>{const h=function(y,g){return new Ll(g,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(p=>{p.forEach((y,g)=>{o=o.insert(y,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,gt.newInvalidDocument(p)))});let u=Ts();return o.forEach((c,h)=>{const p=s.get(c);p!==void 0&&Us(p.mutation,h,nn.empty(),Ie.now()),Ul(n,h)&&(u=u.insert(c,h))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return L.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:yn(i.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:xS(i.bundledQuery),readTime:yn(i.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(){this.overlays=new be(J.comparator),this.kr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Rr();return L.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.wt(e,n,s)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const i=Rr(),s=n.length+1,o=new J(n.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const c=u.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return L.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new be((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=s.get(h.largestBatchId);p===null&&(p=Rr(),s=s.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const u=Rr(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,p)=>u.set(h,p)),!(u.size()>=i)););return L.resolve(u)}wt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Xk(n,r));let s=this.kr.get(n);s===void 0&&(s=ue(),this.kr.set(n,s)),this.kr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(){this.sessionToken=at.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(){this.qr=new Ge(Xe.Qr),this.$r=new Ge(Xe.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Xe(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Xe(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new J(new Te([])),r=new Xe(n,e),i=new Xe(n,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new J(new Te([])),r=new Xe(n,e),i=new Xe(n,e+1);let s=ue();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Xe(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Xe{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return J.comparator(e.key,n.key)||ae(e.Hr,n.Hr)}static Ur(e,n){return ae(e.Hr,n.Hr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Ge(Xe.Qr)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Yk(s,n,r,i);this.mutationQueue.push(o);for(const u of i)this.Yr=this.Yr.add(new Xe(u.key,s)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),s=i<0?0:i;return L.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?oh:this.er-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Xe(n,0),i=new Xe(n,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{const u=this.Zr(o.Hr);s.push(u)}),L.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ge(ae);return n.forEach(i=>{const s=new Xe(i,0),o=new Xe(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],u=>{r=r.add(u.Hr)})}),L.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;J.isDocumentKey(s)||(s=s.child(""));const o=new Xe(new J(s),0);let u=new Ge(ae);return this.Yr.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(u=u.add(c.Hr)),!0)},o),L.resolve(this.ei(u))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ge(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return L.forEach(n.mutations,i=>{const s=new Xe(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new Xe(n,0),i=this.Yr.firstAfterOrEqual(r);return L.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e){this.ni=e,this.docs=function(){return new be(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():gt.newInvalidDocument(n))}getEntries(e,n){let r=Vn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():gt.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Vn();const o=n.path,u=new J(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||ck(uk(p),r)<=0||(i.has(p.key)||Ul(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return L.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ee(9500)}ri(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new FS(this)}getSize(e){return L.resolve(this.size)}}class FS extends AS{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e){this.persistence=e,this.ii=new Wr(n=>uh(n),ch),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.si=0,this.oi=new gh,this.targetCount=0,this._i=Mi.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),L.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Mi(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.hr(n),L.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.ii.forEach((o,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),L.waitFor(s).next(()=>i)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),L.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e,n){this.ai={},this.overlays={},this.ui=new Fl(0),this.ci=!1,this.ci=!0,this.li=new bS,this.referenceDelegate=e(this),this.hi=new OS(this),this.indexManager=new wS,this.remoteDocumentCache=function(i){return new VS(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new _S(n),this.Ti=new RS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new NS,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new DS(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const i=new MS(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,n){return L.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class MS extends hk{constructor(e){super(),this.currentSequenceNumber=e}}class yh{constructor(e){this.persistence=e,this.Ai=new gh,this.Ri=null}static Vi(e){return new yh(e)}get mi(){if(this.Ri)return this.Ri;throw ee(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.mi,r=>{const i=J.fromPath(r);return this.fi(e,i).next(s=>{s||n.removeEntry(i,ne.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return L.or([()=>L.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class gl{constructor(e,n){this.persistence=e,this.gi=new Wr(r=>pk(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=CS(this,n)}static Vi(e,n){return new gl(e,n)}Ii(){}di(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return L.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?L.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,n).next(u=>{u||(r++,s.removeEntry(o,ne.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),L.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ca(e.data.value)),n}Sr(e,n,r){return L.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return L.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=ue(),i=ue();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new vh(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return Nw()?8:fk(jw())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ps(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new LS;return this.ws(e,n,o).next(u=>{if(s.result=u,this.Rs)return this.Ss(e,n,o,u.size)})}).next(()=>s.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(ti()<=de.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",ni(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),L.resolve()):(ti()<=de.DEBUG&&G("QueryEngine","Query:",ni(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(ti()<=de.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",ni(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gn(n))):L.resolve())}ps(e,n){if(vp(n))return L.resolve(null);let r=gn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Yc(n,null,"F"),r=gn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ue(...s);return this.gs.getDocuments(e,o).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.bs(n,u);return this.Ds(n,h,o,c.readTime)?this.ps(e,Yc(n,null,"F")):this.vs(e,h,n,c)}))})))}ys(e,n,r,i){return vp(n)||i.isEqual(ne.min())?L.resolve(null):this.gs.getDocuments(e,r).next(s=>{const o=this.bs(n,s);return this.Ds(n,o,r,i)?L.resolve(null):(ti()<=de.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ni(n)),this.vs(e,o,n,lk(i,uo)).next(u=>u))})}bs(e,n){let r=new Ge(n0(e));return n.forEach((i,s)=>{Ul(e,s)&&(r=r.add(s))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,n,r){return ti()<=de.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",ni(n)),this.gs.getDocumentsMatchingQuery(e,n,cr.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h="LocalStore",US=3e8;class BS{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new be(ae),this.Ms=new Wr(s=>uh(s),ch),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jS(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function $S(t,e,n,r){return new BS(t,e,n,r)}async function T0(t,e){const n=ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],u=[];let c=ue();for(const h of i){o.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}for(const h of s){u.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(r,c).next(h=>({Bs:h,removedBatchIds:o,addedBatchIds:u}))})})}function HS(t,e){const n=ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return function(u,c,h,p){const y=h.batch,g=y.keys();let E=L.resolve();return g.forEach(A=>{E=E.next(()=>p.getEntry(c,A)).next(R=>{const P=h.docVersions.get(A);ge(P!==null,48541),R.version.compareTo(P)<0&&(y.applyToRemoteDocument(R,h),R.isValidDocument()&&(R.setReadTime(h.commitVersion),p.addEntry(R)))})}),E.next(()=>u.mutationQueue.removeMutationBatch(c,y))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=ue();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(c=c.add(u.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function I0(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function qS(t,e){const n=ie(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const u=[];e.targetChanges.forEach((p,y)=>{const g=i.get(y);if(!g)return;u.push(n.hi.removeMatchingKeys(s,p.removedDocuments,y).next(()=>n.hi.addMatchingKeys(s,p.addedDocuments,y)));let E=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(y)!==null?E=E.withResumeToken(at.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):p.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(p.resumeToken,r)),i=i.insert(y,E),function(R,P,T){return R.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=US?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(g,E,p)&&u.push(n.hi.updateTargetData(s,E))});let c=Vn(),h=ue();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))}),u.push(WS(s,o,e.documentUpdates).next(p=>{c=p.Ls,h=p.ks})),!r.isEqual(ne.min())){const p=n.hi.getLastRemoteSnapshotVersion(s).next(y=>n.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));u.push(p)}return L.waitFor(u).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,h)).next(()=>c)}).then(s=>(n.Fs=i,s))}function WS(t,e,n){let r=ue(),i=ue();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Vn();return n.forEach((u,c)=>{const h=s.get(u);c.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(u)),c.isNoDocument()&&c.version.isEqual(ne.min())?(e.removeEntry(u,c.readTime),o=o.insert(u,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),o=o.insert(u,c)):G(_h,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",c.version)}),{Ls:o,ks:i}})}function GS(t,e){const n=ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=oh),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function KS(t,e){const n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(s=>s?(i=s,L.resolve(i)):n.hi.allocateTargetId(r).next(o=>(i=new Gn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function td(t,e,n){const r=ie(t),i=r.Fs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Gi(o))throw o;G(_h,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function Rp(t,e,n){const r=ie(t);let i=ne.min(),s=ue();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,h,p){const y=ie(c),g=y.Ms.get(p);return g!==void 0?L.resolve(y.Fs.get(g)):y.hi.getTargetData(h,p)}(r,o,gn(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,u.targetId).next(c=>{s=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?i:ne.min(),n?s:ue())).next(u=>(QS(r,Vk(e),u),{documents:u,qs:s})))}function QS(t,e,n){let r=t.xs.get(e)||ne.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.xs.set(e,r)}class Np{constructor(){this.activeTargetIds=Uk()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class YS{constructor(){this.Fo=new Np,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Np,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bp="ConnectivityMonitor";class Dp{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){G(bp,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){G(bp,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ca=null;function nd(){return ca===null?ca=function(){return 268435456+Math.round(2147483648*Math.random())}():ca++,"0x"+ca.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $u="RestConnection",JS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ZS{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===ul?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,s){const o=nd(),u=this.Go(e,n.toUriEncodedString());G($u,`Sending RPC '${e}' ${o}:`,u,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,s);const{host:h}=new URL(u),p=th(h);return this.jo(e,u,c,r,p).then(y=>(G($u,`Received RPC '${e}' ${o}: `,y),y),y=>{throw ur($u,`RPC '${e}' ${o} failed with error: `,y,"url: ",u,"request:",r),y})}Jo(e,n,r,i,s,o){return this.Wo(e,n,r,i,s)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,n){const r=JS[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ft="WebChannelConnection";class tT extends ZS{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,s){const o=nd();return new Promise((u,c)=>{const h=new Av;h.setWithCredentials(!0),h.listenOnce(Pv.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Ia.NO_ERROR:const y=h.getResponseJson();G(ft,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(y)),u(y);break;case Ia.TIMEOUT:G(ft,`RPC '${e}' ${o} timed out`),c(new Y(z.DEADLINE_EXCEEDED,"Request time out"));break;case Ia.HTTP_ERROR:const g=h.getStatus();if(G(ft,`RPC '${e}' ${o} failed with status:`,g,"response text:",h.getResponseText()),g>0){let E=h.getResponseJson();Array.isArray(E)&&(E=E[0]);const A=E==null?void 0:E.error;if(A&&A.status&&A.message){const R=function(T){const k=T.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(k)>=0?k:z.UNKNOWN}(A.status);c(new Y(R,A.message))}else c(new Y(z.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new Y(z.UNAVAILABLE,"Connection failed."));break;default:ee(9055,{c_:e,streamId:o,l_:h.getLastErrorCode(),h_:h.getLastError()})}}finally{G(ft,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(i);G(ft,`RPC '${e}' ${o} sending request:`,i),h.send(n,"POST",p,r,15)})}P_(e,n,r){const i=nd(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Nv(),u=Rv(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const p=s.join("");G(ft,`Creating RPC '${e}' stream ${i}: ${p}`,c);const y=o.createWebChannel(p,c);this.T_(y);let g=!1,E=!1;const A=new eT({Ho:P=>{E?G(ft,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(g||(G(ft,`Opening RPC '${e}' stream ${i} transport.`),y.open(),g=!0),G(ft,`RPC '${e}' stream ${i} sending:`,P),y.send(P))},Yo:()=>y.close()}),R=(P,T,k)=>{P.listen(T,C=>{try{k(C)}catch(b){setTimeout(()=>{throw b},0)}})};return R(y,Ss.EventType.OPEN,()=>{E||(G(ft,`RPC '${e}' stream ${i} transport opened.`),A.s_())}),R(y,Ss.EventType.CLOSE,()=>{E||(E=!0,G(ft,`RPC '${e}' stream ${i} transport closed`),A.__(),this.I_(y))}),R(y,Ss.EventType.ERROR,P=>{E||(E=!0,ur(ft,`RPC '${e}' stream ${i} transport errored. Name:`,P.name,"Message:",P.message),A.__(new Y(z.UNAVAILABLE,"The operation could not be completed")))}),R(y,Ss.EventType.MESSAGE,P=>{var T;if(!E){const k=P.data[0];ge(!!k,16349);const C=k,b=(C==null?void 0:C.error)||((T=C[0])===null||T===void 0?void 0:T.error);if(b){G(ft,`RPC '${e}' stream ${i} received error:`,b);const D=b.status;let F=function(_){const x=Le[_];if(x!==void 0)return f0(x)}(D),v=b.message;F===void 0&&(F=z.INTERNAL,v="Unknown error status: "+D+" with message "+b.message),E=!0,A.__(new Y(F,v)),y.close()}else G(ft,`RPC '${e}' stream ${i} received:`,k),A.a_(k)}}),R(u,jv.STAT_EVENT,P=>{P.stat===Hc.PROXY?G(ft,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===Hc.NOPROXY&&G(ft,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.o_()},0),A}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Hu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(t){return new sS(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&G("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vp="PersistentStream";class A0{constructor(e,n,r,i,s,o,u,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new C0(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Dn(n.toString()),Dn("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new Y(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return G(Vp,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(G(Vp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class nT extends A0{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=lS(this.serializer,e),r=function(s){if(!("targetChange"in s))return ne.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ne.min():o.readTime?yn(o.readTime):ne.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=ed(this.serializer),n.addTarget=function(s,o){let u;const c=o.target;if(u=Qc(c)?{documents:dS(s,c)}:{query:hS(s,c).Vt},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=g0(s,o.resumeToken);const h=Xc(s,o.expectedCount);h!==null&&(u.expectedCount=h)}else if(o.snapshotVersion.compareTo(ne.min())>0){u.readTime=pl(s,o.snapshotVersion.toTimestamp());const h=Xc(s,o.expectedCount);h!==null&&(u.expectedCount=h)}return u}(this.serializer,e);const r=mS(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=ed(this.serializer),n.removeTarget=e,this.k_(n)}}class rT extends A0{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=cS(e.writeResults,e.commitTime),r=yn(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=ed(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>uS(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{}class sT extends iT{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new Y(z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,Jc(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y(z.UNKNOWN,s.toString())})}Jo(e,n,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Jo(e,Jc(n,r),i,o,u,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(z.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class oT{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Dn(n),this._a=!1):G("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur="RemoteStore";class aT{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{Kr(this)&&(G(Ur,"Restarting streams for network reachability change."),await async function(c){const h=ie(c);h.Ia.add(4),await So(h),h.Aa.set("Unknown"),h.Ia.delete(4),await Wl(h)}(this))})}),this.Aa=new oT(r,i)}}async function Wl(t){if(Kr(t))for(const e of t.da)await e(!0)}async function So(t){for(const e of t.da)await e(!1)}function P0(t,e){const n=ie(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),kh(n)?Eh(n):Ki(n).x_()&&wh(n,e))}function xh(t,e){const n=ie(t),r=Ki(n);n.Ta.delete(e),r.x_()&&j0(n,e),n.Ta.size===0&&(r.x_()?r.B_():Kr(n)&&n.Aa.set("Unknown"))}function wh(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ki(t).H_(e)}function j0(t,e){t.Ra.$e(e),Ki(t).Y_(e)}function Eh(t){t.Ra=new tS({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Ki(t).start(),t.Aa.aa()}function kh(t){return Kr(t)&&!Ki(t).M_()&&t.Ta.size>0}function Kr(t){return ie(t).Ia.size===0}function R0(t){t.Ra=void 0}async function lT(t){t.Aa.set("Online")}async function uT(t){t.Ta.forEach((e,n)=>{wh(t,e)})}async function cT(t,e){R0(t),kh(t)?(t.Aa.la(e),Eh(t)):t.Aa.set("Unknown")}async function dT(t,e,n){if(t.Aa.set("Online"),e instanceof p0&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const u of s.targetIds)i.Ta.has(u)&&(await i.remoteSyncer.rejectListen(u,o),i.Ta.delete(u),i.Ra.removeTarget(u))}(t,e)}catch(r){G(Ur,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await yl(t,r)}else if(e instanceof ja?t.Ra.Ye(e):e instanceof m0?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ne.min()))try{const r=await I0(t.localStore);n.compareTo(r)>=0&&await function(s,o){const u=s.Ra.Pt(o);return u.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const p=s.Ta.get(h);p&&s.Ta.set(h,p.withResumeToken(c.resumeToken,o))}}),u.targetMismatches.forEach((c,h)=>{const p=s.Ta.get(c);if(!p)return;s.Ta.set(c,p.withResumeToken(at.EMPTY_BYTE_STRING,p.snapshotVersion)),j0(s,c);const y=new Gn(p.target,c,h,p.sequenceNumber);wh(s,y)}),s.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){G(Ur,"Failed to raise snapshot:",r),await yl(t,r)}}async function yl(t,e,n){if(!Gi(e))throw e;t.Ia.add(1),await So(t),t.Aa.set("Offline"),n||(n=()=>I0(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G(Ur,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Wl(t)})}function N0(t,e){return e().catch(n=>yl(t,n,e))}async function Gl(t){const e=ie(t),n=mr(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:oh;for(;hT(e);)try{const i=await GS(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,fT(e,i)}catch(i){await yl(e,i)}b0(e)&&D0(e)}function hT(t){return Kr(t)&&t.Pa.length<10}function fT(t,e){t.Pa.push(e);const n=mr(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function b0(t){return Kr(t)&&!mr(t).M_()&&t.Pa.length>0}function D0(t){mr(t).start()}async function mT(t){mr(t).na()}async function pT(t){const e=mr(t);for(const n of t.Pa)e.X_(n.mutations)}async function gT(t,e,n){const r=t.Pa.shift(),i=fh.from(r,e,n);await N0(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Gl(t)}async function yT(t,e){e&&mr(t).Z_&&await async function(r,i){if(function(o){return Zk(o)&&o!==z.ABORTED}(i.code)){const s=r.Pa.shift();mr(r).N_(),await N0(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Gl(r)}}(t,e),b0(t)&&D0(t)}async function Fp(t,e){const n=ie(t);n.asyncQueue.verifyOperationInProgress(),G(Ur,"RemoteStore received new credentials");const r=Kr(n);n.Ia.add(3),await So(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Wl(n)}async function vT(t,e){const n=ie(t);e?(n.Ia.delete(2),await Wl(n)):e||(n.Ia.add(2),await So(n),n.Aa.set("Unknown"))}function Ki(t){return t.Va||(t.Va=function(n,r,i){const s=ie(n);return s.ia(),new nT(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:lT.bind(null,t),e_:uT.bind(null,t),n_:cT.bind(null,t),J_:dT.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),kh(t)?Eh(t):t.Aa.set("Unknown")):(await t.Va.stop(),R0(t))})),t.Va}function mr(t){return t.ma||(t.ma=function(n,r,i){const s=ie(n);return s.ia(),new rT(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:mT.bind(null,t),n_:yT.bind(null,t),ea:pT.bind(null,t),ta:gT.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Gl(t)):(await t.ma.stop(),t.Pa.length>0&&(G(Ur,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,u=new Sh(e,n,o,i,s);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Th(t,e){if(Dn("AsyncQueue",`${e}: ${t}`),Gi(t))return new Y(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{static emptySet(e){return new Si(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=Ts(),this.sortedSet=new be(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Si)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Si;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(){this.fa=new be(J.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):ee(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Li{constructor(e,n,r,i,s,o,u,c,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(u=>{o.push({type:0,doc:u})}),new Li(e,n,Si.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class xT{constructor(){this.queries=Mp(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=ie(n),s=i.queries;i.queries=Mp(),s.forEach((o,u)=>{for(const c of u.wa)c.onError(r)})})(this,new Y(z.ABORTED,"Firestore shutting down"))}}function Mp(){return new Wr(t=>t0(t),zl)}async function wT(t,e){const n=ie(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new _T,r=e.ba()?0:1);try{switch(r){case 0:s.ya=await n.onListen(i,!0);break;case 1:s.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const u=Th(o,`Initialization of query '${ni(e.query)}' failed`);return void e.onError(u)}n.queries.set(i,s),s.wa.push(e),e.va(n.onlineState),s.ya&&e.Ca(s.ya)&&Ih(n)}async function ET(t,e){const n=ie(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function kT(t,e){const n=ie(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const u of o.wa)u.Ca(i)&&(r=!0);o.ya=i}}r&&Ih(n)}function ST(t,e,n){const r=ie(t),i=r.queries.get(e);if(i)for(const s of i.wa)s.onError(n);r.queries.delete(e)}function Ih(t){t.Da.forEach(e=>{e.next()})}var rd,Lp;(Lp=rd||(rd={})).Fa="default",Lp.Cache="cache";class TT{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Li(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Li.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==rd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(e){this.key=e}}class F0{constructor(e){this.key=e}}class IT{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ue(),this.mutatedKeys=ue(),this.Xa=n0(e),this.eu=new Si(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new Op,i=n?n.eu:this.eu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,u=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,y)=>{const g=i.get(p),E=Ul(this.query,y)?y:null,A=!!g&&this.mutatedKeys.has(g.key),R=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let P=!1;g&&E?g.data.isEqual(E.data)?A!==R&&(r.track({type:3,doc:E}),P=!0):this.iu(g,E)||(r.track({type:2,doc:E}),P=!0,(c&&this.Xa(E,c)>0||h&&this.Xa(E,h)<0)&&(u=!0)):!g&&E?(r.track({type:0,doc:E}),P=!0):g&&!E&&(r.track({type:1,doc:g}),P=!0,(c||h)&&(u=!0)),P&&(E?(o=o.add(E),s=R?s.add(p):s.delete(p)):(o=o.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{eu:o,ru:r,Ds:u,mutatedKeys:s}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((p,y)=>function(E,A){const R=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee(20277,{At:P})}};return R(E)-R(A)}(p.type,y.type)||this.Xa(p.doc,y.doc)),this.su(r),i=i!=null&&i;const u=n&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,h=c!==this.Ya;return this.Ya=c,o.length!==0||h?{snapshot:new Li(this.query,e.eu,s,o,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:u}:{_u:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Op,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ue(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new F0(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new V0(r))}),n}uu(e){this.Ha=e.qs,this.Za=ue();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Li.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Ch="SyncEngine";class CT{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class AT{constructor(e){this.key=e,this.lu=!1}}class PT{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Wr(u=>t0(u),zl),this.Tu=new Map,this.Iu=new Set,this.du=new be(J.comparator),this.Eu=new Map,this.Au=new gh,this.Ru={},this.Vu=new Map,this.mu=Mi.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function jT(t,e,n=!0){const r=B0(t);let i;const s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await O0(r,e,n,!0),i}async function RT(t,e){const n=B0(t);await O0(n,e,!0,!1)}async function O0(t,e,n,r){const i=await KS(t.localStore,gn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let u;return r&&(u=await NT(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&P0(t.remoteStore,i),u}async function NT(t,e,n,r,i){t.gu=(y,g,E)=>async function(R,P,T,k){let C=P.view.nu(T);C.Ds&&(C=await Rp(R.localStore,P.query,!1).then(({documents:v})=>P.view.nu(v,C)));const b=k&&k.targetChanges.get(P.targetId),D=k&&k.targetMismatches.get(P.targetId)!=null,F=P.view.applyChanges(C,R.isPrimaryClient,b,D);return Up(R,P.targetId,F._u),F.snapshot}(t,y,g,E);const s=await Rp(t.localStore,e,!0),o=new IT(e,s.qs),u=o.nu(s.documents),c=ko.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=o.applyChanges(u,t.isPrimaryClient,c);Up(t,n,h._u);const p=new CT(e,n,o);return t.Pu.set(e,p),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),h.snapshot}async function bT(t,e,n){const r=ie(t),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(o=>!zl(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await td(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&xh(r.remoteStore,i.targetId),id(r,i.targetId)}).catch(Wi)):(id(r,i.targetId),await td(r.localStore,i.targetId,!0))}async function DT(t,e){const n=ie(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),xh(n.remoteStore,r.targetId))}async function VT(t,e,n){const r=BT(t);try{const i=await function(o,u){const c=ie(o),h=Ie.now(),p=u.reduce((E,A)=>E.add(A.key),ue());let y,g;return c.persistence.runTransaction("Locally write mutations","readwrite",E=>{let A=Vn(),R=ue();return c.Os.getEntries(E,p).next(P=>{A=P,A.forEach((T,k)=>{k.isValidDocument()||(R=R.add(T))})}).next(()=>c.localDocuments.getOverlayedDocuments(E,A)).next(P=>{y=P;const T=[];for(const k of u){const C=Kk(k,y.get(k.key).overlayedDocument);C!=null&&T.push(new Gr(k.key,C,Gv(C.value.mapValue),on.exists(!0)))}return c.mutationQueue.addMutationBatch(E,h,T,u)}).next(P=>{g=P;const T=P.applyToLocalDocumentSet(y,R);return c.documentOverlayCache.saveOverlays(E,P.batchId,T)})}).then(()=>({batchId:g.batchId,changes:i0(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,u,c){let h=o.Ru[o.currentUser.toKey()];h||(h=new be(ae)),h=h.insert(u,c),o.Ru[o.currentUser.toKey()]=h}(r,i.batchId,n),await To(r,i.changes),await Gl(r.remoteStore)}catch(i){const s=Th(i,"Failed to persist write");n.reject(s)}}async function M0(t,e){const n=ie(t);try{const r=await qS(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Eu.get(s);o&&(ge(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?ge(o.lu,14607):i.removedDocuments.size>0&&(ge(o.lu,42227),o.lu=!1))}),await To(n,r,e)}catch(r){await Wi(r)}}function zp(t,e,n){const r=ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((s,o)=>{const u=o.view.va(e);u.snapshot&&i.push(u.snapshot)}),function(o,u){const c=ie(o);c.onlineState=u;let h=!1;c.queries.forEach((p,y)=>{for(const g of y.wa)g.va(u)&&(h=!0)}),h&&Ih(c)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function FT(t,e,n){const r=ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),s=i&&i.key;if(s){let o=new be(J.comparator);o=o.insert(s,gt.newNoDocument(s,ne.min()));const u=ue().add(s),c=new Hl(ne.min(),new Map,new be(ae),o,u);await M0(r,c),r.du=r.du.remove(s),r.Eu.delete(e),Ah(r)}else await td(r.localStore,e,!1).then(()=>id(r,e,n)).catch(Wi)}async function OT(t,e){const n=ie(t),r=e.batch.batchId;try{const i=await HS(n.localStore,e);z0(n,r,null),L0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await To(n,i)}catch(i){await Wi(i)}}async function MT(t,e,n){const r=ie(t);try{const i=await function(o,u){const c=ie(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return c.mutationQueue.lookupMutationBatch(h,u).next(y=>(ge(y!==null,37113),p=y.keys(),c.mutationQueue.removeMutationBatch(h,y))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,p,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>c.localDocuments.getDocuments(h,p))})}(r.localStore,e);z0(r,e,n),L0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await To(r,i)}catch(i){await Wi(i)}}function L0(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function z0(t,e,n){const r=ie(t);let i=r.Ru[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function id(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||U0(t,r)})}function U0(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(xh(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Ah(t))}function Up(t,e,n){for(const r of n)r instanceof V0?(t.Au.addReference(r.key,e),LT(t,r)):r instanceof F0?(G(Ch,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||U0(t,r.key)):ee(19791,{yu:r})}function LT(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(G(Ch,"New document in limbo: "+n),t.Iu.add(r),Ah(t))}function Ah(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new J(Te.fromString(e)),r=t.mu.next();t.Eu.set(r,new AT(n)),t.du=t.du.insert(n,r),P0(t.remoteStore,new Gn(gn(e0(n.path)),r,"TargetPurposeLimboResolution",Fl.ue))}}async function To(t,e,n){const r=ie(t),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((u,c)=>{o.push(r.gu(c,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const y=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(c.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(c.targetId,y?"current":"not-current")}if(h){i.push(h);const y=vh.Es(c.targetId,h);s.push(y)}}))}),await Promise.all(o),r.hu.J_(i),await async function(c,h){const p=ie(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>L.forEach(h,g=>L.forEach(g.Is,E=>p.persistence.referenceDelegate.addReference(y,g.targetId,E)).next(()=>L.forEach(g.ds,E=>p.persistence.referenceDelegate.removeReference(y,g.targetId,E)))))}catch(y){if(!Gi(y))throw y;G(_h,"Failed to update sequence numbers: "+y)}for(const y of h){const g=y.targetId;if(!y.fromCache){const E=p.Fs.get(g),A=E.snapshotVersion,R=E.withLastLimboFreeSnapshotVersion(A);p.Fs=p.Fs.insert(g,R)}}}(r.localStore,s))}async function zT(t,e){const n=ie(t);if(!n.currentUser.isEqual(e)){G(Ch,"User change. New user:",e.toKey());const r=await T0(n.localStore,e);n.currentUser=e,function(s,o){s.Vu.forEach(u=>{u.forEach(c=>{c.reject(new Y(z.CANCELLED,o))})}),s.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await To(n,r.Bs)}}function UT(t,e){const n=ie(t),r=n.Eu.get(e);if(r&&r.lu)return ue().add(r.key);{let i=ue();const s=n.Tu.get(e);if(!s)return i;for(const o of s){const u=n.Pu.get(o);i=i.unionWith(u.view.tu)}return i}}function B0(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=M0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=FT.bind(null,e),e.hu.J_=kT.bind(null,e.eventManager),e.hu.pu=ST.bind(null,e.eventManager),e}function BT(t){const e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=MT.bind(null,e),e}class vl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ql(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return $S(this.persistence,new zS,e.initialUser,this.serializer)}Du(e){return new S0(yh.Vi,this.serializer)}bu(e){return new YS}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vl.provider={build:()=>new vl};class $T extends vl{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){ge(this.persistence.referenceDelegate instanceof gl,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new TS(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?At.withCacheSize(this.cacheSizeBytes):At.DEFAULT;return new S0(r=>gl.Vi(r,n),this.serializer)}}class sd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>zp(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=zT.bind(null,this.syncEngine),await vT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new xT}()}createDatastore(e){const n=ql(e.databaseInfo.databaseId),r=function(s){return new tT(s)}(e.databaseInfo);return function(s,o,u,c){return new sT(s,o,u,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,u){return new aT(r,i,s,o,u)}(this.localStore,this.datastore,e.asyncQueue,n=>zp(this.syncEngine,n,0),function(){return Dp.C()?new Dp:new XS}())}createSyncEngine(e,n){return function(i,s,o,u,c,h,p){const y=new PT(i,s,o,u,c,h);return p&&(y.fu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ie(i);G(Ur,"RemoteStore shutting down."),s.Ia.add(5),await So(s),s.Ea.shutdown(),s.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}sd.provider={build:()=>new sd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Dn("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr="FirestoreClient";class qT{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=mt.UNAUTHENTICATED,this.clientId=ih.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{G(pr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(G(pr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Th(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function qu(t,e){t.asyncQueue.verifyOperationInProgress(),G(pr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await T0(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{ur("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{G("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{ur("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function Bp(t,e){t.asyncQueue.verifyOperationInProgress();const n=await WT(t);G(pr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Fp(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Fp(e.remoteStore,i)),t._onlineComponents=e}async function WT(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G(pr,"Using user provided OfflineComponentProvider");try{await qu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===z.FAILED_PRECONDITION||i.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ur("Error using user provided cache. Falling back to memory cache: "+n),await qu(t,new vl)}}else G(pr,"Using default OfflineComponentProvider"),await qu(t,new $T(void 0));return t._offlineComponents}async function $0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G(pr,"Using user provided OnlineComponentProvider"),await Bp(t,t._uninitializedComponentsProvider._online)):(G(pr,"Using default OnlineComponentProvider"),await Bp(t,new sd))),t._onlineComponents}function GT(t){return $0(t).then(e=>e.syncEngine)}async function KT(t){const e=await $0(t),n=e.eventManager;return n.onListen=jT.bind(null,e.syncEngine),n.onUnlisten=bT.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=RT.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=DT.bind(null,e.syncEngine),n}function QT(t,e,n={}){const r=new sr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,u,c,h){const p=new HT({next:g=>{p.Ou(),o.enqueueAndForget(()=>ET(s,y)),g.fromCache&&c.source==="server"?h.reject(new Y(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(g)},error:g=>h.reject(g)}),y=new TT(u,p,{includeMetadataChanges:!0,ka:!0});return wT(s,y)}(await KT(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0="firestore.googleapis.com",Hp=!0;class qp{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=q0,this.ssl=Hp}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Hp;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=k0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<kS)throw new Y(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ak("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=H0((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Y(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Y(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Y(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kl{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qp(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new JE;switch(r.type){case"firstParty":return new nk(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=$p.get(n);r&&(G("ComponentProvider","Removing Datastore"),$p.delete(n),r.terminate())}(this),Promise.resolve()}}function YT(t,e,n,r={}){var i;t=zr(t,Kl);const s=th(e),o=t._getSettings(),u=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;s&&(Tw(`https://${c}`),Pw("Firestore",!0)),o.host!==q0&&o.host!==c&&ur("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},o),{host:c,ssl:s,emulatorOptions:r});if(!ol(h,u)&&(t._setSettings(h),r.mockUserToken)){let p,y;if(typeof r.mockUserToken=="string")p=r.mockUserToken,y=mt.MOCK_USER;else{p=Iw(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Y(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new mt(g)}t._authCredentials=new ZE(new Dv(p,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ql(this.firestore,e,this._query)}}class Ze{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new or(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ze(this.firestore,e,this._key)}toJSON(){return{type:Ze._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(wo(n,Ze._jsonSchema))return new Ze(e,r||null,new J(Te.fromString(n.referencePath)))}}Ze._jsonSchemaVersion="firestore/documentReference/1.0",Ze._jsonSchema={type:Ue("string",Ze._jsonSchemaVersion),referencePath:Ue("string")};class or extends Ql{constructor(e,n,r){super(e,n,e0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ze(this.firestore,null,new J(e))}withConverter(e){return new or(this.firestore,e,this._path)}}function XT(t,e,...n){if(t=so(t),Fv("collection","path",e),t instanceof Kl){const r=Te.fromString(e,...n);return sp(r),new or(t,null,r)}{if(!(t instanceof Ze||t instanceof or))throw new Y(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return sp(r),new or(t.firestore,null,r)}}function Ra(t,e,...n){if(t=so(t),arguments.length===1&&(e=ih.newId()),Fv("doc","path",e),t instanceof Kl){const r=Te.fromString(e,...n);return ip(r),new Ze(t,null,new J(r))}{if(!(t instanceof Ze||t instanceof or))throw new Y(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return ip(r),new Ze(t.firestore,t instanceof or?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="AsyncQueue";class Gp{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new C0(this,"async_queue_retry"),this.oc=()=>{const r=Hu();r&&G(Wp,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Hu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Hu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new sr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Gi(e))throw e;G(Wp,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Dn("INTERNAL UNHANDLED ERROR: ",Kp(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=Sh.createAndSchedule(this,e,n,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&ee(47125,{hc:Kp(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function Kp(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Io extends Kl{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Gp,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Gp(e),this._firestoreClient=void 0,await e}}}function JT(t,e){const n=typeof t=="object"?t:LE(),r=typeof t=="string"?t:ul,i=DE(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=kw("firestore");s&&YT(i,...s)}return i}function W0(t){if(t._terminated)throw new Y(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||ZT(t),t._firestoreClient}function ZT(t){var e,n,r;const i=t._freezeSettings(),s=function(u,c,h,p){return new vk(u,c,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,H0(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new qT(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qt(at.fromBase64String(e))}catch(n){throw new Y(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new qt(at.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:qt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(wo(e,qt._jsonSchema))return qt.fromBase64String(e.bytes)}}qt._jsonSchemaVersion="firestore/bytes/1.0",qt._jsonSchema={type:Ue("string",qt._jsonSchemaVersion),bytes:Ue("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new it(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:vn._jsonSchemaVersion}}static fromJSON(e){if(wo(e,vn._jsonSchema))return new vn(e.latitude,e.longitude)}}vn._jsonSchemaVersion="firestore/geoPoint/1.0",vn._jsonSchema={type:Ue("string",vn._jsonSchemaVersion),latitude:Ue("number"),longitude:Ue("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:_n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(wo(e,_n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new _n(e.vectorValues);throw new Y(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_n._jsonSchemaVersion="firestore/vectorValue/1.0",_n._jsonSchema={type:Ue("string",_n._jsonSchemaVersion),vectorValues:Ue("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI=/^__.*__$/;class tI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Gr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Eo(e,this.data,n,this.fieldTransforms)}}function K0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee(40011,{Ec:t})}}class jh{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new jh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return _l(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(K0(this.Ec)&&eI.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class nI{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ql(e)}Dc(e,n,r,i=!1){return new jh({Ec:e,methodName:n,bc:r,path:it.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Q0(t){const e=t._freezeSettings(),n=ql(t._databaseId);return new nI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Y0(t,e,n,r,i,s={}){const o=t.Dc(s.merge||s.mergeFields?2:0,e,n,i);e_("Data must be an object, but it was:",o,r);const u=J0(r,o);let c,h;if(s.merge)c=new nn(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const p=[];for(const y of s.mergeFields){const g=rI(e,y,n);if(!o.contains(g))throw new Y(z.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);sI(p,g)||p.push(g)}c=new nn(p),h=o.fieldTransforms.filter(y=>c.covers(y.field))}else c=null,h=o.fieldTransforms;return new tI(new Ht(u),c,h)}function X0(t,e){if(Z0(t=so(t)))return e_("Unsupported field value:",e,t),J0(t,e);if(t instanceof G0)return function(r,i){if(!K0(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const u of r){let c=X0(u,i.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=so(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Bk(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ie.fromDate(r);return{timestampValue:pl(i.serializer,s)}}if(r instanceof Ie){const s=new Ie(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:pl(i.serializer,s)}}if(r instanceof vn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qt)return{bytesValue:g0(i.serializer,r._byteString)};if(r instanceof Ze){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ph(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof _n)return function(o,u){return{mapValue:{fields:{[qv]:{stringValue:Wv},[cl]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw u.wc("VectorValues must only contain numeric values.");return dh(u.serializer,h)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${sh(r)}`)}(t,e)}function J0(t,e){const n={};return Lv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qr(t,(r,i)=>{const s=X0(i,e.Vc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Z0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ie||t instanceof vn||t instanceof qt||t instanceof Ze||t instanceof G0||t instanceof _n)}function e_(t,e,n){if(!Z0(n)||!Ov(n)){const r=sh(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function rI(t,e,n){if((e=so(e))instanceof Ph)return e._internalPath;if(typeof e=="string")return t_(t,e);throw _l("Field path arguments must be of type string or ",t,!1,void 0,n)}const iI=new RegExp("[~\\*/\\[\\]]");function t_(t,e,n){if(e.search(iI)>=0)throw _l(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ph(...e.split("."))._internalPath}catch{throw _l(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function _l(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Y(z.INVALID_ARGUMENT,u+t+c)}function sI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ze(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new oI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(r_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class oI extends n_{data(){return super.data()}}function r_(t,e){return typeof e=="string"?t_(t,e):e instanceof Ph?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lI{convertValue(e,n="none"){switch(fr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(hr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ee(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return qr(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[cl].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Fe(o.doubleValue));return new _n(s)}convertGeoPoint(e){return new vn(Fe(e.latitude),Fe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ml(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(co(e));default:return null}}convertTimestamp(e){const n=dr(e);return new Ie(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Te.fromString(e);ge(E0(r),9688,{name:e});const i=new ho(r.get(1),r.get(3)),s=new J(r.popFirst(5));return i.isEqual(n)||Dn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class da{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ti extends n_{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Na(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(r_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ti._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ti._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ti._jsonSchema={type:Ue("string",Ti._jsonSchemaVersion),bundleSource:Ue("string","DocumentSnapshot"),bundleName:Ue("string"),bundle:Ue("string")};class Na extends Ti{data(e={}){return super.data(e)}}class Ii{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new da(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Na(this._firestore,this._userDataWriter,r.key,r,new da(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(u=>{const c=new Na(i._firestore,i._userDataWriter,u.doc.key,u.doc,new da(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>s||u.type!==3).map(u=>{const c=new Na(i._firestore,i._userDataWriter,u.doc.key,u.doc,new da(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return u.type!==0&&(h=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),p=o.indexOf(u.doc.key)),{type:uI(u.type),doc:c,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ii._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ih.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function uI(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee(61501,{type:t})}}Ii._jsonSchemaVersion="firestore/querySnapshot/1.0",Ii._jsonSchema={type:Ue("string",Ii._jsonSchemaVersion),bundleSource:Ue("string","QuerySnapshot"),bundleName:Ue("string"),bundle:Ue("string")};class cI extends lI{constructor(e){super(),this.firestore=e}convertBytes(e){return new qt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ze(this.firestore,null,n)}}function dI(t){t=zr(t,Ql);const e=zr(t.firestore,Io),n=W0(e),r=new cI(e);return aI(t._query),QT(n,t._query).then(i=>new Ii(e,r,t,i))}function Qp(t,e,n){t=zr(t,Ze);const r=zr(t.firestore,Io),i=i_(t.converter,e,n);return Rh(r,[Y0(Q0(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,on.none())])}function hI(t){return Rh(zr(t.firestore,Io),[new hh(t._key,on.none())])}function fI(t,e){const n=zr(t.firestore,Io),r=Ra(t),i=i_(t.converter,e);return Rh(n,[Y0(Q0(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,on.exists(!1))]).then(()=>r)}function Rh(t,e){return function(r,i){const s=new sr;return r.asyncQueue.enqueueAndForget(async()=>VT(await GT(r),i,s)),s.promise}(W0(t),e)}(function(e,n=!0){(function(i){qi=i})(ME),al(new oo("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),u=new Io(new ek(r.getProvider("auth-internal")),new rk(o,r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Y(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ho(h.options.projectId,p)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),u._setSettings(s),u},"PUBLIC").setMultipleInstances(!0)),ki(Zm,ep,e),ki(Zm,ep,"esm2017")})();const Yp={apiKey:"AIzaSyCrjfm9mX_pX_D7puCegTe3tOyoHm-0r9E",authDomain:"soulmate-desserts.firebaseapp.com",projectId:"soulmate-desserts",storageBucket:void 0,messagingSenderId:void 0,appId:"1:135653108318:web:916028ee93df39ec8d22cf"};let Xp=null,Nh=null;Yp.projectId?(Xp=Km().length?Km()[0]:Sv(Yp),Nh=JT(Xp)):console.warn("Firebase enabled but config is missing. Check .env settings.");const ha=()=>{if(!Nh)throw new Error("Firebase is not enabled. Set VITE_USE_FIREBASE=true and provide config.")},vs=()=>XT(Nh,"products"),mI=t=>({id:t.id,...t.data()}),fa={async getProducts(){return ha(),(await dI(vs())).docs.map(mI)},async createProduct(t){if(ha(),t.id)return await Qp(Ra(vs(),t.id),t,{merge:!0}),t;const e=await fI(vs(),t);return{...t,id:e.id}},async updateProduct(t,e){return ha(),await Qp(Ra(vs(),t),{...e,id:t},{merge:!0}),{...e,id:t}},async deleteProduct(t){return ha(),await hI(Ra(vs(),t)),!0}},pI="http://localhost:3002",Pe=async(t,e={})=>{try{const n=await fetch(`${pI}/${t}`,{headers:{"Content-Type":"application/json"},...e});if(!n.ok)throw new Error(`API Error: ${n.statusText}`);return await n.json()}catch(n){throw console.error("Request Failed:",n),n}},se={getProducts:()=>fa.getProducts(),createProduct:t=>fa.createProduct(t),updateProduct:(t,e)=>fa.updateProduct(t,e),deleteProduct:t=>fa.deleteProduct(t),getIngredients:()=>Pe("ingredients"),createIngredient:t=>Pe("ingredients",{method:"POST",body:JSON.stringify(t)}),updateIngredient:(t,e)=>Pe(`ingredients/${t}`,{method:"PUT",body:JSON.stringify(e)}),deleteIngredient:t=>Pe(`ingredients/${t}`,{method:"DELETE"}),getOrders:()=>Pe("orders"),createOrder:t=>Pe("orders",{method:"POST",body:JSON.stringify(t)}),updateOrder:(t,e)=>Pe(`orders/${t}`,{method:"PUT",body:JSON.stringify(e)}),getMessages:()=>Pe("messages"),createMessage:t=>Pe("messages",{method:"POST",body:JSON.stringify(t)}),deleteMessage:t=>Pe(`messages/${t}`,{method:"DELETE"}),getUsers:()=>Pe("users"),createUser:t=>Pe("users",{method:"POST",body:JSON.stringify(t)}),deleteUser:t=>Pe(`users/${t}`,{method:"DELETE"}),getInvites:()=>Pe("invites"),createInvite:t=>Pe("invites",{method:"POST",body:JSON.stringify(t)}),updateInvite:(t,e)=>Pe(`invites/${t}`,{method:"PUT",body:JSON.stringify(e)}),deleteInvite:t=>Pe(`invites/${t}`,{method:"DELETE"}),getSettings:()=>Pe("settings/1"),updateSettings:t=>Pe("settings/1",{method:"PUT",body:JSON.stringify({id:1,...t})}),getCountryContacts:()=>Pe("countryContacts"),createCountryContact:t=>Pe("countryContacts",{method:"POST",body:JSON.stringify(t)}),updateCountryContact:(t,e)=>Pe(`countryContacts/${t}`,{method:"PUT",body:JSON.stringify(e)}),deleteCountryContact:t=>Pe(`countryContacts/${t}`,{method:"DELETE"}),getCountryFromIP:async()=>{try{const e=await(await fetch("https://ipapi.co/json/")).json();return{countryCode:e.country_code,countryName:e.country_name}}catch(t){return console.error("Failed to get country from IP:",t),{countryCode:"GENERAL",countryName:"Unknown"}}}},_s={email:"admin@soulmate.com",password:"Admin@2024!",name:"Admin",role:"admin"},s_=B.createContext(),Qr=()=>B.useContext(s_),gI=({children:t})=>{const[e,n]=B.useState(null),[r,i]=B.useState("public"),[s,o]=B.useState([]),[u,c]=B.useState([]),[h,p]=B.useState(0);B.useEffect(()=>{const C=localStorage.getItem("soulmate_user");if(C){const b=JSON.parse(C);n(b),i(b.role)}},[]),B.useEffect(()=>{(async()=>{try{const[b,D]=await Promise.all([se.getUsers(),se.getInvites()]);c(b),o(D)}catch(b){console.error("Failed to load auth data:",b)}})()},[h]);const y=(C,b)=>{if(C===_s.email&&b===_s.password){const F={name:_s.name,email:_s.email,role:_s.role};return n(F),i(F.role),localStorage.setItem("soulmate_user",JSON.stringify(F)),!0}const D=u.find(F=>F.email===C&&F.password===b);if(D){const F={name:D.name,email:D.email,role:D.role};return n(F),i(F.role),localStorage.setItem("soulmate_user",JSON.stringify(F)),!0}return!1},g=async(C,b,D,F)=>{const v=s.find(m=>m.token===C&&!m.used);if(v){const m={id:Date.now().toString(),name:b,email:D,password:F,role:v.role,createdAt:new Date().toISOString()};try{await se.createUser(m);const _={...v,used:!0};await se.updateInvite(v.id,_),c([...u,m]),o(s.map(S=>S.id===v.id?_:S));const x={name:m.name,email:m.email,role:m.role};return n(x),i(x.role),localStorage.setItem("soulmate_user",JSON.stringify(x)),p(S=>S+1),!0}catch(_){return console.error("Registration failed:",_),!1}}return!1},E=()=>{n(null),i("public"),localStorage.removeItem("soulmate_user")},A=async(C,b="",D=7)=>{const F=Math.random().toString(36).substr(2,8).toUpperCase(),v=new Date;v.setDate(v.getDate()+parseInt(D));const m={id:Date.now().toString(),token:F,role:C,email:b,used:!1,expiresAt:v.toISOString().split("T")[0]};try{const _=await se.createInvite(m);return o([...s,_]),{success:!0,invite:_}}catch(_){return console.error("Failed to create invite:",_),{success:!1}}},R=async C=>{try{await se.deleteInvite(C),o(s.filter(b=>b.id!==C))}catch(b){console.error("Failed to delete invite:",b)}},P=async C=>{try{await se.deleteUser(C),c(u.filter(b=>b.id!==C))}catch(b){console.error("Failed to delete user:",b)}},T=r==="admin",k=r==="dealer"||r==="admin";return l.jsx(s_.Provider,{value:{user:e,role:r,login:y,logout:E,registerWithInvite:g,createInvite:A,deleteInvite:R,deleteUser:P,invites:s,users:u,isDealer:k,isAdmin:T,authVersion:h},children:t})},o_=B.createContext(),Qi=()=>B.useContext(o_),yI=({children:t})=>{const[e,n]=B.useState(()=>{const E=localStorage.getItem("soulmate_cart");return E?JSON.parse(E):[]}),[r,i]=B.useState(!1),[s,o]=B.useState(!1);B.useEffect(()=>{localStorage.setItem("soulmate_cart",JSON.stringify(e))},[e]);const u=(E,A=1)=>{n(R=>R.find(T=>T.id===E.id)?R.map(T=>T.id===E.id?{...T,quantity:T.quantity+A}:T):[...R,{...E,quantity:A}]),i(!0),o(!0),setTimeout(()=>o(!1),300)},c=E=>{n(A=>A.filter(R=>R.id!==E))},h=(E,A)=>{n(R=>R.map(P=>{if(P.id===E){const T=P.quantity+A;return T>0?{...P,quantity:T}:P}return P}))},p=()=>n([]),y=e.reduce((E,A)=>E+A.price*A.quantity,0),g=e.reduce((E,A)=>E+A.quantity,0);return l.jsx(o_.Provider,{value:{cart:e,addToCart:u,removeFromCart:c,updateQuantity:h,clearCart:p,cartTotal:y,itemCount:g,isOpen:r,setIsOpen:i,animation:s},children:t})},Cs={home:{en:"Home",ru:"",tr:"Ana Sayfa",tk:"Ba Sahypa"},ourCakes:{en:"Our Cakes",ru:" ",tr:"Pastalarmz",tk:"Tortlarymyz"},contact:{en:"Contact",ru:"",tr:"letiim",tk:"Habarlamak"},admin:{en:"Admin",ru:"",tr:"Ynetici",tk:"Admin"},login:{en:"Login",ru:"",tr:"Giri Yap",tk:"Girmek"},logout:{en:"Logout",ru:"",tr:"k Yap",tk:"ykmak"},settings:{en:"Settings",ru:"",tr:"Ayarlar",tk:"Sazlamalar"},cart:{en:"Cart",ru:"",tr:"Sepet",tk:"Sebet"},searchProducts:{en:"Search Products",ru:" ",tr:"rn Ara",tk:"nm Gzle"},searchPlaceholder:{en:"Search",ru:"",tr:"Ara",tk:"Gzle"},heroTitle:{en:"Where Every Bite is",ru:"   - ",tr:"Her Lokma",tk:"Her Bir Blek"},heroTitleEmphasis:{en:"Pure Love",ru:" ",tr:"Saf Ak",tk:"Arassa Sgi"},heroDescription:{en:"Handcrafted artisan desserts made with passion and the finest ingredients. From birthdays to weddings, we make every celebration sweeter.",ru:" ,      .     ,     .",tr:"Tutku ve en iyi malzemelerle yaplm el yapm zanaat tatllar. Doum gnlerinden dnlere, her kutlamay daha tatl yapyoruz.",tk:"Yhlasly we i gowy ingredientler bilen elde asalan desertler. Doglan gnlerden tolara enli, her bir baramylygy has sji edris."},exploreCreations:{en:"Explore Our Creations ",ru:"   ",tr:"Yaratmlarmz Kefet ",tk:"Dredijiligimizi Gzden Geiri "},customOrders:{en:"Custom Orders",ru:" ",tr:"zel Sipariler",tk:"rite Sargytlar"},ourCollections:{en:"Our Collections",ru:" ",tr:"Koleksiyonlarmz",tk:"Kolleksialarymyz"},collectionsSubtitle:{en:"From intimate gatherings to grand celebrations",ru:"     ",tr:"Samimi toplantlardan byk kutlamalara",tk:"Kii ygnanyyklardan uly baramylyklara"},featuredCreations:{en:"Featured Creations",ru:" ",tr:"ne kan Yaratmlar",tk:"Salanan Dredijilik"},featuredSubtitle:{en:"Our most loved desserts this season",ru:"    ",tr:"Bu sezonun en sevilen tatllar",tk:"Bu mwsmi i sgli desertleri"},addToCart:{en:"Add to Cart",ru:"  ",tr:"Sepete Ekle",tk:"Sebede Go"},quantity:{en:"Quantity",ru:"",tr:"Miktar",tk:"Mukdar"},dealerPrice:{en:"Dealer Price",ru:" ",tr:"Bayi Fiyat",tk:"Diler Bahasy"},retailPrice:{en:"Retail Price",ru:" ",tr:"Perakende Fiyat",tk:"Blek Satuw Bahasy"},regularSellingPrice:{en:"Regular Selling Price",ru:"  ",tr:"Normal Sat Fiyat",tk:"Adaty Satuw Bahasy"},cost:{en:"Cost",ru:"",tr:"Maliyet",tk:"Bahasy"},profit:{en:"Profit",ru:"",tr:"Kar",tk:"Peda"},margin:{en:"Margin",ru:"",tr:"Marj",tk:"Marja"},editPrice:{en:"Edit Price",ru:" ",tr:"Fiyat Dzenle",tk:"Bahany tget"},save:{en:"Save",ru:"",tr:"Kaydet",tk:"Sakla"},cancel:{en:"Cancel",ru:"",tr:"ptal",tk:"atyr"},edit:{en:"Edit",ru:"",tr:"Dzenle",tk:"tget"},delete:{en:"Delete",ru:"",tr:"Sil",tk:"Poz"},yourCart:{en:"Your Cart",ru:" ",tr:"Sepetiniz",tk:"Sizi Sebediiz"},cartEmpty:{en:"Your cart is empty",ru:"  ",tr:"Sepetiniz bo",tk:"Sebediiz bo"},subtotal:{en:"Subtotal",ru:" ",tr:"Ara Toplam",tk:"Ara Jemi"},proceedToCheckout:{en:"Proceed to Checkout",ru:"  ",tr:"demeye Ge",tk:"Tleg Et"},remove:{en:"Remove",ru:"",tr:"Kaldr",tk:"Ayr"},checkout:{en:"Checkout",ru:" ",tr:"deme",tk:"Tleg"},contactInfo:{en:"Contact Info",ru:" ",tr:"letiim Bilgileri",tk:"Habarlamak Maglumatlary"},firstName:{en:"First Name",ru:"",tr:"Ad",tk:"Ady"},lastName:{en:"Last Name",ru:"",tr:"Soyad",tk:"Familiasy"},email:{en:"Email",ru:" ",tr:"E-posta",tk:"E-pota"},phone:{en:"Phone",ru:"",tr:"Telefon",tk:"Telefon"},delivery:{en:"Delivery",ru:"",tr:"Teslimat",tk:"Eltip Bermek"},address:{en:"Address",ru:"",tr:"Adres",tk:"Salgy"},date:{en:"Date",ru:"",tr:"Tarih",tk:"Sene"},time:{en:"Time",ru:"",tr:"Saat",tk:"Wagt"},morning:{en:"Morning",ru:"",tr:"Sabah",tk:"Irden"},afternoon:{en:"Afternoon",ru:"",tr:"leden Sonra",tk:"Gnortan"},evening:{en:"Evening",ru:"",tr:"Akam",tk:"Agam"},notes:{en:"Notes",ru:"",tr:"Notlar",tk:"Bellikler"},specialInstructions:{en:"Special Instructions",ru:" ",tr:"zel Talimatlar",tk:"rite Grkezmeler"},anyRequests:{en:"Any special requests...",ru:"  ...",tr:"zel istekleriniz...",tk:"rite haylar..."},orderSummary:{en:"Order Summary",ru:" ",tr:"Sipari zeti",tk:"Sargyt Jemi"},tax:{en:"Tax",ru:"",tr:"Vergi",tk:"Salgyt"},total:{en:"Total",ru:"",tr:"Toplam",tk:"Jemi"},placeOrder:{en:"Place Order",ru:" ",tr:"Sipari Ver",tk:"Sargyt Ber"},orderPlaced:{en:"Order Placed!",ru:" !",tr:"Sipari Verildi!",tk:"Sargyt Berildi!"},orderPlacedMessage:{en:"We'll contact you shortly to confirm.",ru:"        .",tr:"Onaylamak iin ksa sre iinde sizinle iletiime geeceiz.",tk:"Tassyklamak in gysga wagtda siz bilen habarlaarys."},continueShopping:{en:"Continue Shopping",ru:" ",tr:"Alverie Devam Et",tk:"Swda Dowam Et"},addDessertsFirst:{en:"Add desserts first!",ru:"  !",tr:"nce tatl ekleyin!",tk:"Ilki desert gou!"},browse:{en:"Browse",ru:"",tr:"Gzat",tk:"Gz at"},qty:{en:"Qty",ru:"-",tr:"Adet",tk:"San"},welcomeBack:{en:"Welcome Back",ru:" ",tr:"Tekrar Hogeldiniz",tk:"Ho Geldiiz"},joinUs:{en:"Join Us",ru:"",tr:"Bize Katln",tk:"Bize Gouly"},signInToAccount:{en:"Sign in to your account",ru:"   ",tr:"Hesabnza giri yapn",tk:"Hasabyyza giri"},registerWithInvite:{en:"Register with invite token",ru:"  ",tr:"Davet koduyla kayt olun",tk:"akylyk bilen hasaba aly"},signIn:{en:"Sign In",ru:"",tr:"Giri Yap",tk:"Gir"},signingIn:{en:"Signing In...",ru:"...",tr:"Giri Yaplyor...",tk:"Girilr..."},register:{en:"Register",ru:"",tr:"Kayt Ol",tk:"Hasaba Al"},password:{en:"Password",ru:"",tr:"ifre",tk:"Aar sz"},createPassword:{en:"Create Password",ru:" ",tr:"ifre Olutur",tk:"Aar sz dredi"},fullName:{en:"Full Name",ru:" ",tr:"Ad Soyad",tk:"Doly Ady"},inviteToken:{en:"Invite Token",ru:" ",tr:"Davet Kodu",tk:"akylyk Kody"},enterInviteToken:{en:"Enter the token from admin",ru:"   ",tr:"Yneticiden aldnz kodu girin",tk:"Admindan alnan kody girizi"},adminLogin:{en:"Admin Login",ru:" ",tr:"Ynetici Girii",tk:"Admin Girii"},testTokens:{en:"Test Tokens",ru:" ",tr:"Test Kodlar",tk:"Synag Kodlary"},username:{en:"Dealer",ru:"",tr:"Bayi",tk:"Diler"},dealer:{en:"Dealer",ru:"",tr:"Bayi",tk:"Diler"},user:{en:"User",ru:"",tr:"Kullanc",tk:"Ulanyjy"},invalidCredentials:{en:"Invalid credentials",ru:" ",tr:"Geersiz kimlik bilgileri",tk:"Ndogry maglumatlar"},loginSuccessful:{en:"Login successful! Redirecting...",ru:" ! ...",tr:"Giri baarl! Ynlendiriliyor...",tk:"stnlikli giri! Ugradylar..."},getInTouch:{en:"Get in Touch",ru:"  ",tr:"letiime Gein",tk:"Habarlay"},contactSubtitle:{en:"Questions? Custom orders? We'd love to hear from you!",ru:"?  ?   !",tr:"Sorularnz m var? zel sipariler? Sizden haber almak isteriz!",tk:"Soraglaryyz barmy? rite sargytlar? Sizden eitmek isleris!"},name:{en:"Name",ru:"",tr:"Ad",tk:"Ady"},message:{en:"Message",ru:"",tr:"Mesaj",tk:"Habar"},sendMessage:{en:"Send Message",ru:" ",tr:"Mesaj Gnder",tk:"Habar Iber"},messageSent:{en:"Message Sent!",ru:" !",tr:"Mesaj Gnderildi!",tk:"Habar Iberildi!"},messageSentConfirm:{en:"We'll reply within 24 hours.",ru:"    24 .",tr:"24 saat iinde yant vereceiz.",tk:"24 sagady iinde jogap bereris."},tellUsAboutDreamDessert:{en:"Tell us about your dream dessert...",ru:"    ...",tr:"Hayalinizdeki tatly bize anlatn...",tk:"Arzuw edn desertiiz barada ady..."},back:{en:"Back",ru:"",tr:"Geri",tk:"Yza"},languageSettings:{en:"Language Settings",ru:" ",tr:"Dil Ayarlar",tk:"Dil Sazlamalary"},selectLanguage:{en:"Select Language",ru:" ",tr:"Dil Sein",tk:"Dil Sala"},currencySettings:{en:"Currency Settings",ru:" ",tr:"Para Birimi Ayarlar",tk:"Pul Birligi Sazlamalary"},selectCurrency:{en:"Select Currency",ru:" ",tr:"Para Birimi Sein",tk:"Pul Birligi Sala"},general:{en:"General",ru:"",tr:"Genel",tk:"Umumy"},currencies:{en:"Currencies",ru:"",tr:"Para Birimleri",tk:"Pul Birlikleri"},addCurrency:{en:"Add Currency",ru:" ",tr:"Para Birimi Ekle",tk:"Pul Birligi Go"},currencyCode:{en:"Currency Code",ru:" ",tr:"Para Birimi Kodu",tk:"Pul Birligi Kody"},currencyName:{en:"Currency Name",ru:" ",tr:"Para Birimi Ad",tk:"Pul Birligi Ady"},symbol:{en:"Symbol",ru:"",tr:"Sembol",tk:"Nyan"},exchangeRate:{en:"Exchange Rate",ru:" ",tr:"Dviz Kuru",tk:"Aly-aly Kursy"},actions:{en:"Actions",ru:"",tr:"lemler",tk:"Hereketler"},defaultCurrency:{en:"Default",ru:" ",tr:"Varsaylan",tk:"Bellenen"},setDefault:{en:"Set as Default",ru:" ",tr:"Varsaylan Yap",tk:"Esasy Et"},adminGeneralSettings:{en:"General Settings",ru:" ",tr:"Genel Ayarlar",tk:"Umumy Sazlamalar"},contactEmail:{en:"Contact Email",ru:" Email",tr:"letiim E-posta",tk:"Habarlamak E-pota"},contactPhone:{en:"Contact Phone",ru:" ",tr:"letiim Telefon",tk:"Habarlamak Telefon"},footerSettingsDescription:{en:"These details will be displayed in the site footer.",ru:"      .",tr:"Bu bilgiler site altbilgisinde grntlenecektir.",tk:"Bu maglumatlar saty aaky bleginde grkeziler."},manageCurrencies:{en:"Manage Currencies",ru:" ",tr:"Para Birimlerini Ynet",tk:"Pul Birliklerini Dolandyr"},addNewCurrency:{en:"Add New Currency",ru:"  ",tr:"Yeni Para Birimi Ekle",tk:"Tze Pul Birligi Go"},editCurrency:{en:"Edit Currency",ru:" ",tr:"Para Birimini Dzenle",tk:"Pul Birligini tget"},updateCurrency:{en:"Update Currency",ru:" ",tr:"Para Birimini Gncelle",tk:"Pul Birligini Tzele"},confirmAddCurrency:{en:"Add Currency",ru:"",tr:"Ekle",tk:"Go"},noCurrenciesAdded:{en:"No currencies added yet.",ru:"   .",tr:"Henz para birimi eklenmedi.",tk:"Entek pul birligi goulmady."},baseCurrencyLabel:{en:"Base",ru:"",tr:"Baz",tk:"Esasy"},currentRate:{en:"Current rate",ru:" ",tr:"Gncel kur",tk:"Hazirki kurs"},cannotDeleteBase:{en:"Cannot delete base currency",ru:"   ",tr:"Baz para birimi silinemez",tk:"Esasy pul birligini pozup bolmaar"},cannotDeleteActive:{en:"Cannot delete active currency. Please switch to another currency first.",ru:"   . ,    .",tr:"Aktif para birimi silinemez. Ltfen nce baka bir para birimine gein.",tk:"Ije pul birligini pozup bolmaar. Ilki bilen baga pul birligine gei."},storeSettings:{en:"Store Settings",ru:" ",tr:"Maaza Ayarlar",tk:"Dkan Sazlamalary"},shippingCost:{en:"Shipping Cost",ru:" ",tr:"Kargo creti",tk:"Eltip Bermek Bahasy"},taxRate:{en:"Tax Rate (%)",ru:"  (%)",tr:"Vergi Oran (%)",tk:"Salgyt Mberi (%)"},shipping:{en:"Shipping",ru:"",tr:"Kargo",tk:"Eltip bermek"},adminDashboard:{en:"Admin Dashboard",ru:" ",tr:"Ynetici Paneli",tk:"Admin Paneli"},overview:{en:"Overview",ru:"",tr:"Genel Bak",tk:"Syn"},orders:{en:"Orders",ru:"",tr:"Sipariler",tk:"Sargytlar"},products:{en:"Products",ru:"",tr:"rnler",tk:"nmler"},ingredients:{en:"Ingredients",ru:"",tr:"Malzemeler",tk:"Ingredientler"},invites:{en:"Invites",ru:"",tr:"Davetiyeler",tk:"akylyklar"},users:{en:"Users",ru:"",tr:"Kullanclar",tk:"Ulanyjylar"},pendingOrders:{en:"Pending Orders",ru:" ",tr:"Bekleyen Sipariler",tk:"Garaylan Sargytlar"},registeredUsers:{en:"Registered Users",ru:" ",tr:"Kaytl Kullanclar",tk:"Hasaba Alnan Ulanyjylar"},totalRevenue:{en:"Total Revenue",ru:" ",tr:"Toplam Gelir",tk:"Jemi Girdeji"},thisWeek:{en:"This Week",ru:" ",tr:"Bu Hafta",tk:"Bu Hepde"},recentOrders:{en:"Recent Orders",ru:" ",tr:"Son Sipariler",tk:"Soky Sargytlar"},allOrders:{en:"All Orders",ru:" ",tr:"Tm Sipariler",tk:"hli Sargytlar"},pending:{en:"Pending",ru:"",tr:"Bekliyor",tk:"Garaylar"},inProgress:{en:"In Progress",ru:" ",tr:"Hazrlanyor",tk:"Taarlanar"},ready:{en:"Ready",ru:"",tr:"Hazr",tk:"Taar"},delivered:{en:"Delivered",ru:"",tr:"Teslim Edildi",tk:"Gowuryldy"},cancelled:{en:"Cancelled",ru:"",tr:"ptal Edildi",tk:"atyryldy"},customer:{en:"Customer",ru:"",tr:"Mteri",tk:"Mderi"},items:{en:"Items",ru:"",tr:"rnler",tk:"Harytlar"},status:{en:"Status",ru:"",tr:"Durum",tk:"agda"},createNewInvite:{en:"Create New Invite",ru:" ",tr:"Yeni Davet Olutur",tk:"Tze akylyk Dret"},emailOptional:{en:"Email (optional - restrict to specific email)",ru:"Email ()",tr:"E-posta (opsiyonel)",tk:"E-pota (hkmany dl)"},leaveBlankForAnyEmail:{en:"Leave blank for any email",ru:"    email",tr:"Herhangi bir e-posta iin bo brakn",tk:"Islendik e-pota in bo gou"},leaveBlankForAnyEmailPlaceholder:{en:"Leave blank for any email",ru:"    email",tr:"Herhangi bir e-posta iin bo brakn",tk:"Islendik e-pota in bo gou"},role:{en:"Role",ru:"",tr:"Rol",tk:"Rol"},regularUser:{en:"Regular User",ru:" ",tr:"Normal Kullanc",tk:"Adaty Ulanyjy"},expiresInDays:{en:"Expires in (days)",ru:"  ()",tr:"Geerlilik (gn)",tk:"Mhleti (gn)"},createInvite:{en:"Create Invite",ru:" ",tr:"Davet Olutur",tk:"akylyk Dret"},allInvites:{en:"All Invites",ru:" ",tr:"Tm Davetler",tk:"hli akylyklar"},noInvitesYet:{en:"No invites yet.",ru:"  .",tr:"Henz davet yok.",tk:"Entek akylyk ok."},token:{en:"Token",ru:"",tr:"Kod",tk:"Kod"},expires:{en:"Expires",ru:"",tr:"Biti",tk:"Mhleti"},active:{en:"Active",ru:"",tr:"Aktif",tk:"Ije"},used:{en:"Used",ru:"",tr:"Kullanld",tk:"Ulanyldy"},expired:{en:"Expired",ru:"",tr:"Sresi Doldu",tk:"Mhleti Gedi"},any:{en:"Any",ru:"",tr:"Herhangi",tk:"Islendik"},noUsersYet:{en:"No users registered yet.",ru:"  .",tr:"Henz kaytl kullanc yok.",tk:"Entek hasaba alnan ulanyjy ok."},registered:{en:"Registered",ru:"",tr:"Kayt Tarihi",tk:"Hasaba Alyndy"},productManagement:{en:"Product Management",ru:" ",tr:"rn Ynetimi",tk:"nm Dolandyryy"},makingPrice:{en:"Making Price",ru:" ",tr:"Yapm creti",tk:"asama Bahasy"},productRegions:{en:"Available Regions",ru:" ",tr:"Mevcut Blgeler",tk:"Eleterli Sebitler"},productRegionsHelp:{en:"Leave empty to show in all regions, or select specific regions to restrict availability.",ru:"        .",tr:"Tm blgelerde gstermek iin bo brakn veya belirli blgeleri sein.",tk:"hli sebitlere grkezmek in bo gou a-da belli sebitleri sala."},allRegions:{en:"All Regions",ru:" ",tr:"Tm Blgeler",tk:"hli Sebitler"},ingredientManagement:{en:"Ingredient Management",ru:" ",tr:"Malzeme Ynetimi",tk:"Ingredient Dolandyryy"},addIngredient:{en:"Add Ingredient",ru:" ",tr:"Malzeme Ekle",tk:"Ingredient Go"},ingredientName:{en:"Ingredient Name",ru:" ",tr:"Malzeme Ad",tk:"Ingredient Ady"},unit:{en:"Unit",ru:"",tr:"Birim",tk:"Birlik"},pricePerUnit:{en:"Price per Unit",ru:"  ",tr:"Birim Fiyat",tk:"Birlik Bahasy"},noIngredientsYet:{en:"No ingredients yet.",ru:"  .",tr:"Henz malzeme yok.",tk:"Entek ingredient ok."},orderManagement:{en:"Order Management",ru:" ",tr:"Sipari Ynetimi",tk:"Sargyt Dolandyryy"},noOrdersYet:{en:"No orders yet.",ru:"  .",tr:"Henz sipari yok.",tk:"Entek sargyt ok."},viewDetails:{en:"View Details",ru:"",tr:"Detaylar",tk:"Jikme-jiklikler"},updateStatus:{en:"Update Status",ru:" ",tr:"Durumu Gncelle",tk:"agday Tzele"},completed:{en:"Completed",ru:"",tr:"Tamamland",tk:"Tamamlandy"},goToLogin:{en:"Go to Login",ru:"  ",tr:"Girie Git",tk:"Girie Git"},backToHome:{en:"Back to Home",ru:"  ",tr:"Ana Sayfaya Dn",tk:"Ba Sahypa"},adminCredentials:{en:"Admin Credentials",ru:"  ",tr:"Ynetici Bilgileri",tk:"Admin Maglumatlary"},pleaseLoginWithAdmin:{en:"Please login with admin credentials.",ru:",     .",tr:"Ltfen ynetici bilgileriyle giri yapn.",tk:"Admin maglumatlary bilen giri."},createdToken:{en:"Created! Token:",ru:"! :",tr:"Oluturuldu! Kod:",tk:"Dredildi! Kod:"},update:{en:"Update",ru:"",tr:"Gncelle",tk:"Tzele"},save:{en:"Save",ru:"",tr:"Kaydet",tk:"Sakla"},add:{en:"Add",ru:"",tr:"Ekle",tk:"Go"},confirmProductName:{en:"Confirm/Edit product name",ru:"/  ",tr:"rn adn onayla/dzenle",tk:"nm adyny tassykla/tget"},createAsNewProduct:{en:"Create {name} as new product",ru:" {name}   ",tr:"{name} rnn yeni olutur",tk:"{name} adynda tze nm dret"},editIngredient:{en:"Edit Ingredient",ru:" ",tr:"Malzemeyi Dzenle",tk:"Ingredienti tget"},addNewIngredient:{en:"Add New Ingredient",ru:"  ",tr:"Yeni Malzeme Ekle",tk:"Tze Ingredient Go"},deleteIngredientConfirm:{en:"Delete this ingredient?",ru:"  ?",tr:"Bu malzemeyi silmek istediinizden emin misiniz?",tk:"Bu ingredienti pozmak islersiizmi?"},ingredientNameRequired:{en:"Ingredient name is required",ru:"  ",tr:"Malzeme ad gereklidir",tk:"Ingredient ady hkmany"},ingredientUsedInProducts:{en:"This ingredient is used in {count} product(s): {products}. Are you sure you want to delete it?",ru:"    {count} (): {products}.  ,    ?",tr:"Bu malzeme {count} rnde kullanlyor: {products}. Silmek istediinizden emin misiniz?",tk:"Bu ingredient {count} nmde ulanylyar: {products}. Pozmak islersiizmi?"},productName:{en:"Product Name",ru:" ",tr:"rn Ad",tk:"nm Ady"},productNotFound:{en:"Product not found",ru:"  ",tr:"rn bulunamad",tk:"nm tapylmady"},productBadge:{en:"Product Badge",ru:" ",tr:"rn Rozeti",tk:"nm Nyany"},noneNoBadge:{en:"None (No Badge)",ru:" ( )",tr:"Yok (Rozet Yok)",tk:"ok (Nyan ok)"},showInLanguages:{en:"Show in Languages",ru:"  ",tr:"Dillerde Gster",tk:"Dillerde Grkez"},selectLanguagesProduct:{en:"Select which languages this product will be visible in. At least one language required.",ru:" ,      .    .",tr:"Bu rnn hangi dillerde grneceini sein. En az bir dil gereklidir.",tk:"Bu nmi hasy dillerde grnjekdigini sala. I az bir dil zerur."},createProduct:{en:"Create Product",ru:" ",tr:"rn Olutur",tk:"nm Dret"},create:{en:"Create",ru:"",tr:"Olutur",tk:"Dret"},createEditProduct:{en:"Create / Edit Product",ru:" /  ",tr:"rn Olutur / Dzenle",tk:"nm Dret / tget"},saveChanges:{en:"Save Changes",ru:" ",tr:"Deiiklikleri Kaydet",tk:"tgemeleri Sakla"},visibleIn:{en:"Visible in:",ru:" :",tr:"Grnr:",tk:"Grnr:"},imageSizeLimit:{en:"Image size must be less than 5MB",ru:"     5 ",tr:"Grsel boyutu 5MB'dan kk olmaldr",tk:"Surat legi 5MB-dan kii bolmaly"},imageResolutionLimit:{en:"Image resolution too large",ru:"   ",tr:"Grsel znrl ok byk",tk:"Suraty zgdi gaty uly"},selectImageFile:{en:"Please select an image file",ru:" ",tr:"Dosya Se",tk:"Fal Sala"},imageUploadedSuccess:{en:"Image uploaded successfully!",ru:"  !",tr:"Grsel baaryla yklendi!",tk:"Surat stnlikli klendi!"},imageURL:{en:"Image URL",ru:"URL ",tr:"Grsel URL",tk:"Surat URL"},uploadImage:{en:"Upload Image",ru:" ",tr:"Grsel Ykle",tk:"Surat kle"},description:{en:"Description",ru:"",tr:"Aklama",tk:"Dndiri"},costAnalysis:{en:"Cost Analysis",ru:" ",tr:"Maliyet Analizi",tk:"Baha Derewi"},pricingBreakdown:{en:"Pricing Breakdown",ru:" ",tr:"Fiyat Ayrnts",tk:"Bahany Detallary"},showCostAnalysis:{en:"Show Cost Analysis",ru:" ",tr:"Analizi Gster",tk:"Derewi Grkez"},hideCostAnalysis:{en:"Hide Cost Analysis",ru:" ",tr:"Analizi Gizle",tk:"Derewi Gizle"},totalCost:{en:"Total Cost",ru:" ",tr:"Toplam Maliyet",tk:"Jemi Baha"},sellingPrice:{en:"Selling Price",ru:" ",tr:"Sat Fiyat",tk:"Satuw Bahasy"},profitMargin:{en:"Markup",ru:"",tr:"Kar Oran",tk:"stne goma"},confirmDelete:{en:"Confirm Delete",ru:" ",tr:"Silmeyi Onayla",tk:"Pozmagy Tassykla"},confirmDeleteDetail:{en:"Delete the selected product from your catalog.",ru:"    .",tr:"Seili rn katalounuzdan silin.",tk:"Salanan nmi katalogdan poz."},selectFaceImage:{en:"Select Face Image",ru:"  ",tr:"Kapak Grselini Se",tk:"Grkeziljek suraty sala"},noIngredientsListed:{en:"No ingredients listed",ru:"  ",tr:"Malzeme listesi yok",tk:"Ingredient sanawda ok"},makingPriceLabor:{en:"Making Price (Labor)",ru:" ",tr:"ilik creti",tk:"Zhmet Bahasy"},footerDescription:{en:"Handcrafted with love. Premium ingredients for unforgettable celebrations.",ru:"  .     .",tr:"Sevgiyle yapld. Unutulmaz kutlamalar iin premium malzemeler.",tk:"Sgi bilen asaldy. atdan ykmajak baramylyklar in premium ingredientler."},quickLinks:{en:"Quick Links",ru:" ",tr:"Hzl Balantlar",tk:"alt Baglanyyklar"},collections:{en:"Collections",ru:"",tr:"Koleksiyonlar",tk:"Kolleksialar"},birthdayCakes:{en:"Birthday Cakes",ru:"   ",tr:"Doum Gn Pastalar",tk:"Doglan Gn Tortlary"},weddingCakes:{en:"Wedding Cakes",ru:" ",tr:"Dn Pastalar",tk:"To Tortlary"},cupcakes:{en:"Cupcakes",ru:"",tr:"Cupcake'ler",tk:"Kapkekler"},madeWithLove:{en:"Made with ",ru:"  ",tr:" ile yapld",tk:" bilen asaldy"},dataManagement:{en:"Data Management",ru:" ",tr:"Veri Ynetimi",tk:"Maglumat Dolandyryy"},resetData:{en:"Reset",ru:"",tr:"Sfrla",tk:"Aslyna Getir"},countryContacts:{en:"Country Contacts",ru:"  ",tr:"lke letiimleri",tk:"urt Aragatnayklary"},countryContactsDescription:{en:"Manage contact info for different countries. Visitors will see contact info based on their location.",ru:"    .     .",tr:"Farkl lkeler iin iletiim bilgilerini ynetin. Ziyaretiler konumlarna gre iletiim bilgilerini grecektir.",tk:"Drli urtlar in aragatnayk maglumatlaryny dolandyry. Myhmanlar z erlen erine gr aragatnayk maglumatlaryny grerler."},addCountryContact:{en:"Add Country Contact",ru:"  ",tr:"lke letiimi Ekle",tk:"urt Aragatnaygyny Go"},editCountryContact:{en:"Edit Country Contact",ru:" ",tr:"letiimi Dzenle",tk:"Aragatnaygy tget"},countryName:{en:"Country Name",ru:" ",tr:"lke Ad",tk:"urt Ady"},countryCode:{en:"Country Code",ru:" ",tr:"lke Kodu",tk:"urt Kody"},countryCodeHelp:{en:"ISO 2-letter code (e.g., US, TM, DE) or GENERAL for default",ru:"ISO 2-  (., US, TM, DE)  GENERAL  ",tr:"ISO 2 harfli kod (rn: US, TM, DE) veya varsaylan iin GENERAL",tk:"ISO 2 harpli kod (meselem, US, TM, DE) a-da deslapky in GENERAL"},setAsDefault:{en:"Set as Default",ru:"  ",tr:"Varsaylan Yap",tk:"Deslapky edip Bellemek"},defaultContact:{en:"Default",ru:" ",tr:"Varsaylan",tk:"Deslapky"},noCountryContacts:{en:"No country contacts yet. Add one to get started.",ru:"    .  .",tr:"Henz lke iletiimi yok. Balamak iin bir tane ekleyin.",tk:"Entek urt aragatnaygy ok. Balamak in gou."},deleteCountryContact:{en:"Delete this country contact?",ru:"   ?",tr:"Bu lke iletiimini silmek istiyor musunuz?",tk:"Bu urt aragatnaygyny pozmak islersiizmi?"},cannotDeleteDefault:{en:"Cannot delete the default contact. Set another contact as default first.",ru:"    .      .",tr:"Varsaylan iletiim silinemez. nce baka bir iletiimi varsaylan yapn.",tk:"Deslapky aragatnaygy pozmak bolmaar. Ilki baga aragatnaygy deslapky edip bell."},yourLocation:{en:"Your Location",ru:" ",tr:"Konumunuz",tk:"Sizi erlen eriiz"},contactInfoForYourRegion:{en:"Contact info for your region",ru:"   ",tr:"Blgeniz iin iletiim bilgileri",tk:"Sizi sebitiiz in aragatnayk maglumatlary"},messages:{en:"Messages",ru:"",tr:"Mesajlar",tk:"Habarlar"},sender:{en:"Sender",ru:"",tr:"Gnderen",tk:"Ugradyjy"},date:{en:"Date",ru:"",tr:"Tarih",tk:"Sene"},noMessagesYet:{en:"No messages yet",ru:"  ",tr:"Henz mesaj yok",tk:"Heniz habar ok"},viewMessage:{en:"View Message",ru:"",tr:"Mesaj Gr",tk:"Habary Gr"},messageCreateSuccess:{en:"Message sent successfully!",ru:"  !",tr:"Mesaj baaryla gnderildi!",tk:"Habar stnlikli ugradyldy!"},accessDenied:{en:"Access Denied",ru:" ",tr:"Eriim Engellendi",tk:"Giri Gadagan"},adminOnly:{en:"Admin only.",ru:"  .",tr:"Sadece ynetici.",tk:"Die admin in."},loading:{en:"Loading...",ru:"...",tr:"Ykleniyor...",tk:"klenr..."},error:{en:"Error",ru:"",tr:"Hata",tk:"alylyk"},success:{en:"Success",ru:"",tr:"Baarl",tk:"stnlik"},hi:{en:"Hi",ru:"",tr:"Merhaba",tk:"Salam"},required:{en:"Required",ru:"",tr:"Zorunlu",tk:"Hkmany"},fieldRequired:{en:"Please fill out this field.",ru:",   .",tr:"Ltfen bu alan doldurun.",tk:"Bu medanany doldury."},notUsed:{en:"Not Used",ru:" ",tr:"Kullanlmyor",tk:"Ulanylmadyk"},badges:{en:{none:"None",bestseller:"Bestseller",popular:"Popular",premium:"Premium",signature:"Signature",rustic:"Rustic",classic:"Classic",seasonal:"Seasonal",new:"New",limited:"Limited",vegan:"Vegan",glutenFree:"Gluten Free",chefChoice:"Chef's Choice",organic:"Organic",sugarFree:"Sugar Free",hypoallergenic:"Hypoallergenic",dairyFree:"Dairy Free",nutFree:"Nut-free",halal:"Halal",keto:"Keto"},ru:{none:"",bestseller:" ",popular:"",premium:"",signature:"",rustic:"",classic:"",seasonal:"",new:"",limited:"",vegan:"",glutenFree:" ",chefChoice:" ",organic:"",sugarFree:" ",hypoallergenic:"",dairyFree:" ",nutFree:" ",halal:"",keto:""},tr:{none:"Yok",bestseller:"ok Satan",popular:"Popler",premium:"Premium",signature:"mza",rustic:"Rustik",classic:"Klasik",seasonal:"Mevsimlik",new:"Yeni",limited:"Snrl",vegan:"Vegan",glutenFree:"Glutensiz",chefChoice:"efin Seimi",organic:"Organik",sugarFree:"ekersiz",hypoallergenic:"Hipoalerjenik",dairyFree:"St ermez",nutFree:"Kuruyemisiz",halal:"Helal",keto:"Keto"},tk:{none:"ok",bestseller:"I Kp Satylan",popular:"Mehur",premium:"Premium",signature:"rite",rustic:"Rustik",classic:"Klassik",seasonal:"Mwsmlein",new:"Tze",limited:"kli",vegan:"Vegan",glutenFree:"Glutensiz",chefChoice:"Apez Salawy",organic:"Organik",sugarFree:"ekersiz",hypoallergenic:"Allergiasyz",dairyFree:"St Siz",nutFree:"erfyndyksyz",halal:"Halal",keto:"Keto"}}},vI=()=>{const t=["en","ru","tr","tk"],e={};return t.forEach(n=>e[n]={}),Object.keys(Cs).forEach(n=>{n==="badges"?t.forEach(r=>{e[r].badges=Cs.badges[r]}):t.forEach(r=>{e[r][n]=Cs[n][r]||Cs[n].en})}),e},Jp=vI();Object.keys(Cs).reduce((t,e)=>(t[e]=e,t),{});const a_=B.createContext(),Ke=()=>B.useContext(a_),_I=({children:t,language:e})=>{const n=r=>{const i=e||"en",s=r.split(".");let o=Jp[i];for(const u of s)o=o==null?void 0:o[u];if(!o){o=Jp.en;for(const u of s)o=o==null?void 0:o[u]}return o||r};return l.jsx(a_.Provider,{value:{t:n,language:e||"en"},children:t})},xI=({isOpen:t,onClose:e,onNavigate:n})=>{const{login:r,registerWithInvite:i}=Qr(),[s,o]=B.useState("login"),[u,c]=B.useState({name:"",email:"",password:"",token:"",phone:""}),[h,p]=B.useState(""),[y,g]=B.useState("");B.useEffect(()=>{t&&(c({name:"",email:"",password:"",token:"",phone:""}),p(""),g(""),o("login"))},[t]);const E=R=>{if(R.preventDefault(),p(""),r(u.email,u.password)){g("Login successful!");const T=localStorage.getItem("soulmate_user"),k=T&&JSON.parse(T).role==="admin";e(),setTimeout(()=>{n(k?"admin":"home")},100)}else p("Invalid credentials")},A=R=>{if(R.preventDefault(),p(""),!u.token.trim())return p("Enter invite token");if(!u.name.trim())return p("Enter your name");i(u.token.trim().toUpperCase(),u.name,u.email,u.password,u.phone)?(g("Welcome! You're registered."),e(),setTimeout(()=>{n("home")},100)):p("Invalid token or token already used")};return t?l.jsx("div",{className:"modal-overlay open",onClick:e,children:l.jsxs("div",{className:"modal",style:{maxWidth:"500px",gridTemplateColumns:"1fr"},onClick:R=>R.stopPropagation(),children:[l.jsx("button",{className:"modal-close",onClick:e,children:""}),l.jsxs("div",{className:"modal-content",children:[l.jsx("h2",{className:"modal-title",style:{textAlign:"center",marginBottom:"0.5rem"},children:s==="login"?"Welcome Back":"Join Us"}),l.jsx("p",{style:{textAlign:"center",color:"var(--chocolate)",opacity:.7,marginBottom:"2rem"},children:s==="login"?"Sign in to your account":"Register with invite token"}),l.jsxs("div",{className:"tabs",style:{marginBottom:"1.5rem"},children:[l.jsx("button",{className:`tab ${s==="login"?"active":""}`,onClick:()=>{o("login"),p(""),g("")},children:"Login"}),l.jsx("button",{className:`tab ${s==="invite"?"active":""}`,onClick:()=>{o("invite"),p(""),g("")},children:"Register"})]}),s==="login"?l.jsxs("form",{onSubmit:E,children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Email *"}),l.jsx("input",{type:"email",value:u.email,onChange:R=>c({...u,email:R.target.value}),required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Password *"}),l.jsx("input",{type:"password",value:u.password,onChange:R=>c({...u,password:R.target.value}),required:!0})]}),h&&l.jsx("p",{className:"form-error",children:h}),l.jsx("button",{type:"submit",className:"form-submit",children:"Sign In"}),l.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"var(--blush)",borderRadius:"12px",fontSize:"0.85rem"},children:[l.jsx("strong",{children:" Admin:"})," admin@soulmate.com / Admin@2024!"]})]}):l.jsxs("form",{onSubmit:A,children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Invite Token *"}),l.jsx("input",{type:"text",value:u.token,onChange:R=>c({...u,token:R.target.value.toUpperCase()}),placeholder:"XXXXXXXX",style:{textTransform:"uppercase",fontFamily:"monospace"},required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Full Name *"}),l.jsx("input",{type:"text",value:u.name,onChange:R=>c({...u,name:R.target.value}),required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Email *"}),l.jsx("input",{type:"email",value:u.email,onChange:R=>c({...u,email:R.target.value}),required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Phone Number"}),l.jsx("input",{type:"tel",value:u.phone,onChange:R=>c({...u,phone:R.target.value}),placeholder:"+1 (555) 123-4567"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Create Password *"}),l.jsx("input",{type:"password",value:u.password,onChange:R=>c({...u,password:R.target.value}),required:!0})]}),h&&l.jsx("p",{className:"form-error",children:h}),y&&l.jsx("p",{className:"form-success",children:y}),l.jsx("button",{type:"submit",className:"form-submit",children:"Register"})]})]})]})}):null};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wI=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),EI=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Zp=t=>{const e=EI(t);return e.charAt(0).toUpperCase()+e.slice(1)},l_=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),kI=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var SI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TI=B.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...u},c)=>B.createElement("svg",{ref:c,...SI,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:l_("lucide",i),...!s&&!kI(u)&&{"aria-hidden":"true"},...u},[...o.map(([h,p])=>B.createElement(h,p)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=(t,e)=>{const n=B.forwardRef(({className:r,...i},s)=>B.createElement(TI,{ref:s,iconNode:e,className:l_(`lucide-${wI(Zp(t))}`,`lucide-${t}`,r),...i}));return n.displayName=Zp(t),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const II=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],CI=Qe("arrow-left",II);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AI=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],u_=Qe("check",AI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PI=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],jI=Qe("chevron-left",PI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RI=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],NI=Qe("chevron-right",RI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Ci=Qe("globe",bI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DI=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],eg=Qe("log-out",DI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VI=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],tg=Qe("mail",VI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ng=Qe("map-pin",FI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OI=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],MI=Qe("menu",OI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LI=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],bh=Qe("pen",LI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],rg=Qe("phone",zI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],BI=Qe("plus",UI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ba=Qe("search",$I);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HI=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qI=Qe("settings",HI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],GI=Qe("shopping-bag",WI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],QI=Qe("shopping-cart",KI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],c_=Qe("star",YI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],zi=Qe("trash-2",XI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Br=Qe("x",JI),ZI=({isOpen:t,onClose:e,products:n,formatCurrency:r})=>{const{t:i}=Ke(),{addToCart:s}=Qi(),[o,u]=B.useState(""),c=B.useRef(null),h=r||(g=>`USD ${Number(g).toFixed(2)}`);if(B.useEffect(()=>{t&&c.current&&setTimeout(()=>c.current.focus(),100)},[t]),!t)return null;const p=o.trim()===""?[]:n.filter(g=>g.name.toLowerCase().includes(o.toLowerCase())),y=g=>{s(g),e()};return l.jsx("div",{className:"modal-overlay open",style:{zIndex:1e3,background:"rgba(44, 24, 16, 0.8)"},onClick:e,children:l.jsxs("div",{className:"form-card",style:{width:"600px",maxWidth:"90%",padding:"2rem",position:"relative",maxHeight:"80vh",display:"flex",flexDirection:"column"},onClick:g=>g.stopPropagation(),children:[l.jsx("button",{onClick:e,style:{position:"absolute",top:"1rem",right:"1rem",background:"none",border:"none",cursor:"pointer",zIndex:10},children:l.jsx(Br,{size:24,color:"var(--espresso)"})}),l.jsxs("h3",{style:{fontFamily:"'Playfair Display', serif",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[l.jsx(ba,{size:24,color:"var(--terracotta)"}),i("searchProducts")||"Search Products"]}),l.jsxs("div",{style:{position:"relative",marginBottom:"1.5rem"},children:[l.jsx("input",{ref:c,type:"text",value:o,onChange:g=>u(g.target.value),placeholder:i("searchPlaceholder")||"Type to find cakes, cupcakes...",style:{width:"100%",padding:"1rem 1rem 1rem 3rem",borderRadius:"50px",border:"2px solid var(--terracotta)",fontSize:"1.1rem",outline:"none",boxShadow:"0 4px 15px rgba(212, 133, 106, 0.15)"}}),l.jsx(ba,{size:20,color:"var(--terracotta)",style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)"}})]}),l.jsx("div",{style:{height:"400px",overflowY:"auto",paddingRight:"0.5rem"},children:o.trim()===""?l.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--chocolate)",opacity:.7},children:[l.jsx(ba,{size:48,style:{opacity:.3,marginBottom:"1rem",display:"block",margin:"0 auto 1rem"}}),l.jsx("p",{children:i("startTyping")||"Start typing to see results..."})]}):p.length===0?l.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"var(--chocolate)",opacity:.7},children:l.jsx("p",{children:i("noResults")||"No products found."})}):l.jsx("div",{style:{display:"grid",gap:"1rem"},children:p.map(g=>l.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"1rem",background:"var(--blush)",borderRadius:"16px",transition:"transform 0.2s",cursor:"pointer"},className:"search-result-item",onClick:()=>y(g),children:[l.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"12px",overflow:"hidden",marginRight:"1rem",background:"white"},children:g.thumbnail||g.image||g.images&&g.images[0]?l.jsx("img",{src:g.thumbnail||g.image||g.images&&g.images[0],alt:g.name,style:{width:"100%",height:"100%",objectFit:"cover"}}):l.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.5rem"},children:""})}),l.jsxs("div",{style:{flex:1},children:[l.jsx("h4",{style:{fontFamily:"'Playfair Display', serif",fontSize:"1.1rem",color:"var(--espresso)",marginBottom:"0.25rem"},children:g.name}),l.jsx("span",{style:{color:"var(--terracotta)",fontWeight:600},children:h(g.price)})]}),l.jsx("button",{style:{background:"white",border:"none",width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"var(--terracotta)",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:l.jsx(GI,{size:20})})]},g.id))})})]})})},eC=({onNavigate:t,products:e,formatCurrency:n})=>{var T,k;const{itemCount:r,setIsOpen:i}=Qi(),{user:s,logout:o,isAdmin:u,isDealer:c}=Qr(),{t:h}=Ke(),[p,y]=B.useState(!1),[g,E]=B.useState(!1),[A,R]=B.useState(!1),P=C=>{t(C),R(!1)};return l.jsxs(l.Fragment,{children:[l.jsx("header",{className:"header",children:l.jsxs("div",{className:"header-inner",children:[l.jsxs("div",{className:"logo",onClick:()=>P("home"),children:[l.jsx("img",{src:"/logo2.png",alt:"Soulmate Desserts Characters"}),l.jsx("img",{src:"/Soulmate.png",alt:"Soulmate Desserts"})]}),l.jsxs("nav",{className:`nav ${A?"mobile-open":""}`,children:[l.jsxs("div",{className:"mobile-nav-header",children:[l.jsx("span",{className:"mobile-nav-title",children:"Menu"}),l.jsx("button",{className:"close-menu-btn",onClick:()=>R(!1),children:l.jsx(Br,{size:24})})]}),l.jsx("span",{className:"nav-link",onClick:()=>P("home"),children:h("home")}),l.jsx("span",{className:"nav-link",onClick:()=>P("catalog"),children:h("ourCakes")}),l.jsx("span",{className:"nav-link",onClick:()=>P("contact"),children:h("contact")}),u&&l.jsx("span",{className:"nav-link",onClick:()=>P("admin"),style:{color:"var(--terracotta)",fontWeight:600},children:h("admin")}),l.jsx("div",{className:"mobile-nav-actions",children:s?l.jsxs("span",{className:"nav-link",onClick:()=>{o(),t("home"),R(!1)},children:[l.jsx(eg,{size:18,style:{marginRight:"8px",verticalAlign:"text-bottom"}}),h("logout")]}):l.jsx("span",{className:"nav-link",onClick:()=>{y(!0),R(!1)},children:h("login")})})]}),l.jsxs("div",{className:"nav-actions",children:[s?l.jsxs("div",{className:"user-info",children:[h("hi"),", ",l.jsx("strong",{children:(T=s.name)==null?void 0:T.split(" ")[0]}),u&&((k=s.name)==null?void 0:k.toLowerCase())!=="admin"&&l.jsx("span",{className:"badge admin",children:h("admin")}),c&&!u&&l.jsx("span",{className:"badge dealer",children:h("dealer")})]}):l.jsx("button",{className:"btn btn-primary btn-small desktop-only",onClick:()=>y(!0),children:h("login")}),l.jsxs("div",{className:"icon-btn-group",children:[s&&l.jsx("button",{className:"cart-btn",onClick:()=>{o(),t("home")},title:h("logout"),children:l.jsx(eg,{size:20})}),l.jsx("button",{className:"cart-btn",onClick:()=>E(!0),title:h("search")||"Search",children:l.jsx(ba,{size:20})}),l.jsx("button",{className:"cart-btn",onClick:()=>t("settings"),title:h("settings"),children:l.jsx(qI,{size:20})}),l.jsxs("button",{className:"cart-btn",onClick:()=>i(!0),children:[l.jsx(QI,{size:20}),r>0&&l.jsx("span",{className:"cart-badge",children:r})]}),l.jsx("button",{className:"mobile-menu-btn",onClick:()=>R(!0),children:l.jsx(MI,{size:24})})]})]})]})}),l.jsx(xI,{isOpen:p,onClose:()=>y(!1),onNavigate:t}),l.jsx(ZI,{isOpen:g,onClose:()=>E(!1),products:e||[],formatCurrency:n})]})},tC=({onNavigate:t,contactInfo:e})=>{const{t:n}=Ke(),[r,i]=B.useState(e);B.useEffect(()=>{(async()=>{try{const c=await se.getSettings();c!=null&&c.contactInfo&&i(c.contactInfo)}catch(c){console.error("Failed to fetch settings for footer:",c)}})()},[]),B.useEffect(()=>{e&&i(e)},[e]);const s=(r==null?void 0:r.phone)||"(512) 555-CAKE",o=(r==null?void 0:r.email)||"hello@soulmatedesserts.com";return l.jsxs("footer",{className:"footer",children:[l.jsxs("div",{className:"footer-content",children:[l.jsxs("div",{className:"footer-brand",children:[l.jsx("img",{src:"/Soulmate.png",alt:"Soulmate Desserts",style:{height:"60px",width:"auto",objectFit:"contain",maxWidth:"300px",display:"block",marginBottom:"0.5rem"}}),l.jsx("p",{children:n("footerDescription")})]}),l.jsxs("div",{className:"footer-section",children:[l.jsx("h4",{children:n("quickLinks")}),l.jsxs("ul",{children:[l.jsx("li",{children:l.jsx("a",{onClick:()=>t("home"),children:n("home")})}),l.jsx("li",{children:l.jsx("a",{onClick:()=>t("catalog"),children:n("ourCakes")})}),l.jsx("li",{children:l.jsx("a",{onClick:()=>t("contact"),children:n("contact")})})]})]}),l.jsxs("div",{className:"footer-section",children:[l.jsx("h4",{children:n("contact")}),l.jsxs("ul",{children:[l.jsx("li",{children:s}),l.jsx("li",{children:o})]})]})]}),l.jsx("div",{className:"footer-bottom",children:l.jsxs("p",{children:[" 2025 Soulmate Desserts. ",n("madeWithLove")]})})]})},nC=({onNavigate:t,formatCurrency:e,settings:n})=>{var C,b,D;const{cart:r,isOpen:i,setIsOpen:s,updateQuantity:o,removeFromCart:u,cartTotal:c}=Qi(),{t:h}=Ke(),p=e||(F=>`USD ${Number(F).toFixed(2)}`),y=(C=n==null?void 0:n.currencies)==null?void 0:C.find(F=>F.code===(n==null?void 0:n.currency)),g=(y==null?void 0:y.rate)||1,A=(((b=n==null?void 0:n.store)==null?void 0:b.shipping)||0)*g,R=((D=n==null?void 0:n.store)==null?void 0:D.taxRate)||0,P=c*(R/100),T=c+A+P,k=()=>{s(!1),t("catalog")};return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:`cart-overlay ${i?"open":""}`,onClick:()=>s(!1)}),l.jsxs("div",{className:`cart-drawer ${i?"open":""}`,children:[l.jsxs("div",{className:"cart-header",children:[l.jsxs("div",{className:"cart-header-title-group",children:[l.jsx("button",{className:"cart-back-btn",onClick:()=>s(!1),children:l.jsx(CI,{size:24})}),l.jsx("h3",{children:h("yourCart")})]}),l.jsx("button",{className:"cart-close",onClick:()=>s(!1),children:l.jsx(Br,{size:24})})]}),l.jsx("div",{className:"cart-items",children:r.length===0?l.jsxs("div",{className:"cart-empty",children:[l.jsx("div",{className:"cart-empty-icon",children:""}),l.jsx("p",{children:h("cartEmpty")})]}):r.map(F=>l.jsxs("div",{className:"cart-item",children:[l.jsx("div",{className:"cart-item-img",onClick:k,style:{cursor:"pointer"},children:l.jsx("img",{src:F.images[0],alt:F.name})}),l.jsxs("div",{className:"cart-item-details",children:[l.jsx("div",{className:"cart-item-name",onClick:k,style:{cursor:"pointer"},children:F.name}),l.jsx("div",{className:"cart-item-price",children:p(F.price*F.quantity)}),l.jsxs("div",{className:"cart-item-qty",children:[l.jsx("button",{className:"qty-btn",onClick:()=>o(F.id,-1),children:""}),l.jsx("span",{children:F.quantity}),l.jsx("button",{className:"qty-btn",onClick:()=>o(F.id,1),children:"+"})]}),l.jsx("button",{className:"cart-item-remove",onClick:()=>u(F.id),children:h("remove")})]})]},F.id))}),r.length>0&&l.jsxs("div",{className:"cart-footer",children:[l.jsxs("div",{className:"cart-subtotal",children:[l.jsx("span",{children:h("subtotal")}),l.jsx("strong",{children:p(c)})]}),A>0&&l.jsxs("div",{className:"cart-subtotal",style:{fontSize:"0.9em",opacity:.8},children:[l.jsx("span",{children:h("shipping")}),l.jsx("strong",{children:p(A)})]}),P>0&&l.jsxs("div",{className:"cart-subtotal",style:{fontSize:"0.9em",opacity:.8},children:[l.jsxs("span",{children:[h("tax")," (",R,"%)"]}),l.jsx("strong",{children:p(P)})]}),l.jsxs("div",{className:"cart-total",style:{marginTop:"10px",paddingTop:"10px",borderTop:"1px solid #eee",display:"flex",justifyContent:"space-between",fontWeight:"bold",fontSize:"1.2em"},children:[l.jsx("span",{children:h("total")}),l.jsx("strong",{children:p(T)})]}),l.jsx("button",{className:"checkout-btn",onClick:()=>{s(!1),t("checkout")},children:h("proceedToCheckout")})]})]})]})},rC=({onNavigate:t})=>{const{t:e}=Ke();return l.jsx("section",{className:"hero",children:l.jsxs("div",{className:"hero-content",children:[l.jsxs("div",{className:"hero-text",children:[l.jsxs("h1",{children:[e("heroTitle")," ",l.jsx("em",{children:e("heroTitleEmphasis")})]}),l.jsx("p",{children:e("heroDescription")}),l.jsxs("div",{className:"hero-cta",children:[l.jsx("button",{className:"btn btn-primary",onClick:()=>t("catalog"),children:e("exploreCreations")}),l.jsx("button",{className:"btn btn-secondary",onClick:()=>t("contact"),children:e("customOrders")})]})]}),l.jsx("div",{className:"hero-image",children:l.jsx("div",{className:"hero-image-wrapper",children:l.jsx("img",{src:"https://images.unsplash.com/photo-1578985545062-69928b1d9587?w=800",alt:"Cake"})})})]})})},Da=(t,e)=>{var r;return(((r=t.ingredients)==null?void 0:r.reduce((i,s)=>{const o=e.find(u=>u.id===s.id);return i+((o==null?void 0:o.price)||0)*(s.quantity||0)},0))||0)+(t.making_price||0)},d_=({product:t,onClick:e,onAdd:n,ingredients:r,formatCurrency:i})=>{var g;const{isAdmin:s}=Qr(),{t:o}=Ke(),u=t.price,c=Da(t,r),h=u-c,p=c?(h/u*100).toFixed(1):0,y=i||(E=>`USD ${Number(E).toFixed(2)}`);return l.jsxs("div",{className:"product-card",onClick:e,children:[l.jsxs("div",{className:"product-image",children:[l.jsx("img",{src:t.images[0],alt:t.name}),((g=t.tags)==null?void 0:g[0])&&l.jsx("span",{className:`product-tag ${t.tags[0]}`,children:o(`badges.${t.tags[0]}`)||t.tags[0]})]}),l.jsxs("div",{className:"product-content",children:[l.jsx("h3",{className:"product-name",children:t.name}),l.jsx("p",{className:"product-description",children:t.description}),s&&l.jsxs("div",{style:{padding:"0.75rem",background:"var(--blush)",borderRadius:"10px",marginBottom:"1rem",fontSize:"0.85rem"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[l.jsxs("span",{style:{opacity:.7},children:[o("cost"),":"]}),l.jsx("strong",{children:y(c)})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[l.jsxs("span",{style:{opacity:.7},children:[o("profit"),":"]}),l.jsx("strong",{style:{color:"#28a745"},children:y(h)})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[l.jsxs("span",{style:{opacity:.7},children:[o("margin"),":"]}),l.jsxs("strong",{style:{color:"#28a745"},children:[p,"%"]})]})]}),l.jsxs("div",{className:"product-footer",children:[l.jsx("div",{className:"product-price",style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:l.jsx("div",{children:l.jsx("span",{style:{fontSize:"1.4rem",fontWeight:600,color:"var(--terracotta)"},children:y(u)})})}),l.jsx("button",{className:"add-btn",onClick:E=>{E.stopPropagation(),n(t)},children:"+"})]})]})]})},h_=({product:t,onClose:e,onAdd:n,ingredients:r,onUpdateProduct:i,formatCurrency:s,settings:o})=>{var v,m,_,x;const{t:u}=Ke(),[c,h]=B.useState(1),[p,y]=B.useState(0);if(!t)return null;const g=t.price,E=((v=o==null?void 0:o.currencies)==null?void 0:v.find(S=>S.rate===1))||{code:"USD",symbol:"$",rate:1},A=((m=o==null?void 0:o.currencies)==null?void 0:m.find(S=>S.code===(o==null?void 0:o.currency)))||E,R=(A==null?void 0:A.rate)||1,P=A!=null&&A.symbol&&A.symbol.trim()?A.symbol:(A==null?void 0:A.code)||"USD",T=S=>`${P} ${(S*R).toFixed(2)}`,k=t.images&&Array.isArray(t.images)?t.images:[t.images[0]],C=k.length,b=()=>{y(S=>S===0?C-1:S-1)},D=()=>{y(S=>S===C-1?0:S+1)},F=S=>{y(S)};return l.jsx("div",{className:`modal-overlay ${t?"open":""}`,onClick:e,children:l.jsxs("div",{className:"modal",onClick:S=>S.stopPropagation(),children:[l.jsx("button",{className:"modal-close",onClick:e,children:""}),l.jsxs("div",{className:"modal-img",children:[l.jsxs("div",{className:"modal-image-container",children:[l.jsx("img",{src:k[p],alt:t.name}),C>1&&l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"modal-nav-btn modal-nav-prev",onClick:b,children:l.jsx(jI,{size:24})}),l.jsx("button",{className:"modal-nav-btn modal-nav-next",onClick:D,children:l.jsx(NI,{size:24})})]})]}),C>1&&l.jsx("div",{className:"modal-image-thumbnails",children:k.map((S,j)=>l.jsx("div",{className:`modal-thumbnail ${j===p?"active":""}`,onClick:()=>F(j),children:l.jsx("img",{src:S,alt:`${t.name} ${j+1}`})},j))}),C>1&&l.jsxs("div",{className:"modal-image-counter",children:[p+1," / ",C]})]}),l.jsxs("div",{className:"modal-content",children:[l.jsx("h2",{className:"modal-title",title:t.name,children:t.name}),((_=t.tags)==null?void 0:_[0])&&l.jsx("div",{style:{marginBottom:"0.75rem"},children:l.jsx("span",{style:{display:"inline-block",padding:"0.25rem 0.6rem",borderRadius:"12px",background:"var(--blush)",border:"1px solid var(--terracotta)",fontSize:"0.85rem",fontWeight:600,color:"var(--chocolate)"},children:t.tags[0]})}),l.jsx("p",{className:"modal-desc",style:{whiteSpace:"pre-wrap"},children:t.description}),l.jsx("div",{className:"modal-price",children:T(t.price)}),l.jsxs("div",{className:"modal-qty",children:[l.jsx("label",{children:u("quantity")}),l.jsxs("div",{className:"modal-qty-controls",children:[l.jsx("button",{className:"modal-qty-btn",onClick:()=>h(Math.max(1,c-1)),children:""}),l.jsx("div",{className:"modal-qty-value",children:c}),l.jsx("button",{className:"modal-qty-btn",onClick:()=>h(c+1),children:"+"})]})]}),((x=t.ingredients)==null?void 0:x.length)>0&&l.jsxs("div",{style:{marginBottom:"1rem"},children:[l.jsx("div",{style:{fontWeight:600,color:"var(--chocolate)",marginBottom:"0.5rem"},children:u("ingredients")}),l.jsx("ul",{style:{listStyle:"none",padding:0,margin:0,display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(180px,1fr))",gap:"0.25rem 1rem"},children:t.ingredients.map((S,j)=>{const I=r==null?void 0:r.find(xe=>xe.id===S.id);return I?l.jsxs("li",{style:{color:"var(--espresso)",opacity:.85},children:[I.name," ",S.quantity?` ${S.quantity} ${I.unit}`:""]},`${S.id}-${j}`):null})})]}),l.jsxs("button",{className:"modal-add-btn",onClick:()=>{n(t,c),e(),h(1)},children:[u("addToCart")," - ",T(g*c)]})]})]})})},ig=({onNavigate:t,products:e,ingredients:n,onUpdateProduct:r,formatCurrency:i,userCountry:s,settings:o})=>{const[u,c]=B.useState(null),{addToCart:h}=Qi(),{t:p,language:y}=Ke(),g=e.filter(A=>{const P=(A.languages||["en","ru","tr","tk"]).includes(y),T=A.regions||[],k=T.length===0||T.includes(s)||T.includes("GENERAL");return P&&k}),E=g.find(A=>A.id===u);return l.jsxs(l.Fragment,{children:[l.jsx(rC,{onNavigate:t}),l.jsxs("section",{className:"section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h2",{children:p("ourCollections")}),l.jsx("p",{children:p("collectionsSubtitle")})]}),l.jsx("div",{className:"products-grid",children:g.map(A=>l.jsx(d_,{product:A,onClick:()=>c(A.id),onAdd:R=>h(R,1),ingredients:n,formatCurrency:i},A.id))})]}),E&&l.jsx(h_,{product:E,onClose:()=>c(null),onAdd:h,ingredients:n,onUpdateProduct:r,formatCurrency:i,settings:o})]})},iC=({products:t,ingredients:e,onUpdateProduct:n,formatCurrency:r,userCountry:i,settings:s})=>{const[o,u]=B.useState(null),{addToCart:c}=Qi(),{language:h}=Ke(),{t:p}=Ke(),y=t.filter(E=>{const R=(E.languages||["en","ru","tr","tk"]).includes(h),P=E.regions||[],T=P.length===0||P.includes(i)||P.includes("GENERAL");return R&&T}),g=y.find(E=>E.id===o);return l.jsxs(l.Fragment,{children:[l.jsxs("section",{className:"section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h2",{children:p("ourCollections")}),l.jsx("p",{children:p("collectionsSubtitle")})]}),l.jsx("div",{className:"products-grid",children:y.map(E=>l.jsx(d_,{product:E,onClick:()=>u(E.id),onAdd:A=>c(A,1),ingredients:e,formatCurrency:r},E.id))})]}),g&&l.jsx(h_,{product:g,onClose:()=>u(null),onAdd:c,ingredients:e,onUpdateProduct:n,formatCurrency:r,settings:s})]})},sC=({onNavigate:t,onCreateOrder:e,formatCurrency:n})=>{var A,R;const{cart:r,cartTotal:i,clearCart:s}=Qi(),{user:o}=Qr(),{t:u}=Ke(),[c,h]=B.useState(!1),p=i*.0825,y=i+p,g=n||(P=>`USD ${Number(P).toFixed(2)}`);if(c)return l.jsx("div",{className:"page",children:l.jsxs("div",{className:"success-msg",children:[l.jsx("div",{className:"success-icon",children:""}),l.jsx("h2",{children:u("orderPlaced")}),l.jsx("p",{children:u("orderPlacedMessage")}),l.jsx("button",{className:"btn btn-primary",onClick:()=>t("home"),children:u("continueShopping")})]})});if(r.length===0)return l.jsx("div",{className:"page",children:l.jsxs("div",{className:"success-msg",children:[l.jsx("div",{className:"success-icon",children:""}),l.jsx("h2",{children:u("cartEmpty")}),l.jsx("p",{children:"Add desserts first!"}),l.jsx("button",{className:"btn btn-primary",onClick:()=>t("catalog"),children:"Browse"})]})});const E=P=>{P.preventDefault();const T=new FormData(P.target),k={customerName:T.get("firstName")+" "+T.get("lastName"),email:T.get("email")||(o==null?void 0:o.email)||"",phone:T.get("phone"),address:T.get("address"),date:T.get("date"),time:T.get("time"),notes:T.get("notes"),items:r,subtotal:i,tax:p,total:y};e&&e(k),h(!0),s()};return l.jsxs("div",{className:"page",style:{maxWidth:"1100px"},children:[l.jsx("div",{className:"page-header",children:l.jsx("h1",{children:u("checkout")})}),l.jsxs("div",{className:"checkout-grid",children:[l.jsxs("form",{className:"form-card",onSubmit:E,children:[l.jsxs("div",{className:"form-section",children:[l.jsx("h3",{children:u("contactInfo")}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[u("firstName")," *"]}),l.jsx("input",{type:"text",name:"firstName",defaultValue:(A=o==null?void 0:o.name)==null?void 0:A.split(" ")[0],required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[u("lastName")," *"]}),l.jsx("input",{type:"text",name:"lastName",defaultValue:(R=o==null?void 0:o.name)==null?void 0:R.split(" ")[1],required:!0})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:u("email")}),l.jsx("input",{type:"email",name:"email",defaultValue:o==null?void 0:o.email})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[u("phone")," *"]}),l.jsx("input",{type:"tel",name:"phone",required:!0})]})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsx("h3",{children:u("delivery")}),l.jsxs("div",{className:"form-group full",children:[l.jsxs("label",{children:[u("address")," *"]}),l.jsx("input",{type:"text",name:"address",required:!0})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[u("date")," *"]}),l.jsx("input",{type:"date",name:"date",required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:u("time")}),l.jsxs("select",{name:"time",children:[l.jsx("option",{children:"Morning"}),l.jsx("option",{children:"Afternoon"}),l.jsx("option",{children:"Evening"})]})]})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsx("h3",{children:u("notes")}),l.jsxs("div",{className:"form-group full",children:[l.jsx("label",{children:u("specialInstructions")}),l.jsx("textarea",{name:"notes",placeholder:"Any requests..."})]})]}),l.jsxs("button",{type:"submit",className:"form-submit",children:[u("placeOrder"),"  ",g(y)]})]}),l.jsxs("div",{className:"checkout-summary",children:[l.jsx("h3",{children:u("orderSummary")}),r.map(P=>l.jsxs("div",{className:"summary-item",children:[l.jsx("div",{className:"summary-item-img",children:l.jsx("img",{src:P.images[0],alt:""})}),l.jsxs("div",{className:"summary-item-details",children:[l.jsx("div",{className:"summary-item-name",children:P.name}),l.jsxs("div",{className:"summary-item-qty",children:[u("quantity"),": ",P.quantity]})]}),l.jsx("div",{className:"summary-item-price",children:g(P.price*P.quantity)})]},P.id)),l.jsxs("div",{className:"summary-totals",children:[l.jsxs("div",{className:"summary-row",children:[l.jsx("span",{children:u("subtotal")}),l.jsx("span",{children:g(i)})]}),l.jsxs("div",{className:"summary-row",children:[l.jsx("span",{children:u("tax")}),l.jsx("span",{children:g(p)})]}),l.jsxs("div",{className:"summary-row total",children:[l.jsx("span",{children:u("total")}),l.jsx("span",{children:g(y)})]})]})]})]})]})},oC=({onNavigate:t})=>{const{t:e}=Ke(),[n,r]=B.useState({name:"",phone:"",email:"",message:""}),[i,s]=B.useState("idle"),[o,u]=B.useState({countryCode:null,countryName:null}),[c,h]=B.useState(null),[p,y]=B.useState(!0);B.useEffect(()=>{(async()=>{try{y(!0);const A=await se.getCountryFromIP();u(A);const R=await se.getCountryContacts();let P=R.find(T=>T.countryCode===A.countryCode);P||(P=R.find(T=>T.isDefault)||R[0]),h(P)}catch(A){console.error("Failed to load contact info:",A)}finally{y(!1)}})()},[]);const g=E=>{E.preventDefault(),s("submitting"),setTimeout(()=>{const A={id:Date.now(),...n,date:new Date().toISOString(),read:!1},R=JSON.parse(localStorage.getItem("soulmate_messages")||"[]");localStorage.setItem("soulmate_messages",JSON.stringify([A,...R])),s("success")},1500)};return i==="success"?l.jsx("div",{className:"page",children:l.jsxs("div",{className:"success-msg",children:[l.jsx("div",{className:"success-icon",children:""}),l.jsx("h2",{children:e("messageSent")}),l.jsx("p",{children:e("messageCreateSuccess")||e("messageSentConfirm")}),l.jsx("button",{className:"btn btn-primary",onClick:()=>t("home"),children:e("back")}),l.jsx("button",{className:"btn btn-secondary",style:{marginTop:"1rem",marginLeft:"1rem"},onClick:()=>{s("idle"),r({name:"",phone:"",email:"",message:""})},children:e("sendAnother")||"Send Another"})]})}):l.jsxs("div",{className:"page",style:{maxWidth:"600px"},children:[l.jsxs("div",{className:"page-header",children:[l.jsx("h1",{children:e("getInTouch")}),l.jsx("p",{children:e("contactSubtitle")})]}),l.jsx("div",{className:"form-card",children:l.jsxs("form",{onSubmit:g,children:[l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[e("name")," *"]}),l.jsx("input",{type:"text",required:!0,value:n.name,onChange:E=>r({...n,name:E.target.value})})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[e("phone")," *"]}),l.jsx("input",{type:"tel",required:!0,value:n.phone,onChange:E=>r({...n,phone:E.target.value})})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:e("email")}),l.jsx("input",{type:"email",value:n.email,onChange:E=>r({...n,email:E.target.value})})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[e("message")," *"]}),l.jsx("textarea",{required:!0,placeholder:e("tellUsAboutDreamDessert"),value:n.message,onChange:E=>r({...n,message:E.target.value})})]}),l.jsx("button",{type:"submit",className:"form-submit",disabled:i==="submitting",style:{opacity:i==="submitting"?.7:1},children:e(i==="submitting"?"loading":"sendMessage")})]})})]})},aC=({onNavigate:t})=>{const{login:e,registerWithInvite:n}=Qr(),{t:r}=Ke(),[i,s]=B.useState("login"),[o,u]=B.useState({name:"",email:"",password:"",token:"",phone:""}),[c,h]=B.useState(""),[p,y]=B.useState(""),[g,E]=B.useState(!1),A=P=>{if(P.preventDefault(),h(""),y(""),E(!0),e(o.email,o.password)===!0){y(r("loginSuccessful"));const k=localStorage.getItem("soulmate_user"),C=k&&JSON.parse(k).role==="admin";setTimeout(()=>{E(!1),t(C?"admin":"home")},500)}else E(!1),h(r("invalidCredentials"))},R=P=>{if(P.preventDefault(),h(""),y(""),!o.token.trim()){h(r("inviteToken")+" "+r("required"));return}if(!o.name.trim()){h(r("fullName")+" "+r("required"));return}if(!o.email.trim()){h(r("email")+" "+r("required"));return}if(!o.password.trim()){h(r("password")+" "+r("required"));return}n(o.token.trim().toUpperCase(),o.name,o.email,o.password,o.phone)===!0?(y(r("success")+"!"),setTimeout(()=>t("home"),500)):h(r("error"))};return l.jsxs("div",{className:"page",style:{maxWidth:"480px"},children:[l.jsxs("div",{className:"page-header",children:[l.jsx("h1",{children:r(i==="login"?"welcomeBack":"joinUs")}),l.jsx("p",{children:r(i==="login"?"signInToAccount":"registerWithInvite")})]}),l.jsxs("div",{className:"form-card",children:[l.jsxs("div",{className:"tabs",children:[l.jsx("button",{className:`tab ${i==="login"?"active":""}`,onClick:()=>{s("login"),h(""),y("")},children:r("login")}),l.jsx("button",{className:`tab ${i==="invite"?"active":""}`,onClick:()=>{s("invite"),h(""),y("")},children:r("register")})]}),i==="login"?l.jsxs("form",{onSubmit:A,children:[l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[r("email")," *"]}),l.jsx("input",{type:"email",value:o.email,onChange:P=>u({...o,email:P.target.value}),placeholder:"admin@soulmate.com",required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[r("password")," *"]}),l.jsx("input",{type:"password",value:o.password,onChange:P=>u({...o,password:P.target.value}),required:!0})]}),c&&l.jsx("p",{className:"form-error",children:c}),p&&l.jsx("p",{className:"form-success",children:p}),l.jsx("button",{type:"submit",className:"form-submit",disabled:g,children:r(g?"signingIn":"signIn")}),l.jsxs("div",{style:{marginTop:"2rem",padding:"1.25rem",background:"var(--blush)",borderRadius:"12px",fontSize:"0.9rem"},children:[l.jsxs("strong",{children:[" ",r("adminLogin"),":"]}),l.jsx("br",{}),l.jsx("span",{style:{fontFamily:"monospace"},children:"admin@soulmate.com"}),l.jsx("br",{}),l.jsx("span",{style:{fontFamily:"monospace"},children:"Admin@2024!"})]})]}):l.jsxs("form",{onSubmit:R,children:[l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[r("inviteToken")," *"]}),l.jsx("input",{type:"text",value:o.token,onChange:P=>u({...o,token:P.target.value.toUpperCase()}),placeholder:"XXXXXXXX",style:{textTransform:"uppercase",fontFamily:"monospace"},required:!0}),l.jsx("small",{style:{color:"var(--chocolate)",opacity:.7,display:"block",marginTop:"0.5rem"},children:r("enterInviteToken")})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[r("fullName")," *"]}),l.jsx("input",{type:"text",value:o.name,onChange:P=>u({...o,name:P.target.value}),required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[r("email")," *"]}),l.jsx("input",{type:"email",value:o.email,onChange:P=>u({...o,email:P.target.value}),required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[r("phone")," (",r("optional"),")"]}),l.jsx("input",{type:"tel",value:o.phone,onChange:P=>u({...o,phone:P.target.value})})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[r("createPassword")," *"]}),l.jsx("input",{type:"password",value:o.password,onChange:P=>u({...o,password:P.target.value}),required:!0})]}),c&&l.jsx("p",{className:"form-error",children:c}),p&&l.jsx("p",{className:"form-success",children:p}),l.jsx("button",{type:"submit",className:"form-submit",children:r("register")})]})]})]})},lC=({onNavigate:t,settings:e,setSettings:n,onBaseCurrencyChange:r})=>{var m,_;const{user:i,isAdmin:s}=Qr(),{t:o}=Ke(),[u,c]=B.useState("general");B.useEffect(()=>{!s&&(u==="currencies"||u==="store")&&c("general")},[s,u]);const[h,p]=B.useState({code:"",name:"",symbol:"",rate:1}),[y,g]=B.useState(null),[E,A]=B.useState("");B.useEffect(()=>{var j,I;const x=((j=e.currencies.find(xe=>xe.code===e.currency))==null?void 0:j.rate)||1,S=((I=e.store)==null?void 0:I.shipping)||0;A((S*x).toFixed(2))},[(m=e.store)==null?void 0:m.shipping,e.currency,e.currencies]);const R=[{code:"en",name:"English"},{code:"ru",name:"Russian"},{code:"tr",name:"Turkish"},{code:"tk",name:"Turkmen"}],P=async x=>{const S={...e,language:x};n(S);try{await se.updateSettings(S)}catch(j){console.error("Failed to save language:",j)}},T=async x=>{const S={...e,currency:x};n(S);try{await se.updateSettings(S)}catch(j){console.error("Failed to save default currency:",j)}},k=async x=>{x.preventDefault();let S;if(y){const j=y.rate!==1&&h.rate!==0?parseFloat((1/h.rate).toFixed(6)):h.rate;S={...e,currencies:e.currencies.map(I=>I.code===y.code?{...h,code:h.code.toUpperCase(),rate:j}:I)}}else S={...e,currencies:[...e.currencies,{...h,code:h.code.toUpperCase()}]};n(S),g(null),p({code:"",name:"",symbol:"",rate:1});try{await se.updateSettings(S)}catch(j){console.error("Failed to save currency changes:",j)}},C=x=>{g(x);const S=x.rate!==0&&x.rate!==1?parseFloat((1/x.rate).toFixed(6)):x.rate;p({...x,rate:S})},b=async x=>{if(x==="USD"){console.log(o("cannotDeleteBase"));return}if(e.currency===x){console.log(o("cannotDeleteActive"));return}const S={...e,currencies:e.currencies.filter(j=>j.code!==x)};n(S);try{await se.updateSettings(S)}catch(j){console.error("Failed to delete currency:",j)}},D=async(x,S)=>{const j={...e,currencies:e.currencies.map(I=>I.code===x?{...I,rate:parseFloat(S)||1}:I)};n(j);try{await se.updateSettings(j)}catch(I){console.error("Failed to update exchange rate:",I)}},F=e.currencies.find(x=>x.rate===1)||{code:"USD",symbol:"$",rate:1},v=e.currencies.find(x=>x.code===e.currency)||F;return l.jsxs("div",{className:"page",style:{maxWidth:"1200px"},children:[l.jsxs("div",{className:"page-header",children:[l.jsx("h1",{children:o("settings")}),l.jsx("p",{style:{color:"var(--chocolate)",opacity:.7,marginTop:"0.5rem"},children:"Manage your language and currency preferences"})]}),l.jsxs("div",{className:"tabs",style:{marginBottom:"2rem"},children:[l.jsx("button",{className:`tab ${u==="general"?"active":""}`,onClick:()=>c("general"),children:o("general")}),s&&l.jsx("button",{className:`tab ${u==="currencies"?"active":""}`,onClick:()=>c("currencies"),children:o("currencies")}),s&&l.jsx("button",{className:`tab ${u==="store"?"active":""}`,onClick:()=>c("store"),children:o("storeSettings")})]}),u==="general"&&l.jsxs("div",{className:"form-card",children:[l.jsx("h3",{style:{fontFamily:"'Playfair Display',serif",marginBottom:"1.5rem"},children:o("languageSettings")}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:o("selectLanguage")}),l.jsx("select",{value:e.language,onChange:x=>P(x.target.value),style:{width:"100%",padding:"1rem",border:"2px solid var(--blush)",borderRadius:"12px",background:"rgba(255,255,255,0.8)"},children:R.map(x=>l.jsx("option",{value:x.code,children:x.name},x.code))})]})]}),u==="currencies"&&s&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"form-card",style:{marginBottom:"2rem"},children:[l.jsx("h3",{style:{fontFamily:"'Playfair Display',serif",marginBottom:"1.5rem"},children:o(y?"editCurrency":"addNewCurrency")}),l.jsxs("form",{onSubmit:k,children:[l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[o("currencyCode")," *"]}),l.jsx("input",{type:"text",value:h.code,onChange:x=>p({...h,code:x.target.value.toUpperCase()}),placeholder:"EUR, GBP, JPY, etc.",maxLength:"3",required:!0,disabled:y&&y.rate===1})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[o("currencyName")," *"]}),l.jsx("input",{type:"text",value:h.name,onChange:x=>p({...h,name:x.target.value}),placeholder:"Euro, British Pound, etc.",required:!0})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:o("symbol")}),l.jsx("input",{type:"text",value:h.symbol,onChange:x=>p({...h,symbol:x.target.value}),placeholder:", ,  (optional)"}),l.jsx("small",{style:{color:"var(--chocolate)",opacity:.7,display:"block",marginTop:"0.25rem"},children:o("symbolOptionalNote")||"Leave blank to use currency code as symbol"})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[o("exchangeRate")," ",y&&y.rate!==1?`(1 ${h.code} = ?)`:`(1 ${F.code} = ?)`," *"]}),l.jsx("input",{type:"number",step:"0.0001",value:h.rate,onChange:x=>p({...h,rate:parseFloat(x.target.value)||1}),placeholder:"1.0",min:"0.0001",required:!0}),l.jsx("small",{style:{color:"var(--chocolate)",opacity:.7,display:"block",marginTop:"0.25rem"},children:y&&y.rate!==1?`1 ${h.code||"XXX"} = ${h.rate} ${F.code}`:`1 ${F.code} = ${h.rate} ${h.code||"XXX"}`})]})]}),l.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[l.jsx("button",{type:"submit",className:"btn btn-primary",children:o(y?"updateCurrency":"confirmAddCurrency")}),y&&l.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{g(null),p({code:"",name:"",symbol:"",rate:1})},children:o("cancel")})]})]})]}),l.jsxs("div",{className:"form-card",children:[l.jsx("h3",{style:{fontFamily:"'Playfair Display',serif",marginBottom:"1.5rem"},children:o("manageCurrencies")}),e.currencies.length===0?l.jsx("p",{style:{color:"var(--chocolate)",opacity:.7},children:o("noCurrenciesAdded")}):l.jsx("div",{style:{overflowX:"auto"},children:l.jsxs("table",{className:"admin-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{style:{width:"40px"},children:o("defaultCurrency")}),l.jsx("th",{children:o("currencyCode")}),l.jsx("th",{children:o("currencyName")}),l.jsx("th",{children:o("symbol")}),l.jsx("th",{children:o("exchangeRate")}),l.jsx("th",{style:{textAlign:"center"},children:o("actions")})]})}),l.jsx("tbody",{children:e.currencies.map(x=>l.jsxs("tr",{children:[l.jsx("td",{style:{textAlign:"center"},children:l.jsx("button",{onClick:()=>{x.rate!==1&&r?r(x.code):T(x.code)},title:o("setDefault"),style:{background:"none",border:"none",cursor:"pointer",padding:"4px"},children:l.jsx(c_,{size:20,fill:e.currency===x.code?"#d4af37":"none",color:e.currency===x.code?"#d4af37":"#ccc"})})}),l.jsx("td",{children:l.jsx("strong",{children:x.code})}),l.jsx("td",{children:x.name}),l.jsx("td",{children:x.symbol}),l.jsx("td",{children:x.rate===1?l.jsxs("span",{children:["1 (",o("baseCurrencyLabel"),")"]}):l.jsx("input",{type:"number",step:"0.0001",value:x.rate!==0?parseFloat((1/x.rate).toFixed(6)):1,onChange:S=>{const j=parseFloat(S.target.value)||1,I=j!==0?parseFloat((1/j).toFixed(6)):1;D(x.code,I)},style:{width:"120px",padding:"0.5rem",border:"2px solid var(--blush)",borderRadius:"8px",background:"rgba(255,255,255,0.8)"}})}),l.jsx("td",{style:{textAlign:"center"},children:x.rate!==1&&l.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center"},children:[l.jsx("button",{className:"btn btn-small btn-secondary icon-btn",onClick:()=>C(x),title:o("edit"),style:{padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(bh,{size:16})}),l.jsx("button",{className:"btn btn-small btn-danger icon-btn",onClick:()=>b(x.code),title:o("delete"),style:{padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(zi,{size:16})})]})})]},x.code))})]})})]})]}),u==="store"&&s&&l.jsxs("div",{className:"form-card",children:[l.jsx("h3",{style:{fontFamily:"'Playfair Display',serif",marginBottom:"1.5rem"},children:o("storeSettings")}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[o("shippingCost")," (",v.symbol||v.code,")"]}),l.jsx("input",{type:"number",value:E,onChange:x=>A(x.target.value),onBlur:()=>{const x=parseFloat(E);if(isNaN(x))n(S=>({...S,store:{...S.store,shipping:0}})),A("0.00");else{const S=x/v.rate;n(j=>({...j,store:{...j.store,shipping:S}})),A(x.toFixed(2))}},style:{width:"100%",padding:"1rem",border:"2px solid var(--blush)",borderRadius:"12px",background:"rgba(255,255,255,0.8)"}})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:o("taxRate")}),l.jsx("input",{type:"number",value:((_=e.store)==null?void 0:_.taxRate)||0,onChange:x=>n(S=>({...S,store:{...S.store,taxRate:parseFloat(x.target.value)||0}})),style:{width:"100%",padding:"1rem",border:"2px solid var(--blush)",borderRadius:"12px",background:"rgba(255,255,255,0.8)"}})]}),l.jsx("button",{className:"btn btn-primary",style:{marginTop:"1rem"},onClick:async()=>{try{await se.updateSettings(e),console.log(o("success"))}catch(x){console.error(x),console.log(o("error"))}},children:o("saveChanges")})]})]})},uC=(t,e=100)=>new Promise(n=>{const r=new Image;r.src=t,r.onload=()=>{const i=e/r.width,s=e,o=r.height*i,u=document.createElement("canvas");u.width=s,u.height=o,u.getContext("2d").drawImage(r,0,0,s,o),n(u.toDataURL("image/jpeg",.7))}}),cC=({products:t,setProducts:e,ingredients:n,formatCurrency:r,currentCurrency:i})=>{const{t:s}=Ke(),o=(i==null?void 0:i.code)||"USD",u=N=>`${o} ${Number(N).toFixed(2)}`,[c,h]=B.useState(null),[p,y]=B.useState(""),[g,E]=B.useState(""),[A,R]=B.useState(0),[P,T]=B.useState(!1),[k,C]=B.useState([]);B.useEffect(()=>{(async()=>{try{const M=await se.getCountryContacts();C(M)}catch(M){console.error("Failed to load country contacts:",M)}})()},[]);const b=N=>{const M=(N||"").trim();h("new"),_({name:M,description:"",price:"",making_price:"",profit:"",profit_margin:"",images:[],uploadedImages:[],ingredients:[],tag:"none",languages:["en","ru","tr","tk"],regions:[],faceImageIndex:0}),E(""),y("")},[D,F]=B.useState(null),v=async()=>{if(D)try{await se.deleteProduct(D),e(N=>N.filter(M=>M.id!==D)),c&&c!=="new"&&c===D&&h(null)}catch(N){console.error("Failed to delete product:",N),console.log(s("error")||"Error")}finally{F(null)}},[m,_]=B.useState({name:"",description:"",price:"",making_price:"",profit:"",profit_margin:"",images:[],uploadedImages:[],ingredients:[],tag:"none",languages:["en","ru","tr","tk"],regions:[],faceImageIndex:0}),x=(i==null?void 0:i.rate)||1,S=i!=null&&i.symbol&&i.symbol.trim()?i.symbol:(i==null?void 0:i.code)||"$",j=(i==null?void 0:i.code)||"USD",I=[{value:"none",label:s("badges.none")},{value:"bestseller",label:" "+s("badges.bestseller")},{value:"popular",label:" "+s("badges.popular")},{value:"premium",label:" "+s("badges.premium")},{value:"signature",label:" "+s("badges.signature")},{value:"rustic",label:" "+s("badges.rustic")},{value:"classic",label:" "+s("badges.classic")},{value:"seasonal",label:" "+s("badges.seasonal")},{value:"new",label:" "+s("badges.new")},{value:"limited",label:" "+s("badges.limited")},{value:"vegan",label:" "+s("badges.vegan")},{value:"glutenFree",label:" "+s("badges.glutenFree")},{value:"chefChoice",label:" "+s("badges.chefChoice")},{value:"organic",label:" "+s("badges.organic")},{value:"sugarFree",label:" "+s("badges.sugarFree")},{value:"hypoallergenic",label:" "+s("badges.hypoallergenic")},{value:"dairyFree",label:" "+s("badges.dairyFree")},{value:"nutFree",label:" "+s("badges.nutFree")},{value:"halal",label:" "+s("badges.halal")},{value:"keto",label:" "+s("badges.keto")}],xe=[{code:"en",name:"English",flag:""},{code:"ru",name:"Russian",flag:""},{code:"tr",name:"Turkish",flag:""},{code:"tk",name:"Turkmen",flag:""}],vt=N=>{_(M=>{const q=M.languages||[];return q.includes(N)?q.length<=1?M:{...M,languages:q.filter(Z=>Z!==N)}:{...M,languages:[...q,N]}})},Ut=N=>{const Q=Array.from(N.target.files||[]);Q.length&&Q.forEach((te,oe)=>{if(te.size>5242880){console.log(`${te.name}: ${s("imageSizeLimit")}`);return}const Be=new FileReader;Be.onloadend=async()=>{const Ye=Be.result,Yt=new Image;Yt.onload=async()=>{if(Yt.width>1600||Yt.height>1600){console.log(`${te.name}: ${s("imageResolutionLimit")||"Image resolution must be  1600x1600"} `);return}try{const $e=await uC(Ye);_(xt=>({...xt,uploadedImages:[...xt.uploadedImages,{id:`upload-${Date.now()}-${oe}`,data:Ye,thumbnail:$e}]}))}catch{_($e=>({...$e,uploadedImages:[...$e.uploadedImages,{id:`upload-${Date.now()}-${oe}`,data:Ye,thumbnail:Ye}]}))}},Yt.src=Ye},Be.readAsDataURL(te)})},Me=N=>{_(M=>{var oe;const q=M.uploadedImages.findIndex(Be=>Be.id===N),Z=M.uploadedImages.filter(Be=>Be.id!==N);let Q=M.faceImageIndex;q!==-1&&(M.faceImageIndex===q?Q=0:M.faceImageIndex>q&&(Q=Math.max(0,M.faceImageIndex-1)));const te=Z.length+(((oe=M.images)==null?void 0:oe.length)||0);return Q>=te&&(Q=Math.max(0,te-1)),{...M,uploadedImages:Z,faceImageIndex:Q}})},U=N=>{_(M=>{const q=(M.images||[]).filter((Be,Ye)=>Ye!==N),Q=M.uploadedImages.length+N;let te=M.faceImageIndex;M.faceImageIndex===Q?te=0:M.faceImageIndex>Q&&(te=Math.max(0,M.faceImageIndex-1));const oe=M.uploadedImages.length+q.length;return te>=oe&&(te=Math.max(0,oe-1)),{...M,images:q,faceImageIndex:te}})},X=N=>{var xr;const M=N.price*x,q=(N.making_price||0)*x,Q=Da(N,n)*x,te=M-Q,oe=Q>0?te/Q*100:0;h(N.id);const Be=N.images||[],Ye=Be.filter(un=>!un.startsWith("data:image")),Yt=Be.filter(un=>un.startsWith("data:image")).map((un,Yi)=>({id:`data-${Yi}`,data:un,thumbnail:un})),$e=((xr=N.tags)==null?void 0:xr[0])||"none",xt=N.languages||["en","ru","tr","tk"],ln=N.regions||[];_({name:N.name,description:N.description,price:M.toFixed(2),making_price:q.toFixed(2),profit:te.toFixed(2),profit_margin:oe.toFixed(1),images:Ye,uploadedImages:Yt,ingredients:N.ingredients||[],tag:$e,languages:xt,regions:ln,faceImageIndex:0})},re=N=>{_(M=>{const q=M.regions||[];return q.includes(N)?{...M,regions:q.filter(Z=>Z!==N)}:{...M,regions:[...q,N]}})},ye=()=>{const N=(m.ingredients||[]).reduce((q,Z)=>{const Q=n.find(oe=>oe.id===Z.id),te=(Q==null?void 0:Q.price)||0;return q+te*x*(Z.quantity||0)},0),M=parseFloat(m.making_price)||0;return N+M},me=N=>{if(N===""){_(te=>({...te,price:N}));return}const M=parseFloat(N),q=ye(),Z=isNaN(M)?0:M-q,Q=q>0?Z/q*100:0;_(te=>({...te,price:N,profit:Z.toFixed(2),profit_margin:Q.toFixed(1)}))},we=(N,M)=>{const q=ye();let Z,Q,te;if(M==="amount"){if(N===""||N==="-"){_(oe=>({...oe,profit:N}));return}Q=parseFloat(N),Z=q+(isNaN(Q)?0:Q),te=q>0?Q/q*100:0,_(oe=>({...oe,price:Z.toFixed(2),profit:N,profit_margin:te.toFixed(1)}))}else if(M==="margin"){if(N===""||N==="-"){_(oe=>({...oe,profit_margin:N}));return}te=parseFloat(N),isNaN(te)?_(oe=>({...oe,profit_margin:N})):(Z=q*(1+te/100),Q=Z-q,_(oe=>({...oe,price:Z.toFixed(2),profit:Q.toFixed(2),profit_margin:N})))}},Ct=N=>{N.preventDefault();const M=[...m.uploadedImages.map($e=>$e.data),...m.images];if(m.faceImageIndex>0&&m.faceImageIndex<M.length){const xt=[M[m.faceImageIndex],...M.slice(0,m.faceImageIndex),...M.slice(m.faceImageIndex+1)];M.splice(0,M.length,...xt)}if(M.length===0){console.log(s("errorAddAtLeastOneImage")||"Please add at least one image.");return}const q=m.tag&&m.tag!=="none"?[m.tag]:[],Z=m.languages&&m.languages.length>0?m.languages:["en","ru","tr","tk"],Q=ye();if((parseFloat(m.price)||0)<Q){console.log(s("errorPriceTooLow")||"Selling Price cannot be lower than Total Cost!");return}const oe=parseFloat(m.price)/x,Be=(parseFloat(m.making_price)||0)/x,Ye={name:m.name,description:m.description,price:oe,making_price:Be,images:M,category_id:"4",ingredients:m.ingredients,tags:q,languages:Z,regions:m.regions||[]};(async()=>{try{if(c&&c!=="new"){const xt={...t.find(ln=>ln.id===c),...Ye};await se.updateProduct(c,xt),e(ln=>ln.map(xr=>xr.id===c?xt:xr))}else{const $e={...Ye,id:(t.length+1).toString()},xt=await se.createProduct($e);e(ln=>[...ln,xt])}h(null)}catch($e){console.error("Failed to save product:",$e),console.log(s("errorSavingProduct")||"Failed to save product. Please try again.")}})()},_t=N=>{const q=N.ingredients.reduce((oe,Be)=>{const Ye=n.find($e=>$e.id===Be.id),Yt=(Ye==null?void 0:Ye.price)||0;return oe+Yt*x*(Be.quantity||0)},0)+(parseFloat(N.making_price)||0),Q=(parseFloat(N.price)||0)-q,te=q>0?Q/q*100:0;return{...N,profit:Q.toFixed(2),profit_margin:te.toFixed(1)}},H=N=>{_(M=>{const q={...M,making_price:N};return _t(q)})},he=(N,M)=>{_(q=>{const Z=q.ingredients.find(oe=>oe.id===N);let Q;Z?M<=0?Q=q.ingredients.filter(oe=>oe.id!==N):Q=q.ingredients.map(oe=>oe.id===N?{...oe,quantity:M}:oe):M>0?Q=[...q.ingredients,{id:N,quantity:M}]:Q=q.ingredients;const te={...q,ingredients:Q};return _t(te)})},_r=N=>{var M;return((M=m.ingredients.find(q=>q.id===N))==null?void 0:M.quantity)||0};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"form-card",style:{marginBottom:"2rem"},children:[l.jsx("h3",{style:{fontFamily:"'Playfair Display',serif",marginBottom:"1rem"},children:s("createEditProduct")||"Create / Edit Product"}),c?l.jsxs("form",{onSubmit:Ct,children:[l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[s("productName")," *"]}),l.jsx("input",{type:"text",value:m.name,onChange:N=>_({...m,name:N.target.value}),required:!0,onInvalid:N=>N.target.setCustomValidity(s("fieldRequired")),onInput:N=>N.target.setCustomValidity("")})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[s("pricePerUnit")," (",S,") *"]}),l.jsx("input",{type:"number",step:"0.01",value:m.price,onChange:N=>me(N.target.value),required:!0,onInvalid:N=>N.target.setCustomValidity(s("fieldRequired")),onInput:N=>N.target.setCustomValidity(""),onWheel:N=>N.target.blur()})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[s("description")," *"]}),l.jsx("textarea",{value:m.description,onChange:N=>_({...m,description:N.target.value}),required:!0,onInvalid:N=>N.target.setCustomValidity(s("fieldRequired")),onInput:N=>N.target.setCustomValidity("")})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[s("productImages")," (Upload Multiple) *"]}),l.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[l.jsx("input",{type:"file",accept:"image/*",onChange:Ut,style:{padding:"0.5rem"},id:"img-upload",multiple:!0,hidden:!0}),l.jsx("label",{htmlFor:"img-upload",className:"btn btn-secondary btn-small",style:{width:"100%",justifyContent:"center",cursor:"pointer"},children:s("selectImageFile")})]}),m.uploadedImages.length>0&&l.jsxs("div",{style:{marginBottom:"1rem"},children:[l.jsxs("p",{style:{fontSize:"0.9rem",fontWeight:500,marginBottom:"0.5rem"},children:["Uploaded Images (",m.uploadedImages.length,"):"]}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(100px,1fr))",gap:"0.5rem"},children:m.uploadedImages.map((N,M)=>l.jsxs("div",{style:{position:"relative",borderRadius:"8px",overflow:"hidden",border:"2px solid var(--blush)"},children:[l.jsx("img",{src:N.thumbnail,alt:`Upload ${M+1}`,style:{width:"100%",height:"100px",objectFit:"cover"}}),l.jsx("button",{type:"button",onClick:()=>Me(N.id),style:{position:"absolute",top:0,right:0,background:"rgba(255,0,0,0.7)",color:"white",border:"none",width:"24px",height:"24px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(Br,{size:16})})]},N.id))})]}),l.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"var(--blush)",borderRadius:"12px"},children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Add Image URLs:"}),l.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:[l.jsx("input",{type:"text",placeholder:"https://...",onKeyPress:N=>{if(N.key==="Enter"){const M=N.target.value.trim();M&&(_(q=>({...q,images:[...q.images,M]})),N.target.value="")}},style:{flex:1,padding:"0.5rem",borderRadius:"6px",border:"1px solid var(--chocolate)"}}),l.jsxs("button",{type:"button",className:"form-submit btn-small",onClick:N=>{N.preventDefault();const M=N.target.previousElementSibling,q=M.value.trim();q&&(_(Z=>({...Z,images:[...Z.images,q]})),M.value="")},children:[s("add")||"Add"," URL"]})]}),m.images.length>0&&l.jsxs("div",{children:[l.jsxs("p",{style:{fontSize:"0.9rem",fontWeight:500,marginBottom:"0.5rem"},children:["Image URLs (",m.images.length,"):"]}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(100px,1fr))",gap:"0.5rem"},children:m.images.map((N,M)=>l.jsxs("div",{style:{position:"relative",borderRadius:"8px",overflow:"hidden",border:"2px solid var(--terracotta)"},children:[l.jsx("img",{src:N,alt:`URL ${M+1}`,style:{width:"100%",height:"100px",objectFit:"cover"}}),l.jsx("button",{type:"button",onClick:()=>U(M),style:{position:"absolute",top:0,right:0,background:"rgba(255,0,0,0.7)",color:"white",border:"none",width:"24px",height:"24px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(Br,{size:16})})]},M))})]})]})]}),(m.uploadedImages.length>0||m.images.length>0)&&l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{style:{display:"block",marginBottom:"1rem",fontWeight:600},children:[" ",s("selectFaceImage")||"Select Face Image"]}),l.jsx("p",{style:{fontSize:"0.85rem",color:"var(--chocolate)",opacity:.7,marginBottom:"1rem"},children:"Choose which photo will be shown in product collections"}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(120px,1fr))",gap:"1rem",padding:"1.5rem",background:"var(--blush)",borderRadius:"12px"},children:[...m.uploadedImages,...m.images.map((N,M)=>({id:`url-${M}`,data:N}))].map((N,M)=>l.jsxs("div",{onClick:()=>_(q=>({...q,faceImageIndex:M})),style:{position:"relative",borderRadius:"12px",overflow:"hidden",cursor:"pointer",border:m.faceImageIndex===M?"3px solid var(--terracotta)":"2px solid transparent",transition:"all 0.2s",boxShadow:m.faceImageIndex===M?"0 0 0 3px white, 0 0 10px rgba(212,133,106,0.4)":"0 2px 8px rgba(0,0,0,0.1)",transform:m.faceImageIndex===M?"scale(1.05)":"scale(1)"},children:[l.jsx("img",{src:N.thumbnail||N.data,alt:`Face option ${M+1}`,style:{width:"100%",height:"120px",objectFit:"cover"}}),m.faceImageIndex===M&&l.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(212,133,106,0.3)",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx("div",{style:{background:"var(--terracotta)",color:"white",width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.2rem",fontWeight:"bold"},children:""})})]},N.id))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:s("productBadge")}),l.jsx("select",{value:m.tag,onChange:N=>_({...m,tag:N.target.value}),style:{padding:"1rem",width:"100%",borderRadius:"12px",border:"2px solid var(--blush)"},children:I.map(N=>l.jsx("option",{value:N.value,children:N.label},N.value))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:s("showInLanguages")}),l.jsx("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",padding:"1rem",background:"var(--blush)",borderRadius:"12px"},children:xe.map(N=>{var M,q;return l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",background:"white",padding:"0.5rem 1rem",borderRadius:"50px",border:(M=m.languages)!=null&&M.includes(N.code)?"2px solid var(--terracotta)":"2px solid transparent"},children:[l.jsx("input",{type:"checkbox",checked:(q=m.languages)==null?void 0:q.includes(N.code),onChange:()=>vt(N.code),style:{width:"auto",margin:0}}),l.jsxs("span",{children:[N.flag," ",N.name]})]},N.code)})}),l.jsx("p",{style:{fontSize:"0.8rem",color:"var(--chocolate)",marginTop:"0.5rem",opacity:.7},children:s("selectLanguagesProduct")})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Ci,{size:18})," ",s("productRegions")||"Available Regions"]}),l.jsx("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap",padding:"1rem",background:"var(--blush)",borderRadius:"12px"},children:k.length===0?l.jsx("p",{style:{color:"var(--chocolate)",opacity:.7,fontSize:"0.9rem"},children:s("noCountryContacts")||"No regions configured"}):k.map(N=>{var M,q;return l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",background:"white",padding:"0.5rem 1rem",borderRadius:"50px",border:(M=m.regions)!=null&&M.includes(N.countryCode)?"2px solid var(--terracotta)":"2px solid transparent",transition:"all 0.2s"},children:[l.jsx("input",{type:"checkbox",checked:(q=m.regions)==null?void 0:q.includes(N.countryCode),onChange:()=>re(N.countryCode),style:{width:"auto",margin:0}}),l.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"28px",height:"28px",background:N.countryCode==="GENERAL"?"var(--espresso)":"var(--terracotta)",color:"white",borderRadius:"50%",fontSize:"0.65rem",fontWeight:700},children:N.countryCode==="GENERAL"?l.jsx(Ci,{size:14}):N.countryCode}),l.jsx("span",{children:N.country})]},N.id)})}),l.jsx("p",{style:{fontSize:"0.8rem",color:"var(--chocolate)",marginTop:"0.5rem",opacity:.7},children:s("productRegionsHelp")||"Leave empty to show in all regions, or select specific regions to restrict availability."})]}),l.jsxs("div",{style:{margin:"2rem 0",padding:"1.5rem",background:"var(--blush)",borderRadius:"16px"},children:[l.jsx("h4",{style:{marginBottom:"1rem"},children:s("costAnalysis")}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[s("makingPriceLabor")," (",S,")"]}),l.jsx("input",{type:"number",step:"0.01",value:m.making_price,onChange:N=>H(N.target.value),placeholder:"0.00",onWheel:N=>N.target.blur()})]}),l.jsxs("div",{style:{marginBottom:"1rem"},children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:s("ingredients")}),l.jsx("div",{style:{background:"white",borderRadius:"12px",border:"1px solid var(--blush)"},children:l.jsxs("table",{className:"admin-table",style:{marginBottom:0},children:[l.jsx("thead",{style:{position:"sticky",top:0,zIndex:10,background:"white",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:l.jsxs("tr",{children:[l.jsx("th",{style:{padding:"1rem"},children:s("ingredientName")}),l.jsx("th",{style:{padding:"1rem"},children:s("cost")}),l.jsx("th",{style:{padding:"1rem"},children:s("quantity")})]})}),l.jsx("tbody",{children:n.map(N=>{const M=_r(N.id);return l.jsxs("tr",{style:{background:M>0?"var(--blush)":"transparent",transition:"background 0.2s"},children:[l.jsx("td",{style:{padding:"0.75rem 1rem"},children:l.jsx("div",{style:{fontWeight:500},children:N.name})}),l.jsxs("td",{style:{padding:"0.75rem 1rem",color:"var(--chocolate)",opacity:.8},children:[S," ",(N.price*x).toFixed(2)," / ",N.unit]}),l.jsx("td",{style:{padding:"0.75rem 1rem"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx("input",{type:"number",min:"0",step:"0.01",style:{width:"80px",padding:"0.5rem",fontSize:"0.9rem",border:M>0?"2px solid var(--terracotta)":"1px solid #ddd",borderRadius:"6px",textAlign:"center"},value:M,onChange:q=>he(N.id,parseFloat(q.target.value)||0),onFocus:q=>q.target.select(),onWheel:q=>q.target.blur()}),l.jsx("span",{style:{fontSize:"0.85rem",color:"var(--chocolate)",minWidth:"40px"},children:N.unit})]})})]},N.id)})})]})})]}),l.jsxs("div",{style:{marginTop:"1.5rem",background:"linear-gradient(135deg,rgba(255,240,240,0.5),rgba(245,228,220,0.5))",padding:"2rem",borderRadius:"16px",border:"1px solid var(--blush)"},children:[l.jsx("h5",{style:{fontSize:"0.95rem",fontWeight:600,color:"var(--chocolate)",marginBottom:"1.5rem",textTransform:"uppercase",letterSpacing:"0.5px",opacity:.8},children:s("pricingBreakdown")}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(200px,1fr))",gap:"1.5rem"},children:[l.jsxs("div",{style:{background:"white",padding:"1.25rem",borderRadius:"12px",border:"2px solid var(--blush)"},children:[l.jsx("label",{style:{display:"block",fontSize:"0.85rem",color:"var(--chocolate)",marginBottom:"0.5rem",fontWeight:500,opacity:.7,textTransform:"uppercase",letterSpacing:"0.3px"},children:s("totalCost")}),l.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"0.5rem"},children:[l.jsx("span",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--chocolate)",opacity:.9},children:j}),l.jsx("span",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--chocolate)"},children:ye().toFixed(2)})]})]}),l.jsxs("div",{style:{background:"white",padding:"1.25rem",borderRadius:"12px",border:"2px solid var(--terracotta)"},children:[l.jsx("label",{style:{display:"block",fontSize:"0.85rem",color:"var(--chocolate)",marginBottom:"0.5rem",fontWeight:500,opacity:.7,textTransform:"uppercase",letterSpacing:"0.3px"},children:s("sellingPrice")}),l.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"0.5rem"},children:[l.jsx("span",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--chocolate)",opacity:.9},children:j}),l.jsx("input",{type:"number",step:"0.01",value:m.price,onChange:N=>me(N.target.value),style:{flex:1,fontSize:"1.5rem",fontWeight:700,border:"none",background:"transparent",color:"var(--chocolate)",outline:"none",padding:"0",cursor:"pointer"},onWheel:N=>N.target.blur()})]})]}),l.jsxs("div",{style:{background:"white",padding:"1.25rem",borderRadius:"12px",border:"2px solid var(--sage)"},children:[l.jsx("label",{style:{display:"block",fontSize:"0.85rem",color:"var(--chocolate)",marginBottom:"0.5rem",fontWeight:500,opacity:.7,textTransform:"uppercase",letterSpacing:"0.3px"},children:s("profit")}),l.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"0.5rem"},children:[l.jsx("span",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--chocolate)",opacity:.9},children:j}),l.jsx("input",{type:"number",step:"0.01",min:"-100",max:"1000",value:m.profit,onChange:N=>we(N.target.value,"amount"),style:{flex:1,fontSize:"1.5rem",fontWeight:700,border:"none",background:"transparent",color:"var(--chocolate)",outline:"none",padding:"0",cursor:"pointer"},onWheel:N=>N.target.blur()})]})]}),l.jsxs("div",{style:{background:"white",padding:"1.25rem",borderRadius:"12px",border:"2px solid var(--mauve)"},children:[l.jsx("label",{style:{display:"block",fontSize:"0.85rem",color:"var(--chocolate)",marginBottom:"0.5rem",fontWeight:500,opacity:.7,textTransform:"uppercase",letterSpacing:"0.3px"},children:s("profitMargin")}),l.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"0.5rem"},children:[l.jsx("span",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--chocolate)"},children:"%"}),l.jsx("input",{type:"number",step:"0.1",value:m.profit_margin,onChange:N=>we(N.target.value,"margin"),style:{flex:1,fontSize:"1.5rem",fontWeight:700,border:"none",background:"transparent",color:"var(--chocolate)",outline:"none",padding:"0",cursor:"pointer"},onWheel:N=>N.target.blur()})]})]})]})]})]}),l.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem"},children:[l.jsx("button",{type:"submit",className:"form-submit",style:{width:"auto",padding:"0.8rem 2rem",marginTop:0},children:s("save")||"Save"}),l.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>h(null),children:s("cancel")}),c&&c!=="new"&&l.jsx("button",{type:"button",className:"btn",style:{background:"#dc3545",color:"#fff"},onClick:()=>F(c),children:s("delete")})]})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"form-row",style:{alignItems:"flex-end",gap:"0.75rem"},children:l.jsxs("div",{className:"form-group",style:{flex:1,position:"relative"},children:[l.jsx("label",{children:s("productName")}),l.jsx("input",{type:"text",value:p,onChange:N=>{y(N.target.value),g&&E(""),R(0),T(!0)},onKeyDown:N=>{const M=(p||"").trim();if(!M)return;const q=M.toLowerCase(),Z=t.filter(Q=>{var te;return(te=Q.name)==null?void 0:te.toLowerCase().startsWith(q)}).slice(0,8);if(N.key==="Enter"){const Q=t.find(te=>{var oe;return((oe=te.name)==null?void 0:oe.toLowerCase())===q});if(Q)X(Q),E(""),T(!1);else if(Z.length>0){const te=Z[Math.max(0,Math.min(A,Z.length-1))];y(te.name),X(te),E(""),T(!1)}else b(M)}else N.key==="Tab"?Z.length>0&&y(Z[0].name):N.key==="ArrowDown"?(N.preventDefault(),R(Q=>Math.min(Q+1,Math.max(0,Z.length-1)))):N.key==="ArrowUp"?(N.preventDefault(),R(Q=>Math.max(Q-1,0))):N.key==="Escape"&&T(!1)},onFocus:()=>T(!!(p&&p.trim())),onBlur:()=>setTimeout(()=>T(!1),150),placeholder:s("productName"),style:{borderColor:g?"#dc3545":void 0}}),g&&l.jsx("div",{style:{color:"#dc3545",marginTop:"0.35rem",fontSize:"0.9rem"},children:g}),P&&(p==null?void 0:p.trim())&&(()=>{const N=p.trim().toLowerCase(),M=t.filter(Z=>{var Q;return(Q=Z.name)==null?void 0:Q.toLowerCase().startsWith(N)}).slice(0,8),q=t.find(Z=>{var Q;return((Q=Z.name)==null?void 0:Q.toLowerCase())===N});return l.jsxs("div",{style:{position:"absolute",left:0,right:0,top:"calc(100% + 6px)",zIndex:1e3,background:"white",border:"2px solid var(--blush)",borderRadius:"14px",padding:"0.5rem",boxShadow:"0 10px 30px rgba(0,0,0,0.12)"},children:[M.length>0?M.map((Z,Q)=>l.jsx("button",{onMouseDown:()=>{y(Z.name),X(Z),R(0),E(""),T(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"0.6rem 0.75rem",border:"none",background:Q===A?"linear-gradient(135deg,rgba(245,228,220,0.6),rgba(212,133,106,0.15))":"transparent",cursor:"pointer",color:"var(--chocolate)",borderRadius:"10px",fontWeight:Q===A?700:500},role:"option","aria-selected":Q===A,children:Z.name},Z.id)):l.jsx("div",{style:{padding:"0.6rem 0.75rem",color:"var(--chocolate)",opacity:.7},children:"No matches"}),!q&&l.jsx("button",{onMouseDown:()=>{b(p.trim()),T(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"0.6rem 0.75rem",border:"none",cursor:"pointer",color:"var(--terracotta)",fontWeight:700,background:"transparent",borderTop:"1px dashed var(--blush)",marginTop:"0.25rem"},children:(s("createAsNewProduct")||"Create {name} as new product").replace("{name}",p.trim())})]})})()]})}),l.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"0.75rem"},children:[l.jsx("button",{className:"form-submit",style:{width:"auto",padding:"0.8rem 2rem",marginTop:0},onClick:()=>{b(p||"")},children:s("create")||"Create"}),l.jsx("button",{className:"form-submit",style:{width:"auto",padding:"0.8rem 2rem",marginTop:0},onClick:()=>{const N=(p||"").trim().toLowerCase();if(!N)return;const M=t.find(q=>{var Z;return((Z=q.name)==null?void 0:Z.toLowerCase())===N});M?(X(M),E("")):E(s("productNotFound")||"Product not found")},children:s("edit")})]})]})]}),l.jsxs("div",{className:"form-card",children:[l.jsx("h3",{style:{fontFamily:"'Playfair Display',serif",marginBottom:"1.5rem"},children:s("productManagement")}),l.jsx("div",{className:"products-grid",children:t.map(N=>{var M;return l.jsxs("div",{className:"product-card",onClick:()=>X(N),children:[l.jsxs("div",{className:"product-image",style:{height:"200px",position:"relative"},children:[l.jsx("img",{src:N.images[0],alt:N.name}),((M=N.tags)==null?void 0:M[0])&&l.jsx("span",{className:`product-tag ${N.tags[0]}`,children:N.tags[0]}),l.jsx("button",{type:"button",title:s("delete"),onClick:q=>{q.stopPropagation(),F(N.id)},style:{position:"absolute",top:"0.5rem",right:"0.5rem",background:"rgba(220,53,69,0.9)",color:"white",border:"none",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(zi,{size:16})})]}),l.jsxs("div",{className:"product-content",style:{padding:"1rem"},children:[l.jsx("h4",{style:{marginBottom:"0.5rem"},children:N.name}),l.jsx("div",{className:"product-price",children:u(N.price)}),l.jsx("div",{style:{fontSize:"0.85rem",marginTop:"0.5rem",color:"var(--chocolate)",opacity:.7},children:Da(N,n)>0?`Margin: ${((N.price-Da(N,n))/N.price*100).toFixed(0)}%`:"No cost data"}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.25rem",marginTop:"0.5rem"},children:!N.regions||N.regions.length===0?l.jsxs("span",{style:{fontSize:"0.7rem",padding:"0.2rem 0.5rem",background:"var(--sage)",color:"white",borderRadius:"10px",display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[l.jsx(Ci,{size:10})," ",s("allRegions")||"All"]}):N.regions.map(q=>l.jsx("span",{style:{fontSize:"0.7rem",padding:"0.2rem 0.5rem",background:"var(--terracotta)",color:"white",borderRadius:"10px",fontWeight:600},children:q},q))})]})]},N.id)})})]}),D!==null&&l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:l.jsxs("div",{style:{background:"linear-gradient(135deg,rgba(255,240,240,0.95),rgba(245,228,220,0.95))",border:"1px solid var(--blush)",borderRadius:"16px",padding:"1.5rem",width:"min(420px,90vw)",boxShadow:"0 10px 30px rgba(0,0,0,0.2)"},children:[l.jsx("h4",{style:{margin:"0 0 1rem",color:"var(--chocolate)"},children:s("confirmDelete")||"Delete this product?"}),l.jsx("p",{style:{margin:"0 0 1.25rem",color:"var(--chocolate)",opacity:.8},children:s("confirmDeleteDetail")||"This action cannot be undone."}),l.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[l.jsx("button",{className:"btn btn-secondary",onClick:()=>F(null),children:s("cancel")}),l.jsx("button",{className:"btn",style:{background:"#dc3545",color:"#fff"},onClick:v,children:s("delete")})]})]})})]})},dC=({ingredients:t,setIngredients:e,products:n,currentCurrency:r})=>{const{t:i}=Ke(),[s,o]=B.useState({name:"",unit:"",price:""}),[u,c]=B.useState(null),h=(r==null?void 0:r.rate)||1,p=r!=null&&r.symbol&&r.symbol.trim()?r.symbol:(r==null?void 0:r.code)||"$";B.useEffect(()=>{t&&localStorage.setItem("soulmate_ingredients",JSON.stringify(t))},[t]);const y=P=>{P&&P.preventDefault();const T=u?u.name:s.name;if(!T||!T.trim()){console.log(i("ingredientNameRequired"));return}const k=b=>(parseFloat(b)||0)/h;(async()=>{try{if(u){const b={...u,price:k(u.price)};await se.updateIngredient(u.id,b),e(D=>D.map(F=>F.id===u.id?b:F)),c(null)}else{const D={id:"ing"+Date.now(),name:s.name,unit:s.unit,price:k(s.price)},F=await se.createIngredient(D);e(v=>[...v,F]),o({name:"",unit:"",price:""})}}catch(b){console.error("Failed to save ingredient:",b),console.log(i("errorSavingIngredient")||"Failed to save ingredient.")}})()},g=P=>{c({...P,price:(P.price*h).toFixed(2)}),o({name:"",unit:"",price:""})},E=P=>n?n.some(T=>{var k;return(k=T.ingredients)==null?void 0:k.some(C=>C.id===P)}):!1,A=P=>n?n.filter(T=>{var k;return(k=T.ingredients)==null?void 0:k.some(C=>C.id===P)}):[],R=P=>{const T=A(P),k=T.length>0?i("ingredientUsedInProducts").replace("{count}",T.length).replace("{products}",T.map(C=>C.name).join(", ")):i("deleteIngredientConfirm");window.confirm(k)&&se.deleteIngredient(P).then(()=>{e(C=>C.filter(b=>b.id!==P))}).catch(C=>{console.error("Failed to delete ingredient:",C),console.log("Failed to delete ingredient")})};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"form-card",style:{marginBottom:"2rem"},children:[l.jsx("h3",{style:{fontFamily:"'Playfair Display',serif",marginBottom:"1.5rem"},children:i(u?"editIngredient":"addNewIngredient")}),l.jsxs("form",{onSubmit:y,children:[l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[i("ingredientName")," *"]}),l.jsx("input",{type:"text",value:(u==null?void 0:u.name)||s.name,onChange:P=>u?c({...u,name:P.target.value}):o({...s,name:P.target.value}),required:!0,onInvalid:P=>P.target.setCustomValidity(i("fieldRequired")),onInput:P=>P.target.setCustomValidity("")})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[i("unit")," *"]}),l.jsx("input",{type:"text",value:(u==null?void 0:u.unit)||s.unit,onChange:P=>u?c({...u,unit:P.target.value}):o({...s,unit:P.target.value}),placeholder:"lb, oz, qt, etc.",required:!0,onInvalid:P=>P.target.setCustomValidity(i("fieldRequired")),onInput:P=>P.target.setCustomValidity("")})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[i("pricePerUnit")," (",p,") *"]}),l.jsx("input",{type:"number",step:"0.01",min:"0",value:(u==null?void 0:u.price)||s.price,onChange:P=>u?c({...u,price:P.target.value}):o({...s,price:P.target.value}),required:!0,onInvalid:P=>P.target.setCustomValidity(i("fieldRequired")),onInput:P=>P.target.setCustomValidity("")})]})]}),l.jsxs("button",{type:"submit",className:"form-submit",style:{width:"auto",padding:"0.8rem 2rem",marginTop:0},children:[i(u?"update":"add")," ",i("ingredients")]}),u&&l.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>c(null),style:{marginLeft:"0.5rem"},children:i("cancel")})]})]}),l.jsxs("div",{className:"form-card",children:[l.jsx("h3",{style:{fontFamily:"'Playfair Display',serif",marginBottom:"1.5rem"},children:i("ingredientManagement")}),t.length===0?l.jsx("p",{style:{color:"var(--chocolate)",opacity:.7},children:i("noIngredientsYet")}):l.jsxs("table",{className:"admin-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{style:{width:"35%"},children:i("ingredientName")}),l.jsx("th",{style:{width:"15%"},children:i("unit")}),l.jsxs("th",{style:{width:"20%"},children:[i("pricePerUnit")," (",p,")"]}),l.jsx("th",{style:{width:"15%"},children:i("status")}),l.jsx("th",{style:{width:"15%"},children:i("actions")})]})}),l.jsx("tbody",{children:t.map(P=>{const T=E(P.id),k=A(P.id),C=(u==null?void 0:u.id)===P.id;return l.jsxs("tr",{children:[l.jsx("td",{children:C?l.jsx("input",{type:"text",value:u.name,onChange:b=>c({...u,name:b.target.value}),style:{padding:"0.5rem 0.75rem",border:"1px solid var(--terracotta)",borderRadius:"8px",width:"100%",background:"white",boxShadow:"0 2px 5px rgba(0,0,0,0.05)",outline:"none",color:"var(--espresso)",fontSize:"0.95rem"},placeholder:i("ingredientName"),autoFocus:!0,required:!0,onInvalid:b=>b.target.setCustomValidity(i("fieldRequired")),onInput:b=>b.target.setCustomValidity("")}):l.jsx("strong",{style:{color:"var(--espresso)",fontSize:"0.95rem"},children:P.name})}),l.jsx("td",{children:C?l.jsx("input",{type:"text",value:u.unit,onChange:b=>c({...u,unit:b.target.value}),style:{padding:"0.5rem 0.75rem",border:"1px solid var(--terracotta)",borderRadius:"8px",width:"100%",background:"white",boxShadow:"0 2px 5px rgba(0,0,0,0.05)",outline:"none",color:"var(--espresso)"},placeholder:i("unit"),required:!0,onInvalid:b=>b.target.setCustomValidity(i("fieldRequired")),onInput:b=>b.target.setCustomValidity("")}):l.jsx("span",{style:{color:"var(--chocolate)"},children:P.unit})}),l.jsx("td",{children:C?l.jsx("input",{type:"number",step:"0.01",min:"0",value:u.price,onChange:b=>c({...u,price:b.target.value}),style:{padding:"0.5rem 0.75rem",border:"1px solid var(--terracotta)",borderRadius:"8px",width:"100%",background:"white",boxShadow:"0 2px 5px rgba(0,0,0,0.05)",outline:"none",color:"var(--espresso)"},placeholder:"0.00",onWheel:b=>b.target.blur(),required:!0,onInvalid:b=>b.target.setCustomValidity(i("fieldRequired")),onInput:b=>b.target.setCustomValidity("")}):l.jsxs("span",{children:[p," ",(P.price*h).toFixed(2)]})}),l.jsx("td",{children:T?l.jsxs("span",{className:"status used",title:`Used in: ${k.map(b=>b.name).join(", ")}`,children:[i("used")," (",k.length,")"]}):l.jsx("span",{className:"status active",children:i("notUsed")})}),l.jsx("td",{children:l.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:C?l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>y(),title:i("save")||"Save",style:{background:"none",border:"none",cursor:"pointer",padding:"4px"},children:l.jsx(u_,{size:18,color:"#28a745"})}),l.jsx("button",{onClick:()=>c(null),title:i("cancel"),style:{background:"none",border:"none",cursor:"pointer",padding:"4px"},children:l.jsx(Br,{size:18,color:"#DC3545"})})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>g(P),title:i("edit"),style:{background:"none",border:"none",cursor:"pointer",padding:"4px"},children:l.jsx(bh,{size:18,color:"#5C4033"})}),!T&&l.jsx("button",{onClick:()=>R(P.id),title:i("delete"),style:{background:"none",border:"none",cursor:"pointer",padding:"4px"},children:l.jsx(zi,{size:18,color:"#DC3545"})})]})})})]},P.id)})})]})]})]})},hC=({orders:t,setOrders:e,formatCurrency:n})=>{const{t:r}=Ke(),i=n||(g=>`USD ${Number(g).toFixed(2)}`),s=(g,E)=>{e(A=>A.map(R=>R.id===g?{...R,status:E}:R))},o=g=>{const E={[r("pending")]:"Pending",[r("inProgress")]:"In Progress",[r("ready")]:"Ready",[r("completed")]:"Completed",[r("cancelled")]:"Cancelled"},A=Object.keys(E).find(P=>E[P]===g)||g,R={Pending:"#FFF3CD","In Progress":"#D1ECF1",Ready:"#D4EDDA",Completed:"#D4EDDA",Cancelled:"#F8D7DA"};return R[A]||R[g]||"#E2E3E5"},u=g=>{const E={[r("pending")]:"Pending",[r("inProgress")]:"In Progress",[r("ready")]:"Ready",[r("completed")]:"Completed",[r("cancelled")]:"Cancelled"},A=Object.keys(E).find(P=>E[P]===g)||g,R={Pending:"#856404","In Progress":"#0C5460",Ready:"#155724",Completed:"#155724",Cancelled:"#721C24"};return R[A]||R[g]||"#383D41"},c=g=>({Pending:r("pending"),"In Progress":r("inProgress"),Ready:r("ready"),Completed:r("completed"),Cancelled:r("cancelled")})[g]||g,h=t.filter(g=>g.status==="Pending").length,p=t.filter(g=>g.status==="In Progress").length,y=t.filter(g=>g.status==="Ready").length;return l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3,1fr)",gap:"1.5rem",marginBottom:"2rem"},children:[l.jsxs("div",{className:"form-card",style:{textAlign:"center",padding:"2rem"},children:[l.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.5rem"},children:""}),l.jsx("div",{style:{fontSize:"2rem",fontWeight:"600",color:"var(--terracotta)"},children:h}),l.jsx("div",{style:{color:"var(--chocolate)",opacity:.7},children:r("pendingOrders")})]}),l.jsxs("div",{className:"form-card",style:{textAlign:"center",padding:"2rem"},children:[l.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.5rem"},children:""}),l.jsx("div",{style:{fontSize:"2rem",fontWeight:"600",color:"var(--terracotta)"},children:p}),l.jsx("div",{style:{color:"var(--chocolate)",opacity:.7},children:r("inProgress")})]}),l.jsxs("div",{className:"form-card",style:{textAlign:"center",padding:"2rem"},children:[l.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.5rem"},children:""}),l.jsx("div",{style:{fontSize:"2rem",fontWeight:"600",color:"var(--terracotta)"},children:y}),l.jsx("div",{style:{color:"var(--chocolate)",opacity:.7},children:r("ready")})]})]}),l.jsxs("div",{className:"form-card",children:[l.jsx("h3",{style:{fontFamily:"'Playfair Display',serif",marginBottom:"1.5rem"},children:r("allOrders")}),t.length===0?l.jsx("p",{style:{color:"var(--chocolate)",opacity:.7},children:r("noOrdersYet")}):l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:t.map(g=>l.jsxs("div",{style:{padding:"1.5rem",background:"var(--blush)",borderRadius:"16px",border:"1px solid rgba(0,0,0,0.1)"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"1rem",flexWrap:"wrap",gap:"1rem"},children:[l.jsxs("div",{style:{flex:1},children:[l.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",marginBottom:"0.5rem"},children:[l.jsx("strong",{style:{fontSize:"1.1rem",color:"var(--espresso)"},children:g.id}),l.jsx("span",{style:{fontSize:"0.8rem",padding:"0.25rem 0.75rem",background:o(g.status),color:u(g.status),borderRadius:"50px",fontWeight:600},children:c(g.status)})]}),l.jsxs("div",{style:{fontSize:"0.9rem",color:"var(--chocolate)",marginBottom:"0.5rem"},children:[l.jsxs("strong",{children:[r("customer"),":"]})," ",g.customerName]}),g.email&&l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--chocolate)",opacity:.7,marginBottom:"0.25rem"},children:g.email}),g.phone&&l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--chocolate)",opacity:.7,marginBottom:"0.5rem"},children:g.phone}),l.jsxs("div",{style:{fontSize:"0.9rem",color:"var(--chocolate)",marginTop:"0.5rem"},children:[l.jsxs("strong",{children:[r("address"),":"]})," ",g.address]}),l.jsxs("div",{style:{fontSize:"0.9rem",color:"var(--chocolate)",marginTop:"0.5rem"},children:[l.jsxs("strong",{children:[r("delivery"),":"]})," ",g.date," @ ",g.time," (",r(g.timeOfDay),")"]})]}),l.jsxs("div",{style:{textAlign:"right"},children:[l.jsx("div",{style:{fontWeight:"600",color:"var(--terracotta)",fontSize:"1.2rem"},children:i(g.total)}),l.jsxs("div",{style:{fontSize:"0.9rem",marginTop:"0.5rem"},children:[l.jsx("div",{children:l.jsxs("strong",{children:[r("items"),":"]})}),g.items.map(E=>l.jsxs("div",{style:{fontSize:"0.85rem",opacity:.8},children:[E.name," x",E.quantity]},`${g.id}-${E.id}`))]})]})]}),g.notes&&l.jsxs("div",{style:{marginBottom:"1rem",padding:"0.75rem",background:"white",borderRadius:"8px",fontSize:"0.85rem"},children:[l.jsxs("strong",{children:[r("notes"),":"]})," ",g.notes]}),l.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center",flexWrap:"wrap"},children:[l.jsxs("label",{style:{fontSize:"0.9rem",fontWeight:500},children:[r("updateStatus"),":"]}),l.jsxs("select",{value:g.status,onChange:E=>s(g.id,E.target.value),style:{padding:"0.5rem 1rem",border:"2px solid var(--terracotta)",borderRadius:"8px",fontSize:"0.9rem",fontWeight:500,background:"white",cursor:"pointer"},children:[l.jsx("option",{value:"Pending",children:r("pending")}),l.jsx("option",{value:"In Progress",children:r("inProgress")}),l.jsx("option",{value:"Ready",children:r("ready")}),l.jsx("option",{value:"Completed",children:r("completed")}),l.jsx("option",{value:"Cancelled",children:r("cancelled")})]}),l.jsxs("span",{style:{fontSize:"0.8rem",opacity:.7,marginLeft:"auto"},children:[r("recentOrders"),": ",new Date(g.createdAt).toLocaleString()]})]})]},g.id))})]})]})},fC=({onDefaultChange:t,userCountry:e})=>{const{t:n}=Ke(),[r,i]=B.useState([]),[s,o]=B.useState(!1),[u,c]=B.useState(null),[h,p]=B.useState(null),[y,g]=B.useState({country:"",countryCode:"",email:"",phone:"",isDefault:!1});B.useEffect(()=>{R(),E()},[]),B.useEffect(()=>{r.length>0&&h&&A()},[r,h]);const E=async()=>{try{if(e)p(e);else{const v=await se.getCountryFromIP();p(v.country_code)}}catch(v){console.error("Failed to detect country:",v),p("GENERAL")}},A=()=>{const v=r.find(_=>_.isDefault);if(v){P(v);return}const m=r.find(_=>{var x;return _.countryCode===h||((x=_.countryCode)==null?void 0:x.toUpperCase())===(h==null?void 0:h.toUpperCase())});if(m)P(m);else{const _=r.find(x=>{var S,j;return((S=x.countryCode)==null?void 0:S.toUpperCase())==="GENERAL"||((j=x.country)==null?void 0:j.toLowerCase())==="general"});_&&P(_)}},R=async()=>{try{const v=await se.getCountryContacts();i(v)}catch(v){console.error("Failed to load country contacts:",v)}},P=async v=>{t&&t({email:v.email,phone:v.phone})},T=()=>{g({country:"",countryCode:"",email:"",phone:"",isDefault:!1}),c(null),o(!1)},k=v=>{g({country:v.country,countryCode:v.countryCode,email:v.email,phone:v.phone,isDefault:v.isDefault}),c(v),o(!0)},C=async v=>{v.preventDefault();try{if(y.isDefault&&!(u!=null&&u.isDefault)){const _=r.find(x=>x.isDefault);_&&await se.updateCountryContact(_.id,{..._,isDefault:!1})}let m;u?(m={...u,...y},await se.updateCountryContact(u.id,m)):(m={id:y.countryCode.toLowerCase(),...y},await se.createCountryContact(m)),m.isDefault&&await P(m),await R(),T()}catch(m){console.error("Failed to save contact:",m)}},b=async v=>{if(v.isDefault){console.log(n("cannotDeleteDefault"));return}if(window.confirm(n("deleteCountryContact")))try{await se.deleteCountryContact(v.id),await R()}catch(m){console.error("Failed to delete contact:",m)}},D=async v=>{try{const m=r.find(x=>x.isDefault);m&&await se.updateCountryContact(m.id,{...m,isDefault:!1});const _={...v,isDefault:!0};await se.updateCountryContact(v.id,_),await P(_),await R()}catch(m){console.error("Failed to set default:",m)}},F=[{code:"GENERAL",name:"General (Default)"},{code:"US",name:"United States"},{code:"TM",name:"Turkmenistan"},{code:"TR",name:"Turkey"},{code:"RU",name:"Russia"},{code:"DE",name:"Germany"},{code:"GB",name:"United Kingdom"},{code:"FR",name:"France"},{code:"AE",name:"UAE"},{code:"KZ",name:"Kazakhstan"},{code:"UZ",name:"Uzbekistan"}];return l.jsxs("div",{style:{marginTop:"2rem",paddingTop:"2rem",borderTop:"2px solid var(--blush)"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[l.jsxs("div",{children:[l.jsxs("h4",{style:{fontFamily:"'Playfair Display', serif",color:"var(--espresso)",marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Ci,{size:20})," ",n("countryContacts")]}),l.jsx("p",{style:{color:"var(--chocolate)",opacity:.7,fontSize:"0.9rem"},children:n("countryContactsDescription")}),h&&l.jsxs("p",{style:{color:"var(--sage)",fontSize:"0.85rem",marginTop:"0.5rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[l.jsx(ng,{size:14})," ",n("yourLocation")||"Your location",": ",l.jsx("strong",{children:h})]})]}),!s&&l.jsxs("button",{className:"btn btn-primary btn-small",onClick:()=>o(!0),style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(BI,{size:16})," ",n("addCountryContact")]})]}),s&&l.jsxs("div",{style:{background:"var(--blush)",padding:"1.5rem",borderRadius:"16px",marginBottom:"1.5rem"},children:[l.jsx("h5",{style:{marginBottom:"1rem",fontFamily:"'Playfair Display', serif"},children:n(u?"editCountryContact":"addCountryContact")}),l.jsxs("form",{onSubmit:C,children:[l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[n("countryName")," *"]}),l.jsx("input",{type:"text",required:!0,value:y.country,onChange:v=>g({...y,country:v.target.value}),placeholder:"e.g., United States"})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[n("countryCode")," *"]}),l.jsxs("select",{value:y.countryCode,onChange:v=>{const m=F.find(_=>_.code===v.target.value);g({...y,countryCode:v.target.value,country:m&&v.target.value!=="custom"?m.name:y.country})},style:{marginBottom:y.countryCode==="custom"?"0.5rem":0},children:[l.jsxs("option",{value:"",children:["-- ",n("selectLanguage")," --"]}),F.map(v=>l.jsxs("option",{value:v.code,children:[v.code," - ",v.name]},v.code)),l.jsx("option",{value:"custom",children:"Other (Custom)"})]}),y.countryCode==="custom"&&l.jsx("input",{type:"text",maxLength:2,placeholder:"XX",style:{marginTop:"0.5rem",textTransform:"uppercase"},onChange:v=>g({...y,countryCode:v.target.value.toUpperCase()})}),l.jsx("small",{style:{color:"var(--chocolate)",opacity:.6,fontSize:"0.8rem"},children:n("countryCodeHelp")})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[l.jsx(tg,{size:14,style:{marginRight:"0.25rem"}}),n("email")," *"]}),l.jsx("input",{type:"email",required:!0,value:y.email,onChange:v=>g({...y,email:v.target.value}),placeholder:"contact@example.com"})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[l.jsx(rg,{size:14,style:{marginRight:"0.25rem"}}),n("phone")," *"]}),l.jsx("input",{type:"text",required:!0,value:y.phone,onChange:v=>g({...y,phone:v.target.value}),placeholder:"+1 (555) 123-4567"})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[l.jsx("input",{type:"checkbox",id:"isDefault",checked:y.isDefault,onChange:v=>g({...y,isDefault:v.target.checked}),style:{width:"auto"}}),l.jsxs("label",{htmlFor:"isDefault",style:{cursor:"pointer",marginBottom:0},children:[n("setAsDefault")," (",n("countryContactsDescription").split(".")[0],")"]})]}),l.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[l.jsxs("button",{type:"submit",className:"btn btn-primary btn-small",children:[l.jsx(u_,{size:16})," ",n(u?"save":"add")]}),l.jsxs("button",{type:"button",className:"btn btn-secondary btn-small",onClick:T,children:[l.jsx(Br,{size:16})," ",n("cancel")]})]})]})]}),r.length===0?l.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"var(--chocolate)",opacity:.7},children:[l.jsx(Ci,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),l.jsx("p",{children:n("noCountryContacts")})]}):l.jsx("div",{style:{display:"grid",gap:"1rem"},children:r.map(v=>{var S,j;const m=((S=v.countryCode)==null?void 0:S.toUpperCase())===(h==null?void 0:h.toUpperCase()),_=((j=v.countryCode)==null?void 0:j.toUpperCase())==="GENERAL"&&!r.some(I=>{var xe;return((xe=I.countryCode)==null?void 0:xe.toUpperCase())===(h==null?void 0:h.toUpperCase())}),x=m||_;return l.jsxs("div",{style:{background:v.isDefault?"linear-gradient(135deg, rgba(212,133,106,0.1), rgba(248,232,224,0.5))":"white",border:v.isDefault?"2px solid var(--terracotta)":x?"2px solid var(--sage)":"1px solid var(--blush)",borderRadius:"12px",padding:"1rem 1.5rem",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"1rem"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flex:1},children:[l.jsx("div",{style:{width:"45px",height:"45px",borderRadius:"50%",background:v.isDefault?"var(--terracotta)":x?"var(--sage)":"var(--blush)",color:v.isDefault||x?"white":"var(--chocolate)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"0.8rem"},children:v.countryCode==="GENERAL"?l.jsx(Ci,{size:20}):v.countryCode}),l.jsxs("div",{style:{flex:1},children:[l.jsxs("div",{style:{fontWeight:600,color:"var(--espresso)",display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[v.country,v.isDefault&&l.jsx("span",{style:{background:"var(--terracotta)",color:"white",fontSize:"0.7rem",padding:"0.2rem 0.5rem",borderRadius:"20px",fontWeight:500},children:n("defaultContact")}),x&&!v.isDefault&&l.jsxs("span",{style:{background:"var(--sage)",color:"white",fontSize:"0.7rem",padding:"0.2rem 0.5rem",borderRadius:"20px",fontWeight:500,display:"flex",alignItems:"center",gap:"0.25rem"},children:[l.jsx(ng,{size:10})," ",n("yourLocation")||"Your Location"]})]}),l.jsxs("div",{style:{display:"flex",gap:"1.5rem",marginTop:"0.25rem",fontSize:"0.9rem",color:"var(--chocolate)",opacity:.8},children:[l.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.35rem"},children:[l.jsx(tg,{size:14})," ",v.email]}),l.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.35rem"},children:[l.jsx(rg,{size:14})," ",v.phone]})]})]})]}),l.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[l.jsx("button",{onClick:()=>!v.isDefault&&D(v),title:v.isDefault?n("defaultContact"):n("setAsDefault"),style:{background:"none",border:"none",cursor:v.isDefault?"default":"pointer",padding:"0.5rem",color:v.isDefault?"#F5A623":"var(--rose)",transition:"all 0.2s"},children:l.jsx(c_,{size:20,fill:v.isDefault?"#F5A623":"none"})}),l.jsx("button",{onClick:()=>k(v),title:n("edit"),style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",color:"var(--chocolate)"},children:l.jsx(bh,{size:18})}),l.jsx("button",{onClick:()=>b(v),title:n("delete"),style:{background:"none",border:"none",cursor:v.isDefault?"not-allowed":"pointer",padding:"0.5rem",color:v.isDefault?"var(--rose)":"#DC3545",opacity:v.isDefault?.4:1},disabled:v.isDefault,children:l.jsx(zi,{size:18})})]})]},v.id)})})]})},mC=({onNavigate:t,ingredients:e,setIngredients:n,products:r,setProducts:i,orders:s,setOrders:o,formatCurrency:u,settings:c,setSettings:h,currentCurrency:p,onResetData:y,userCountry:g})=>{var Ct,_t;const{isAdmin:E,invites:A,users:R,createInvite:P,deleteInvite:T,deleteUser:k,user:C,role:b}=Qr(),{t:D}=Ke(),[F,v]=B.useState("dashboard"),[m,_]=B.useState({email:"",role:"dealer",days:7}),[x,S]=B.useState(""),[j,I]=B.useState([]),xe=p!=null&&p.symbol&&p.symbol.trim()?p.symbol:(p==null?void 0:p.code)||"USD",vt=H=>`${xe} ${Number(H).toFixed(2)}`,Ut=async H=>{const he={...c,contactInfo:{...c.contactInfo,email:H.email,phone:H.phone}};h(he);try{await se.updateSettings(he)}catch(_r){console.error("Failed to save contact settings:",_r)}};B.useEffect(()=>{F==="messages"&&se.getMessages().then(I).catch(H=>console.error("Failed to load messages:",H))},[F]);const Me=Array.isArray(s)?s:[],U=Array.isArray(r)?r:[],X=Array.isArray(e)?e:[];if(!(()=>{if(E||C&&b==="admin")return!0;try{const H=localStorage.getItem("soulmate_user");if(H){const he=JSON.parse(H);return he&&he.role==="admin"}}catch(H){console.error("Error checking admin status:",H)}return!1})())return l.jsx("div",{className:"page",children:l.jsxs("div",{className:"success-msg",children:[l.jsx("div",{className:"success-icon",children:""}),l.jsx("h2",{children:D("accessDenied")}),l.jsxs("p",{children:[D("adminOnly")," ",D("pleaseLoginWithAdmin")]}),l.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"var(--blush)",borderRadius:"12px",textAlign:"left",maxWidth:"400px",margin:"1.5rem auto"},children:[l.jsxs("p",{style:{fontSize:"0.9rem",marginBottom:"0.5rem",fontWeight:600},children:[D("adminCredentials"),":"]}),l.jsxs("p",{style:{fontSize:"0.85rem",fontFamily:"monospace"},children:[D("email"),": admin@soulmate.com",l.jsx("br",{}),D("password"),": Admin@2024!"]})]}),l.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[l.jsx("button",{className:"btn btn-primary",onClick:()=>t("login"),children:D("goToLogin")}),l.jsx("button",{className:"btn btn-secondary",onClick:()=>t("home"),children:D("backToHome")})]})]})});const me=H=>{H.preventDefault();const he=P(m.email,m.role,parseInt(m.days));he.success&&(S(`${D("createdToken")} ${he.invite.token}`),_({email:"",role:"dealer",days:7}),setTimeout(()=>S(""),5e3))},we=H=>H.used?"used":new Date(H.expiresAt)<new Date?"expired":"active";return l.jsxs("div",{className:"page",style:{maxWidth:"1200px"},children:[l.jsx("div",{className:"page-header",children:l.jsx("h1",{children:D("adminDashboard")})}),l.jsxs("div",{className:"tabs",children:[l.jsx("button",{className:`tab ${F==="dashboard"?"active":""}`,onClick:()=>v("dashboard"),children:D("overview")}),l.jsx("button",{className:`tab ${F==="orders"?"active":""}`,onClick:()=>v("orders"),children:D("orders")}),l.jsx("button",{className:`tab ${F==="products"?"active":""}`,onClick:()=>v("products"),children:D("products")}),l.jsx("button",{className:`tab ${F==="ingredients"?"active":""}`,onClick:()=>v("ingredients"),children:D("ingredients")}),l.jsx("button",{className:`tab ${F==="invites"?"active":""}`,onClick:()=>v("invites"),children:D("invites")}),l.jsx("button",{className:`tab ${F==="users"?"active":""}`,onClick:()=>v("users"),children:D("users")}),l.jsx("button",{className:`tab ${F==="messages"?"active":""}`,onClick:()=>v("messages"),children:D("messages")}),l.jsx("button",{className:`tab ${F==="settings"?"active":""}`,onClick:()=>v("settings"),children:D("settings")})]}),F==="dashboard"&&l.jsxs("div",{className:"admin-tab-content",children:[l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3,1fr)",gap:"1.5rem",marginBottom:"2rem"},children:[l.jsxs("div",{className:"form-card",style:{textAlign:"center",padding:"2rem"},children:[l.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.5rem"},children:""}),l.jsx("div",{style:{fontSize:"2rem",fontWeight:"600",color:"var(--terracotta)"},children:Me.filter(H=>H.status==="Pending").length}),l.jsx("div",{style:{color:"var(--chocolate)",opacity:.7},children:D("pendingOrders")})]}),l.jsxs("div",{className:"form-card",style:{textAlign:"center",padding:"2rem"},children:[l.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.5rem"},children:""}),l.jsx("div",{style:{fontSize:"2rem",fontWeight:"600",color:"var(--terracotta)"},children:Array.isArray(R)?R.length:0}),l.jsx("div",{style:{color:"var(--chocolate)",opacity:.7},children:D("registeredUsers")})]}),l.jsxs("div",{className:"form-card",style:{textAlign:"center",padding:"2rem"},children:[l.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.5rem"},children:""}),l.jsx("div",{style:{fontSize:"2rem",fontWeight:"600",color:"var(--terracotta)"},children:vt(Me.filter(H=>H.status!=="Cancelled").reduce((H,he)=>H+(he.total||0),0))}),l.jsx("div",{style:{color:"var(--chocolate)",opacity:.7},children:D("totalRevenue")})]})]}),l.jsxs("div",{className:"form-card",children:[l.jsx("h3",{style:{fontFamily:"'Playfair Display',serif",marginBottom:"1.5rem"},children:D("recentOrders")}),Me.length===0?l.jsx("p",{style:{color:"var(--chocolate)",opacity:.7},children:D("noOrdersYet")}):Me.slice(0,5).map(H=>l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",background:"var(--blush)",borderRadius:"12px",marginBottom:"0.75rem"},children:[l.jsxs("div",{children:[l.jsx("strong",{children:H.id}),"  ",H.customerName,l.jsx("div",{style:{fontSize:"0.9rem",color:"var(--chocolate)",opacity:.7},children:H.items.map(he=>`${he.name} ${he.quantity}`).join(", ")})]}),l.jsxs("div",{style:{textAlign:"right"},children:[l.jsx("div",{style:{fontWeight:"600",color:"var(--terracotta)"},children:vt(H.total)}),l.jsx("div",{style:{fontSize:"0.8rem",padding:"0.25rem 0.75rem",background:H.status==="Pending"?"#FFF3CD":H.status==="Ready"?"#D4EDDA":H.status==="Cancelled"?"#F8D7DA":"#D1ECF1",borderRadius:"50px",display:"inline-block",marginTop:"0.25rem"},children:D(H.status==="Pending"?"pending":H.status==="Ready"?"ready":H.status==="Cancelled"?"cancelled":H.status==="In Progress"?"inProgress":H.status==="Completed"?"completed":H.status)})]})]},H.id))]})]}),F==="invites"&&l.jsx("div",{className:"admin-tab-content",children:l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"form-card",style:{marginBottom:"2rem"},children:[l.jsx("h3",{style:{fontFamily:"'Playfair Display',serif",marginBottom:"1.5rem"},children:D("createNewInvite")}),l.jsxs("form",{onSubmit:me,children:[l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:D("emailOptional")}),l.jsx("input",{type:"email",value:m.email,onChange:H=>_({...m,email:H.target.value}),placeholder:D("leaveBlankForAnyEmail")})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[D("role")," *"]}),l.jsxs("select",{value:m.role,onChange:H=>_({...m,role:H.target.value}),children:[l.jsx("option",{value:"dealer",children:D("dealer")}),l.jsx("option",{value:"public",children:D("regularUser")})]})]})]}),l.jsxs("div",{className:"form-group",style:{maxWidth:"200px"},children:[l.jsx("label",{children:D("expiresInDays")}),l.jsx("input",{type:"number",value:m.days,onChange:H=>_({...m,days:H.target.value}),min:"1",max:"90"})]}),x&&l.jsx("p",{className:"form-success",children:x}),l.jsx("button",{type:"submit",className:"form-submit",style:{width:"auto",padding:"0.8rem 2rem"},children:D("createInvite")})]})]}),l.jsxs("div",{className:"form-card",children:[l.jsx("h3",{style:{fontFamily:"'Playfair Display',serif",marginBottom:"1.5rem"},children:D("allInvites")}),A.length===0?l.jsx("p",{style:{color:"var(--chocolate)",opacity:.7},children:D("noInvitesYet")}):l.jsxs("table",{className:"admin-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:D("token")}),l.jsx("th",{children:D("email")}),l.jsx("th",{children:D("role")}),l.jsx("th",{children:D("status")}),l.jsx("th",{children:D("expires")}),l.jsx("th",{children:D("actions")})]})}),l.jsx("tbody",{children:A.map(H=>{const he=we(H);return l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("span",{className:"token",children:H.token})}),l.jsx("td",{children:H.email||l.jsx("em",{style:{opacity:.5},children:D("any")})}),l.jsx("td",{style:{textTransform:"capitalize"},children:H.role==="dealer"?D("dealer"):D("regularUser")}),l.jsx("td",{children:l.jsx("span",{className:`status ${he}`,children:D(he)})}),l.jsx("td",{children:new Date(H.expiresAt).toLocaleDateString()}),l.jsx("td",{children:he==="active"&&l.jsx("button",{onClick:()=>T(H.id),title:D("delete"),style:{background:"none",border:"none",cursor:"pointer",padding:"4px"},children:l.jsx(zi,{size:18,color:"#DC3545"})})})]},H.id)})})]})]})]})}),F==="messages"&&l.jsx("div",{className:"admin-tab-content",children:l.jsxs("div",{className:"form-card",children:[l.jsx("h3",{style:{fontFamily:"'Playfair Display',serif",marginBottom:"1.5rem"},children:D("messages")}),j.length===0?l.jsx("p",{style:{color:"var(--chocolate)",opacity:.7},children:D("noMessagesYet")}):l.jsxs("table",{className:"admin-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:D("date")}),l.jsx("th",{children:D("sender")}),l.jsx("th",{children:D("phone")}),l.jsx("th",{children:D("message")}),l.jsx("th",{children:D("actions")})]})}),l.jsx("tbody",{children:j.map(H=>l.jsxs("tr",{children:[l.jsxs("td",{style:{whiteSpace:"nowrap",fontSize:"0.9rem"},children:[new Date(H.date).toLocaleDateString()," ",new Date(H.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),l.jsxs("td",{children:[l.jsx("div",{style:{fontWeight:600},children:H.name}),l.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:H.email})]}),l.jsx("td",{children:H.phone}),l.jsx("td",{style:{maxWidth:"300px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:H.message,children:H.message}),l.jsx("td",{children:l.jsx("button",{onClick:()=>{window.confirm(D("confirmDelete")||"Are you sure?")&&se.deleteMessage(H.id).then(()=>{I(he=>he.filter(_r=>_r.id!==H.id))}).catch(he=>console.error("Failed to delete message",he))},title:D("delete"),style:{background:"none",border:"none",cursor:"pointer",padding:"4px"},children:l.jsx(zi,{size:18,color:"#DC3545"})})})]},H.id))})]})]})}),F==="orders"&&l.jsx("div",{className:"admin-tab-content",children:l.jsx(hC,{orders:Me,setOrders:o,formatCurrency:u})}),F==="products"&&l.jsx("div",{className:"admin-tab-content",children:l.jsx(cC,{products:U,setProducts:i,ingredients:X,formatCurrency:u,currentCurrency:p})}),F==="ingredients"&&l.jsx("div",{className:"admin-tab-content",children:l.jsx(dC,{ingredients:X,setIngredients:n,products:U,currentCurrency:p})}),F==="users"&&l.jsx("div",{className:"admin-tab-content",children:l.jsxs("div",{className:"form-card",children:[l.jsx("h3",{style:{fontFamily:"'Playfair Display',serif",marginBottom:"1.5rem"},children:D("registeredUsers")}),!R||R.length===0?l.jsx("p",{style:{color:"var(--chocolate)",opacity:.7},children:D("noUsersYet")}):l.jsxs("table",{className:"admin-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:D("name")}),l.jsx("th",{children:D("email")}),l.jsx("th",{children:D("phone")}),l.jsx("th",{children:D("role")}),l.jsx("th",{children:D("registered")}),l.jsx("th",{children:D("actions")})]})}),l.jsx("tbody",{children:R.map(H=>l.jsxs("tr",{children:[l.jsx("td",{children:H.name}),l.jsx("td",{children:H.email}),l.jsx("td",{children:H.phone||"-"}),l.jsx("td",{children:l.jsx("span",{className:`status ${H.role==="dealer"?"active":""}`,style:{background:H.role==="dealer"?"#D4EDDA":"#E2E3E5"},children:H.role==="dealer"?D("dealer"):D("regularUser")})}),l.jsx("td",{children:new Date(H.createdAt).toLocaleDateString()}),l.jsx("td",{children:l.jsx("button",{className:"btn btn-small btn-danger",onClick:()=>k(H.id),children:D("remove")})})]},H.id))})]})]})}),F==="settings"&&l.jsx("div",{className:"admin-tab-content",children:l.jsxs("div",{className:"form-card",children:[l.jsx("h3",{style:{fontFamily:"'Playfair Display',serif",marginBottom:"1.5rem"},children:D("adminGeneralSettings")}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:D("contactEmail")}),l.jsx("input",{type:"email",value:((Ct=c==null?void 0:c.contactInfo)==null?void 0:Ct.email)||"",onChange:H=>h({...c,contactInfo:{...c.contactInfo,email:H.target.value}}),placeholder:"hello@soulmatedesserts.com",readOnly:!0,style:{background:"var(--blush)",cursor:"not-allowed",opacity:.8},title:"Synced from default country contact"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:D("contactPhone")}),l.jsx("input",{type:"text",value:((_t=c==null?void 0:c.contactInfo)==null?void 0:_t.phone)||"",onChange:H=>h({...c,contactInfo:{...c.contactInfo,phone:H.target.value}}),placeholder:"(512) 555-CAKE",readOnly:!0,style:{background:"var(--blush)",cursor:"not-allowed",opacity:.8},title:"Synced from default country contact"})]})]}),l.jsxs("p",{style:{color:"var(--chocolate)",opacity:.7,fontSize:"0.9rem",marginBottom:"2rem"},children:[D("footerSettingsDescription")," ",l.jsxs("span",{style:{fontStyle:"italic"},children:["(",D("defaultContact")," )"]})]}),l.jsx(fC,{onDefaultChange:Ut,userCountry:g}),l.jsxs("div",{style:{paddingTop:"2rem",borderTop:"2px solid var(--blush)",marginTop:"2rem"},children:[l.jsx("h4",{style:{fontFamily:"'Playfair Display',serif",marginBottom:"1rem",color:"var(--espresso)"},children:D("dataManagement")}),l.jsx("button",{className:"btn btn-danger",onClick:y,children:D("resetData")})]})]})})]})};function pC(){const[t,e]=B.useState("home"),[n,r]=B.useState(!0),[i,s]=B.useState(null),o=m=>{m&&typeof m=="string"&&(e(m),window.scrollTo(0,0))},[u,c]=B.useState([]),[h,p]=B.useState([]),[y,g]=B.useState([]),[E,A]=B.useState({language:"en",currency:"USD",currencies:[{code:"TMT",name:"Turkmen Manat",symbol:"TMT",rate:3.5},{code:"USD",name:"US Dollar",symbol:"$",rate:1}],contactInfo:{phone:"(512) 555-CAKE",email:"hello@soulmatedesserts.com"}}),R=async()=>{r(!0);try{const m=await Promise.allSettled([se.getProducts(),se.getIngredients(),se.getOrders(),se.getSettings()]),[_,x,S,j]=m;if(_.status==="fulfilled"?c(_.value):console.error("Failed to load products:",_.reason),x.status==="fulfilled"?p(x.value):console.error("Failed to load ingredients:",x.reason),S.status==="fulfilled"?g(S.value):console.error("Failed to load orders:",S.reason),j.status==="fulfilled"){const I=j.value;I&&I.currencies&&A(I)}else console.error("Failed to load settings:",j.reason)}catch(m){console.error("Unexpected error in fetchData:",m)}finally{r(!1)}};B.useEffect(()=>{R(),(async()=>{try{const _=await se.getCountryFromIP();s(_.countryCode)}catch(_){console.error("Failed to detect country:",_),s("GENERAL")}})()},[]);const P=(m,_)=>{c(x=>x.map(j=>j.id===m?{...j,..._}:j))},T=m=>{const _=E.currencies.find(x=>x.code===E.currency);return!_||E.currency==="USD"?Number(m):Number(m)*_.rate},k=m=>{const _=E.currencies.find(j=>j.code===E.currency)||E.currencies[0],x=T(m);return`${_!=null&&_.symbol&&_.symbol.trim()?_.symbol:(_==null?void 0:_.code)||"USD"} ${Number(x).toFixed(2)}`},C=async m=>{const _=E.currencies.find(S=>S.rate===1)||E.currencies.find(S=>S.code==="USD")||E.currencies[0],x=E.currencies.find(S=>S.code===m);if(!(!x||x.code===_.code)){r(!0);try{const S=x.rate,j=E.currencies.map(U=>({...U,rate:parseFloat((U.rate/S).toFixed(6))})),I={...E,currencies:j,currency:m,store:E.store?{...E.store,shipping:parseFloat((E.store.shipping*S).toFixed(2))}:E.store},xe=u.map(U=>({...U,price:parseFloat((U.price*S).toFixed(2)),makingPrice:U.makingPrice?parseFloat((U.makingPrice*S).toFixed(2)):0})),vt=h.map(U=>({...U,pricePerUnit:parseFloat((U.pricePerUnit*S).toFixed(2))}));await se.updateSettings(I);const Ut=xe.filter(U=>U.id),Me=vt.filter(U=>U.id);(Ut.length>0||Me.length>0)&&await Promise.allSettled([...Ut.map(U=>se.updateProduct(U.id,U)),...Me.map(U=>se.updateIngredient(U.id,U))]),A(I),c(xe),p(vt)}catch(S){console.error("Failed to rotate base currency:",S),console.log("Failed to update base currency. Please try again.")}finally{r(!1)}}},b=async m=>{try{const _={id:`#${Date.now()}`,...m,status:"Pending",createdAt:new Date().toISOString()};await se.createOrder(_),g(x=>[_,...x]),o("home"),console.log(`Order Placed Successfully! Order ID: ${_.id}`)}catch(_){console.log("Failed to place order"),console.error(_)}},D=()=>{console.log("Reset not fully supported in DB mode. Please edit db.json directly.")},F=E.currencies.find(m=>m.code===E.currency)||E.currencies[0],v=()=>{const m=t||"home",_={onNavigate:o,formatCurrency:k,settings:E};switch(m){case"home":return l.jsx(ig,{..._,products:u,ingredients:h,onUpdateProduct:P,userCountry:i});case"catalog":return l.jsx(iC,{..._,products:u,ingredients:h,onUpdateProduct:P,userCountry:i});case"checkout":return l.jsx(sC,{..._,onCreateOrder:b});case"contact":return l.jsx(oC,{..._});case"login":return l.jsx(aC,{..._});case"settings":return l.jsx(lC,{..._,settings:E,setSettings:A,onBaseCurrencyChange:C});case"admin":return l.jsx(mC,{..._,ingredients:h,setIngredients:p,products:u,setProducts:c,orders:y,setOrders:g,settings:E,setSettings:A,currentCurrency:F,onResetData:D,refreshData:R,userCountry:i});default:return l.jsx(ig,{..._,products:u,ingredients:h,onUpdateProduct:P})}};return l.jsx(gI,{children:l.jsx(yI,{children:l.jsx(_I,{language:(E==null?void 0:E.language)||"en",children:l.jsxs("div",{className:"app",children:[l.jsx(eC,{onNavigate:o,products:u,formatCurrency:k}),l.jsx("div",{className:"page-container",children:v()},t),l.jsx(nC,{onNavigate:o,formatCurrency:k,settings:E}),l.jsx(tC,{onNavigate:o,contactInfo:E==null?void 0:E.contactInfo})]})})})})}Wu.createRoot(document.getElementById("root")).render(l.jsx(t1.StrictMode,{children:l.jsx(pC,{})}));
