(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function q_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ag={exports:{}},kl={},lg={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vo=Symbol.for("react.element"),W_=Symbol.for("react.portal"),G_=Symbol.for("react.fragment"),K_=Symbol.for("react.strict_mode"),Q_=Symbol.for("react.profiler"),Y_=Symbol.for("react.provider"),X_=Symbol.for("react.context"),J_=Symbol.for("react.forward_ref"),Z_=Symbol.for("react.suspense"),e1=Symbol.for("react.memo"),t1=Symbol.for("react.lazy"),Df=Symbol.iterator;function n1(t){return t===null||typeof t!="object"?null:(t=Df&&t[Df]||t["@@iterator"],typeof t=="function"?t:null)}var ug={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cg=Object.assign,dg={};function $i(t,e,n){this.props=t,this.context=e,this.refs=dg,this.updater=n||ug}$i.prototype.isReactComponent={};$i.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};$i.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function hg(){}hg.prototype=$i.prototype;function cd(t,e,n){this.props=t,this.context=e,this.refs=dg,this.updater=n||ug}var dd=cd.prototype=new hg;dd.constructor=cd;cg(dd,$i.prototype);dd.isPureReactComponent=!0;var Vf=Array.isArray,fg=Object.prototype.hasOwnProperty,hd={current:null},mg={key:!0,ref:!0,__self:!0,__source:!0};function pg(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)fg.call(e,r)&&!mg.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){for(var c=Array(u),h=0;h<u;h++)c[h]=arguments[h+2];i.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)i[r]===void 0&&(i[r]=u[r]);return{$$typeof:vo,type:t,key:s,ref:o,props:i,_owner:hd.current}}function r1(t,e){return{$$typeof:vo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function fd(t){return typeof t=="object"&&t!==null&&t.$$typeof===vo}function i1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ff=/\/+/g;function gu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?i1(""+t.key):e.toString(36)}function ya(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case vo:case W_:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+gu(o,0):r,Vf(i)?(n="",t!=null&&(n=t.replace(Ff,"$&/")+"/"),ya(i,e,n,"",function(h){return h})):i!=null&&(fd(i)&&(i=r1(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Ff,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Vf(t))for(var u=0;u<t.length;u++){s=t[u];var c=r+gu(s,u);o+=ya(s,e,n,c,i)}else if(c=n1(t),typeof c=="function")for(t=c.call(t),u=0;!(s=t.next()).done;)s=s.value,c=r+gu(s,u++),o+=ya(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function qo(t,e,n){if(t==null)return t;var r=[],i=0;return ya(t,r,"","",function(s){return e.call(n,s,i++)}),r}function s1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var It={current:null},va={transition:null},o1={ReactCurrentDispatcher:It,ReactCurrentBatchConfig:va,ReactCurrentOwner:hd};function gg(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:qo,forEach:function(t,e,n){qo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return qo(t,function(){e++}),e},toArray:function(t){return qo(t,function(e){return e})||[]},only:function(t){if(!fd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};de.Component=$i;de.Fragment=G_;de.Profiler=Q_;de.PureComponent=cd;de.StrictMode=K_;de.Suspense=Z_;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o1;de.act=gg;de.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=cg({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=hd.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)fg.call(e,c)&&!mg.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];r.children=u}return{$$typeof:vo,type:t.type,key:i,ref:s,props:r,_owner:o}};de.createContext=function(t){return t={$$typeof:X_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Y_,_context:t},t.Consumer=t};de.createElement=pg;de.createFactory=function(t){var e=pg.bind(null,t);return e.type=t,e};de.createRef=function(){return{current:null}};de.forwardRef=function(t){return{$$typeof:J_,render:t}};de.isValidElement=fd;de.lazy=function(t){return{$$typeof:t1,_payload:{_status:-1,_result:t},_init:s1}};de.memo=function(t,e){return{$$typeof:e1,type:t,compare:e===void 0?null:e}};de.startTransition=function(t){var e=va.transition;va.transition={};try{t()}finally{va.transition=e}};de.unstable_act=gg;de.useCallback=function(t,e){return It.current.useCallback(t,e)};de.useContext=function(t){return It.current.useContext(t)};de.useDebugValue=function(){};de.useDeferredValue=function(t){return It.current.useDeferredValue(t)};de.useEffect=function(t,e){return It.current.useEffect(t,e)};de.useId=function(){return It.current.useId()};de.useImperativeHandle=function(t,e,n){return It.current.useImperativeHandle(t,e,n)};de.useInsertionEffect=function(t,e){return It.current.useInsertionEffect(t,e)};de.useLayoutEffect=function(t,e){return It.current.useLayoutEffect(t,e)};de.useMemo=function(t,e){return It.current.useMemo(t,e)};de.useReducer=function(t,e,n){return It.current.useReducer(t,e,n)};de.useRef=function(t){return It.current.useRef(t)};de.useState=function(t){return It.current.useState(t)};de.useSyncExternalStore=function(t,e,n){return It.current.useSyncExternalStore(t,e,n)};de.useTransition=function(){return It.current.useTransition()};de.version="18.3.1";lg.exports=de;var B=lg.exports;const a1=q_(B);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l1=B,u1=Symbol.for("react.element"),c1=Symbol.for("react.fragment"),d1=Object.prototype.hasOwnProperty,h1=l1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f1={key:!0,ref:!0,__self:!0,__source:!0};function yg(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)d1.call(e,r)&&!f1.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:u1,type:t,key:s,ref:o,props:i,_owner:h1.current}}kl.Fragment=c1;kl.jsx=yg;kl.jsxs=yg;ag.exports=kl;var l=ag.exports,Yu={},vg={exports:{}},zt={},_g={exports:{}},xg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,J){var se=U.length;U.push(J);e:for(;0<se;){var we=se-1>>>1,ve=U[we];if(0<i(ve,J))U[we]=J,U[se]=ve,se=we;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var J=U[0],se=U.pop();if(se!==J){U[0]=se;e:for(var we=0,ve=U.length,Se=ve>>>1;we<Se;){var At=2*(we+1)-1,xt=U[At],q=At+1,ge=U[q];if(0>i(xt,se))q<ve&&0>i(ge,xt)?(U[we]=ge,U[q]=se,we=q):(U[we]=xt,U[At]=se,we=At);else if(q<ve&&0>i(ge,se))U[we]=ge,U[q]=se,we=q;else break e}}return J}function i(U,J){var se=U.sortIndex-J.sortIndex;return se!==0?se:U.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var c=[],h=[],m=1,y=null,g=3,w=!1,A=!1,P=!1,j=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(U){for(var J=n(h);J!==null;){if(J.callback===null)r(h);else if(J.startTime<=U)r(h),J.sortIndex=J.expirationTime,e(c,J);else break;J=n(h)}}function b(U){if(P=!1,T(U),!A)if(n(c)!==null)A=!0,fe(D);else{var J=n(h);J!==null&&ue(b,J.startTime-U)}}function D(U,J){A=!1,P&&(P=!1,k(p),p=-1),w=!0;var se=g;try{for(T(J),y=n(c);y!==null&&(!(y.expirationTime>J)||U&&!I());){var we=y.callback;if(typeof we=="function"){y.callback=null,g=y.priorityLevel;var ve=we(y.expirationTime<=J);J=t.unstable_now(),typeof ve=="function"?y.callback=ve:y===n(c)&&r(c),T(J)}else r(c);y=n(c)}if(y!==null)var Se=!0;else{var At=n(h);At!==null&&ue(b,At.startTime-J),Se=!1}return Se}finally{y=null,g=se,w=!1}}var F=!1,v=null,p=-1,_=5,S=-1;function I(){return!(t.unstable_now()-S<_)}function R(){if(v!==null){var U=t.unstable_now();S=U;var J=!0;try{J=v(!0,U)}finally{J?C():(F=!1,v=null)}}else F=!1}var C;if(typeof E=="function")C=function(){E(R)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,ie=H.port2;H.port1.onmessage=R,C=function(){ie.postMessage(null)}}else C=function(){j(R,0)};function fe(U){v=U,F||(F=!0,C())}function ue(U,J){p=j(function(){U(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){A||w||(A=!0,fe(D))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(U){switch(g){case 1:case 2:case 3:var J=3;break;default:J=g}var se=g;g=J;try{return U()}finally{g=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,J){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var se=g;g=U;try{return J()}finally{g=se}},t.unstable_scheduleCallback=function(U,J,se){var we=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?we+se:we):se=we,U){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=se+ve,U={id:m++,callback:J,priorityLevel:U,startTime:se,expirationTime:ve,sortIndex:-1},se>we?(U.sortIndex=se,e(h,U),n(c)===null&&U===n(h)&&(P?(k(p),p=-1):P=!0,ue(b,se-we))):(U.sortIndex=ve,e(c,U),A||w||(A=!0,fe(D))),U},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(U){var J=g;return function(){var se=g;g=J;try{return U.apply(this,arguments)}finally{g=se}}}})(xg);_g.exports=xg;var m1=_g.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p1=B,Lt=m1;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wg=new Set,Hs={};function qr(t,e){ji(t,e),ji(t+"Capture",e)}function ji(t,e){for(Hs[t]=e,t=0;t<e.length;t++)wg.add(e[t])}var Pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xu=Object.prototype.hasOwnProperty,g1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mf={},Of={};function y1(t){return Xu.call(Of,t)?!0:Xu.call(Mf,t)?!1:g1.test(t)?Of[t]=!0:(Mf[t]=!0,!1)}function v1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function _1(t,e,n,r){if(e===null||typeof e>"u"||v1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ct(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){lt[t]=new Ct(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];lt[e]=new Ct(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){lt[t]=new Ct(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){lt[t]=new Ct(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){lt[t]=new Ct(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){lt[t]=new Ct(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){lt[t]=new Ct(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){lt[t]=new Ct(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){lt[t]=new Ct(t,5,!1,t.toLowerCase(),null,!1,!1)});var md=/[\-:]([a-z])/g;function pd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(md,pd);lt[e]=new Ct(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(md,pd);lt[e]=new Ct(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(md,pd);lt[e]=new Ct(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){lt[t]=new Ct(t,1,!1,t.toLowerCase(),null,!1,!1)});lt.xlinkHref=new Ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){lt[t]=new Ct(t,1,!1,t.toLowerCase(),null,!0,!0)});function gd(t,e,n,r){var i=lt.hasOwnProperty(e)?lt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_1(e,n,i,r)&&(n=null),r||i===null?y1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Fn=p1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wo=Symbol.for("react.element"),ai=Symbol.for("react.portal"),li=Symbol.for("react.fragment"),yd=Symbol.for("react.strict_mode"),Ju=Symbol.for("react.profiler"),Eg=Symbol.for("react.provider"),kg=Symbol.for("react.context"),vd=Symbol.for("react.forward_ref"),Zu=Symbol.for("react.suspense"),ec=Symbol.for("react.suspense_list"),_d=Symbol.for("react.memo"),Un=Symbol.for("react.lazy"),Sg=Symbol.for("react.offscreen"),Lf=Symbol.iterator;function hs(t){return t===null||typeof t!="object"?null:(t=Lf&&t[Lf]||t["@@iterator"],typeof t=="function"?t:null)}var De=Object.assign,yu;function Es(t){if(yu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);yu=e&&e[1]||""}return`
`+yu+t}var vu=!1;function _u(t,e){if(!t||vu)return"";vu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,u=s.length-1;1<=o&&0<=u&&i[o]!==s[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==s[u]){if(o!==1||u!==1)do if(o--,u--,0>u||i[o]!==s[u]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=u);break}}}finally{vu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Es(t):""}function x1(t){switch(t.tag){case 5:return Es(t.type);case 16:return Es("Lazy");case 13:return Es("Suspense");case 19:return Es("SuspenseList");case 0:case 2:case 15:return t=_u(t.type,!1),t;case 11:return t=_u(t.type.render,!1),t;case 1:return t=_u(t.type,!0),t;default:return""}}function tc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case li:return"Fragment";case ai:return"Portal";case Ju:return"Profiler";case yd:return"StrictMode";case Zu:return"Suspense";case ec:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case kg:return(t.displayName||"Context")+".Consumer";case Eg:return(t._context.displayName||"Context")+".Provider";case vd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _d:return e=t.displayName||null,e!==null?e:tc(t.type)||"Memo";case Un:e=t._payload,t=t._init;try{return tc(t(e))}catch{}}return null}function w1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tc(e);case 8:return e===yd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function lr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Tg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function E1(t){var e=Tg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Go(t){t._valueTracker||(t._valueTracker=E1(t))}function Ig(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Tg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ma(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function nc(t,e){var n=e.checked;return De({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function zf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=lr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Cg(t,e){e=e.checked,e!=null&&gd(t,"checked",e,!1)}function rc(t,e){Cg(t,e);var n=lr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ic(t,e.type,n):e.hasOwnProperty("defaultValue")&&ic(t,e.type,lr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Uf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ic(t,e,n){(e!=="number"||Ma(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ks=Array.isArray;function _i(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+lr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function sc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return De({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Bf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(ks(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:lr(n)}}function Ag(t,e){var n=lr(e.value),r=lr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function $f(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Pg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Pg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ko,jg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ko=Ko||document.createElement("div"),Ko.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ko.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function qs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var js={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},k1=["Webkit","ms","Moz","O"];Object.keys(js).forEach(function(t){k1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),js[e]=js[t]})});function Rg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||js.hasOwnProperty(t)&&js[t]?(""+e).trim():e+"px"}function Ng(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Rg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var S1=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ac(t,e){if(e){if(S1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function lc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uc=null;function xd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var cc=null,xi=null,wi=null;function Hf(t){if(t=wo(t)){if(typeof cc!="function")throw Error($(280));var e=t.stateNode;e&&(e=Al(e),cc(t.stateNode,t.type,e))}}function bg(t){xi?wi?wi.push(t):wi=[t]:xi=t}function Dg(){if(xi){var t=xi,e=wi;if(wi=xi=null,Hf(t),e)for(t=0;t<e.length;t++)Hf(e[t])}}function Vg(t,e){return t(e)}function Fg(){}var xu=!1;function Mg(t,e,n){if(xu)return t(e,n);xu=!0;try{return Vg(t,e,n)}finally{xu=!1,(xi!==null||wi!==null)&&(Fg(),Dg())}}function Ws(t,e){var n=t.stateNode;if(n===null)return null;var r=Al(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var dc=!1;if(Pn)try{var fs={};Object.defineProperty(fs,"passive",{get:function(){dc=!0}}),window.addEventListener("test",fs,fs),window.removeEventListener("test",fs,fs)}catch{dc=!1}function T1(t,e,n,r,i,s,o,u,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(m){this.onError(m)}}var Rs=!1,Oa=null,La=!1,hc=null,I1={onError:function(t){Rs=!0,Oa=t}};function C1(t,e,n,r,i,s,o,u,c){Rs=!1,Oa=null,T1.apply(I1,arguments)}function A1(t,e,n,r,i,s,o,u,c){if(C1.apply(this,arguments),Rs){if(Rs){var h=Oa;Rs=!1,Oa=null}else throw Error($(198));La||(La=!0,hc=h)}}function Wr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Og(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function qf(t){if(Wr(t)!==t)throw Error($(188))}function P1(t){var e=t.alternate;if(!e){if(e=Wr(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return qf(i),t;if(s===r)return qf(i),e;s=s.sibling}throw Error($(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,u=i.child;u;){if(u===n){o=!0,n=i,r=s;break}if(u===r){o=!0,r=i,n=s;break}u=u.sibling}if(!o){for(u=s.child;u;){if(u===n){o=!0,n=s,r=i;break}if(u===r){o=!0,r=s,n=i;break}u=u.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function Lg(t){return t=P1(t),t!==null?zg(t):null}function zg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=zg(t);if(e!==null)return e;t=t.sibling}return null}var Ug=Lt.unstable_scheduleCallback,Wf=Lt.unstable_cancelCallback,j1=Lt.unstable_shouldYield,R1=Lt.unstable_requestPaint,Le=Lt.unstable_now,N1=Lt.unstable_getCurrentPriorityLevel,wd=Lt.unstable_ImmediatePriority,Bg=Lt.unstable_UserBlockingPriority,za=Lt.unstable_NormalPriority,b1=Lt.unstable_LowPriority,$g=Lt.unstable_IdlePriority,Sl=null,mn=null;function D1(t){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(Sl,t,void 0,(t.current.flags&128)===128)}catch{}}var rn=Math.clz32?Math.clz32:M1,V1=Math.log,F1=Math.LN2;function M1(t){return t>>>=0,t===0?32:31-(V1(t)/F1|0)|0}var Qo=64,Yo=4194304;function Ss(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ua(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var u=o&~i;u!==0?r=Ss(u):(s&=o,s!==0&&(r=Ss(s)))}else o=n&~i,o!==0?r=Ss(o):s!==0&&(r=Ss(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-rn(e),i=1<<n,r|=t[n],e&=~i;return r}function O1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function L1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-rn(s),u=1<<o,c=i[o];c===-1?(!(u&n)||u&r)&&(i[o]=O1(u,e)):c<=e&&(t.expiredLanes|=u),s&=~u}}function fc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Hg(){var t=Qo;return Qo<<=1,!(Qo&4194240)&&(Qo=64),t}function wu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function _o(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-rn(e),t[e]=n}function z1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-rn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Ed(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-rn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ee=0;function qg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Wg,kd,Gg,Kg,Qg,mc=!1,Xo=[],Qn=null,Yn=null,Xn=null,Gs=new Map,Ks=new Map,$n=[],U1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gf(t,e){switch(t){case"focusin":case"focusout":Qn=null;break;case"dragenter":case"dragleave":Yn=null;break;case"mouseover":case"mouseout":Xn=null;break;case"pointerover":case"pointerout":Gs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ks.delete(e.pointerId)}}function ms(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=wo(e),e!==null&&kd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function B1(t,e,n,r,i){switch(e){case"focusin":return Qn=ms(Qn,t,e,n,r,i),!0;case"dragenter":return Yn=ms(Yn,t,e,n,r,i),!0;case"mouseover":return Xn=ms(Xn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Gs.set(s,ms(Gs.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ks.set(s,ms(Ks.get(s)||null,t,e,n,r,i)),!0}return!1}function Yg(t){var e=Pr(t.target);if(e!==null){var n=Wr(e);if(n!==null){if(e=n.tag,e===13){if(e=Og(n),e!==null){t.blockedOn=e,Qg(t.priority,function(){Gg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _a(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=pc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);uc=r,n.target.dispatchEvent(r),uc=null}else return e=wo(n),e!==null&&kd(e),t.blockedOn=n,!1;e.shift()}return!0}function Kf(t,e,n){_a(t)&&n.delete(e)}function $1(){mc=!1,Qn!==null&&_a(Qn)&&(Qn=null),Yn!==null&&_a(Yn)&&(Yn=null),Xn!==null&&_a(Xn)&&(Xn=null),Gs.forEach(Kf),Ks.forEach(Kf)}function ps(t,e){t.blockedOn===e&&(t.blockedOn=null,mc||(mc=!0,Lt.unstable_scheduleCallback(Lt.unstable_NormalPriority,$1)))}function Qs(t){function e(i){return ps(i,t)}if(0<Xo.length){ps(Xo[0],t);for(var n=1;n<Xo.length;n++){var r=Xo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Qn!==null&&ps(Qn,t),Yn!==null&&ps(Yn,t),Xn!==null&&ps(Xn,t),Gs.forEach(e),Ks.forEach(e),n=0;n<$n.length;n++)r=$n[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<$n.length&&(n=$n[0],n.blockedOn===null);)Yg(n),n.blockedOn===null&&$n.shift()}var Ei=Fn.ReactCurrentBatchConfig,Ba=!0;function H1(t,e,n,r){var i=Ee,s=Ei.transition;Ei.transition=null;try{Ee=1,Sd(t,e,n,r)}finally{Ee=i,Ei.transition=s}}function q1(t,e,n,r){var i=Ee,s=Ei.transition;Ei.transition=null;try{Ee=4,Sd(t,e,n,r)}finally{Ee=i,Ei.transition=s}}function Sd(t,e,n,r){if(Ba){var i=pc(t,e,n,r);if(i===null)Ru(t,e,r,$a,n),Gf(t,r);else if(B1(i,t,e,n,r))r.stopPropagation();else if(Gf(t,r),e&4&&-1<U1.indexOf(t)){for(;i!==null;){var s=wo(i);if(s!==null&&Wg(s),s=pc(t,e,n,r),s===null&&Ru(t,e,r,$a,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Ru(t,e,r,null,n)}}var $a=null;function pc(t,e,n,r){if($a=null,t=xd(r),t=Pr(t),t!==null)if(e=Wr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Og(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return $a=t,null}function Xg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(N1()){case wd:return 1;case Bg:return 4;case za:case b1:return 16;case $g:return 536870912;default:return 16}default:return 16}}var qn=null,Td=null,xa=null;function Jg(){if(xa)return xa;var t,e=Td,n=e.length,r,i="value"in qn?qn.value:qn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return xa=i.slice(t,1<r?1-r:void 0)}function wa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Jo(){return!0}function Qf(){return!1}function Ut(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(s):s[u]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Jo:Qf,this.isPropagationStopped=Qf,this}return De(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Jo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Jo)},persist:function(){},isPersistent:Jo}),e}var Hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Id=Ut(Hi),xo=De({},Hi,{view:0,detail:0}),W1=Ut(xo),Eu,ku,gs,Tl=De({},xo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==gs&&(gs&&t.type==="mousemove"?(Eu=t.screenX-gs.screenX,ku=t.screenY-gs.screenY):ku=Eu=0,gs=t),Eu)},movementY:function(t){return"movementY"in t?t.movementY:ku}}),Yf=Ut(Tl),G1=De({},Tl,{dataTransfer:0}),K1=Ut(G1),Q1=De({},xo,{relatedTarget:0}),Su=Ut(Q1),Y1=De({},Hi,{animationName:0,elapsedTime:0,pseudoElement:0}),X1=Ut(Y1),J1=De({},Hi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Z1=Ut(J1),ex=De({},Hi,{data:0}),Xf=Ut(ex),tx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ix(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=rx[t])?!!e[t]:!1}function Cd(){return ix}var sx=De({},xo,{key:function(t){if(t.key){var e=tx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=wa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?nx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cd,charCode:function(t){return t.type==="keypress"?wa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ox=Ut(sx),ax=De({},Tl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jf=Ut(ax),lx=De({},xo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cd}),ux=Ut(lx),cx=De({},Hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),dx=Ut(cx),hx=De({},Tl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),fx=Ut(hx),mx=[9,13,27,32],Ad=Pn&&"CompositionEvent"in window,Ns=null;Pn&&"documentMode"in document&&(Ns=document.documentMode);var px=Pn&&"TextEvent"in window&&!Ns,Zg=Pn&&(!Ad||Ns&&8<Ns&&11>=Ns),Zf=" ",em=!1;function ey(t,e){switch(t){case"keyup":return mx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ty(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ui=!1;function gx(t,e){switch(t){case"compositionend":return ty(e);case"keypress":return e.which!==32?null:(em=!0,Zf);case"textInput":return t=e.data,t===Zf&&em?null:t;default:return null}}function yx(t,e){if(ui)return t==="compositionend"||!Ad&&ey(t,e)?(t=Jg(),xa=Td=qn=null,ui=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Zg&&e.locale!=="ko"?null:e.data;default:return null}}var vx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!vx[t.type]:e==="textarea"}function ny(t,e,n,r){bg(r),e=Ha(e,"onChange"),0<e.length&&(n=new Id("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var bs=null,Ys=null;function _x(t){fy(t,0)}function Il(t){var e=hi(t);if(Ig(e))return t}function xx(t,e){if(t==="change")return e}var ry=!1;if(Pn){var Tu;if(Pn){var Iu="oninput"in document;if(!Iu){var nm=document.createElement("div");nm.setAttribute("oninput","return;"),Iu=typeof nm.oninput=="function"}Tu=Iu}else Tu=!1;ry=Tu&&(!document.documentMode||9<document.documentMode)}function rm(){bs&&(bs.detachEvent("onpropertychange",iy),Ys=bs=null)}function iy(t){if(t.propertyName==="value"&&Il(Ys)){var e=[];ny(e,Ys,t,xd(t)),Mg(_x,e)}}function wx(t,e,n){t==="focusin"?(rm(),bs=e,Ys=n,bs.attachEvent("onpropertychange",iy)):t==="focusout"&&rm()}function Ex(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Il(Ys)}function kx(t,e){if(t==="click")return Il(e)}function Sx(t,e){if(t==="input"||t==="change")return Il(e)}function Tx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var an=typeof Object.is=="function"?Object.is:Tx;function Xs(t,e){if(an(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Xu.call(e,i)||!an(t[i],e[i]))return!1}return!0}function im(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function sm(t,e){var n=im(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=im(n)}}function sy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?sy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function oy(){for(var t=window,e=Ma();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ma(t.document)}return e}function Pd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Ix(t){var e=oy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&sy(n.ownerDocument.documentElement,n)){if(r!==null&&Pd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=sm(n,s);var o=sm(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Cx=Pn&&"documentMode"in document&&11>=document.documentMode,ci=null,gc=null,Ds=null,yc=!1;function om(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;yc||ci==null||ci!==Ma(r)||(r=ci,"selectionStart"in r&&Pd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ds&&Xs(Ds,r)||(Ds=r,r=Ha(gc,"onSelect"),0<r.length&&(e=new Id("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ci)))}function Zo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var di={animationend:Zo("Animation","AnimationEnd"),animationiteration:Zo("Animation","AnimationIteration"),animationstart:Zo("Animation","AnimationStart"),transitionend:Zo("Transition","TransitionEnd")},Cu={},ay={};Pn&&(ay=document.createElement("div").style,"AnimationEvent"in window||(delete di.animationend.animation,delete di.animationiteration.animation,delete di.animationstart.animation),"TransitionEvent"in window||delete di.transitionend.transition);function Cl(t){if(Cu[t])return Cu[t];if(!di[t])return t;var e=di[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ay)return Cu[t]=e[n];return t}var ly=Cl("animationend"),uy=Cl("animationiteration"),cy=Cl("animationstart"),dy=Cl("transitionend"),hy=new Map,am="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yr(t,e){hy.set(t,e),qr(e,[t])}for(var Au=0;Au<am.length;Au++){var Pu=am[Au],Ax=Pu.toLowerCase(),Px=Pu[0].toUpperCase()+Pu.slice(1);yr(Ax,"on"+Px)}yr(ly,"onAnimationEnd");yr(uy,"onAnimationIteration");yr(cy,"onAnimationStart");yr("dblclick","onDoubleClick");yr("focusin","onFocus");yr("focusout","onBlur");yr(dy,"onTransitionEnd");ji("onMouseEnter",["mouseout","mouseover"]);ji("onMouseLeave",["mouseout","mouseover"]);ji("onPointerEnter",["pointerout","pointerover"]);ji("onPointerLeave",["pointerout","pointerover"]);qr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qr("onBeforeInput",["compositionend","keypress","textInput","paste"]);qr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ts="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ts));function lm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,A1(r,e,void 0,t),t.currentTarget=null}function fy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var u=r[o],c=u.instance,h=u.currentTarget;if(u=u.listener,c!==s&&i.isPropagationStopped())break e;lm(i,u,h),s=c}else for(o=0;o<r.length;o++){if(u=r[o],c=u.instance,h=u.currentTarget,u=u.listener,c!==s&&i.isPropagationStopped())break e;lm(i,u,h),s=c}}}if(La)throw t=hc,La=!1,hc=null,t}function Ce(t,e){var n=e[Ec];n===void 0&&(n=e[Ec]=new Set);var r=t+"__bubble";n.has(r)||(my(e,t,2,!1),n.add(r))}function ju(t,e,n){var r=0;e&&(r|=4),my(n,t,r,e)}var ea="_reactListening"+Math.random().toString(36).slice(2);function Js(t){if(!t[ea]){t[ea]=!0,wg.forEach(function(n){n!=="selectionchange"&&(jx.has(n)||ju(n,!1,t),ju(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ea]||(e[ea]=!0,ju("selectionchange",!1,e))}}function my(t,e,n,r){switch(Xg(e)){case 1:var i=H1;break;case 4:i=q1;break;default:i=Sd}n=i.bind(null,e,n,t),i=void 0,!dc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ru(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var u=r.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;u!==null;){if(o=Pr(u),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}u=u.parentNode}}r=r.return}Mg(function(){var h=s,m=xd(n),y=[];e:{var g=hy.get(t);if(g!==void 0){var w=Id,A=t;switch(t){case"keypress":if(wa(n)===0)break e;case"keydown":case"keyup":w=ox;break;case"focusin":A="focus",w=Su;break;case"focusout":A="blur",w=Su;break;case"beforeblur":case"afterblur":w=Su;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Yf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=K1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=ux;break;case ly:case uy:case cy:w=X1;break;case dy:w=dx;break;case"scroll":w=W1;break;case"wheel":w=fx;break;case"copy":case"cut":case"paste":w=Z1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Jf}var P=(e&4)!==0,j=!P&&t==="scroll",k=P?g!==null?g+"Capture":null:g;P=[];for(var E=h,T;E!==null;){T=E;var b=T.stateNode;if(T.tag===5&&b!==null&&(T=b,k!==null&&(b=Ws(E,k),b!=null&&P.push(Zs(E,b,T)))),j)break;E=E.return}0<P.length&&(g=new w(g,A,null,n,m),y.push({event:g,listeners:P}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",g&&n!==uc&&(A=n.relatedTarget||n.fromElement)&&(Pr(A)||A[jn]))break e;if((w||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,w?(A=n.relatedTarget||n.toElement,w=h,A=A?Pr(A):null,A!==null&&(j=Wr(A),A!==j||A.tag!==5&&A.tag!==6)&&(A=null)):(w=null,A=h),w!==A)){if(P=Yf,b="onMouseLeave",k="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(P=Jf,b="onPointerLeave",k="onPointerEnter",E="pointer"),j=w==null?g:hi(w),T=A==null?g:hi(A),g=new P(b,E+"leave",w,n,m),g.target=j,g.relatedTarget=T,b=null,Pr(m)===h&&(P=new P(k,E+"enter",A,n,m),P.target=T,P.relatedTarget=j,b=P),j=b,w&&A)t:{for(P=w,k=A,E=0,T=P;T;T=ni(T))E++;for(T=0,b=k;b;b=ni(b))T++;for(;0<E-T;)P=ni(P),E--;for(;0<T-E;)k=ni(k),T--;for(;E--;){if(P===k||k!==null&&P===k.alternate)break t;P=ni(P),k=ni(k)}P=null}else P=null;w!==null&&um(y,g,w,P,!1),A!==null&&j!==null&&um(y,j,A,P,!0)}}e:{if(g=h?hi(h):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var D=xx;else if(tm(g))if(ry)D=Sx;else{D=Ex;var F=wx}else(w=g.nodeName)&&w.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(D=kx);if(D&&(D=D(t,h))){ny(y,D,n,m);break e}F&&F(t,g,h),t==="focusout"&&(F=g._wrapperState)&&F.controlled&&g.type==="number"&&ic(g,"number",g.value)}switch(F=h?hi(h):window,t){case"focusin":(tm(F)||F.contentEditable==="true")&&(ci=F,gc=h,Ds=null);break;case"focusout":Ds=gc=ci=null;break;case"mousedown":yc=!0;break;case"contextmenu":case"mouseup":case"dragend":yc=!1,om(y,n,m);break;case"selectionchange":if(Cx)break;case"keydown":case"keyup":om(y,n,m)}var v;if(Ad)e:{switch(t){case"compositionstart":var p="onCompositionStart";break e;case"compositionend":p="onCompositionEnd";break e;case"compositionupdate":p="onCompositionUpdate";break e}p=void 0}else ui?ey(t,n)&&(p="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(p="onCompositionStart");p&&(Zg&&n.locale!=="ko"&&(ui||p!=="onCompositionStart"?p==="onCompositionEnd"&&ui&&(v=Jg()):(qn=m,Td="value"in qn?qn.value:qn.textContent,ui=!0)),F=Ha(h,p),0<F.length&&(p=new Xf(p,t,null,n,m),y.push({event:p,listeners:F}),v?p.data=v:(v=ty(n),v!==null&&(p.data=v)))),(v=px?gx(t,n):yx(t,n))&&(h=Ha(h,"onBeforeInput"),0<h.length&&(m=new Xf("onBeforeInput","beforeinput",null,n,m),y.push({event:m,listeners:h}),m.data=v))}fy(y,e)})}function Zs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ha(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ws(t,n),s!=null&&r.unshift(Zs(t,s,i)),s=Ws(t,e),s!=null&&r.push(Zs(t,s,i))),t=t.return}return r}function ni(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function um(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var u=n,c=u.alternate,h=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&h!==null&&(u=h,i?(c=Ws(n,s),c!=null&&o.unshift(Zs(n,c,u))):i||(c=Ws(n,s),c!=null&&o.push(Zs(n,c,u)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Rx=/\r\n?/g,Nx=/\u0000|\uFFFD/g;function cm(t){return(typeof t=="string"?t:""+t).replace(Rx,`
`).replace(Nx,"")}function ta(t,e,n){if(e=cm(e),cm(t)!==e&&n)throw Error($(425))}function qa(){}var vc=null,_c=null;function xc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wc=typeof setTimeout=="function"?setTimeout:void 0,bx=typeof clearTimeout=="function"?clearTimeout:void 0,dm=typeof Promise=="function"?Promise:void 0,Dx=typeof queueMicrotask=="function"?queueMicrotask:typeof dm<"u"?function(t){return dm.resolve(null).then(t).catch(Vx)}:wc;function Vx(t){setTimeout(function(){throw t})}function Nu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Qs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Qs(e)}function Jn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function hm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var qi=Math.random().toString(36).slice(2),fn="__reactFiber$"+qi,eo="__reactProps$"+qi,jn="__reactContainer$"+qi,Ec="__reactEvents$"+qi,Fx="__reactListeners$"+qi,Mx="__reactHandles$"+qi;function Pr(t){var e=t[fn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[jn]||n[fn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=hm(t);t!==null;){if(n=t[fn])return n;t=hm(t)}return e}t=n,n=t.parentNode}return null}function wo(t){return t=t[fn]||t[jn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function hi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function Al(t){return t[eo]||null}var kc=[],fi=-1;function vr(t){return{current:t}}function je(t){0>fi||(t.current=kc[fi],kc[fi]=null,fi--)}function Te(t,e){fi++,kc[fi]=t.current,t.current=e}var ur={},_t=vr(ur),Nt=vr(!1),Fr=ur;function Ri(t,e){var n=t.type.contextTypes;if(!n)return ur;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function bt(t){return t=t.childContextTypes,t!=null}function Wa(){je(Nt),je(_t)}function fm(t,e,n){if(_t.current!==ur)throw Error($(168));Te(_t,e),Te(Nt,n)}function py(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error($(108,w1(t)||"Unknown",i));return De({},n,r)}function Ga(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ur,Fr=_t.current,Te(_t,t),Te(Nt,Nt.current),!0}function mm(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=py(t,e,Fr),r.__reactInternalMemoizedMergedChildContext=t,je(Nt),je(_t),Te(_t,t)):je(Nt),Te(Nt,n)}var Tn=null,Pl=!1,bu=!1;function gy(t){Tn===null?Tn=[t]:Tn.push(t)}function Ox(t){Pl=!0,gy(t)}function _r(){if(!bu&&Tn!==null){bu=!0;var t=0,e=Ee;try{var n=Tn;for(Ee=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Tn=null,Pl=!1}catch(i){throw Tn!==null&&(Tn=Tn.slice(t+1)),Ug(wd,_r),i}finally{Ee=e,bu=!1}}return null}var mi=[],pi=0,Ka=null,Qa=0,Bt=[],$t=0,Mr=null,In=1,Cn="";function Ir(t,e){mi[pi++]=Qa,mi[pi++]=Ka,Ka=t,Qa=e}function yy(t,e,n){Bt[$t++]=In,Bt[$t++]=Cn,Bt[$t++]=Mr,Mr=t;var r=In;t=Cn;var i=32-rn(r)-1;r&=~(1<<i),n+=1;var s=32-rn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,In=1<<32-rn(e)+i|n<<i|r,Cn=s+t}else In=1<<s|n<<i|r,Cn=t}function jd(t){t.return!==null&&(Ir(t,1),yy(t,1,0))}function Rd(t){for(;t===Ka;)Ka=mi[--pi],mi[pi]=null,Qa=mi[--pi],mi[pi]=null;for(;t===Mr;)Mr=Bt[--$t],Bt[$t]=null,Cn=Bt[--$t],Bt[$t]=null,In=Bt[--$t],Bt[$t]=null}var Ot=null,Mt=null,Re=!1,tn=null;function vy(t,e){var n=Wt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function pm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ot=t,Mt=Jn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ot=t,Mt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Mr!==null?{id:In,overflow:Cn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Wt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ot=t,Mt=null,!0):!1;default:return!1}}function Sc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Tc(t){if(Re){var e=Mt;if(e){var n=e;if(!pm(t,e)){if(Sc(t))throw Error($(418));e=Jn(n.nextSibling);var r=Ot;e&&pm(t,e)?vy(r,n):(t.flags=t.flags&-4097|2,Re=!1,Ot=t)}}else{if(Sc(t))throw Error($(418));t.flags=t.flags&-4097|2,Re=!1,Ot=t}}}function gm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ot=t}function na(t){if(t!==Ot)return!1;if(!Re)return gm(t),Re=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!xc(t.type,t.memoizedProps)),e&&(e=Mt)){if(Sc(t))throw _y(),Error($(418));for(;e;)vy(t,e),e=Jn(e.nextSibling)}if(gm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Mt=Jn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Mt=null}}else Mt=Ot?Jn(t.stateNode.nextSibling):null;return!0}function _y(){for(var t=Mt;t;)t=Jn(t.nextSibling)}function Ni(){Mt=Ot=null,Re=!1}function Nd(t){tn===null?tn=[t]:tn.push(t)}var Lx=Fn.ReactCurrentBatchConfig;function ys(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var u=i.refs;o===null?delete u[s]:u[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function ra(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ym(t){var e=t._init;return e(t._payload)}function xy(t){function e(k,E){if(t){var T=k.deletions;T===null?(k.deletions=[E],k.flags|=16):T.push(E)}}function n(k,E){if(!t)return null;for(;E!==null;)e(k,E),E=E.sibling;return null}function r(k,E){for(k=new Map;E!==null;)E.key!==null?k.set(E.key,E):k.set(E.index,E),E=E.sibling;return k}function i(k,E){return k=nr(k,E),k.index=0,k.sibling=null,k}function s(k,E,T){return k.index=T,t?(T=k.alternate,T!==null?(T=T.index,T<E?(k.flags|=2,E):T):(k.flags|=2,E)):(k.flags|=1048576,E)}function o(k){return t&&k.alternate===null&&(k.flags|=2),k}function u(k,E,T,b){return E===null||E.tag!==6?(E=zu(T,k.mode,b),E.return=k,E):(E=i(E,T),E.return=k,E)}function c(k,E,T,b){var D=T.type;return D===li?m(k,E,T.props.children,b,T.key):E!==null&&(E.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Un&&ym(D)===E.type)?(b=i(E,T.props),b.ref=ys(k,E,T),b.return=k,b):(b=Aa(T.type,T.key,T.props,null,k.mode,b),b.ref=ys(k,E,T),b.return=k,b)}function h(k,E,T,b){return E===null||E.tag!==4||E.stateNode.containerInfo!==T.containerInfo||E.stateNode.implementation!==T.implementation?(E=Uu(T,k.mode,b),E.return=k,E):(E=i(E,T.children||[]),E.return=k,E)}function m(k,E,T,b,D){return E===null||E.tag!==7?(E=Dr(T,k.mode,b,D),E.return=k,E):(E=i(E,T),E.return=k,E)}function y(k,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return E=zu(""+E,k.mode,T),E.return=k,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Wo:return T=Aa(E.type,E.key,E.props,null,k.mode,T),T.ref=ys(k,null,E),T.return=k,T;case ai:return E=Uu(E,k.mode,T),E.return=k,E;case Un:var b=E._init;return y(k,b(E._payload),T)}if(ks(E)||hs(E))return E=Dr(E,k.mode,T,null),E.return=k,E;ra(k,E)}return null}function g(k,E,T,b){var D=E!==null?E.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return D!==null?null:u(k,E,""+T,b);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Wo:return T.key===D?c(k,E,T,b):null;case ai:return T.key===D?h(k,E,T,b):null;case Un:return D=T._init,g(k,E,D(T._payload),b)}if(ks(T)||hs(T))return D!==null?null:m(k,E,T,b,null);ra(k,T)}return null}function w(k,E,T,b,D){if(typeof b=="string"&&b!==""||typeof b=="number")return k=k.get(T)||null,u(E,k,""+b,D);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Wo:return k=k.get(b.key===null?T:b.key)||null,c(E,k,b,D);case ai:return k=k.get(b.key===null?T:b.key)||null,h(E,k,b,D);case Un:var F=b._init;return w(k,E,T,F(b._payload),D)}if(ks(b)||hs(b))return k=k.get(T)||null,m(E,k,b,D,null);ra(E,b)}return null}function A(k,E,T,b){for(var D=null,F=null,v=E,p=E=0,_=null;v!==null&&p<T.length;p++){v.index>p?(_=v,v=null):_=v.sibling;var S=g(k,v,T[p],b);if(S===null){v===null&&(v=_);break}t&&v&&S.alternate===null&&e(k,v),E=s(S,E,p),F===null?D=S:F.sibling=S,F=S,v=_}if(p===T.length)return n(k,v),Re&&Ir(k,p),D;if(v===null){for(;p<T.length;p++)v=y(k,T[p],b),v!==null&&(E=s(v,E,p),F===null?D=v:F.sibling=v,F=v);return Re&&Ir(k,p),D}for(v=r(k,v);p<T.length;p++)_=w(v,k,p,T[p],b),_!==null&&(t&&_.alternate!==null&&v.delete(_.key===null?p:_.key),E=s(_,E,p),F===null?D=_:F.sibling=_,F=_);return t&&v.forEach(function(I){return e(k,I)}),Re&&Ir(k,p),D}function P(k,E,T,b){var D=hs(T);if(typeof D!="function")throw Error($(150));if(T=D.call(T),T==null)throw Error($(151));for(var F=D=null,v=E,p=E=0,_=null,S=T.next();v!==null&&!S.done;p++,S=T.next()){v.index>p?(_=v,v=null):_=v.sibling;var I=g(k,v,S.value,b);if(I===null){v===null&&(v=_);break}t&&v&&I.alternate===null&&e(k,v),E=s(I,E,p),F===null?D=I:F.sibling=I,F=I,v=_}if(S.done)return n(k,v),Re&&Ir(k,p),D;if(v===null){for(;!S.done;p++,S=T.next())S=y(k,S.value,b),S!==null&&(E=s(S,E,p),F===null?D=S:F.sibling=S,F=S);return Re&&Ir(k,p),D}for(v=r(k,v);!S.done;p++,S=T.next())S=w(v,k,p,S.value,b),S!==null&&(t&&S.alternate!==null&&v.delete(S.key===null?p:S.key),E=s(S,E,p),F===null?D=S:F.sibling=S,F=S);return t&&v.forEach(function(R){return e(k,R)}),Re&&Ir(k,p),D}function j(k,E,T,b){if(typeof T=="object"&&T!==null&&T.type===li&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Wo:e:{for(var D=T.key,F=E;F!==null;){if(F.key===D){if(D=T.type,D===li){if(F.tag===7){n(k,F.sibling),E=i(F,T.props.children),E.return=k,k=E;break e}}else if(F.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Un&&ym(D)===F.type){n(k,F.sibling),E=i(F,T.props),E.ref=ys(k,F,T),E.return=k,k=E;break e}n(k,F);break}else e(k,F);F=F.sibling}T.type===li?(E=Dr(T.props.children,k.mode,b,T.key),E.return=k,k=E):(b=Aa(T.type,T.key,T.props,null,k.mode,b),b.ref=ys(k,E,T),b.return=k,k=b)}return o(k);case ai:e:{for(F=T.key;E!==null;){if(E.key===F)if(E.tag===4&&E.stateNode.containerInfo===T.containerInfo&&E.stateNode.implementation===T.implementation){n(k,E.sibling),E=i(E,T.children||[]),E.return=k,k=E;break e}else{n(k,E);break}else e(k,E);E=E.sibling}E=Uu(T,k.mode,b),E.return=k,k=E}return o(k);case Un:return F=T._init,j(k,E,F(T._payload),b)}if(ks(T))return A(k,E,T,b);if(hs(T))return P(k,E,T,b);ra(k,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,E!==null&&E.tag===6?(n(k,E.sibling),E=i(E,T),E.return=k,k=E):(n(k,E),E=zu(T,k.mode,b),E.return=k,k=E),o(k)):n(k,E)}return j}var bi=xy(!0),wy=xy(!1),Ya=vr(null),Xa=null,gi=null,bd=null;function Dd(){bd=gi=Xa=null}function Vd(t){var e=Ya.current;je(Ya),t._currentValue=e}function Ic(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ki(t,e){Xa=t,bd=gi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Rt=!0),t.firstContext=null)}function Kt(t){var e=t._currentValue;if(bd!==t)if(t={context:t,memoizedValue:e,next:null},gi===null){if(Xa===null)throw Error($(308));gi=t,Xa.dependencies={lanes:0,firstContext:t}}else gi=gi.next=t;return e}var jr=null;function Fd(t){jr===null?jr=[t]:jr.push(t)}function Ey(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Fd(e)):(n.next=i.next,i.next=n),e.interleaved=n,Rn(t,r)}function Rn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Bn=!1;function Md(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ky(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function An(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Zn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ye&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Rn(t,n)}return i=r.interleaved,i===null?(e.next=e,Fd(r)):(e.next=i.next,i.next=e),r.interleaved=e,Rn(t,n)}function Ea(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ed(t,n)}}function vm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ja(t,e,n,r){var i=t.updateQueue;Bn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var c=u,h=c.next;c.next=null,o===null?s=h:o.next=h,o=c;var m=t.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==o&&(u===null?m.firstBaseUpdate=h:u.next=h,m.lastBaseUpdate=c))}if(s!==null){var y=i.baseState;o=0,m=h=c=null,u=s;do{var g=u.lane,w=u.eventTime;if((r&g)===g){m!==null&&(m=m.next={eventTime:w,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var A=t,P=u;switch(g=e,w=n,P.tag){case 1:if(A=P.payload,typeof A=="function"){y=A.call(w,y,g);break e}y=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=P.payload,g=typeof A=="function"?A.call(w,y,g):A,g==null)break e;y=De({},y,g);break e;case 2:Bn=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[u]:g.push(u))}else w={eventTime:w,lane:g,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(h=m=w,c=y):m=m.next=w,o|=g;if(u=u.next,u===null){if(u=i.shared.pending,u===null)break;g=u,u=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(m===null&&(c=y),i.baseState=c,i.firstBaseUpdate=h,i.lastBaseUpdate=m,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Lr|=o,t.lanes=o,t.memoizedState=y}}function _m(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error($(191,i));i.call(r)}}}var Eo={},pn=vr(Eo),to=vr(Eo),no=vr(Eo);function Rr(t){if(t===Eo)throw Error($(174));return t}function Od(t,e){switch(Te(no,e),Te(to,t),Te(pn,Eo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:oc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=oc(e,t)}je(pn),Te(pn,e)}function Di(){je(pn),je(to),je(no)}function Sy(t){Rr(no.current);var e=Rr(pn.current),n=oc(e,t.type);e!==n&&(Te(to,t),Te(pn,n))}function Ld(t){to.current===t&&(je(pn),je(to))}var Ne=vr(0);function Za(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Du=[];function zd(){for(var t=0;t<Du.length;t++)Du[t]._workInProgressVersionPrimary=null;Du.length=0}var ka=Fn.ReactCurrentDispatcher,Vu=Fn.ReactCurrentBatchConfig,Or=0,be=null,We=null,et=null,el=!1,Vs=!1,ro=0,zx=0;function ft(){throw Error($(321))}function Ud(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!an(t[n],e[n]))return!1;return!0}function Bd(t,e,n,r,i,s){if(Or=s,be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ka.current=t===null||t.memoizedState===null?Hx:qx,t=n(r,i),Vs){s=0;do{if(Vs=!1,ro=0,25<=s)throw Error($(301));s+=1,et=We=null,e.updateQueue=null,ka.current=Wx,t=n(r,i)}while(Vs)}if(ka.current=tl,e=We!==null&&We.next!==null,Or=0,et=We=be=null,el=!1,e)throw Error($(300));return t}function $d(){var t=ro!==0;return ro=0,t}function dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?be.memoizedState=et=t:et=et.next=t,et}function Qt(){if(We===null){var t=be.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var e=et===null?be.memoizedState:et.next;if(e!==null)et=e,We=t;else{if(t===null)throw Error($(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},et===null?be.memoizedState=et=t:et=et.next=t}return et}function io(t,e){return typeof e=="function"?e(t):e}function Fu(t){var e=Qt(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=We,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var u=o=null,c=null,h=s;do{var m=h.lane;if((Or&m)===m)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var y={lane:m,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(u=c=y,o=r):c=c.next=y,be.lanes|=m,Lr|=m}h=h.next}while(h!==null&&h!==s);c===null?o=r:c.next=u,an(r,e.memoizedState)||(Rt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,be.lanes|=s,Lr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Mu(t){var e=Qt(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);an(s,e.memoizedState)||(Rt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Ty(){}function Iy(t,e){var n=be,r=Qt(),i=e(),s=!an(r.memoizedState,i);if(s&&(r.memoizedState=i,Rt=!0),r=r.queue,Hd(Py.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||et!==null&&et.memoizedState.tag&1){if(n.flags|=2048,so(9,Ay.bind(null,n,r,i,e),void 0,null),nt===null)throw Error($(349));Or&30||Cy(n,e,i)}return i}function Cy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Ay(t,e,n,r){e.value=n,e.getSnapshot=r,jy(e)&&Ry(t)}function Py(t,e,n){return n(function(){jy(e)&&Ry(t)})}function jy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!an(t,n)}catch{return!0}}function Ry(t){var e=Rn(t,1);e!==null&&sn(e,t,1,-1)}function xm(t){var e=dn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:io,lastRenderedState:t},e.queue=t,t=t.dispatch=$x.bind(null,be,t),[e.memoizedState,t]}function so(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ny(){return Qt().memoizedState}function Sa(t,e,n,r){var i=dn();be.flags|=t,i.memoizedState=so(1|e,n,void 0,r===void 0?null:r)}function jl(t,e,n,r){var i=Qt();r=r===void 0?null:r;var s=void 0;if(We!==null){var o=We.memoizedState;if(s=o.destroy,r!==null&&Ud(r,o.deps)){i.memoizedState=so(e,n,s,r);return}}be.flags|=t,i.memoizedState=so(1|e,n,s,r)}function wm(t,e){return Sa(8390656,8,t,e)}function Hd(t,e){return jl(2048,8,t,e)}function by(t,e){return jl(4,2,t,e)}function Dy(t,e){return jl(4,4,t,e)}function Vy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Fy(t,e,n){return n=n!=null?n.concat([t]):null,jl(4,4,Vy.bind(null,e,t),n)}function qd(){}function My(t,e){var n=Qt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ud(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Oy(t,e){var n=Qt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ud(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ly(t,e,n){return Or&21?(an(n,e)||(n=Hg(),be.lanes|=n,Lr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Rt=!0),t.memoizedState=n)}function Ux(t,e){var n=Ee;Ee=n!==0&&4>n?n:4,t(!0);var r=Vu.transition;Vu.transition={};try{t(!1),e()}finally{Ee=n,Vu.transition=r}}function zy(){return Qt().memoizedState}function Bx(t,e,n){var r=tr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Uy(t))By(e,n);else if(n=Ey(t,e,n,r),n!==null){var i=Tt();sn(n,t,r,i),$y(n,e,r)}}function $x(t,e,n){var r=tr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Uy(t))By(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,u=s(o,n);if(i.hasEagerState=!0,i.eagerState=u,an(u,o)){var c=e.interleaved;c===null?(i.next=i,Fd(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=Ey(t,e,i,r),n!==null&&(i=Tt(),sn(n,t,r,i),$y(n,e,r))}}function Uy(t){var e=t.alternate;return t===be||e!==null&&e===be}function By(t,e){Vs=el=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function $y(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ed(t,n)}}var tl={readContext:Kt,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},Hx={readContext:Kt,useCallback:function(t,e){return dn().memoizedState=[t,e===void 0?null:e],t},useContext:Kt,useEffect:wm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Sa(4194308,4,Vy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Sa(4194308,4,t,e)},useInsertionEffect:function(t,e){return Sa(4,2,t,e)},useMemo:function(t,e){var n=dn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=dn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Bx.bind(null,be,t),[r.memoizedState,t]},useRef:function(t){var e=dn();return t={current:t},e.memoizedState=t},useState:xm,useDebugValue:qd,useDeferredValue:function(t){return dn().memoizedState=t},useTransition:function(){var t=xm(!1),e=t[0];return t=Ux.bind(null,t[1]),dn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=be,i=dn();if(Re){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),nt===null)throw Error($(349));Or&30||Cy(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,wm(Py.bind(null,r,s,t),[t]),r.flags|=2048,so(9,Ay.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=dn(),e=nt.identifierPrefix;if(Re){var n=Cn,r=In;n=(r&~(1<<32-rn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ro++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=zx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},qx={readContext:Kt,useCallback:My,useContext:Kt,useEffect:Hd,useImperativeHandle:Fy,useInsertionEffect:by,useLayoutEffect:Dy,useMemo:Oy,useReducer:Fu,useRef:Ny,useState:function(){return Fu(io)},useDebugValue:qd,useDeferredValue:function(t){var e=Qt();return Ly(e,We.memoizedState,t)},useTransition:function(){var t=Fu(io)[0],e=Qt().memoizedState;return[t,e]},useMutableSource:Ty,useSyncExternalStore:Iy,useId:zy,unstable_isNewReconciler:!1},Wx={readContext:Kt,useCallback:My,useContext:Kt,useEffect:Hd,useImperativeHandle:Fy,useInsertionEffect:by,useLayoutEffect:Dy,useMemo:Oy,useReducer:Mu,useRef:Ny,useState:function(){return Mu(io)},useDebugValue:qd,useDeferredValue:function(t){var e=Qt();return We===null?e.memoizedState=t:Ly(e,We.memoizedState,t)},useTransition:function(){var t=Mu(io)[0],e=Qt().memoizedState;return[t,e]},useMutableSource:Ty,useSyncExternalStore:Iy,useId:zy,unstable_isNewReconciler:!1};function Zt(t,e){if(t&&t.defaultProps){e=De({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Cc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:De({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Rl={isMounted:function(t){return(t=t._reactInternals)?Wr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Tt(),i=tr(t),s=An(r,i);s.payload=e,n!=null&&(s.callback=n),e=Zn(t,s,i),e!==null&&(sn(e,t,i,r),Ea(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Tt(),i=tr(t),s=An(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Zn(t,s,i),e!==null&&(sn(e,t,i,r),Ea(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Tt(),r=tr(t),i=An(n,r);i.tag=2,e!=null&&(i.callback=e),e=Zn(t,i,r),e!==null&&(sn(e,t,r,n),Ea(e,t,r))}};function Em(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Xs(n,r)||!Xs(i,s):!0}function Hy(t,e,n){var r=!1,i=ur,s=e.contextType;return typeof s=="object"&&s!==null?s=Kt(s):(i=bt(e)?Fr:_t.current,r=e.contextTypes,s=(r=r!=null)?Ri(t,i):ur),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Rl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function km(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Rl.enqueueReplaceState(e,e.state,null)}function Ac(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Md(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Kt(s):(s=bt(e)?Fr:_t.current,i.context=Ri(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Cc(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Rl.enqueueReplaceState(i,i.state,null),Ja(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Vi(t,e){try{var n="",r=e;do n+=x1(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ou(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Pc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Gx=typeof WeakMap=="function"?WeakMap:Map;function qy(t,e,n){n=An(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){rl||(rl=!0,Lc=r),Pc(t,e)},n}function Wy(t,e,n){n=An(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Pc(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Pc(t,e),typeof r!="function"&&(er===null?er=new Set([this]):er.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Sm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Gx;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=aw.bind(null,t,e,n),e.then(t,t))}function Tm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Im(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=An(-1,1),e.tag=2,Zn(n,e,1))),n.lanes|=1),t)}var Kx=Fn.ReactCurrentOwner,Rt=!1;function St(t,e,n,r){e.child=t===null?wy(e,null,n,r):bi(e,t.child,n,r)}function Cm(t,e,n,r,i){n=n.render;var s=e.ref;return ki(e,i),r=Bd(t,e,n,r,s,i),n=$d(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Nn(t,e,i)):(Re&&n&&jd(e),e.flags|=1,St(t,e,r,i),e.child)}function Am(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Zd(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Gy(t,e,s,r,i)):(t=Aa(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Xs,n(o,r)&&t.ref===e.ref)return Nn(t,e,i)}return e.flags|=1,t=nr(s,r),t.ref=e.ref,t.return=e,e.child=t}function Gy(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Xs(s,r)&&t.ref===e.ref)if(Rt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Rt=!0);else return e.lanes=t.lanes,Nn(t,e,i)}return jc(t,e,n,r,i)}function Ky(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(vi,Ft),Ft|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(vi,Ft),Ft|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Te(vi,Ft),Ft|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Te(vi,Ft),Ft|=r;return St(t,e,i,n),e.child}function Qy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function jc(t,e,n,r,i){var s=bt(n)?Fr:_t.current;return s=Ri(e,s),ki(e,i),n=Bd(t,e,n,r,s,i),r=$d(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Nn(t,e,i)):(Re&&r&&jd(e),e.flags|=1,St(t,e,n,i),e.child)}function Pm(t,e,n,r,i){if(bt(n)){var s=!0;Ga(e)}else s=!1;if(ki(e,i),e.stateNode===null)Ta(t,e),Hy(e,n,r),Ac(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,u=e.memoizedProps;o.props=u;var c=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Kt(h):(h=bt(n)?Fr:_t.current,h=Ri(e,h));var m=n.getDerivedStateFromProps,y=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";y||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==r||c!==h)&&km(e,o,r,h),Bn=!1;var g=e.memoizedState;o.state=g,Ja(e,r,o,i),c=e.memoizedState,u!==r||g!==c||Nt.current||Bn?(typeof m=="function"&&(Cc(e,n,m,r),c=e.memoizedState),(u=Bn||Em(e,n,u,r,g,c,h))?(y||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=h,r=u):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,ky(t,e),u=e.memoizedProps,h=e.type===e.elementType?u:Zt(e.type,u),o.props=h,y=e.pendingProps,g=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Kt(c):(c=bt(n)?Fr:_t.current,c=Ri(e,c));var w=n.getDerivedStateFromProps;(m=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==y||g!==c)&&km(e,o,r,c),Bn=!1,g=e.memoizedState,o.state=g,Ja(e,r,o,i);var A=e.memoizedState;u!==y||g!==A||Nt.current||Bn?(typeof w=="function"&&(Cc(e,n,w,r),A=e.memoizedState),(h=Bn||Em(e,n,h,r,g,A,c)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,A,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,A,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=A),o.props=r,o.state=A,o.context=c,r=h):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Rc(t,e,n,r,s,i)}function Rc(t,e,n,r,i,s){Qy(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&mm(e,n,!1),Nn(t,e,s);r=e.stateNode,Kx.current=e;var u=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=bi(e,t.child,null,s),e.child=bi(e,null,u,s)):St(t,e,u,s),e.memoizedState=r.state,i&&mm(e,n,!0),e.child}function Yy(t){var e=t.stateNode;e.pendingContext?fm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&fm(t,e.context,!1),Od(t,e.containerInfo)}function jm(t,e,n,r,i){return Ni(),Nd(i),e.flags|=256,St(t,e,n,r),e.child}var Nc={dehydrated:null,treeContext:null,retryLane:0};function bc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Xy(t,e,n){var r=e.pendingProps,i=Ne.current,s=!1,o=(e.flags&128)!==0,u;if((u=o)||(u=t!==null&&t.memoizedState===null?!1:(i&2)!==0),u?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Te(Ne,i&1),t===null)return Tc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Dl(o,r,0,null),t=Dr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=bc(n),e.memoizedState=Nc,t):Wd(e,o));if(i=t.memoizedState,i!==null&&(u=i.dehydrated,u!==null))return Qx(t,e,o,r,u,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,u=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=nr(i,c),r.subtreeFlags=i.subtreeFlags&14680064),u!==null?s=nr(u,s):(s=Dr(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?bc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Nc,r}return s=t.child,t=s.sibling,r=nr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Wd(t,e){return e=Dl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ia(t,e,n,r){return r!==null&&Nd(r),bi(e,t.child,null,n),t=Wd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Qx(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Ou(Error($(422))),ia(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Dl({mode:"visible",children:r.children},i,0,null),s=Dr(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&bi(e,t.child,null,o),e.child.memoizedState=bc(o),e.memoizedState=Nc,s);if(!(e.mode&1))return ia(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var u=r.dgst;return r=u,s=Error($(419)),r=Ou(s,r,void 0),ia(t,e,o,r)}if(u=(o&t.childLanes)!==0,Rt||u){if(r=nt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Rn(t,i),sn(r,t,i,-1))}return Jd(),r=Ou(Error($(421))),ia(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=lw.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Mt=Jn(i.nextSibling),Ot=e,Re=!0,tn=null,t!==null&&(Bt[$t++]=In,Bt[$t++]=Cn,Bt[$t++]=Mr,In=t.id,Cn=t.overflow,Mr=e),e=Wd(e,r.children),e.flags|=4096,e)}function Rm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ic(t.return,e,n)}function Lu(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Jy(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(St(t,e,r.children,n),r=Ne.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Rm(t,n,e);else if(t.tag===19)Rm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Te(Ne,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Za(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Lu(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Za(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Lu(e,!0,n,null,s);break;case"together":Lu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ta(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Nn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Lr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=nr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=nr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Yx(t,e,n){switch(e.tag){case 3:Yy(e),Ni();break;case 5:Sy(e);break;case 1:bt(e.type)&&Ga(e);break;case 4:Od(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Te(Ya,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(Ne,Ne.current&1),e.flags|=128,null):n&e.child.childLanes?Xy(t,e,n):(Te(Ne,Ne.current&1),t=Nn(t,e,n),t!==null?t.sibling:null);Te(Ne,Ne.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Jy(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Te(Ne,Ne.current),r)break;return null;case 22:case 23:return e.lanes=0,Ky(t,e,n)}return Nn(t,e,n)}var Zy,Dc,ev,tv;Zy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Dc=function(){};ev=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Rr(pn.current);var s=null;switch(n){case"input":i=nc(t,i),r=nc(t,r),s=[];break;case"select":i=De({},i,{value:void 0}),r=De({},r,{value:void 0}),s=[];break;case"textarea":i=sc(t,i),r=sc(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=qa)}ac(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var u=i[h];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Hs.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var c=r[h];if(u=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&c!==u&&(c!=null||u!=null))if(h==="style")if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(s=s||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Hs.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&Ce("scroll",t),s||u===c||(s=[])):(s=s||[]).push(h,c))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};tv=function(t,e,n,r){n!==r&&(e.flags|=4)};function vs(t,e){if(!Re)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Xx(t,e,n){var r=e.pendingProps;switch(Rd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(e),null;case 1:return bt(e.type)&&Wa(),mt(e),null;case 3:return r=e.stateNode,Di(),je(Nt),je(_t),zd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(na(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,tn!==null&&(Bc(tn),tn=null))),Dc(t,e),mt(e),null;case 5:Ld(e);var i=Rr(no.current);if(n=e.type,t!==null&&e.stateNode!=null)ev(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return mt(e),null}if(t=Rr(pn.current),na(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[fn]=e,r[eo]=s,t=(e.mode&1)!==0,n){case"dialog":Ce("cancel",r),Ce("close",r);break;case"iframe":case"object":case"embed":Ce("load",r);break;case"video":case"audio":for(i=0;i<Ts.length;i++)Ce(Ts[i],r);break;case"source":Ce("error",r);break;case"img":case"image":case"link":Ce("error",r),Ce("load",r);break;case"details":Ce("toggle",r);break;case"input":zf(r,s),Ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ce("invalid",r);break;case"textarea":Bf(r,s),Ce("invalid",r)}ac(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var u=s[o];o==="children"?typeof u=="string"?r.textContent!==u&&(s.suppressHydrationWarning!==!0&&ta(r.textContent,u,t),i=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(s.suppressHydrationWarning!==!0&&ta(r.textContent,u,t),i=["children",""+u]):Hs.hasOwnProperty(o)&&u!=null&&o==="onScroll"&&Ce("scroll",r)}switch(n){case"input":Go(r),Uf(r,s,!0);break;case"textarea":Go(r),$f(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=qa)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Pg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[fn]=e,t[eo]=r,Zy(t,e,!1,!1),e.stateNode=t;e:{switch(o=lc(n,r),n){case"dialog":Ce("cancel",t),Ce("close",t),i=r;break;case"iframe":case"object":case"embed":Ce("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ts.length;i++)Ce(Ts[i],t);i=r;break;case"source":Ce("error",t),i=r;break;case"img":case"image":case"link":Ce("error",t),Ce("load",t),i=r;break;case"details":Ce("toggle",t),i=r;break;case"input":zf(t,r),i=nc(t,r),Ce("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=De({},r,{value:void 0}),Ce("invalid",t);break;case"textarea":Bf(t,r),i=sc(t,r),Ce("invalid",t);break;default:i=r}ac(n,i),u=i;for(s in u)if(u.hasOwnProperty(s)){var c=u[s];s==="style"?Ng(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&jg(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&qs(t,c):typeof c=="number"&&qs(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Hs.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Ce("scroll",t):c!=null&&gd(t,s,c,o))}switch(n){case"input":Go(t),Uf(t,r,!1);break;case"textarea":Go(t),$f(t);break;case"option":r.value!=null&&t.setAttribute("value",""+lr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?_i(t,!!r.multiple,s,!1):r.defaultValue!=null&&_i(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=qa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mt(e),null;case 6:if(t&&e.stateNode!=null)tv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=Rr(no.current),Rr(pn.current),na(e)){if(r=e.stateNode,n=e.memoizedProps,r[fn]=e,(s=r.nodeValue!==n)&&(t=Ot,t!==null))switch(t.tag){case 3:ta(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ta(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[fn]=e,e.stateNode=r}return mt(e),null;case 13:if(je(Ne),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Re&&Mt!==null&&e.mode&1&&!(e.flags&128))_y(),Ni(),e.flags|=98560,s=!1;else if(s=na(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error($(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($(317));s[fn]=e}else Ni(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mt(e),s=!1}else tn!==null&&(Bc(tn),tn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ne.current&1?Ke===0&&(Ke=3):Jd())),e.updateQueue!==null&&(e.flags|=4),mt(e),null);case 4:return Di(),Dc(t,e),t===null&&Js(e.stateNode.containerInfo),mt(e),null;case 10:return Vd(e.type._context),mt(e),null;case 17:return bt(e.type)&&Wa(),mt(e),null;case 19:if(je(Ne),s=e.memoizedState,s===null)return mt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)vs(s,!1);else{if(Ke!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Za(t),o!==null){for(e.flags|=128,vs(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(Ne,Ne.current&1|2),e.child}t=t.sibling}s.tail!==null&&Le()>Fi&&(e.flags|=128,r=!0,vs(s,!1),e.lanes=4194304)}else{if(!r)if(t=Za(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),vs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Re)return mt(e),null}else 2*Le()-s.renderingStartTime>Fi&&n!==1073741824&&(e.flags|=128,r=!0,vs(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Le(),e.sibling=null,n=Ne.current,Te(Ne,r?n&1|2:n&1),e):(mt(e),null);case 22:case 23:return Xd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ft&1073741824&&(mt(e),e.subtreeFlags&6&&(e.flags|=8192)):mt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function Jx(t,e){switch(Rd(e),e.tag){case 1:return bt(e.type)&&Wa(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Di(),je(Nt),je(_t),zd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ld(e),null;case 13:if(je(Ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));Ni()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return je(Ne),null;case 4:return Di(),null;case 10:return Vd(e.type._context),null;case 22:case 23:return Xd(),null;case 24:return null;default:return null}}var sa=!1,yt=!1,Zx=typeof WeakSet=="function"?WeakSet:Set,Q=null;function yi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Me(t,e,r)}else n.current=null}function Vc(t,e,n){try{n()}catch(r){Me(t,e,r)}}var Nm=!1;function ew(t,e){if(vc=Ba,t=oy(),Pd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,u=-1,c=-1,h=0,m=0,y=t,g=null;t:for(;;){for(var w;y!==n||i!==0&&y.nodeType!==3||(u=o+i),y!==s||r!==0&&y.nodeType!==3||(c=o+r),y.nodeType===3&&(o+=y.nodeValue.length),(w=y.firstChild)!==null;)g=y,y=w;for(;;){if(y===t)break t;if(g===n&&++h===i&&(u=o),g===s&&++m===r&&(c=o),(w=y.nextSibling)!==null)break;y=g,g=y.parentNode}y=w}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(_c={focusedElem:t,selectionRange:n},Ba=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var A=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var P=A.memoizedProps,j=A.memoizedState,k=e.stateNode,E=k.getSnapshotBeforeUpdate(e.elementType===e.type?P:Zt(e.type,P),j);k.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(b){Me(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return A=Nm,Nm=!1,A}function Fs(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Vc(e,n,s)}i=i.next}while(i!==r)}}function Nl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Fc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function nv(t){var e=t.alternate;e!==null&&(t.alternate=null,nv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[fn],delete e[eo],delete e[Ec],delete e[Fx],delete e[Mx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function rv(t){return t.tag===5||t.tag===3||t.tag===4}function bm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||rv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Mc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=qa));else if(r!==4&&(t=t.child,t!==null))for(Mc(t,e,n),t=t.sibling;t!==null;)Mc(t,e,n),t=t.sibling}function Oc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Oc(t,e,n),t=t.sibling;t!==null;)Oc(t,e,n),t=t.sibling}var it=null,en=!1;function zn(t,e,n){for(n=n.child;n!==null;)iv(t,e,n),n=n.sibling}function iv(t,e,n){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(Sl,n)}catch{}switch(n.tag){case 5:yt||yi(n,e);case 6:var r=it,i=en;it=null,zn(t,e,n),it=r,en=i,it!==null&&(en?(t=it,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):it.removeChild(n.stateNode));break;case 18:it!==null&&(en?(t=it,n=n.stateNode,t.nodeType===8?Nu(t.parentNode,n):t.nodeType===1&&Nu(t,n),Qs(t)):Nu(it,n.stateNode));break;case 4:r=it,i=en,it=n.stateNode.containerInfo,en=!0,zn(t,e,n),it=r,en=i;break;case 0:case 11:case 14:case 15:if(!yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Vc(n,e,o),i=i.next}while(i!==r)}zn(t,e,n);break;case 1:if(!yt&&(yi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Me(n,e,u)}zn(t,e,n);break;case 21:zn(t,e,n);break;case 22:n.mode&1?(yt=(r=yt)||n.memoizedState!==null,zn(t,e,n),yt=r):zn(t,e,n);break;default:zn(t,e,n)}}function Dm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Zx),e.forEach(function(r){var i=uw.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Jt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,u=o;e:for(;u!==null;){switch(u.tag){case 5:it=u.stateNode,en=!1;break e;case 3:it=u.stateNode.containerInfo,en=!0;break e;case 4:it=u.stateNode.containerInfo,en=!0;break e}u=u.return}if(it===null)throw Error($(160));iv(s,o,i),it=null,en=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(h){Me(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)sv(e,t),e=e.sibling}function sv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Jt(e,t),cn(t),r&4){try{Fs(3,t,t.return),Nl(3,t)}catch(P){Me(t,t.return,P)}try{Fs(5,t,t.return)}catch(P){Me(t,t.return,P)}}break;case 1:Jt(e,t),cn(t),r&512&&n!==null&&yi(n,n.return);break;case 5:if(Jt(e,t),cn(t),r&512&&n!==null&&yi(n,n.return),t.flags&32){var i=t.stateNode;try{qs(i,"")}catch(P){Me(t,t.return,P)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&s.type==="radio"&&s.name!=null&&Cg(i,s),lc(u,o);var h=lc(u,s);for(o=0;o<c.length;o+=2){var m=c[o],y=c[o+1];m==="style"?Ng(i,y):m==="dangerouslySetInnerHTML"?jg(i,y):m==="children"?qs(i,y):gd(i,m,y,h)}switch(u){case"input":rc(i,s);break;case"textarea":Ag(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var w=s.value;w!=null?_i(i,!!s.multiple,w,!1):g!==!!s.multiple&&(s.defaultValue!=null?_i(i,!!s.multiple,s.defaultValue,!0):_i(i,!!s.multiple,s.multiple?[]:"",!1))}i[eo]=s}catch(P){Me(t,t.return,P)}}break;case 6:if(Jt(e,t),cn(t),r&4){if(t.stateNode===null)throw Error($(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(P){Me(t,t.return,P)}}break;case 3:if(Jt(e,t),cn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Qs(e.containerInfo)}catch(P){Me(t,t.return,P)}break;case 4:Jt(e,t),cn(t);break;case 13:Jt(e,t),cn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Qd=Le())),r&4&&Dm(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(yt=(h=yt)||m,Jt(e,t),yt=h):Jt(e,t),cn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!m&&t.mode&1)for(Q=t,m=t.child;m!==null;){for(y=Q=m;Q!==null;){switch(g=Q,w=g.child,g.tag){case 0:case 11:case 14:case 15:Fs(4,g,g.return);break;case 1:yi(g,g.return);var A=g.stateNode;if(typeof A.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,A.props=e.memoizedProps,A.state=e.memoizedState,A.componentWillUnmount()}catch(P){Me(r,n,P)}}break;case 5:yi(g,g.return);break;case 22:if(g.memoizedState!==null){Fm(y);continue}}w!==null?(w.return=g,Q=w):Fm(y)}m=m.sibling}e:for(m=null,y=t;;){if(y.tag===5){if(m===null){m=y;try{i=y.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(u=y.stateNode,c=y.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=Rg("display",o))}catch(P){Me(t,t.return,P)}}}else if(y.tag===6){if(m===null)try{y.stateNode.nodeValue=h?"":y.memoizedProps}catch(P){Me(t,t.return,P)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;m===y&&(m=null),y=y.return}m===y&&(m=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Jt(e,t),cn(t),r&4&&Dm(t);break;case 21:break;default:Jt(e,t),cn(t)}}function cn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(rv(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(qs(i,""),r.flags&=-33);var s=bm(t);Oc(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,u=bm(t);Mc(t,u,o);break;default:throw Error($(161))}}catch(c){Me(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function tw(t,e,n){Q=t,ov(t)}function ov(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var i=Q,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||sa;if(!o){var u=i.alternate,c=u!==null&&u.memoizedState!==null||yt;u=sa;var h=yt;if(sa=o,(yt=c)&&!h)for(Q=i;Q!==null;)o=Q,c=o.child,o.tag===22&&o.memoizedState!==null?Mm(i):c!==null?(c.return=o,Q=c):Mm(i);for(;s!==null;)Q=s,ov(s),s=s.sibling;Q=i,sa=u,yt=h}Vm(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Q=s):Vm(t)}}function Vm(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:yt||Nl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!yt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Zt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&_m(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}_m(e,o,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var m=h.memoizedState;if(m!==null){var y=m.dehydrated;y!==null&&Qs(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}yt||e.flags&512&&Fc(e)}catch(g){Me(e,e.return,g)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Fm(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Mm(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Nl(4,e)}catch(c){Me(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Me(e,i,c)}}var s=e.return;try{Fc(e)}catch(c){Me(e,s,c)}break;case 5:var o=e.return;try{Fc(e)}catch(c){Me(e,o,c)}}}catch(c){Me(e,e.return,c)}if(e===t){Q=null;break}var u=e.sibling;if(u!==null){u.return=e.return,Q=u;break}Q=e.return}}var nw=Math.ceil,nl=Fn.ReactCurrentDispatcher,Gd=Fn.ReactCurrentOwner,Gt=Fn.ReactCurrentBatchConfig,ye=0,nt=null,Ue=null,at=0,Ft=0,vi=vr(0),Ke=0,oo=null,Lr=0,bl=0,Kd=0,Ms=null,jt=null,Qd=0,Fi=1/0,Sn=null,rl=!1,Lc=null,er=null,oa=!1,Wn=null,il=0,Os=0,zc=null,Ia=-1,Ca=0;function Tt(){return ye&6?Le():Ia!==-1?Ia:Ia=Le()}function tr(t){return t.mode&1?ye&2&&at!==0?at&-at:Lx.transition!==null?(Ca===0&&(Ca=Hg()),Ca):(t=Ee,t!==0||(t=window.event,t=t===void 0?16:Xg(t.type)),t):1}function sn(t,e,n,r){if(50<Os)throw Os=0,zc=null,Error($(185));_o(t,n,r),(!(ye&2)||t!==nt)&&(t===nt&&(!(ye&2)&&(bl|=n),Ke===4&&Hn(t,at)),Dt(t,r),n===1&&ye===0&&!(e.mode&1)&&(Fi=Le()+500,Pl&&_r()))}function Dt(t,e){var n=t.callbackNode;L1(t,e);var r=Ua(t,t===nt?at:0);if(r===0)n!==null&&Wf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Wf(n),e===1)t.tag===0?Ox(Om.bind(null,t)):gy(Om.bind(null,t)),Dx(function(){!(ye&6)&&_r()}),n=null;else{switch(qg(r)){case 1:n=wd;break;case 4:n=Bg;break;case 16:n=za;break;case 536870912:n=$g;break;default:n=za}n=mv(n,av.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function av(t,e){if(Ia=-1,Ca=0,ye&6)throw Error($(327));var n=t.callbackNode;if(Si()&&t.callbackNode!==n)return null;var r=Ua(t,t===nt?at:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=sl(t,r);else{e=r;var i=ye;ye|=2;var s=uv();(nt!==t||at!==e)&&(Sn=null,Fi=Le()+500,br(t,e));do try{sw();break}catch(u){lv(t,u)}while(!0);Dd(),nl.current=s,ye=i,Ue!==null?e=0:(nt=null,at=0,e=Ke)}if(e!==0){if(e===2&&(i=fc(t),i!==0&&(r=i,e=Uc(t,i))),e===1)throw n=oo,br(t,0),Hn(t,r),Dt(t,Le()),n;if(e===6)Hn(t,r);else{if(i=t.current.alternate,!(r&30)&&!rw(i)&&(e=sl(t,r),e===2&&(s=fc(t),s!==0&&(r=s,e=Uc(t,s))),e===1))throw n=oo,br(t,0),Hn(t,r),Dt(t,Le()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:Cr(t,jt,Sn);break;case 3:if(Hn(t,r),(r&130023424)===r&&(e=Qd+500-Le(),10<e)){if(Ua(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Tt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=wc(Cr.bind(null,t,jt,Sn),e);break}Cr(t,jt,Sn);break;case 4:if(Hn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-rn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Le()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*nw(r/1960))-r,10<r){t.timeoutHandle=wc(Cr.bind(null,t,jt,Sn),r);break}Cr(t,jt,Sn);break;case 5:Cr(t,jt,Sn);break;default:throw Error($(329))}}}return Dt(t,Le()),t.callbackNode===n?av.bind(null,t):null}function Uc(t,e){var n=Ms;return t.current.memoizedState.isDehydrated&&(br(t,e).flags|=256),t=sl(t,e),t!==2&&(e=jt,jt=n,e!==null&&Bc(e)),t}function Bc(t){jt===null?jt=t:jt.push.apply(jt,t)}function rw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!an(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Hn(t,e){for(e&=~Kd,e&=~bl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-rn(e),r=1<<n;t[n]=-1,e&=~r}}function Om(t){if(ye&6)throw Error($(327));Si();var e=Ua(t,0);if(!(e&1))return Dt(t,Le()),null;var n=sl(t,e);if(t.tag!==0&&n===2){var r=fc(t);r!==0&&(e=r,n=Uc(t,r))}if(n===1)throw n=oo,br(t,0),Hn(t,e),Dt(t,Le()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Cr(t,jt,Sn),Dt(t,Le()),null}function Yd(t,e){var n=ye;ye|=1;try{return t(e)}finally{ye=n,ye===0&&(Fi=Le()+500,Pl&&_r())}}function zr(t){Wn!==null&&Wn.tag===0&&!(ye&6)&&Si();var e=ye;ye|=1;var n=Gt.transition,r=Ee;try{if(Gt.transition=null,Ee=1,t)return t()}finally{Ee=r,Gt.transition=n,ye=e,!(ye&6)&&_r()}}function Xd(){Ft=vi.current,je(vi)}function br(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,bx(n)),Ue!==null)for(n=Ue.return;n!==null;){var r=n;switch(Rd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Wa();break;case 3:Di(),je(Nt),je(_t),zd();break;case 5:Ld(r);break;case 4:Di();break;case 13:je(Ne);break;case 19:je(Ne);break;case 10:Vd(r.type._context);break;case 22:case 23:Xd()}n=n.return}if(nt=t,Ue=t=nr(t.current,null),at=Ft=e,Ke=0,oo=null,Kd=bl=Lr=0,jt=Ms=null,jr!==null){for(e=0;e<jr.length;e++)if(n=jr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}jr=null}return t}function lv(t,e){do{var n=Ue;try{if(Dd(),ka.current=tl,el){for(var r=be.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}el=!1}if(Or=0,et=We=be=null,Vs=!1,ro=0,Gd.current=null,n===null||n.return===null){Ke=1,oo=e,Ue=null;break}e:{var s=t,o=n.return,u=n,c=e;if(e=at,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,m=u,y=m.tag;if(!(m.mode&1)&&(y===0||y===11||y===15)){var g=m.alternate;g?(m.updateQueue=g.updateQueue,m.memoizedState=g.memoizedState,m.lanes=g.lanes):(m.updateQueue=null,m.memoizedState=null)}var w=Tm(o);if(w!==null){w.flags&=-257,Im(w,o,u,s,e),w.mode&1&&Sm(s,h,e),e=w,c=h;var A=e.updateQueue;if(A===null){var P=new Set;P.add(c),e.updateQueue=P}else A.add(c);break e}else{if(!(e&1)){Sm(s,h,e),Jd();break e}c=Error($(426))}}else if(Re&&u.mode&1){var j=Tm(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),Im(j,o,u,s,e),Nd(Vi(c,u));break e}}s=c=Vi(c,u),Ke!==4&&(Ke=2),Ms===null?Ms=[s]:Ms.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var k=qy(s,c,e);vm(s,k);break e;case 1:u=c;var E=s.type,T=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(er===null||!er.has(T)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=Wy(s,u,e);vm(s,b);break e}}s=s.return}while(s!==null)}dv(n)}catch(D){e=D,Ue===n&&n!==null&&(Ue=n=n.return);continue}break}while(!0)}function uv(){var t=nl.current;return nl.current=tl,t===null?tl:t}function Jd(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),nt===null||!(Lr&268435455)&&!(bl&268435455)||Hn(nt,at)}function sl(t,e){var n=ye;ye|=2;var r=uv();(nt!==t||at!==e)&&(Sn=null,br(t,e));do try{iw();break}catch(i){lv(t,i)}while(!0);if(Dd(),ye=n,nl.current=r,Ue!==null)throw Error($(261));return nt=null,at=0,Ke}function iw(){for(;Ue!==null;)cv(Ue)}function sw(){for(;Ue!==null&&!j1();)cv(Ue)}function cv(t){var e=fv(t.alternate,t,Ft);t.memoizedProps=t.pendingProps,e===null?dv(t):Ue=e,Gd.current=null}function dv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Jx(n,e),n!==null){n.flags&=32767,Ue=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ke=6,Ue=null;return}}else if(n=Xx(n,e,Ft),n!==null){Ue=n;return}if(e=e.sibling,e!==null){Ue=e;return}Ue=e=t}while(e!==null);Ke===0&&(Ke=5)}function Cr(t,e,n){var r=Ee,i=Gt.transition;try{Gt.transition=null,Ee=1,ow(t,e,n,r)}finally{Gt.transition=i,Ee=r}return null}function ow(t,e,n,r){do Si();while(Wn!==null);if(ye&6)throw Error($(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(z1(t,s),t===nt&&(Ue=nt=null,at=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||oa||(oa=!0,mv(za,function(){return Si(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Gt.transition,Gt.transition=null;var o=Ee;Ee=1;var u=ye;ye|=4,Gd.current=null,ew(t,n),sv(n,t),Ix(_c),Ba=!!vc,_c=vc=null,t.current=n,tw(n),R1(),ye=u,Ee=o,Gt.transition=s}else t.current=n;if(oa&&(oa=!1,Wn=t,il=i),s=t.pendingLanes,s===0&&(er=null),D1(n.stateNode),Dt(t,Le()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(rl)throw rl=!1,t=Lc,Lc=null,t;return il&1&&t.tag!==0&&Si(),s=t.pendingLanes,s&1?t===zc?Os++:(Os=0,zc=t):Os=0,_r(),null}function Si(){if(Wn!==null){var t=qg(il),e=Gt.transition,n=Ee;try{if(Gt.transition=null,Ee=16>t?16:t,Wn===null)var r=!1;else{if(t=Wn,Wn=null,il=0,ye&6)throw Error($(331));var i=ye;for(ye|=4,Q=t.current;Q!==null;){var s=Q,o=s.child;if(Q.flags&16){var u=s.deletions;if(u!==null){for(var c=0;c<u.length;c++){var h=u[c];for(Q=h;Q!==null;){var m=Q;switch(m.tag){case 0:case 11:case 15:Fs(8,m,s)}var y=m.child;if(y!==null)y.return=m,Q=y;else for(;Q!==null;){m=Q;var g=m.sibling,w=m.return;if(nv(m),m===h){Q=null;break}if(g!==null){g.return=w,Q=g;break}Q=w}}}var A=s.alternate;if(A!==null){var P=A.child;if(P!==null){A.child=null;do{var j=P.sibling;P.sibling=null,P=j}while(P!==null)}}Q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Q=o;else e:for(;Q!==null;){if(s=Q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Fs(9,s,s.return)}var k=s.sibling;if(k!==null){k.return=s.return,Q=k;break e}Q=s.return}}var E=t.current;for(Q=E;Q!==null;){o=Q;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,Q=T;else e:for(o=E;Q!==null;){if(u=Q,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Nl(9,u)}}catch(D){Me(u,u.return,D)}if(u===o){Q=null;break e}var b=u.sibling;if(b!==null){b.return=u.return,Q=b;break e}Q=u.return}}if(ye=i,_r(),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(Sl,t)}catch{}r=!0}return r}finally{Ee=n,Gt.transition=e}}return!1}function Lm(t,e,n){e=Vi(n,e),e=qy(t,e,1),t=Zn(t,e,1),e=Tt(),t!==null&&(_o(t,1,e),Dt(t,e))}function Me(t,e,n){if(t.tag===3)Lm(t,t,n);else for(;e!==null;){if(e.tag===3){Lm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(er===null||!er.has(r))){t=Vi(n,t),t=Wy(e,t,1),e=Zn(e,t,1),t=Tt(),e!==null&&(_o(e,1,t),Dt(e,t));break}}e=e.return}}function aw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Tt(),t.pingedLanes|=t.suspendedLanes&n,nt===t&&(at&n)===n&&(Ke===4||Ke===3&&(at&130023424)===at&&500>Le()-Qd?br(t,0):Kd|=n),Dt(t,e)}function hv(t,e){e===0&&(t.mode&1?(e=Yo,Yo<<=1,!(Yo&130023424)&&(Yo=4194304)):e=1);var n=Tt();t=Rn(t,e),t!==null&&(_o(t,e,n),Dt(t,n))}function lw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),hv(t,n)}function uw(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),hv(t,n)}var fv;fv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Nt.current)Rt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Rt=!1,Yx(t,e,n);Rt=!!(t.flags&131072)}else Rt=!1,Re&&e.flags&1048576&&yy(e,Qa,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ta(t,e),t=e.pendingProps;var i=Ri(e,_t.current);ki(e,n),i=Bd(null,e,r,t,i,n);var s=$d();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,bt(r)?(s=!0,Ga(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Md(e),i.updater=Rl,e.stateNode=i,i._reactInternals=e,Ac(e,r,t,n),e=Rc(null,e,r,!0,s,n)):(e.tag=0,Re&&s&&jd(e),St(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ta(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=dw(r),t=Zt(r,t),i){case 0:e=jc(null,e,r,t,n);break e;case 1:e=Pm(null,e,r,t,n);break e;case 11:e=Cm(null,e,r,t,n);break e;case 14:e=Am(null,e,r,Zt(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zt(r,i),jc(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zt(r,i),Pm(t,e,r,i,n);case 3:e:{if(Yy(e),t===null)throw Error($(387));r=e.pendingProps,s=e.memoizedState,i=s.element,ky(t,e),Ja(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Vi(Error($(423)),e),e=jm(t,e,r,n,i);break e}else if(r!==i){i=Vi(Error($(424)),e),e=jm(t,e,r,n,i);break e}else for(Mt=Jn(e.stateNode.containerInfo.firstChild),Ot=e,Re=!0,tn=null,n=wy(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ni(),r===i){e=Nn(t,e,n);break e}St(t,e,r,n)}e=e.child}return e;case 5:return Sy(e),t===null&&Tc(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,xc(r,i)?o=null:s!==null&&xc(r,s)&&(e.flags|=32),Qy(t,e),St(t,e,o,n),e.child;case 6:return t===null&&Tc(e),null;case 13:return Xy(t,e,n);case 4:return Od(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=bi(e,null,r,n):St(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zt(r,i),Cm(t,e,r,i,n);case 7:return St(t,e,e.pendingProps,n),e.child;case 8:return St(t,e,e.pendingProps.children,n),e.child;case 12:return St(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Te(Ya,r._currentValue),r._currentValue=o,s!==null)if(an(s.value,o)){if(s.children===i.children&&!Nt.current){e=Nn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var u=s.dependencies;if(u!==null){o=s.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=An(-1,n&-n),c.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var m=h.pending;m===null?c.next=c:(c.next=m.next,m.next=c),h.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),Ic(s.return,n,e),u.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error($(341));o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Ic(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}St(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ki(e,n),i=Kt(i),r=r(i),e.flags|=1,St(t,e,r,n),e.child;case 14:return r=e.type,i=Zt(r,e.pendingProps),i=Zt(r.type,i),Am(t,e,r,i,n);case 15:return Gy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zt(r,i),Ta(t,e),e.tag=1,bt(r)?(t=!0,Ga(e)):t=!1,ki(e,n),Hy(e,r,i),Ac(e,r,i,n),Rc(null,e,r,!0,t,n);case 19:return Jy(t,e,n);case 22:return Ky(t,e,n)}throw Error($(156,e.tag))};function mv(t,e){return Ug(t,e)}function cw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(t,e,n,r){return new cw(t,e,n,r)}function Zd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function dw(t){if(typeof t=="function")return Zd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===vd)return 11;if(t===_d)return 14}return 2}function nr(t,e){var n=t.alternate;return n===null?(n=Wt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Aa(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Zd(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case li:return Dr(n.children,i,s,e);case yd:o=8,i|=8;break;case Ju:return t=Wt(12,n,e,i|2),t.elementType=Ju,t.lanes=s,t;case Zu:return t=Wt(13,n,e,i),t.elementType=Zu,t.lanes=s,t;case ec:return t=Wt(19,n,e,i),t.elementType=ec,t.lanes=s,t;case Sg:return Dl(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Eg:o=10;break e;case kg:o=9;break e;case vd:o=11;break e;case _d:o=14;break e;case Un:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=Wt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Dr(t,e,n,r){return t=Wt(7,t,r,e),t.lanes=n,t}function Dl(t,e,n,r){return t=Wt(22,t,r,e),t.elementType=Sg,t.lanes=n,t.stateNode={isHidden:!1},t}function zu(t,e,n){return t=Wt(6,t,null,e),t.lanes=n,t}function Uu(t,e,n){return e=Wt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function hw(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wu(0),this.expirationTimes=wu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function eh(t,e,n,r,i,s,o,u,c){return t=new hw(t,e,n,u,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Wt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Md(s),t}function fw(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ai,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function pv(t){if(!t)return ur;t=t._reactInternals;e:{if(Wr(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(bt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(bt(n))return py(t,n,e)}return e}function gv(t,e,n,r,i,s,o,u,c){return t=eh(n,r,!0,t,i,s,o,u,c),t.context=pv(null),n=t.current,r=Tt(),i=tr(n),s=An(r,i),s.callback=e??null,Zn(n,s,i),t.current.lanes=i,_o(t,i,r),Dt(t,r),t}function Vl(t,e,n,r){var i=e.current,s=Tt(),o=tr(i);return n=pv(n),e.context===null?e.context=n:e.pendingContext=n,e=An(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Zn(i,e,o),t!==null&&(sn(t,i,o,s),Ea(t,i,o)),o}function ol(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function zm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function th(t,e){zm(t,e),(t=t.alternate)&&zm(t,e)}function mw(){return null}var yv=typeof reportError=="function"?reportError:function(t){console.error(t)};function nh(t){this._internalRoot=t}Fl.prototype.render=nh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));Vl(t,e,null,null)};Fl.prototype.unmount=nh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;zr(function(){Vl(null,t,null,null)}),e[jn]=null}};function Fl(t){this._internalRoot=t}Fl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Kg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<$n.length&&e!==0&&e<$n[n].priority;n++);$n.splice(n,0,t),n===0&&Yg(t)}};function rh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ml(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Um(){}function pw(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=ol(o);s.call(h)}}var o=gv(e,r,t,0,null,!1,!1,"",Um);return t._reactRootContainer=o,t[jn]=o.current,Js(t.nodeType===8?t.parentNode:t),zr(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var u=r;r=function(){var h=ol(c);u.call(h)}}var c=eh(t,0,!1,null,null,!1,!1,"",Um);return t._reactRootContainer=c,t[jn]=c.current,Js(t.nodeType===8?t.parentNode:t),zr(function(){Vl(e,c,n,r)}),c}function Ol(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var u=i;i=function(){var c=ol(o);u.call(c)}}Vl(e,o,t,i)}else o=pw(n,e,t,i,r);return ol(o)}Wg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ss(e.pendingLanes);n!==0&&(Ed(e,n|1),Dt(e,Le()),!(ye&6)&&(Fi=Le()+500,_r()))}break;case 13:zr(function(){var r=Rn(t,1);if(r!==null){var i=Tt();sn(r,t,1,i)}}),th(t,1)}};kd=function(t){if(t.tag===13){var e=Rn(t,134217728);if(e!==null){var n=Tt();sn(e,t,134217728,n)}th(t,134217728)}};Gg=function(t){if(t.tag===13){var e=tr(t),n=Rn(t,e);if(n!==null){var r=Tt();sn(n,t,e,r)}th(t,e)}};Kg=function(){return Ee};Qg=function(t,e){var n=Ee;try{return Ee=t,e()}finally{Ee=n}};cc=function(t,e,n){switch(e){case"input":if(rc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Al(r);if(!i)throw Error($(90));Ig(r),rc(r,i)}}}break;case"textarea":Ag(t,n);break;case"select":e=n.value,e!=null&&_i(t,!!n.multiple,e,!1)}};Vg=Yd;Fg=zr;var gw={usingClientEntryPoint:!1,Events:[wo,hi,Al,bg,Dg,Yd]},_s={findFiberByHostInstance:Pr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yw={bundleType:_s.bundleType,version:_s.version,rendererPackageName:_s.rendererPackageName,rendererConfig:_s.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Lg(t),t===null?null:t.stateNode},findFiberByHostInstance:_s.findFiberByHostInstance||mw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var aa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!aa.isDisabled&&aa.supportsFiber)try{Sl=aa.inject(yw),mn=aa}catch{}}zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gw;zt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rh(e))throw Error($(200));return fw(t,e,null,n)};zt.createRoot=function(t,e){if(!rh(t))throw Error($(299));var n=!1,r="",i=yv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=eh(t,1,!1,null,null,n,!1,r,i),t[jn]=e.current,Js(t.nodeType===8?t.parentNode:t),new nh(e)};zt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=Lg(e),t=t===null?null:t.stateNode,t};zt.flushSync=function(t){return zr(t)};zt.hydrate=function(t,e,n){if(!Ml(e))throw Error($(200));return Ol(null,t,e,!0,n)};zt.hydrateRoot=function(t,e,n){if(!rh(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=yv;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=gv(e,null,t,1,n??null,i,!1,s,o),t[jn]=e.current,Js(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Fl(e)};zt.render=function(t,e,n){if(!Ml(e))throw Error($(200));return Ol(null,t,e,!1,n)};zt.unmountComponentAtNode=function(t){if(!Ml(t))throw Error($(40));return t._reactRootContainer?(zr(function(){Ol(null,null,t,!1,function(){t._reactRootContainer=null,t[jn]=null})}),!0):!1};zt.unstable_batchedUpdates=Yd;zt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ml(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return Ol(t,e,n,!1,r)};zt.version="18.3.1-next-f1338f8080-20240426";function vv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vv)}catch(t){console.error(t)}}vv(),vg.exports=zt;var vw=vg.exports,Bm=vw;Yu.createRoot=Bm.createRoot,Yu.hydrateRoot=Bm.hydrateRoot;const _w=()=>{};var $m={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},xw=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],u=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},xv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,u=o?t[i+1]:0,c=i+2<t.length,h=c?t[i+2]:0,m=s>>2,y=(s&3)<<4|u>>4;let g=(u&15)<<2|h>>6,w=h&63;c||(w=64,o||(g=64)),r.push(n[m],n[y],n[g],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(_v(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):xw(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],u=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const y=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||u==null||h==null||y==null)throw new ww;const g=s<<2|u>>4;if(r.push(g),h!==64){const w=u<<4&240|h>>2;if(r.push(w),y!==64){const A=h<<6&192|y;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ww extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ew=function(t){const e=_v(t);return xv.encodeByteArray(e,!0)},al=function(t){return Ew(t).replace(/\./g,"")},kw=function(t){try{return xv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw=()=>Sw().__FIREBASE_DEFAULTS__,Iw=()=>{if(typeof process>"u"||typeof $m>"u")return;const t=$m.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Cw=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&kw(t[1]);return e&&JSON.parse(e)},ih=()=>{try{return _w()||Tw()||Iw()||Cw()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Aw=t=>{var e,n;return(n=(e=ih())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Pw=t=>{const e=Aw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},wv=()=>{var t;return(t=ih())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sh(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Rw(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[al(JSON.stringify(n)),al(JSON.stringify(o)),""].join(".")}const Ls={};function bw(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ls))Ls[e]?t.emulator.push(e):t.prod.push(e);return t}function Dw(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Hm=!1;function Vw(t,e){if(typeof window>"u"||typeof document>"u"||!sh(window.location.host)||Ls[t]===e||Ls[t]||Hm)return;Ls[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",s=bw().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function u(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,w){g.setAttribute("width","24"),g.setAttribute("id",w),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function h(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Hm=!0,o()},g}function m(g,w){g.setAttribute("id",w),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function y(){const g=Dw(r),w=n("text"),A=document.getElementById(w)||document.createElement("span"),P=n("learnmore"),j=document.getElementById(P)||document.createElement("a"),k=n("preprendIcon"),E=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const T=g.element;u(T),m(j,P);const b=h();c(E,k),T.append(E,A,j,b),document.body.appendChild(T)}s?(A.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Mw(){var t;const e=(t=ih())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ow(){return!Mw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Lw(){try{return typeof indexedDB=="object"}catch{return!1}}function zw(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw="FirebaseError";class Wi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Uw,Object.setPrototypeOf(this,Wi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ev.prototype.create)}}class Ev{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Bw(s,r):"Error",u=`${this.serviceName}: ${o} (${i}).`;return new Wi(i,u,r)}}function Bw(t,e){return t.replace($w,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const $w=/\{\$([^}]+)}/g;function ll(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(qm(s)&&qm(o)){if(!ll(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function qm(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ao(t){return t&&t._delegate?t._delegate:t}class lo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new jw;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ww(e))try{this.getOrInitializeService({instanceIdentifier:Ar})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ar){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ar){return this.instances.has(e)}getOptions(e=Ar){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(s);r===u&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qw(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ar){return this.component?this.component.multipleInstances?e:Ar:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qw(t){return t===Ar?void 0:t}function Ww(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Hw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pe||(pe={}));const Kw={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},Qw=pe.INFO,Yw={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},Xw=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Yw[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class kv{constructor(e){this.name=e,this._logLevel=Qw,this._logHandler=Xw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Kw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}const Jw=(t,e)=>e.some(n=>t instanceof n);let Wm,Gm;function Zw(){return Wm||(Wm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eE(){return Gm||(Gm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Sv=new WeakMap,$c=new WeakMap,Tv=new WeakMap,Bu=new WeakMap,oh=new WeakMap;function tE(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(rr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Sv.set(n,t)}).catch(()=>{}),oh.set(e,t),e}function nE(t){if($c.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});$c.set(t,e)}let Hc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return $c.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Tv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return rr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function rE(t){Hc=t(Hc)}function iE(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call($u(this),e,...n);return Tv.set(r,e.sort?e.sort():[e]),rr(r)}:eE().includes(t)?function(...e){return t.apply($u(this),e),rr(Sv.get(this))}:function(...e){return rr(t.apply($u(this),e))}}function sE(t){return typeof t=="function"?iE(t):(t instanceof IDBTransaction&&nE(t),Jw(t,Zw())?new Proxy(t,Hc):t)}function rr(t){if(t instanceof IDBRequest)return tE(t);if(Bu.has(t))return Bu.get(t);const e=sE(t);return e!==t&&(Bu.set(t,e),oh.set(e,t)),e}const $u=t=>oh.get(t);function oE(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),u=rr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(rr(o.result),c.oldVersion,c.newVersion,rr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const aE=["get","getKey","getAll","getAllKeys","count"],lE=["put","add","delete","clear"],Hu=new Map;function Km(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Hu.get(e))return Hu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=lE.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||aE.includes(n)))return;const s=async function(o,...u){const c=this.transaction(o,i?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[n](...u),i&&c.done]))[0]};return Hu.set(e,s),s}rE(t=>({...t,get:(e,n,r)=>Km(e,n)||t.get(e,n,r),has:(e,n)=>!!Km(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(cE(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function cE(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qc="@firebase/app",Qm="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bn=new kv("@firebase/app"),dE="@firebase/app-compat",hE="@firebase/analytics-compat",fE="@firebase/analytics",mE="@firebase/app-check-compat",pE="@firebase/app-check",gE="@firebase/auth",yE="@firebase/auth-compat",vE="@firebase/database",_E="@firebase/data-connect",xE="@firebase/database-compat",wE="@firebase/functions",EE="@firebase/functions-compat",kE="@firebase/installations",SE="@firebase/installations-compat",TE="@firebase/messaging",IE="@firebase/messaging-compat",CE="@firebase/performance",AE="@firebase/performance-compat",PE="@firebase/remote-config",jE="@firebase/remote-config-compat",RE="@firebase/storage",NE="@firebase/storage-compat",bE="@firebase/firestore",DE="@firebase/ai",VE="@firebase/firestore-compat",FE="firebase",ME="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc="[DEFAULT]",OE={[qc]:"fire-core",[dE]:"fire-core-compat",[fE]:"fire-analytics",[hE]:"fire-analytics-compat",[pE]:"fire-app-check",[mE]:"fire-app-check-compat",[gE]:"fire-auth",[yE]:"fire-auth-compat",[vE]:"fire-rtdb",[_E]:"fire-data-connect",[xE]:"fire-rtdb-compat",[wE]:"fire-fn",[EE]:"fire-fn-compat",[kE]:"fire-iid",[SE]:"fire-iid-compat",[TE]:"fire-fcm",[IE]:"fire-fcm-compat",[CE]:"fire-perf",[AE]:"fire-perf-compat",[PE]:"fire-rc",[jE]:"fire-rc-compat",[RE]:"fire-gcs",[NE]:"fire-gcs-compat",[bE]:"fire-fst",[VE]:"fire-fst-compat",[DE]:"fire-vertex","fire-js":"fire-js",[FE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo=new Map,LE=new Map,Gc=new Map;function Ym(t,e){try{t.container.addComponent(e)}catch(n){bn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ul(t){const e=t.name;if(Gc.has(e))return bn.debug(`There were multiple attempts to register component ${e}.`),!1;Gc.set(e,t);for(const n of uo.values())Ym(n,t);for(const n of LE.values())Ym(n,t);return!0}function zE(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function UE(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ir=new Ev("app","Firebase",BE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new lo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ir.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE=ME;function Iv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Wc,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw ir.create("bad-app-name",{appName:String(i)});if(n||(n=wv()),!n)throw ir.create("no-options");const s=uo.get(i);if(s){if(ll(n,s.options)&&ll(r,s.config))return s;throw ir.create("duplicate-app",{appName:i})}const o=new Gw(i);for(const c of Gc.values())o.addComponent(c);const u=new $E(n,r,o);return uo.set(i,u),u}function qE(t=Wc){const e=uo.get(t);if(!e&&t===Wc&&wv())return Iv();if(!e)throw ir.create("no-app",{appName:t});return e}function Xm(){return Array.from(uo.values())}function Ti(t,e,n){var r;let i=(r=OE[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const u=[`Unable to register library "${i}" with version "${e}":`];s&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bn.warn(u.join(" "));return}ul(new lo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE="firebase-heartbeat-database",GE=1,co="firebase-heartbeat-store";let qu=null;function Cv(){return qu||(qu=oE(WE,GE,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(co)}catch(n){console.warn(n)}}}}).catch(t=>{throw ir.create("idb-open",{originalErrorMessage:t.message})})),qu}async function KE(t){try{const n=(await Cv()).transaction(co),r=await n.objectStore(co).get(Av(t));return await n.done,r}catch(e){if(e instanceof Wi)bn.warn(e.message);else{const n=ir.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});bn.warn(n.message)}}}async function Jm(t,e){try{const r=(await Cv()).transaction(co,"readwrite");await r.objectStore(co).put(e,Av(t)),await r.done}catch(n){if(n instanceof Wi)bn.warn(n.message);else{const r=ir.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});bn.warn(r.message)}}}function Av(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE=1024,YE=30;class XE{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ZE(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Zm();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>YE){const o=ek(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){bn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Zm(),{heartbeatsToSend:r,unsentEntries:i}=JE(this._heartbeatsCache.heartbeats),s=al(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return bn.warn(n),""}}}function Zm(){return new Date().toISOString().substring(0,10)}function JE(t,e=QE){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),ep(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ep(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class ZE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Lw()?zw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await KE(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Jm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Jm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function ep(t){return al(JSON.stringify({version:2,heartbeats:t})).length}function ek(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(t){ul(new lo("platform-logger",e=>new uE(e),"PRIVATE")),ul(new lo("heartbeat",e=>new XE(e),"PRIVATE")),Ti(qc,Qm,t),Ti(qc,Qm,"esm2017"),Ti("fire-js","")}tk("");var nk="firebase",rk="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ti(nk,rk,"app");var tp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sr,Pv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,p){function _(){}_.prototype=p.prototype,v.D=p.prototype,v.prototype=new _,v.prototype.constructor=v,v.C=function(S,I,R){for(var C=Array(arguments.length-2),H=2;H<arguments.length;H++)C[H-2]=arguments[H];return p.prototype[I].apply(S,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(v,p,_){_||(_=0);var S=Array(16);if(typeof p=="string")for(var I=0;16>I;++I)S[I]=p.charCodeAt(_++)|p.charCodeAt(_++)<<8|p.charCodeAt(_++)<<16|p.charCodeAt(_++)<<24;else for(I=0;16>I;++I)S[I]=p[_++]|p[_++]<<8|p[_++]<<16|p[_++]<<24;p=v.g[0],_=v.g[1],I=v.g[2];var R=v.g[3],C=p+(R^_&(I^R))+S[0]+3614090360&4294967295;p=_+(C<<7&4294967295|C>>>25),C=R+(I^p&(_^I))+S[1]+3905402710&4294967295,R=p+(C<<12&4294967295|C>>>20),C=I+(_^R&(p^_))+S[2]+606105819&4294967295,I=R+(C<<17&4294967295|C>>>15),C=_+(p^I&(R^p))+S[3]+3250441966&4294967295,_=I+(C<<22&4294967295|C>>>10),C=p+(R^_&(I^R))+S[4]+4118548399&4294967295,p=_+(C<<7&4294967295|C>>>25),C=R+(I^p&(_^I))+S[5]+1200080426&4294967295,R=p+(C<<12&4294967295|C>>>20),C=I+(_^R&(p^_))+S[6]+2821735955&4294967295,I=R+(C<<17&4294967295|C>>>15),C=_+(p^I&(R^p))+S[7]+4249261313&4294967295,_=I+(C<<22&4294967295|C>>>10),C=p+(R^_&(I^R))+S[8]+1770035416&4294967295,p=_+(C<<7&4294967295|C>>>25),C=R+(I^p&(_^I))+S[9]+2336552879&4294967295,R=p+(C<<12&4294967295|C>>>20),C=I+(_^R&(p^_))+S[10]+4294925233&4294967295,I=R+(C<<17&4294967295|C>>>15),C=_+(p^I&(R^p))+S[11]+2304563134&4294967295,_=I+(C<<22&4294967295|C>>>10),C=p+(R^_&(I^R))+S[12]+1804603682&4294967295,p=_+(C<<7&4294967295|C>>>25),C=R+(I^p&(_^I))+S[13]+4254626195&4294967295,R=p+(C<<12&4294967295|C>>>20),C=I+(_^R&(p^_))+S[14]+2792965006&4294967295,I=R+(C<<17&4294967295|C>>>15),C=_+(p^I&(R^p))+S[15]+1236535329&4294967295,_=I+(C<<22&4294967295|C>>>10),C=p+(I^R&(_^I))+S[1]+4129170786&4294967295,p=_+(C<<5&4294967295|C>>>27),C=R+(_^I&(p^_))+S[6]+3225465664&4294967295,R=p+(C<<9&4294967295|C>>>23),C=I+(p^_&(R^p))+S[11]+643717713&4294967295,I=R+(C<<14&4294967295|C>>>18),C=_+(R^p&(I^R))+S[0]+3921069994&4294967295,_=I+(C<<20&4294967295|C>>>12),C=p+(I^R&(_^I))+S[5]+3593408605&4294967295,p=_+(C<<5&4294967295|C>>>27),C=R+(_^I&(p^_))+S[10]+38016083&4294967295,R=p+(C<<9&4294967295|C>>>23),C=I+(p^_&(R^p))+S[15]+3634488961&4294967295,I=R+(C<<14&4294967295|C>>>18),C=_+(R^p&(I^R))+S[4]+3889429448&4294967295,_=I+(C<<20&4294967295|C>>>12),C=p+(I^R&(_^I))+S[9]+568446438&4294967295,p=_+(C<<5&4294967295|C>>>27),C=R+(_^I&(p^_))+S[14]+3275163606&4294967295,R=p+(C<<9&4294967295|C>>>23),C=I+(p^_&(R^p))+S[3]+4107603335&4294967295,I=R+(C<<14&4294967295|C>>>18),C=_+(R^p&(I^R))+S[8]+1163531501&4294967295,_=I+(C<<20&4294967295|C>>>12),C=p+(I^R&(_^I))+S[13]+2850285829&4294967295,p=_+(C<<5&4294967295|C>>>27),C=R+(_^I&(p^_))+S[2]+4243563512&4294967295,R=p+(C<<9&4294967295|C>>>23),C=I+(p^_&(R^p))+S[7]+1735328473&4294967295,I=R+(C<<14&4294967295|C>>>18),C=_+(R^p&(I^R))+S[12]+2368359562&4294967295,_=I+(C<<20&4294967295|C>>>12),C=p+(_^I^R)+S[5]+4294588738&4294967295,p=_+(C<<4&4294967295|C>>>28),C=R+(p^_^I)+S[8]+2272392833&4294967295,R=p+(C<<11&4294967295|C>>>21),C=I+(R^p^_)+S[11]+1839030562&4294967295,I=R+(C<<16&4294967295|C>>>16),C=_+(I^R^p)+S[14]+4259657740&4294967295,_=I+(C<<23&4294967295|C>>>9),C=p+(_^I^R)+S[1]+2763975236&4294967295,p=_+(C<<4&4294967295|C>>>28),C=R+(p^_^I)+S[4]+1272893353&4294967295,R=p+(C<<11&4294967295|C>>>21),C=I+(R^p^_)+S[7]+4139469664&4294967295,I=R+(C<<16&4294967295|C>>>16),C=_+(I^R^p)+S[10]+3200236656&4294967295,_=I+(C<<23&4294967295|C>>>9),C=p+(_^I^R)+S[13]+681279174&4294967295,p=_+(C<<4&4294967295|C>>>28),C=R+(p^_^I)+S[0]+3936430074&4294967295,R=p+(C<<11&4294967295|C>>>21),C=I+(R^p^_)+S[3]+3572445317&4294967295,I=R+(C<<16&4294967295|C>>>16),C=_+(I^R^p)+S[6]+76029189&4294967295,_=I+(C<<23&4294967295|C>>>9),C=p+(_^I^R)+S[9]+3654602809&4294967295,p=_+(C<<4&4294967295|C>>>28),C=R+(p^_^I)+S[12]+3873151461&4294967295,R=p+(C<<11&4294967295|C>>>21),C=I+(R^p^_)+S[15]+530742520&4294967295,I=R+(C<<16&4294967295|C>>>16),C=_+(I^R^p)+S[2]+3299628645&4294967295,_=I+(C<<23&4294967295|C>>>9),C=p+(I^(_|~R))+S[0]+4096336452&4294967295,p=_+(C<<6&4294967295|C>>>26),C=R+(_^(p|~I))+S[7]+1126891415&4294967295,R=p+(C<<10&4294967295|C>>>22),C=I+(p^(R|~_))+S[14]+2878612391&4294967295,I=R+(C<<15&4294967295|C>>>17),C=_+(R^(I|~p))+S[5]+4237533241&4294967295,_=I+(C<<21&4294967295|C>>>11),C=p+(I^(_|~R))+S[12]+1700485571&4294967295,p=_+(C<<6&4294967295|C>>>26),C=R+(_^(p|~I))+S[3]+2399980690&4294967295,R=p+(C<<10&4294967295|C>>>22),C=I+(p^(R|~_))+S[10]+4293915773&4294967295,I=R+(C<<15&4294967295|C>>>17),C=_+(R^(I|~p))+S[1]+2240044497&4294967295,_=I+(C<<21&4294967295|C>>>11),C=p+(I^(_|~R))+S[8]+1873313359&4294967295,p=_+(C<<6&4294967295|C>>>26),C=R+(_^(p|~I))+S[15]+4264355552&4294967295,R=p+(C<<10&4294967295|C>>>22),C=I+(p^(R|~_))+S[6]+2734768916&4294967295,I=R+(C<<15&4294967295|C>>>17),C=_+(R^(I|~p))+S[13]+1309151649&4294967295,_=I+(C<<21&4294967295|C>>>11),C=p+(I^(_|~R))+S[4]+4149444226&4294967295,p=_+(C<<6&4294967295|C>>>26),C=R+(_^(p|~I))+S[11]+3174756917&4294967295,R=p+(C<<10&4294967295|C>>>22),C=I+(p^(R|~_))+S[2]+718787259&4294967295,I=R+(C<<15&4294967295|C>>>17),C=_+(R^(I|~p))+S[9]+3951481745&4294967295,v.g[0]=v.g[0]+p&4294967295,v.g[1]=v.g[1]+(I+(C<<21&4294967295|C>>>11))&4294967295,v.g[2]=v.g[2]+I&4294967295,v.g[3]=v.g[3]+R&4294967295}r.prototype.u=function(v,p){p===void 0&&(p=v.length);for(var _=p-this.blockSize,S=this.B,I=this.h,R=0;R<p;){if(I==0)for(;R<=_;)i(this,v,R),R+=this.blockSize;if(typeof v=="string"){for(;R<p;)if(S[I++]=v.charCodeAt(R++),I==this.blockSize){i(this,S),I=0;break}}else for(;R<p;)if(S[I++]=v[R++],I==this.blockSize){i(this,S),I=0;break}}this.h=I,this.o+=p},r.prototype.v=function(){var v=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);v[0]=128;for(var p=1;p<v.length-8;++p)v[p]=0;var _=8*this.o;for(p=v.length-8;p<v.length;++p)v[p]=_&255,_/=256;for(this.u(v),v=Array(16),p=_=0;4>p;++p)for(var S=0;32>S;S+=8)v[_++]=this.g[p]>>>S&255;return v};function s(v,p){var _=u;return Object.prototype.hasOwnProperty.call(_,v)?_[v]:_[v]=p(v)}function o(v,p){this.h=p;for(var _=[],S=!0,I=v.length-1;0<=I;I--){var R=v[I]|0;S&&R==p||(_[I]=R,S=!1)}this.g=_}var u={};function c(v){return-128<=v&&128>v?s(v,function(p){return new o([p|0],0>p?-1:0)}):new o([v|0],0>v?-1:0)}function h(v){if(isNaN(v)||!isFinite(v))return y;if(0>v)return j(h(-v));for(var p=[],_=1,S=0;v>=_;S++)p[S]=v/_|0,_*=4294967296;return new o(p,0)}function m(v,p){if(v.length==0)throw Error("number format error: empty string");if(p=p||10,2>p||36<p)throw Error("radix out of range: "+p);if(v.charAt(0)=="-")return j(m(v.substring(1),p));if(0<=v.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=h(Math.pow(p,8)),S=y,I=0;I<v.length;I+=8){var R=Math.min(8,v.length-I),C=parseInt(v.substring(I,I+R),p);8>R?(R=h(Math.pow(p,R)),S=S.j(R).add(h(C))):(S=S.j(_),S=S.add(h(C)))}return S}var y=c(0),g=c(1),w=c(16777216);t=o.prototype,t.m=function(){if(P(this))return-j(this).m();for(var v=0,p=1,_=0;_<this.g.length;_++){var S=this.i(_);v+=(0<=S?S:4294967296+S)*p,p*=4294967296}return v},t.toString=function(v){if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(A(this))return"0";if(P(this))return"-"+j(this).toString(v);for(var p=h(Math.pow(v,6)),_=this,S="";;){var I=b(_,p).g;_=k(_,I.j(p));var R=((0<_.g.length?_.g[0]:_.h)>>>0).toString(v);if(_=I,A(_))return R+S;for(;6>R.length;)R="0"+R;S=R+S}},t.i=function(v){return 0>v?0:v<this.g.length?this.g[v]:this.h};function A(v){if(v.h!=0)return!1;for(var p=0;p<v.g.length;p++)if(v.g[p]!=0)return!1;return!0}function P(v){return v.h==-1}t.l=function(v){return v=k(this,v),P(v)?-1:A(v)?0:1};function j(v){for(var p=v.g.length,_=[],S=0;S<p;S++)_[S]=~v.g[S];return new o(_,~v.h).add(g)}t.abs=function(){return P(this)?j(this):this},t.add=function(v){for(var p=Math.max(this.g.length,v.g.length),_=[],S=0,I=0;I<=p;I++){var R=S+(this.i(I)&65535)+(v.i(I)&65535),C=(R>>>16)+(this.i(I)>>>16)+(v.i(I)>>>16);S=C>>>16,R&=65535,C&=65535,_[I]=C<<16|R}return new o(_,_[_.length-1]&-2147483648?-1:0)};function k(v,p){return v.add(j(p))}t.j=function(v){if(A(this)||A(v))return y;if(P(this))return P(v)?j(this).j(j(v)):j(j(this).j(v));if(P(v))return j(this.j(j(v)));if(0>this.l(w)&&0>v.l(w))return h(this.m()*v.m());for(var p=this.g.length+v.g.length,_=[],S=0;S<2*p;S++)_[S]=0;for(S=0;S<this.g.length;S++)for(var I=0;I<v.g.length;I++){var R=this.i(S)>>>16,C=this.i(S)&65535,H=v.i(I)>>>16,ie=v.i(I)&65535;_[2*S+2*I]+=C*ie,E(_,2*S+2*I),_[2*S+2*I+1]+=R*ie,E(_,2*S+2*I+1),_[2*S+2*I+1]+=C*H,E(_,2*S+2*I+1),_[2*S+2*I+2]+=R*H,E(_,2*S+2*I+2)}for(S=0;S<p;S++)_[S]=_[2*S+1]<<16|_[2*S];for(S=p;S<2*p;S++)_[S]=0;return new o(_,0)};function E(v,p){for(;(v[p]&65535)!=v[p];)v[p+1]+=v[p]>>>16,v[p]&=65535,p++}function T(v,p){this.g=v,this.h=p}function b(v,p){if(A(p))throw Error("division by zero");if(A(v))return new T(y,y);if(P(v))return p=b(j(v),p),new T(j(p.g),j(p.h));if(P(p))return p=b(v,j(p)),new T(j(p.g),p.h);if(30<v.g.length){if(P(v)||P(p))throw Error("slowDivide_ only works with positive integers.");for(var _=g,S=p;0>=S.l(v);)_=D(_),S=D(S);var I=F(_,1),R=F(S,1);for(S=F(S,2),_=F(_,2);!A(S);){var C=R.add(S);0>=C.l(v)&&(I=I.add(_),R=C),S=F(S,1),_=F(_,1)}return p=k(v,I.j(p)),new T(I,p)}for(I=y;0<=v.l(p);){for(_=Math.max(1,Math.floor(v.m()/p.m())),S=Math.ceil(Math.log(_)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),R=h(_),C=R.j(p);P(C)||0<C.l(v);)_-=S,R=h(_),C=R.j(p);A(R)&&(R=g),I=I.add(R),v=k(v,C)}return new T(I,v)}t.A=function(v){return b(this,v).h},t.and=function(v){for(var p=Math.max(this.g.length,v.g.length),_=[],S=0;S<p;S++)_[S]=this.i(S)&v.i(S);return new o(_,this.h&v.h)},t.or=function(v){for(var p=Math.max(this.g.length,v.g.length),_=[],S=0;S<p;S++)_[S]=this.i(S)|v.i(S);return new o(_,this.h|v.h)},t.xor=function(v){for(var p=Math.max(this.g.length,v.g.length),_=[],S=0;S<p;S++)_[S]=this.i(S)^v.i(S);return new o(_,this.h^v.h)};function D(v){for(var p=v.g.length+1,_=[],S=0;S<p;S++)_[S]=v.i(S)<<1|v.i(S-1)>>>31;return new o(_,v.h)}function F(v,p){var _=p>>5;p%=32;for(var S=v.g.length-_,I=[],R=0;R<S;R++)I[R]=0<p?v.i(R+_)>>>p|v.i(R+_+1)<<32-p:v.i(R+_);return new o(I,v.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Pv=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=m,sr=o}).apply(typeof tp<"u"?tp:typeof self<"u"?self:typeof window<"u"?window:{});var la=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jv,Is,Rv,Pa,Kc,Nv,bv,Dv;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof la=="object"&&la];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var f=r;a=a.split(".");for(var x=0;x<a.length-1;x++){var V=a[x];if(!(V in f))break e;f=f[V]}a=a[a.length-1],x=f[a],d=d(x),d!=x&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function s(a,d){a instanceof String&&(a+="");var f=0,x=!1,V={next:function(){if(!x&&f<a.length){var M=f++;return{value:d(M,a[M]),done:!1}}return x=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}i("Array.prototype.values",function(a){return a||function(){return s(this,function(d,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},u=this||self;function c(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function h(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function m(a,d,f){return a.call.apply(a.bind,arguments)}function y(a,d,f){if(!a)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,x),a.apply(d,V)}}return function(){return a.apply(d,arguments)}}function g(a,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:y,g.apply(null,arguments)}function w(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var x=f.slice();return x.push.apply(x,arguments),a.apply(this,x)}}function A(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(x,V,M){for(var G=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)G[ke-2]=arguments[ke];return d.prototype[V].apply(x,G)}}function P(a){const d=a.length;if(0<d){const f=Array(d);for(let x=0;x<d;x++)f[x]=a[x];return f}return[]}function j(a,d){for(let f=1;f<arguments.length;f++){const x=arguments[f];if(c(x)){const V=a.length||0,M=x.length||0;a.length=V+M;for(let G=0;G<M;G++)a[V+G]=x[G]}else a.push(x)}}class k{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function E(a){return/^[\s\xa0]*$/.test(a)}function T(){var a=u.navigator;return a&&(a=a.userAgent)?a:""}function b(a){return b[" "](a),a}b[" "]=function(){};var D=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function F(a,d,f){for(const x in a)d.call(f,a[x],x,a)}function v(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function p(a){const d={};for(const f in a)d[f]=a[f];return d}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(a,d){let f,x;for(let V=1;V<arguments.length;V++){x=arguments[V];for(f in x)a[f]=x[f];for(let M=0;M<_.length;M++)f=_[M],Object.prototype.hasOwnProperty.call(x,f)&&(a[f]=x[f])}}function I(a){var d=1;a=a.split(":");const f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function R(a){u.setTimeout(()=>{throw a},0)}function C(){var a=J;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class H{constructor(){this.h=this.g=null}add(d,f){const x=ie.get();x.set(d,f),this.h?this.h.next=x:this.g=x,this.h=x}}var ie=new k(()=>new fe,a=>a.reset());class fe{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,U=!1,J=new H,se=()=>{const a=u.Promise.resolve(void 0);ue=()=>{a.then(we)}};var we=()=>{for(var a;a=C();){try{a.h.call(a.g)}catch(f){R(f)}var d=ie;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}U=!1};function ve(){this.s=this.s,this.C=this.C}ve.prototype.s=!1,ve.prototype.ma=function(){this.s||(this.s=!0,this.N())},ve.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Se(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var At=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};u.addEventListener("test",f,d),u.removeEventListener("test",f,d)}catch{}return a}();function xt(a,d){if(Se.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,x=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(D){e:{try{b(d.nodeName);var V=!0;break e}catch{}V=!1}V||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:q[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&xt.aa.h.call(this)}}A(xt,Se);var q={2:"touch",3:"pen",4:"mouse"};xt.prototype.h=function(){xt.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var ge="closure_listenable_"+(1e6*Math.random()|0),xr=0;function N(a,d,f,x,V){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!x,this.ha=V,this.key=++xr,this.da=this.fa=!1}function O(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function W(a){this.src=a,this.g={},this.h=0}W.prototype.add=function(a,d,f,x,V){var M=a.toString();a=this.g[M],a||(a=this.g[M]=[],this.h++);var G=Y(a,d,x,V);return-1<G?(d=a[G],f||(d.fa=!1)):(d=new N(d,this.src,M,!!x,V),d.fa=f,a.push(d)),d};function ee(a,d){var f=d.type;if(f in a.g){var x=a.g[f],V=Array.prototype.indexOf.call(x,d,void 0),M;(M=0<=V)&&Array.prototype.splice.call(x,V,1),M&&(O(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Y(a,d,f,x){for(var V=0;V<a.length;++V){var M=a[V];if(!M.da&&M.listener==d&&M.capture==!!f&&M.ha==x)return V}return-1}var ne="closure_lm_"+(1e6*Math.random()|0),le={};function $e(a,d,f,x,V){if(Array.isArray(d)){for(var M=0;M<d.length;M++)$e(a,d[M],f,x,V);return null}return f=Mh(f),a&&a[ge]?a.K(d,f,h(x)?!!x.capture:!1,V):Je(a,d,f,!1,x,V)}function Je(a,d,f,x,V,M){if(!d)throw Error("Invalid event type");var G=h(V)?!!V.capture:!!V,ke=un(a);if(ke||(a[ne]=ke=new W(a)),f=ke.add(d,f,x,G,M),f.proxy)return f;if(x=Yt(),f.proxy=x,x.src=a,x.listener=f,a.addEventListener)At||(V=G),V===void 0&&(V=!1),a.addEventListener(d.toString(),x,V);else if(a.attachEvent)a.attachEvent(ln(d.toString()),x);else if(a.addListener&&a.removeListener)a.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Yt(){function a(f){return d.call(a.src,a.listener,f)}const d=wr;return a}function He(a,d,f,x,V){if(Array.isArray(d))for(var M=0;M<d.length;M++)He(a,d[M],f,x,V);else x=h(x)?!!x.capture:!!x,f=Mh(f),a&&a[ge]?(a=a.i,d=String(d).toString(),d in a.g&&(M=a.g[d],f=Y(M,f,x,V),-1<f&&(O(M[f]),Array.prototype.splice.call(M,f,1),M.length==0&&(delete a.g[d],a.h--)))):a&&(a=un(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Y(d,f,x,V)),(f=-1<a?d[a]:null)&&wt(f))}function wt(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[ge])ee(d.i,a);else{var f=a.type,x=a.proxy;d.removeEventListener?d.removeEventListener(f,x,a.capture):d.detachEvent?d.detachEvent(ln(f),x):d.addListener&&d.removeListener&&d.removeListener(x),(f=un(d))?(ee(f,a),f.h==0&&(f.src=null,d[ne]=null)):O(a)}}}function ln(a){return a in le?le[a]:le[a]="on"+a}function wr(a,d){if(a.da)a=!0;else{d=new xt(d,this);var f=a.listener,x=a.ha||a.src;a.fa&&wt(a),a=f.call(x,d)}return a}function un(a){return a=a[ne],a instanceof W?a:null}var Ji="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mh(a){return typeof a=="function"?a:(a[Ji]||(a[Ji]=function(d){return a.handleEvent(d)}),a[Ji])}function ct(){ve.call(this),this.i=new W(this),this.M=this,this.F=null}A(ct,ve),ct.prototype[ge]=!0,ct.prototype.removeEventListener=function(a,d,f,x){He(this,a,d,f,x)};function Et(a,d){var f,x=a.F;if(x)for(f=[];x;x=x.F)f.push(x);if(a=a.M,x=d.type||d,typeof d=="string")d=new Se(d,a);else if(d instanceof Se)d.target=d.target||a;else{var V=d;d=new Se(x,a),S(d,V)}if(V=!0,f)for(var M=f.length-1;0<=M;M--){var G=d.g=f[M];V=Po(G,x,!0,d)&&V}if(G=d.g=a,V=Po(G,x,!0,d)&&V,V=Po(G,x,!1,d)&&V,f)for(M=0;M<f.length;M++)G=d.g=f[M],V=Po(G,x,!1,d)&&V}ct.prototype.N=function(){if(ct.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],x=0;x<f.length;x++)O(f[x]);delete a.g[d],a.h--}}this.F=null},ct.prototype.K=function(a,d,f,x){return this.i.add(String(a),d,!1,f,x)},ct.prototype.L=function(a,d,f,x){return this.i.add(String(a),d,!0,f,x)};function Po(a,d,f,x){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var V=!0,M=0;M<d.length;++M){var G=d[M];if(G&&!G.da&&G.capture==f){var ke=G.listener,rt=G.ha||G.src;G.fa&&ee(a.i,G),V=ke.call(rt,x)!==!1&&V}}return V&&!x.defaultPrevented}function Oh(a,d,f){if(typeof a=="function")f&&(a=g(a,f));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:u.setTimeout(a,d||0)}function Lh(a){a.g=Oh(()=>{a.g=null,a.i&&(a.i=!1,Lh(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class __ extends ve{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Lh(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zi(a){ve.call(this),this.h=a,this.g={}}A(Zi,ve);var zh=[];function Uh(a){F(a.g,function(d,f){this.g.hasOwnProperty(f)&&wt(d)},a),a.g={}}Zi.prototype.N=function(){Zi.aa.N.call(this),Uh(this)},Zi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var eu=u.JSON.stringify,x_=u.JSON.parse,w_=class{stringify(a){return u.JSON.stringify(a,void 0)}parse(a){return u.JSON.parse(a,void 0)}};function tu(){}tu.prototype.h=null;function Bh(a){return a.h||(a.h=a.i())}function $h(){}var es={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function nu(){Se.call(this,"d")}A(nu,Se);function ru(){Se.call(this,"c")}A(ru,Se);var Er={},Hh=null;function jo(){return Hh=Hh||new ct}Er.La="serverreachability";function qh(a){Se.call(this,Er.La,a)}A(qh,Se);function ts(a){const d=jo();Et(d,new qh(d))}Er.STAT_EVENT="statevent";function Wh(a,d){Se.call(this,Er.STAT_EVENT,a),this.stat=d}A(Wh,Se);function kt(a){const d=jo();Et(d,new Wh(d,a))}Er.Ma="timingevent";function Gh(a,d){Se.call(this,Er.Ma,a),this.size=d}A(Gh,Se);function ns(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){a()},d)}function rs(){this.g=!0}rs.prototype.xa=function(){this.g=!1};function E_(a,d,f,x,V,M){a.info(function(){if(a.g)if(M)for(var G="",ke=M.split("&"),rt=0;rt<ke.length;rt++){var _e=ke[rt].split("=");if(1<_e.length){var dt=_e[0];_e=_e[1];var ht=dt.split("_");G=2<=ht.length&&ht[1]=="type"?G+(dt+"="+_e+"&"):G+(dt+"=redacted&")}}else G=null;else G=M;return"XMLHTTP REQ ("+x+") [attempt "+V+"]: "+d+`
`+f+`
`+G})}function k_(a,d,f,x,V,M,G){a.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+V+"]: "+d+`
`+f+`
`+M+" "+G})}function Jr(a,d,f,x){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+T_(a,f)+(x?" "+x:"")})}function S_(a,d){a.info(function(){return"TIMEOUT: "+d})}rs.prototype.info=function(){};function T_(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var x=f[a];if(!(2>x.length)){var V=x[1];if(Array.isArray(V)&&!(1>V.length)){var M=V[0];if(M!="noop"&&M!="stop"&&M!="close")for(var G=1;G<V.length;G++)V[G]=""}}}}return eu(f)}catch{return d}}var Ro={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Kh={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},iu;function No(){}A(No,tu),No.prototype.g=function(){return new XMLHttpRequest},No.prototype.i=function(){return{}},iu=new No;function Mn(a,d,f,x){this.j=a,this.i=d,this.l=f,this.R=x||1,this.U=new Zi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qh}function Qh(){this.i=null,this.g="",this.h=!1}var Yh={},su={};function ou(a,d,f){a.L=1,a.v=Fo(En(d)),a.m=f,a.P=!0,Xh(a,null)}function Xh(a,d){a.F=Date.now(),bo(a),a.A=En(a.v);var f=a.A,x=a.R;Array.isArray(x)||(x=[String(x)]),hf(f.i,"t",x),a.C=0,f=a.j.J,a.h=new Qh,a.g=jf(a.j,f?d:null,!a.m),0<a.O&&(a.M=new __(g(a.Y,a,a.g),a.O)),d=a.U,f=a.g,x=a.ca;var V="readystatechange";Array.isArray(V)||(V&&(zh[0]=V.toString()),V=zh);for(var M=0;M<V.length;M++){var G=$e(f,V[M],x||d.handleEvent,!1,d.h||d);if(!G)break;d.g[G.key]=G}d=a.H?p(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),ts(),E_(a.i,a.u,a.A,a.l,a.R,a.m)}Mn.prototype.ca=function(a){a=a.target;const d=this.M;d&&kn(a)==3?d.j():this.Y(a)},Mn.prototype.Y=function(a){try{if(a==this.g)e:{const ht=kn(this.g);var d=this.g.Ba();const ti=this.g.Z();if(!(3>ht)&&(ht!=3||this.g&&(this.h.h||this.g.oa()||_f(this.g)))){this.J||ht!=4||d==7||(d==8||0>=ti?ts(3):ts(2)),au(this);var f=this.g.Z();this.X=f;t:if(Jh(this)){var x=_f(this.g);a="";var V=x.length,M=kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){kr(this),is(this);var G="";break t}this.h.i=new u.TextDecoder}for(d=0;d<V;d++)this.h.h=!0,a+=this.h.i.decode(x[d],{stream:!(M&&d==V-1)});x.length=0,this.h.g+=a,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=f==200,k_(this.i,this.u,this.A,this.l,this.R,ht,f),this.o){if(this.T&&!this.K){t:{if(this.g){var ke,rt=this.g;if((ke=rt.g?rt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(ke)){var _e=ke;break t}}_e=null}if(f=_e)Jr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,lu(this,f);else{this.o=!1,this.s=3,kt(12),kr(this),is(this);break e}}if(this.P){f=!0;let Xt;for(;!this.J&&this.C<G.length;)if(Xt=I_(this,G),Xt==su){ht==4&&(this.s=4,kt(14),f=!1),Jr(this.i,this.l,null,"[Incomplete Response]");break}else if(Xt==Yh){this.s=4,kt(15),Jr(this.i,this.l,G,"[Invalid Chunk]"),f=!1;break}else Jr(this.i,this.l,Xt,null),lu(this,Xt);if(Jh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ht!=4||G.length!=0||this.h.h||(this.s=1,kt(16),f=!1),this.o=this.o&&f,!f)Jr(this.i,this.l,G,"[Invalid Chunked Response]"),kr(this),is(this);else if(0<G.length&&!this.W){this.W=!0;var dt=this.j;dt.g==this&&dt.ba&&!dt.M&&(dt.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),mu(dt),dt.M=!0,kt(11))}}else Jr(this.i,this.l,G,null),lu(this,G);ht==4&&kr(this),this.o&&!this.J&&(ht==4?If(this.j,this):(this.o=!1,bo(this)))}else $_(this.g),f==400&&0<G.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),kr(this),is(this)}}}catch{}finally{}};function Jh(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function I_(a,d){var f=a.C,x=d.indexOf(`
`,f);return x==-1?su:(f=Number(d.substring(f,x)),isNaN(f)?Yh:(x+=1,x+f>d.length?su:(d=d.slice(x,x+f),a.C=x+f,d)))}Mn.prototype.cancel=function(){this.J=!0,kr(this)};function bo(a){a.S=Date.now()+a.I,Zh(a,a.I)}function Zh(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=ns(g(a.ba,a),d)}function au(a){a.B&&(u.clearTimeout(a.B),a.B=null)}Mn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(S_(this.i,this.A),this.L!=2&&(ts(),kt(17)),kr(this),this.s=2,is(this)):Zh(this,this.S-a)};function is(a){a.j.G==0||a.J||If(a.j,a)}function kr(a){au(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,Uh(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function lu(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||uu(f.h,a))){if(!a.K&&uu(f.h,a)&&f.G==3){try{var x=f.Da.g.parse(d)}catch{x=null}if(Array.isArray(x)&&x.length==3){var V=x;if(V[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)Bo(f),zo(f);else break e;fu(f),kt(18)}}else f.za=V[1],0<f.za-f.T&&37500>V[2]&&f.F&&f.v==0&&!f.C&&(f.C=ns(g(f.Za,f),6e3));if(1>=nf(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Tr(f,11)}else if((a.K||f.g==a)&&Bo(f),!E(d))for(V=f.Da.g.parse(d),d=0;d<V.length;d++){let _e=V[d];if(f.T=_e[0],_e=_e[1],f.G==2)if(_e[0]=="c"){f.K=_e[1],f.ia=_e[2];const dt=_e[3];dt!=null&&(f.la=dt,f.j.info("VER="+f.la));const ht=_e[4];ht!=null&&(f.Aa=ht,f.j.info("SVER="+f.Aa));const ti=_e[5];ti!=null&&typeof ti=="number"&&0<ti&&(x=1.5*ti,f.L=x,f.j.info("backChannelRequestTimeoutMs_="+x)),x=f;const Xt=a.g;if(Xt){const Ho=Xt.g?Xt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ho){var M=x.h;M.g||Ho.indexOf("spdy")==-1&&Ho.indexOf("quic")==-1&&Ho.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(cu(M,M.h),M.h=null))}if(x.D){const pu=Xt.g?Xt.g.getResponseHeader("X-HTTP-Session-Id"):null;pu&&(x.ya=pu,Ie(x.I,x.D,pu))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),x=f;var G=a;if(x.qa=Pf(x,x.J?x.ia:null,x.W),G.K){rf(x.h,G);var ke=G,rt=x.L;rt&&(ke.I=rt),ke.B&&(au(ke),bo(ke)),x.g=G}else Sf(x);0<f.i.length&&Uo(f)}else _e[0]!="stop"&&_e[0]!="close"||Tr(f,7);else f.G==3&&(_e[0]=="stop"||_e[0]=="close"?_e[0]=="stop"?Tr(f,7):hu(f):_e[0]!="noop"&&f.l&&f.l.ta(_e),f.v=0)}}ts(4)}catch{}}var C_=class{constructor(a,d){this.g=a,this.map=d}};function ef(a){this.l=a||10,u.PerformanceNavigationTiming?(a=u.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tf(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function nf(a){return a.h?1:a.g?a.g.size:0}function uu(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function cu(a,d){a.g?a.g.add(d):a.h=d}function rf(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}ef.prototype.cancel=function(){if(this.i=sf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function sf(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.D);return d}return P(a.i)}function A_(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var d=[],f=a.length,x=0;x<f;x++)d.push(a[x]);return d}d=[],f=0;for(x in a)d[f++]=a[x];return d}function P_(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(const x in a)d[f++]=x;return d}}}function of(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=P_(a),x=A_(a),V=x.length,M=0;M<V;M++)d.call(void 0,x[M],f&&f[M],a)}var af=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function j_(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var x=a[f].indexOf("="),V=null;if(0<=x){var M=a[f].substring(0,x);V=a[f].substring(x+1)}else M=a[f];d(M,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Sr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Sr){this.h=a.h,Do(this,a.j),this.o=a.o,this.g=a.g,Vo(this,a.s),this.l=a.l;var d=a.i,f=new as;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),lf(this,f),this.m=a.m}else a&&(d=String(a).match(af))?(this.h=!1,Do(this,d[1]||"",!0),this.o=ss(d[2]||""),this.g=ss(d[3]||"",!0),Vo(this,d[4]),this.l=ss(d[5]||"",!0),lf(this,d[6]||"",!0),this.m=ss(d[7]||"")):(this.h=!1,this.i=new as(null,this.h))}Sr.prototype.toString=function(){var a=[],d=this.j;d&&a.push(os(d,uf,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(os(d,uf,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(os(f,f.charAt(0)=="/"?b_:N_,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",os(f,V_)),a.join("")};function En(a){return new Sr(a)}function Do(a,d,f){a.j=f?ss(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Vo(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function lf(a,d,f){d instanceof as?(a.i=d,F_(a.i,a.h)):(f||(d=os(d,D_)),a.i=new as(d,a.h))}function Ie(a,d,f){a.i.set(d,f)}function Fo(a){return Ie(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function ss(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function os(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,R_),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function R_(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var uf=/[#\/\?@]/g,N_=/[#\?:]/g,b_=/[#\?]/g,D_=/[#\?@]/g,V_=/#/g;function as(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function On(a){a.g||(a.g=new Map,a.h=0,a.i&&j_(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=as.prototype,t.add=function(a,d){On(this),this.i=null,a=Zr(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function cf(a,d){On(a),d=Zr(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function df(a,d){return On(a),d=Zr(a,d),a.g.has(d)}t.forEach=function(a,d){On(this),this.g.forEach(function(f,x){f.forEach(function(V){a.call(d,V,x,this)},this)},this)},t.na=function(){On(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let x=0;x<d.length;x++){const V=a[x];for(let M=0;M<V.length;M++)f.push(d[x])}return f},t.V=function(a){On(this);let d=[];if(typeof a=="string")df(this,a)&&(d=d.concat(this.g.get(Zr(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return On(this),this.i=null,a=Zr(this,a),df(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function hf(a,d,f){cf(a,d),0<f.length&&(a.i=null,a.g.set(Zr(a,d),P(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var x=d[f];const M=encodeURIComponent(String(x)),G=this.V(x);for(x=0;x<G.length;x++){var V=M;G[x]!==""&&(V+="="+encodeURIComponent(String(G[x]))),a.push(V)}}return this.i=a.join("&")};function Zr(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function F_(a,d){d&&!a.j&&(On(a),a.i=null,a.g.forEach(function(f,x){var V=x.toLowerCase();x!=V&&(cf(this,x),hf(this,V,f))},a)),a.j=d}function M_(a,d){const f=new rs;if(u.Image){const x=new Image;x.onload=w(Ln,f,"TestLoadImage: loaded",!0,d,x),x.onerror=w(Ln,f,"TestLoadImage: error",!1,d,x),x.onabort=w(Ln,f,"TestLoadImage: abort",!1,d,x),x.ontimeout=w(Ln,f,"TestLoadImage: timeout",!1,d,x),u.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=a}else d(!1)}function O_(a,d){const f=new rs,x=new AbortController,V=setTimeout(()=>{x.abort(),Ln(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:x.signal}).then(M=>{clearTimeout(V),M.ok?Ln(f,"TestPingServer: ok",!0,d):Ln(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(V),Ln(f,"TestPingServer: error",!1,d)})}function Ln(a,d,f,x,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),x(f)}catch{}}function L_(){this.g=new w_}function z_(a,d,f){const x=f||"";try{of(a,function(V,M){let G=V;h(V)&&(G=eu(V)),d.push(x+M+"="+encodeURIComponent(G))})}catch(V){throw d.push(x+"type="+encodeURIComponent("_badmap")),V}}function Mo(a){this.l=a.Ub||null,this.j=a.eb||!1}A(Mo,tu),Mo.prototype.g=function(){return new Oo(this.l,this.j)},Mo.prototype.i=function(a){return function(){return a}}({});function Oo(a,d){ct.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Oo,ct),t=Oo.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,us(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||u).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ls(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,us(this)),this.g&&(this.readyState=3,us(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ff(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function ff(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?ls(this):us(this),this.readyState==3&&ff(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,ls(this))},t.Qa=function(a){this.g&&(this.response=a,ls(this))},t.ga=function(){this.g&&ls(this)};function ls(a){a.readyState=4,a.l=null,a.j=null,a.v=null,us(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function us(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Oo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function mf(a){let d="";return F(a,function(f,x){d+=x,d+=":",d+=f,d+=`\r
`}),d}function du(a,d,f){e:{for(x in f){var x=!1;break e}x=!0}x||(f=mf(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):Ie(a,d,f))}function Fe(a){ct.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Fe,ct);var U_=/^https?$/i,B_=["POST","PUT"];t=Fe.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():iu.g(),this.v=this.o?Bh(this.o):Bh(iu),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(M){pf(this,M);return}if(a=f||"",f=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var V in x)f.set(V,x[V]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const M of x.keys())f.set(M,x.get(M));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(f.keys()).find(M=>M.toLowerCase()=="content-type"),V=u.FormData&&a instanceof u.FormData,!(0<=Array.prototype.indexOf.call(B_,d,void 0))||x||V||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,G]of f)this.g.setRequestHeader(M,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{vf(this),this.u=!0,this.g.send(a),this.u=!1}catch(M){pf(this,M)}};function pf(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,gf(a),Lo(a)}function gf(a){a.A||(a.A=!0,Et(a,"complete"),Et(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Et(this,"complete"),Et(this,"abort"),Lo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Lo(this,!0)),Fe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?yf(this):this.bb())},t.bb=function(){yf(this)};function yf(a){if(a.h&&typeof o<"u"&&(!a.v[1]||kn(a)!=4||a.Z()!=2)){if(a.u&&kn(a)==4)Oh(a.Ea,0,a);else if(Et(a,"readystatechange"),kn(a)==4){a.h=!1;try{const G=a.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var x;if(x=G===0){var V=String(a.D).match(af)[1]||null;!V&&u.self&&u.self.location&&(V=u.self.location.protocol.slice(0,-1)),x=!U_.test(V?V.toLowerCase():"")}f=x}if(f)Et(a,"complete"),Et(a,"success");else{a.m=6;try{var M=2<kn(a)?a.g.statusText:""}catch{M=""}a.l=M+" ["+a.Z()+"]",gf(a)}}finally{Lo(a)}}}}function Lo(a,d){if(a.g){vf(a);const f=a.g,x=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||Et(a,"ready");try{f.onreadystatechange=x}catch{}}}function vf(a){a.I&&(u.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function kn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<kn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),x_(d)}};function _f(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function $_(a){const d={};a=(a.g&&2<=kn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<a.length;x++){if(E(a[x]))continue;var f=I(a[x]);const V=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const M=d[V]||[];d[V]=M,M.push(f)}v(d,function(x){return x.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function cs(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function xf(a){this.Aa=0,this.i=[],this.j=new rs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=cs("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=cs("baseRetryDelayMs",5e3,a),this.cb=cs("retryDelaySeedMs",1e4,a),this.Wa=cs("forwardChannelMaxRetries",2,a),this.wa=cs("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new ef(a&&a.concurrentRequestLimit),this.Da=new L_,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=xf.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,x){kt(0),this.W=a,this.H=d||{},f&&x!==void 0&&(this.H.OSID=f,this.H.OAID=x),this.F=this.X,this.I=Pf(this,null,this.W),Uo(this)};function hu(a){if(wf(a),a.G==3){var d=a.U++,f=En(a.I);if(Ie(f,"SID",a.K),Ie(f,"RID",d),Ie(f,"TYPE","terminate"),ds(a,f),d=new Mn(a,a.j,d),d.L=2,d.v=Fo(En(f)),f=!1,u.navigator&&u.navigator.sendBeacon)try{f=u.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&u.Image&&(new Image().src=d.v,f=!0),f||(d.g=jf(d.j,null),d.g.ea(d.v)),d.F=Date.now(),bo(d)}Af(a)}function zo(a){a.g&&(mu(a),a.g.cancel(),a.g=null)}function wf(a){zo(a),a.u&&(u.clearTimeout(a.u),a.u=null),Bo(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&u.clearTimeout(a.s),a.s=null)}function Uo(a){if(!tf(a.h)&&!a.s){a.s=!0;var d=a.Ga;ue||se(),U||(ue(),U=!0),J.add(d,a),a.B=0}}function H_(a,d){return nf(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=ns(g(a.Ga,a,d),Cf(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const V=new Mn(this,this.j,a);let M=this.o;if(this.S&&(M?(M=p(M),S(M,this.S)):M=this.S),this.m!==null||this.O||(V.H=M,M=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var x=this.i[f];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(d+=x,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=kf(this,V,d),f=En(this.I),Ie(f,"RID",a),Ie(f,"CVER",22),this.D&&Ie(f,"X-HTTP-Session-Id",this.D),ds(this,f),M&&(this.O?d="headers="+encodeURIComponent(String(mf(M)))+"&"+d:this.m&&du(f,this.m,M)),cu(this.h,V),this.Ua&&Ie(f,"TYPE","init"),this.P?(Ie(f,"$req",d),Ie(f,"SID","null"),V.T=!0,ou(V,f,null)):ou(V,f,d),this.G=2}}else this.G==3&&(a?Ef(this,a):this.i.length==0||tf(this.h)||Ef(this))};function Ef(a,d){var f;d?f=d.l:f=a.U++;const x=En(a.I);Ie(x,"SID",a.K),Ie(x,"RID",f),Ie(x,"AID",a.T),ds(a,x),a.m&&a.o&&du(x,a.m,a.o),f=new Mn(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=kf(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),cu(a.h,f),ou(f,x,d)}function ds(a,d){a.H&&F(a.H,function(f,x){Ie(d,x,f)}),a.l&&of({},function(f,x){Ie(d,x,f)})}function kf(a,d,f){f=Math.min(a.i.length,f);var x=a.l?g(a.l.Na,a.l,a):null;e:{var V=a.i;let M=-1;for(;;){const G=["count="+f];M==-1?0<f?(M=V[0].g,G.push("ofs="+M)):M=0:G.push("ofs="+M);let ke=!0;for(let rt=0;rt<f;rt++){let _e=V[rt].g;const dt=V[rt].map;if(_e-=M,0>_e)M=Math.max(0,V[rt].g-100),ke=!1;else try{z_(dt,G,"req"+_e+"_")}catch{x&&x(dt)}}if(ke){x=G.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,x}function Sf(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;ue||se(),U||(ue(),U=!0),J.add(d,a),a.v=0}}function fu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=ns(g(a.Fa,a),Cf(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Tf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=ns(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kt(10),zo(this),Tf(this))};function mu(a){a.A!=null&&(u.clearTimeout(a.A),a.A=null)}function Tf(a){a.g=new Mn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=En(a.qa);Ie(d,"RID","rpc"),Ie(d,"SID",a.K),Ie(d,"AID",a.T),Ie(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ie(d,"TO",a.ja),Ie(d,"TYPE","xmlhttp"),ds(a,d),a.m&&a.o&&du(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=Fo(En(d)),f.m=null,f.P=!0,Xh(f,a)}t.Za=function(){this.C!=null&&(this.C=null,zo(this),fu(this),kt(19))};function Bo(a){a.C!=null&&(u.clearTimeout(a.C),a.C=null)}function If(a,d){var f=null;if(a.g==d){Bo(a),mu(a),a.g=null;var x=2}else if(uu(a.h,d))f=d.D,rf(a.h,d),x=1;else return;if(a.G!=0){if(d.o)if(x==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var V=a.B;x=jo(),Et(x,new Gh(x,f)),Uo(a)}else Sf(a);else if(V=d.s,V==3||V==0&&0<d.X||!(x==1&&H_(a,d)||x==2&&fu(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),V){case 1:Tr(a,5);break;case 4:Tr(a,10);break;case 3:Tr(a,6);break;default:Tr(a,2)}}}function Cf(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function Tr(a,d){if(a.j.info("Error code "+d),d==2){var f=g(a.fb,a),x=a.Xa;const V=!x;x=new Sr(x||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Do(x,"https"),Fo(x),V?M_(x.toString(),f):O_(x.toString(),f)}else kt(2);a.G=0,a.l&&a.l.sa(d),Af(a),wf(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function Af(a){if(a.G=0,a.ka=[],a.l){const d=sf(a.h);(d.length!=0||a.i.length!=0)&&(j(a.ka,d),j(a.ka,a.i),a.h.i.length=0,P(a.i),a.i.length=0),a.l.ra()}}function Pf(a,d,f){var x=f instanceof Sr?En(f):new Sr(f);if(x.g!="")d&&(x.g=d+"."+x.g),Vo(x,x.s);else{var V=u.location;x=V.protocol,d=d?d+"."+V.hostname:V.hostname,V=+V.port;var M=new Sr(null);x&&Do(M,x),d&&(M.g=d),V&&Vo(M,V),f&&(M.l=f),x=M}return f=a.D,d=a.ya,f&&d&&Ie(x,f,d),Ie(x,"VER",a.la),ds(a,x),x}function jf(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Fe(new Mo({eb:f})):new Fe(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rf(){}t=Rf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function $o(){}$o.prototype.g=function(a,d){return new Vt(a,d)};function Vt(a,d){ct.call(this),this.g=new xf(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!E(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!E(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new ei(this)}A(Vt,ct),Vt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vt.prototype.close=function(){hu(this.g)},Vt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=eu(a),a=f);d.i.push(new C_(d.Ya++,a)),d.G==3&&Uo(d)},Vt.prototype.N=function(){this.g.l=null,delete this.j,hu(this.g),delete this.g,Vt.aa.N.call(this)};function Nf(a){nu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}A(Nf,nu);function bf(){ru.call(this),this.status=1}A(bf,ru);function ei(a){this.g=a}A(ei,Rf),ei.prototype.ua=function(){Et(this.g,"a")},ei.prototype.ta=function(a){Et(this.g,new Nf(a))},ei.prototype.sa=function(a){Et(this.g,new bf)},ei.prototype.ra=function(){Et(this.g,"b")},$o.prototype.createWebChannel=$o.prototype.g,Vt.prototype.send=Vt.prototype.o,Vt.prototype.open=Vt.prototype.m,Vt.prototype.close=Vt.prototype.close,Dv=function(){return new $o},bv=function(){return jo()},Nv=Er,Kc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ro.NO_ERROR=0,Ro.TIMEOUT=8,Ro.HTTP_ERROR=6,Pa=Ro,Kh.COMPLETE="complete",Rv=Kh,$h.EventType=es,es.OPEN="a",es.CLOSE="b",es.ERROR="c",es.MESSAGE="d",ct.prototype.listen=ct.prototype.K,Is=$h,Fe.prototype.listenOnce=Fe.prototype.L,Fe.prototype.getLastError=Fe.prototype.Ka,Fe.prototype.getLastErrorCode=Fe.prototype.Ba,Fe.prototype.getStatus=Fe.prototype.Z,Fe.prototype.getResponseJson=Fe.prototype.Oa,Fe.prototype.getResponseText=Fe.prototype.oa,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Ha,jv=Fe}).apply(typeof la<"u"?la:typeof self<"u"?self:typeof window<"u"?window:{});const np="@firebase/firestore",rp="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gt.UNAUTHENTICATED=new gt(null),gt.GOOGLE_CREDENTIALS=new gt("google-credentials-uid"),gt.FIRST_PARTY=new gt("first-party-uid"),gt.MOCK_USER=new gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gi="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur=new kv("@firebase/firestore");function ri(){return Ur.logLevel}function K(t,...e){if(Ur.logLevel<=pe.DEBUG){const n=e.map(ah);Ur.debug(`Firestore (${Gi}): ${t}`,...n)}}function Dn(t,...e){if(Ur.logLevel<=pe.ERROR){const n=e.map(ah);Ur.error(`Firestore (${Gi}): ${t}`,...n)}}function cr(t,...e){if(Ur.logLevel<=pe.WARN){const n=e.map(ah);Ur.warn(`Firestore (${Gi}): ${t}`,...n)}}function ah(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Vv(t,r,n)}function Vv(t,e,n){let r=`FIRESTORE (${Gi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Dn(r),new Error(r)}function xe(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||Vv(e,i,r)}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends Wi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ik{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(gt.UNAUTHENTICATED))}shutdown(){}}class sk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ok{constructor(e){this.t=e,this.currentUser=gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){xe(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new or;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new or,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},u=c=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new or)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xe(typeof r.accessToken=="string",31837,{l:r}),new Fv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xe(e===null||typeof e=="string",2055,{h:e}),new gt(e)}}class ak{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=gt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class lk{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new ak(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ip{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uk{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,UE(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){xe(this.o===void 0,3512);const r=s=>{s.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ip(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(xe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ip(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=ck(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function ce(t,e){return t<e?-1:t>e?1:0}function Qc(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return ce(r,i);{const s=Mv(),o=dk(s.encode(sp(t,n)),s.encode(sp(e,n)));return o!==0?o:ce(r,i)}}n+=r>65535?2:1}return ce(t.length,e.length)}function sp(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function dk(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ce(t[n],e[n]);return ce(t.length,e.length)}function Mi(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="__name__";class hn{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&te(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return hn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof hn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=hn.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return ce(e.length,n.length)}static compareSegments(e,n){const r=hn.isNumericId(e),i=hn.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?hn.extractNumericId(e).compare(hn.extractNumericId(n)):Qc(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return sr.fromString(e.substring(4,e.length-2))}}class Ae extends hn{construct(e,n,r){return new Ae(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ae(n)}static emptyPath(){return new Ae([])}}const hk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends hn{construct(e,n,r){return new ot(e,n,r)}static isValidIdentifier(e){return hk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===op}static keyField(){return new ot([op])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new X(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new X(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new X(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else u==="`"?(o=!o,i++):u!=="."||o?(r+=u,i++):(s(),i++)}if(s(),o)throw new X(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ot(n)}static emptyPath(){return new ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.path=e}static fromPath(e){return new Z(Ae.fromString(e))}static fromName(e){return new Z(Ae.fromString(e).popFirst(5))}static empty(){return new Z(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ae.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Z(new Ae(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(t,e,n){if(!n)throw new X(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function fk(t,e,n,r){if(e===!0&&r===!0)throw new X(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ap(t){if(!Z.isDocumentKey(t))throw new X(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function lp(t){if(Z.isDocumentKey(t))throw new X(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Lv(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function uh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te(12329,{type:typeof t})}function Br(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=uh(t);throw new X(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(t,e){const n={typeString:t};return e&&(n.value=e),n}function ko(t,e){if(!Lv(t))throw new X(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new X(z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up=-62135596800,cp=1e6;class Pe{static now(){return Pe.fromMillis(Date.now())}static fromDate(e){return Pe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*cp);return new Pe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<up)throw new X(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cp}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Pe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ko(e,Pe._jsonSchema))return new Pe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-up;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Pe._jsonSchemaVersion="firestore/timestamp/1.0",Pe._jsonSchema={type:Be("string",Pe._jsonSchemaVersion),seconds:Be("number"),nanoseconds:Be("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{static fromTimestamp(e){return new re(e)}static min(){return new re(new Pe(0,0))}static max(){return new re(new Pe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho=-1;function mk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=re.fromTimestamp(r===1e9?new Pe(n+1,0):new Pe(n,r));return new dr(i,Z.empty(),e)}function pk(t){return new dr(t.readTime,t.key,ho)}class dr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new dr(re.min(),Z.empty(),ho)}static max(){return new dr(re.max(),Z.empty(),ho)}}function gk(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Z.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ki(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==yk)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let i=0,s=0,o=!1;e.forEach(u=>{++i,u.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(i=>i?L.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new L((r,i)=>{const s=e.length,o=new Array(s);let u=0;for(let c=0;c<s;c++){const h=c;n(e[h]).next(m=>{o[h]=m,++u,u===s&&r(o)},m=>i(m))}})}static doWhile(e,n){return new L((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function _k(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Qi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Ll.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch=-1;function zl(t){return t==null}function cl(t){return t===0&&1/t==-1/0}function xk(t){return typeof t=="number"&&Number.isInteger(t)&&!cl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv="";function wk(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=dp(e)),e=Ek(t.get(n),e);return dp(e)}function Ek(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case zv:n+="";break;default:n+=s}}return n}function dp(t){return t+zv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Gr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Uv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e,n){this.comparator=e,this.root=n||st.EMPTY}insert(e,n){return new Ve(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,st.BLACK,null,null))}remove(e){return new Ve(this.comparator,this.root.remove(e,this.comparator).copy(null,null,st.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ua(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ua(this.root,e,this.comparator,!1)}getReverseIterator(){return new ua(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ua(this.root,e,this.comparator,!0)}}class ua{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class st{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??st.RED,this.left=i??st.EMPTY,this.right=s??st.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new st(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return st.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return st.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,st.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,st.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw te(27949);return e+(this.isRed()?0:1)}}st.EMPTY=null,st.RED=!0,st.BLACK=!1;st.EMPTY=new class{constructor(){this.size=0}get key(){throw te(57766)}get value(){throw te(16141)}get color(){throw te(16727)}get left(){throw te(29726)}get right(){throw te(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new st(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new fp(this.data.getIterator())}getIteratorFrom(e){return new fp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Qe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Qe(this.comparator);return n.data=e,n}}class fp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new nn([])}unionWith(e){let n=new Qe(ot.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new nn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Mi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Bv("Invalid base64 string: "+s):s}}(e);return new ut(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new ut(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ut.EMPTY_BYTE_STRING=new ut("");const kk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hr(t){if(xe(!!t,39018),typeof t=="string"){let e=0;const n=kk.exec(t);if(xe(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Oe(t.seconds),nanos:Oe(t.nanos)}}function Oe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function fr(t){return typeof t=="string"?ut.fromBase64String(t):ut.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v="server_timestamp",Hv="__type__",qv="__previous_value__",Wv="__local_write_time__";function dh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Hv])===null||n===void 0?void 0:n.stringValue)===$v}function Ul(t){const e=t.mapValue.fields[qv];return dh(e)?Ul(e):e}function fo(t){const e=hr(t.mapValue.fields[Wv].timestampValue);return new Pe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e,n,r,i,s,o,u,c,h,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=h,this.isUsingEmulator=m}}const dl="(default)";class mo{constructor(e,n){this.projectId=e,this.database=n||dl}static empty(){return new mo("","")}get isDefaultDatabase(){return this.database===dl}isEqual(e){return e instanceof mo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="__type__",Tk="__max__",ca={mapValue:{}},Kv="__vector__",hl="value";function mr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?dh(t)?4:Ck(t)?9007199254740991:Ik(t)?10:11:te(28295,{value:t})}function xn(t,e){if(t===e)return!0;const n=mr(t);if(n!==mr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return fo(t).isEqual(fo(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=hr(i.timestampValue),u=hr(s.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return fr(i.bytesValue).isEqual(fr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Oe(i.geoPointValue.latitude)===Oe(s.geoPointValue.latitude)&&Oe(i.geoPointValue.longitude)===Oe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Oe(i.integerValue)===Oe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Oe(i.doubleValue),u=Oe(s.doubleValue);return o===u?cl(o)===cl(u):isNaN(o)&&isNaN(u)}return!1}(t,e);case 9:return Mi(t.arrayValue.values||[],e.arrayValue.values||[],xn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},u=s.mapValue.fields||{};if(hp(o)!==hp(u))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(u[c]===void 0||!xn(o[c],u[c])))return!1;return!0}(t,e);default:return te(52216,{left:t})}}function po(t,e){return(t.values||[]).find(n=>xn(n,e))!==void 0}function Oi(t,e){if(t===e)return 0;const n=mr(t),r=mr(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(s,o){const u=Oe(s.integerValue||s.doubleValue),c=Oe(o.integerValue||o.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return mp(t.timestampValue,e.timestampValue);case 4:return mp(fo(t),fo(e));case 5:return Qc(t.stringValue,e.stringValue);case 6:return function(s,o){const u=fr(s),c=fr(o);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const u=s.split("/"),c=o.split("/");for(let h=0;h<u.length&&h<c.length;h++){const m=ce(u[h],c[h]);if(m!==0)return m}return ce(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const u=ce(Oe(s.latitude),Oe(o.latitude));return u!==0?u:ce(Oe(s.longitude),Oe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return pp(t.arrayValue,e.arrayValue);case 10:return function(s,o){var u,c,h,m;const y=s.fields||{},g=o.fields||{},w=(u=y[hl])===null||u===void 0?void 0:u.arrayValue,A=(c=g[hl])===null||c===void 0?void 0:c.arrayValue,P=ce(((h=w==null?void 0:w.values)===null||h===void 0?void 0:h.length)||0,((m=A==null?void 0:A.values)===null||m===void 0?void 0:m.length)||0);return P!==0?P:pp(w,A)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===ca.mapValue&&o===ca.mapValue)return 0;if(s===ca.mapValue)return 1;if(o===ca.mapValue)return-1;const u=s.fields||{},c=Object.keys(u),h=o.fields||{},m=Object.keys(h);c.sort(),m.sort();for(let y=0;y<c.length&&y<m.length;++y){const g=Qc(c[y],m[y]);if(g!==0)return g;const w=Oi(u[c[y]],h[m[y]]);if(w!==0)return w}return ce(c.length,m.length)}(t.mapValue,e.mapValue);default:throw te(23264,{le:n})}}function mp(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=hr(t),r=hr(e),i=ce(n.seconds,r.seconds);return i!==0?i:ce(n.nanos,r.nanos)}function pp(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Oi(n[i],r[i]);if(s)return s}return ce(n.length,r.length)}function Li(t){return Yc(t)}function Yc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=hr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return fr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Yc(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Yc(n.fields[o])}`;return i+"}"}(t.mapValue):te(61005,{value:t})}function ja(t){switch(mr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ul(t);return e?16+ja(e):16;case 5:return 2*t.stringValue.length;case 6:return fr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+ja(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Gr(r.fields,(s,o)=>{i+=s.length+ja(o)}),i}(t.mapValue);default:throw te(13486,{value:t})}}function Xc(t){return!!t&&"integerValue"in t}function hh(t){return!!t&&"arrayValue"in t}function gp(t){return!!t&&"nullValue"in t}function yp(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ra(t){return!!t&&"mapValue"in t}function Ik(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Gv])===null||n===void 0?void 0:n.stringValue)===Kv}function zs(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Gr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=zs(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=zs(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Ck(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Tk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.value=e}static empty(){return new Ht({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ra(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=zs(n)}setAll(e){let n=ot.emptyPath(),r={},i=[];e.forEach((o,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=u.popLast()}o?r[u.lastSegment()]=zs(o):i.push(u.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Ra(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return xn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ra(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Gr(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ht(zs(this.value))}}function Qv(t){const e=[];return Gr(t.fields,(n,r)=>{const i=new ot([n]);if(Ra(r)){const s=Qv(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new nn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,n,r,i,s,o,u){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=u}static newInvalidDocument(e){return new vt(e,0,re.min(),re.min(),re.min(),Ht.empty(),0)}static newFoundDocument(e,n,r,i){return new vt(e,1,n,re.min(),r,i,0)}static newNoDocument(e,n){return new vt(e,2,n,re.min(),re.min(),Ht.empty(),0)}static newUnknownDocument(e,n){return new vt(e,3,n,re.min(),re.min(),Ht.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ht.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ht.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,n){this.position=e,this.inclusive=n}}function vp(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Z.comparator(Z.fromName(o.referenceValue),n.key):r=Oi(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function _p(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!xn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,n="asc"){this.field=e,this.dir=n}}function Ak(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{}class Ge extends Yv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new jk(e,n,r):n==="array-contains"?new bk(e,r):n==="in"?new Dk(e,r):n==="not-in"?new Vk(e,r):n==="array-contains-any"?new Fk(e,r):new Ge(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Rk(e,r):new Nk(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Oi(n,this.value)):n!==null&&mr(this.value)===mr(n)&&this.matchesComparison(Oi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wn extends Yv{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new wn(e,n)}matches(e){return Xv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Xv(t){return t.op==="and"}function Jv(t){return Pk(t)&&Xv(t)}function Pk(t){for(const e of t.filters)if(e instanceof wn)return!1;return!0}function Jc(t){if(t instanceof Ge)return t.field.canonicalString()+t.op.toString()+Li(t.value);if(Jv(t))return t.filters.map(e=>Jc(e)).join(",");{const e=t.filters.map(n=>Jc(n)).join(",");return`${t.op}(${e})`}}function Zv(t,e){return t instanceof Ge?function(r,i){return i instanceof Ge&&r.op===i.op&&r.field.isEqual(i.field)&&xn(r.value,i.value)}(t,e):t instanceof wn?function(r,i){return i instanceof wn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,u)=>s&&Zv(o,i.filters[u]),!0):!1}(t,e):void te(19439)}function e0(t){return t instanceof Ge?function(n){return`${n.field.canonicalString()} ${n.op} ${Li(n.value)}`}(t):t instanceof wn?function(n){return n.op.toString()+" {"+n.getFilters().map(e0).join(" ,")+"}"}(t):"Filter"}class jk extends Ge{constructor(e,n,r){super(e,n,r),this.key=Z.fromName(r.referenceValue)}matches(e){const n=Z.comparator(e.key,this.key);return this.matchesComparison(n)}}class Rk extends Ge{constructor(e,n){super(e,"in",n),this.keys=t0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Nk extends Ge{constructor(e,n){super(e,"not-in",n),this.keys=t0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function t0(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Z.fromName(r.referenceValue))}class bk extends Ge{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return hh(n)&&po(n.arrayValue,this.value)}}class Dk extends Ge{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&po(this.value.arrayValue,n)}}class Vk extends Ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(po(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!po(this.value.arrayValue,n)}}class Fk extends Ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!hh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>po(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e,n=null,r=[],i=[],s=null,o=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=u,this.Pe=null}}function xp(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Mk(t,e,n,r,i,s,o)}function fh(t){const e=oe(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Jc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),zl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Li(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Li(r)).join(",")),e.Pe=n}return e.Pe}function mh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Ak(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Zv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_p(t.startAt,e.startAt)&&_p(t.endAt,e.endAt)}function Zc(t){return Z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n=null,r=[],i=[],s=null,o="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=u,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Ok(t,e,n,r,i,s,o,u){return new Bl(t,e,n,r,i,s,o,u)}function n0(t){return new Bl(t)}function wp(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Lk(t){return t.collectionGroup!==null}function Us(t){const e=oe(t);if(e.Te===null){e.Te=[];const n=new Set;for(const s of e.explicitOrderBy)e.Te.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new Qe(ot.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(u=u.add(h.field))})}),u})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Te.push(new ml(s,r))}),n.has(ot.keyField().canonicalString())||e.Te.push(new ml(ot.keyField(),r))}return e.Te}function gn(t){const e=oe(t);return e.Ie||(e.Ie=zk(e,Us(t))),e.Ie}function zk(t,e){if(t.limitType==="F")return xp(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ml(i.field,s)});const n=t.endAt?new fl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new fl(t.startAt.position,t.startAt.inclusive):null;return xp(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ed(t,e,n){return new Bl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $l(t,e){return mh(gn(t),gn(e))&&t.limitType===e.limitType}function r0(t){return`${fh(gn(t))}|lt:${t.limitType}`}function ii(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>e0(i)).join(", ")}]`),zl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Li(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Li(i)).join(",")),`Target(${r})`}(gn(t))}; limitType=${t.limitType})`}function Hl(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Z.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Us(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,u,c){const h=vp(o,u,c);return o.inclusive?h<=0:h<0}(r.startAt,Us(r),i)||r.endAt&&!function(o,u,c){const h=vp(o,u,c);return o.inclusive?h>=0:h>0}(r.endAt,Us(r),i))}(t,e)}function Uk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function i0(t){return(e,n)=>{let r=!1;for(const i of Us(t)){const s=Bk(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Bk(t,e,n){const r=t.field.isKeyField()?Z.comparator(e.key,n.key):function(s,o,u){const c=o.data.field(s),h=u.data.field(s);return c!==null&&h!==null?Oi(c,h):te(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Gr(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Uv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k=new Ve(Z.comparator);function Vn(){return $k}const s0=new Ve(Z.comparator);function Cs(...t){let e=s0;for(const n of t)e=e.insert(n.key,n);return e}function o0(t){let e=s0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Nr(){return Bs()}function a0(){return Bs()}function Bs(){return new Kr(t=>t.toString(),(t,e)=>t.isEqual(e))}const Hk=new Ve(Z.comparator),qk=new Qe(Z.comparator);function he(...t){let e=qk;for(const n of t)e=e.add(n);return e}const Wk=new Qe(ce);function Gk(){return Wk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cl(e)?"-0":e}}function l0(t){return{integerValue:""+t}}function Kk(t,e){return xk(e)?l0(e):ph(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(){this._=void 0}}function Qk(t,e,n){return t instanceof pl?function(i,s){const o={fields:{[Hv]:{stringValue:$v},[Wv]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&dh(s)&&(s=Ul(s)),s&&(o.fields[qv]=s),{mapValue:o}}(n,e):t instanceof go?c0(t,e):t instanceof yo?d0(t,e):function(i,s){const o=u0(i,s),u=Ep(o)+Ep(i.Ee);return Xc(o)&&Xc(i.Ee)?l0(u):ph(i.serializer,u)}(t,e)}function Yk(t,e,n){return t instanceof go?c0(t,e):t instanceof yo?d0(t,e):n}function u0(t,e){return t instanceof gl?function(r){return Xc(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class pl extends ql{}class go extends ql{constructor(e){super(),this.elements=e}}function c0(t,e){const n=h0(e);for(const r of t.elements)n.some(i=>xn(i,r))||n.push(r);return{arrayValue:{values:n}}}class yo extends ql{constructor(e){super(),this.elements=e}}function d0(t,e){let n=h0(e);for(const r of t.elements)n=n.filter(i=>!xn(i,r));return{arrayValue:{values:n}}}class gl extends ql{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Ep(t){return Oe(t.integerValue||t.doubleValue)}function h0(t){return hh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Xk(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof go&&i instanceof go||r instanceof yo&&i instanceof yo?Mi(r.elements,i.elements,xn):r instanceof gl&&i instanceof gl?xn(r.Ee,i.Ee):r instanceof pl&&i instanceof pl}(t.transform,e.transform)}class Jk{constructor(e,n){this.version=e,this.transformResults=n}}class on{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Na(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Wl{}function f0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new gh(t.key,on.none()):new So(t.key,t.data,on.none());{const n=t.data,r=Ht.empty();let i=new Qe(ot.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Qr(t.key,r,new nn(i.toArray()),on.none())}}function Zk(t,e,n){t instanceof So?function(i,s,o){const u=i.value.clone(),c=Sp(i.fieldTransforms,s,o.transformResults);u.setAll(c),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Qr?function(i,s,o){if(!Na(i.precondition,s))return void s.convertToUnknownDocument(o.version);const u=Sp(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(m0(i)),c.setAll(u),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function $s(t,e,n,r){return t instanceof So?function(s,o,u,c){if(!Na(s.precondition,o))return u;const h=s.value.clone(),m=Tp(s.fieldTransforms,c,o);return h.setAll(m),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Qr?function(s,o,u,c){if(!Na(s.precondition,o))return u;const h=Tp(s.fieldTransforms,c,o),m=o.data;return m.setAll(m0(s)),m.setAll(h),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(y=>y.field))}(t,e,n,r):function(s,o,u){return Na(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u}(t,e,n)}function eS(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=u0(r.transform,i||null);s!=null&&(n===null&&(n=Ht.empty()),n.set(r.field,s))}return n||null}function kp(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Mi(r,i,(s,o)=>Xk(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class So extends Wl{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Qr extends Wl{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function m0(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Sp(t,e,n){const r=new Map;xe(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,u=e.data.field(s.field);r.set(s.field,Yk(o,u,n[i]))}return r}function Tp(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,Qk(s,o,e))}return r}class gh extends Wl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tS extends Wl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Zk(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=$s(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=$s(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=a0();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let u=this.applyToLocalView(o,s.mutatedFields);u=n.has(i.key)?null:u;const c=f0(o,u);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),he())}isEqual(e){return this.batchId===e.batchId&&Mi(this.mutations,e.mutations,(n,r)=>kp(n,r))&&Mi(this.baseMutations,e.baseMutations,(n,r)=>kp(n,r))}}class yh{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){xe(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return Hk}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new yh(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze,me;function sS(t){switch(t){case z.OK:return te(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return te(15467,{code:t})}}function p0(t){if(t===void 0)return Dn("GRPC error has no .code"),z.UNKNOWN;switch(t){case ze.OK:return z.OK;case ze.CANCELLED:return z.CANCELLED;case ze.UNKNOWN:return z.UNKNOWN;case ze.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case ze.INTERNAL:return z.INTERNAL;case ze.UNAVAILABLE:return z.UNAVAILABLE;case ze.UNAUTHENTICATED:return z.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case ze.NOT_FOUND:return z.NOT_FOUND;case ze.ALREADY_EXISTS:return z.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return z.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case ze.ABORTED:return z.ABORTED;case ze.OUT_OF_RANGE:return z.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return z.UNIMPLEMENTED;case ze.DATA_LOSS:return z.DATA_LOSS;default:return te(39323,{code:t})}}(me=ze||(ze={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS=new sr([4294967295,4294967295],0);function Ip(t){const e=Mv().encode(t),n=new Pv;return n.update(e),new Uint8Array(n.digest())}function Cp(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new sr([n,r],0),new sr([i,s],0)]}class vh{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new As(`Invalid padding: ${n}`);if(r<0)throw new As(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new As(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new As(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=sr.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(sr.fromNumber(r)));return i.compare(oS)===1&&(i=new sr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=Ip(e),[r,i]=Cp(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new vh(s,i,n);return r.forEach(u=>o.insert(u)),o}insert(e){if(this.fe===0)return;const n=Ip(e),[r,i]=Cp(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(r,i,s);this.we(o)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class As extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,To.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Gl(re.min(),i,new Ve(ce),Vn(),he())}}class To{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new To(r,n,he(),he(),he())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class g0{constructor(e,n){this.targetId=e,this.De=n}}class y0{constructor(e,n,r=ut.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Ap{constructor(){this.ve=0,this.Ce=Pp(),this.Fe=ut.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=he(),n=he(),r=he();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:te(38017,{changeType:s})}}),new To(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=Pp()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,xe(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class aS{constructor(e){this.We=e,this.Ge=new Map,this.ze=Vn(),this.je=da(),this.Je=da(),this.He=new Ve(ce)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:te(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const s=i.target;if(Zc(s))if(r===0){const o=new Z(s.path);this.Xe(n,o,vt.newNoDocument(o,re.min()))}else xe(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const u=this._t(e),c=u?this.ut(u,e,o):1;if(c!==0){this.rt(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,h)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,u;try{o=fr(r).toUint8Array()}catch(c){if(c instanceof Bv)return cr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new vh(o,i,s)}catch(c){return cr(c instanceof As?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.fe===0?null:u}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.We.lt(),u=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(u)||(this.Xe(n,s,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((s,o)=>{const u=this.st(o);if(u){if(s.current&&Zc(u.target)){const c=new Z(u.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,vt.newNoDocument(c,e))}s.Ne&&(n.set(o,s.Le()),s.ke())}});let r=he();this.Je.forEach((s,o)=>{let u=!0;o.forEachWhile(c=>{const h=this.st(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));const i=new Gl(e,n,this.He,this.ze,r);return this.ze=Vn(),this.je=da(),this.Je=da(),this.He=new Ve(ce),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Ap,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Qe(ce),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Qe(ce),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Ap),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function da(){return new Ve(Z.comparator)}function Pp(){return new Ve(Z.comparator)}const lS={asc:"ASCENDING",desc:"DESCENDING"},uS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cS={and:"AND",or:"OR"};class dS{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function td(t,e){return t.useProto3Json||zl(e)?e:{value:e}}function yl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function v0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function hS(t,e){return yl(t,e.toTimestamp())}function yn(t){return xe(!!t,49232),re.fromTimestamp(function(n){const r=hr(n);return new Pe(r.seconds,r.nanos)}(t))}function _h(t,e){return nd(t,e).canonicalString()}function nd(t,e){const n=function(i){return new Ae(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function _0(t){const e=Ae.fromString(t);return xe(S0(e),10190,{key:e.toString()}),e}function rd(t,e){return _h(t.databaseId,e.path)}function Wu(t,e){const n=_0(e);if(n.get(1)!==t.databaseId.projectId)throw new X(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Z(w0(n))}function x0(t,e){return _h(t.databaseId,e)}function fS(t){const e=_0(t);return e.length===4?Ae.emptyPath():w0(e)}function id(t){return new Ae(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function w0(t){return xe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function jp(t,e,n){return{name:rd(t,e),fields:n.value.mapValue.fields}}function mS(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:te(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,m){return h.useProto3Json?(xe(m===void 0||typeof m=="string",58123),ut.fromBase64String(m||"")):(xe(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),ut.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(h){const m=h.code===void 0?z.UNKNOWN:p0(h.code);return new X(m,h.message||"")}(o);n=new y0(r,i,s,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Wu(t,r.document.name),s=yn(r.document.updateTime),o=r.document.createTime?yn(r.document.createTime):re.min(),u=new Ht({mapValue:{fields:r.document.fields}}),c=vt.newFoundDocument(i,s,o,u),h=r.targetIds||[],m=r.removedTargetIds||[];n=new ba(h,m,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Wu(t,r.document),s=r.readTime?yn(r.readTime):re.min(),o=vt.newNoDocument(i,s),u=r.removedTargetIds||[];n=new ba([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Wu(t,r.document),s=r.removedTargetIds||[];n=new ba([],s,i,null)}else{if(!("filter"in e))return te(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new iS(i,s),u=r.targetId;n=new g0(u,o)}}return n}function pS(t,e){let n;if(e instanceof So)n={update:jp(t,e.key,e.value)};else if(e instanceof gh)n={delete:rd(t,e.key)};else if(e instanceof Qr)n={update:jp(t,e.key,e.data),updateMask:SS(e.fieldMask)};else{if(!(e instanceof tS))return te(16599,{Rt:e.type});n={verify:rd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const u=o.transform;if(u instanceof pl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof go)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof yo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof gl)return{fieldPath:o.field.canonicalString(),increment:u.Ee};throw te(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:hS(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:te(27497)}(t,e.precondition)),n}function gS(t,e){return t&&t.length>0?(xe(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?yn(i.updateTime):yn(s);return o.isEqual(re.min())&&(o=yn(s)),new Jk(o,i.transformResults||[])}(n,e))):[]}function yS(t,e){return{documents:[x0(t,e.path)]}}function vS(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=x0(t,i);const s=function(h){if(h.length!==0)return k0(wn.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(m=>function(g){return{field:si(g.field),direction:wS(g.dir)}}(m))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const u=td(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{Vt:n,parent:i}}function _S(t){let e=fS(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){xe(r===1,65062);const m=n.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let s=[];n.where&&(s=function(y){const g=E0(y);return g instanceof wn&&Jv(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(y){return y.map(g=>function(A){return new ml(oi(A.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(g))}(n.orderBy));let u=null;n.limit&&(u=function(y){let g;return g=typeof y=="object"?y.value:y,zl(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(y){const g=!!y.before,w=y.values||[];return new fl(w,g)}(n.startAt));let h=null;return n.endAt&&(h=function(y){const g=!y.before,w=y.values||[];return new fl(w,g)}(n.endAt)),Ok(e,i,o,s,u,"F",c,h)}function xS(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function E0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=oi(n.unaryFilter.field);return Ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=oi(n.unaryFilter.field);return Ge.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=oi(n.unaryFilter.field);return Ge.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=oi(n.unaryFilter.field);return Ge.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return te(61313);default:return te(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ge.create(oi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return te(58110);default:return te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return wn.create(n.compositeFilter.filters.map(r=>E0(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return te(1026)}}(n.compositeFilter.op))}(t):te(30097,{filter:t})}function wS(t){return lS[t]}function ES(t){return uS[t]}function kS(t){return cS[t]}function si(t){return{fieldPath:t.canonicalString()}}function oi(t){return ot.fromServerFormat(t.fieldPath)}function k0(t){return t instanceof Ge?function(n){if(n.op==="=="){if(yp(n.value))return{unaryFilter:{field:si(n.field),op:"IS_NAN"}};if(gp(n.value))return{unaryFilter:{field:si(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(yp(n.value))return{unaryFilter:{field:si(n.field),op:"IS_NOT_NAN"}};if(gp(n.value))return{unaryFilter:{field:si(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:si(n.field),op:ES(n.op),value:n.value}}}(t):t instanceof wn?function(n){const r=n.getFilters().map(i=>k0(i));return r.length===1?r[0]:{compositeFilter:{op:kS(n.op),filters:r}}}(t):te(54877,{filter:t})}function SS(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function S0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e,n,r,i,s=re.min(),o=re.min(),u=ut.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new Gn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Gn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e){this.gt=e}}function IS(t){const e=_S({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ed(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(){this.Dn=new AS}addToCollectionParentIndex(e,n){return this.Dn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(dr.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(dr.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class AS{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Qe(Ae.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Qe(Ae.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},T0=41943040;class Pt{static withCacheSize(e){return new Pt(e,Pt.DEFAULT_COLLECTION_PERCENTILE,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pt.DEFAULT_COLLECTION_PERCENTILE=10,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pt.DEFAULT=new Pt(T0,Pt.DEFAULT_COLLECTION_PERCENTILE,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pt.DISABLED=new Pt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new zi(0)}static ur(){return new zi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np="LruGarbageCollector",PS=1048576;function bp([t,e],[n,r]){const i=ce(t,n);return i===0?ce(e,r):i}class jS{constructor(e){this.Tr=e,this.buffer=new Qe(bp),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();bp(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class RS{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){K(Np,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Qi(n)?K(Np,"Ignoring IndexedDB error during garbage collection: ",n):await Ki(n)}await this.Rr(3e5)})}}class NS{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(Ll.ue);const r=new jS(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(K("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(Rp)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(K("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Rp):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,s,o,u,c,h;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(K("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),i=this.params.maximumSequenceNumbersToCollect):i=y,o=Date.now(),this.nthSequenceNumber(e,i))).next(y=>(r=y,u=Date.now(),this.removeTargets(e,r,n))).next(y=>(s=y,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(h=Date.now(),ri()<=pe.DEBUG&&K("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-m}ms
	Determined least recently used ${i} in `+(u-o)+`ms
	Removed ${s} targets in `+(c-u)+`ms
	Removed ${y} documents in `+(h-c)+`ms
Total Duration: ${h-m}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:y})))}}function bS(t,e){return new NS(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(){this.changes=new Kr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,vt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&$s(r.mutation,i,nn.empty(),Pe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,n,r=he()){const i=Nr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Cs();return s.forEach((u,c)=>{o=o.insert(u,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Nr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,he()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,u)=>{n.set(o,u)})})}computeViews(e,n,r,i){let s=Vn();const o=Bs(),u=function(){return Bs()}();return n.forEach((c,h)=>{const m=r.get(h.key);i.has(h.key)&&(m===void 0||m.mutation instanceof Qr)?s=s.insert(h.key,h):m!==void 0?(o.set(h.key,m.mutation.getFieldMask()),$s(m.mutation,h,m.mutation.getFieldMask(),Pe.now())):o.set(h.key,nn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((h,m)=>o.set(h,m)),n.forEach((h,m)=>{var y;return u.set(h,new VS(m,(y=o.get(h))!==null&&y!==void 0?y:null))}),u))}recalculateAndSaveOverlays(e,n){const r=Bs();let i=new Ve((o,u)=>o-u),s=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const u of o)u.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let m=r.get(c)||nn.empty();m=u.applyToLocalView(h,m),r.set(c,m);const y=(i.get(u.batchId)||he()).add(c);i=i.insert(u.batchId,y)})}).next(()=>{const o=[],u=i.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),h=c.key,m=c.value,y=a0();m.forEach(g=>{if(!s.has(g)){const w=f0(n.get(g),r.get(g));w!==null&&y.set(g,w),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,y))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Lk(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):L.resolve(Nr());let u=ho,c=s;return o.next(h=>L.forEach(h,(m,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),s.get(m)?L.resolve():this.remoteDocumentCache.getEntry(e,m).next(g=>{c=c.insert(m,g)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,c,h,he())).next(m=>({batchId:u,changes:o0(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Z(n)).next(r=>{let i=Cs();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Cs();return this.indexManager.getCollectionParents(e,s).next(u=>L.forEach(u,c=>{const h=function(y,g){return new Bl(g,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(m=>{m.forEach((y,g)=>{o=o.insert(y,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,h)=>{const m=h.getKey();o.get(m)===null&&(o=o.insert(m,vt.newInvalidDocument(m)))});let u=Cs();return o.forEach((c,h)=>{const m=s.get(c);m!==void 0&&$s(m.mutation,h,nn.empty(),Pe.now()),Hl(n,h)&&(u=u.insert(c,h))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return L.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:yn(i.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:IS(i.bundledQuery),readTime:yn(i.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(){this.overlays=new Ve(Z.comparator),this.kr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Nr();return L.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.wt(e,n,s)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const i=Nr(),s=n.length+1,o=new Z(n.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const c=u.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return L.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ve((h,m)=>h-m);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let m=s.get(h.largestBatchId);m===null&&(m=Nr(),s=s.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const u=Nr(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,m)=>u.set(h,m)),!(u.size()>=i)););return L.resolve(u)}wt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new rS(n,r));let s=this.kr.get(n);s===void 0&&(s=he(),this.kr.set(n,s)),this.kr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(){this.sessionToken=ut.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(){this.qr=new Qe(Ze.Qr),this.$r=new Qe(Ze.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Ze(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Ze(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new Z(new Ae([])),r=new Ze(n,e),i=new Ze(n,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new Z(new Ae([])),r=new Ze(n,e),i=new Ze(n,e+1);let s=he();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Ze(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ze{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Z.comparator(e.key,n.key)||ce(e.Hr,n.Hr)}static Ur(e,n){return ce(e.Hr,n.Hr)||Z.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Qe(Ze.Qr)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new nS(s,n,r,i);this.mutationQueue.push(o);for(const u of i)this.Yr=this.Yr.add(new Ze(u.key,s)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),s=i<0?0:i;return L.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?ch:this.er-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ze(n,0),i=new Ze(n,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{const u=this.Zr(o.Hr);s.push(u)}),L.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Qe(ce);return n.forEach(i=>{const s=new Ze(i,0),o=new Ze(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],u=>{r=r.add(u.Hr)})}),L.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Z.isDocumentKey(s)||(s=s.child(""));const o=new Ze(new Z(s),0);let u=new Qe(ce);return this.Yr.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(u=u.add(c.Hr)),!0)},o),L.resolve(this.ei(u))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){xe(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return L.forEach(n.mutations,i=>{const s=new Ze(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new Ze(n,0),i=this.Yr.firstAfterOrEqual(r);return L.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e){this.ni=e,this.docs=function(){return new Ve(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():vt.newInvalidDocument(n))}getEntries(e,n){let r=Vn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():vt.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Vn();const o=n.path,u=new Z(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:h,value:{document:m}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||gk(pk(m),r)<=0||(i.has(m.key)||Hl(n,m))&&(s=s.insert(m.key,m.mutableCopy()))}return L.resolve(s)}getAllFromCollectionGroup(e,n,r,i){te(9500)}ri(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new BS(this)}getSize(e){return L.resolve(this.size)}}class BS extends DS{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e){this.persistence=e,this.ii=new Kr(n=>fh(n),mh),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.si=0,this.oi=new xh,this.targetCount=0,this._i=zi.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),L.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new zi(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.hr(n),L.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.ii.forEach((o,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),L.waitFor(s).next(()=>i)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),L.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e,n){this.ai={},this.overlays={},this.ui=new Ll(0),this.ci=!1,this.ci=!0,this.li=new LS,this.referenceDelegate=e(this),this.hi=new $S(this),this.indexManager=new CS,this.remoteDocumentCache=function(i){return new US(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new TS(n),this.Ti=new MS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new OS,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new zS(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const i=new HS(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,n){return L.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class HS extends vk{constructor(e){super(),this.currentSequenceNumber=e}}class wh{constructor(e){this.persistence=e,this.Ai=new xh,this.Ri=null}static Vi(e){return new wh(e)}get mi(){if(this.Ri)return this.Ri;throw te(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.mi,r=>{const i=Z.fromPath(r);return this.fi(e,i).next(s=>{s||n.removeEntry(i,re.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return L.or([()=>L.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class vl{constructor(e,n){this.persistence=e,this.gi=new Kr(r=>wk(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=bS(this,n)}static Vi(e,n){return new vl(e,n)}Ii(){}di(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return L.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?L.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,n).next(u=>{u||(r++,s.removeEntry(o,re.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),L.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ja(e.data.value)),n}Sr(e,n,r){return L.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return L.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=he(),i=he();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Eh(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return Ow()?8:_k(Fw())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ps(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new qS;return this.ws(e,n,o).next(u=>{if(s.result=u,this.Rs)return this.Ss(e,n,o,u.size)})}).next(()=>s.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(ri()<=pe.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",ii(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),L.resolve()):(ri()<=pe.DEBUG&&K("QueryEngine","Query:",ii(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(ri()<=pe.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",ii(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gn(n))):L.resolve())}ps(e,n){if(wp(n))return L.resolve(null);let r=gn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=ed(n,null,"F"),r=gn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=he(...s);return this.gs.getDocuments(e,o).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.bs(n,u);return this.Ds(n,h,o,c.readTime)?this.ps(e,ed(n,null,"F")):this.vs(e,h,n,c)}))})))}ys(e,n,r,i){return wp(n)||i.isEqual(re.min())?L.resolve(null):this.gs.getDocuments(e,r).next(s=>{const o=this.bs(n,s);return this.Ds(n,o,r,i)?L.resolve(null):(ri()<=pe.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ii(n)),this.vs(e,o,n,mk(i,ho)).next(u=>u))})}bs(e,n){let r=new Qe(i0(e));return n.forEach((i,s)=>{Hl(e,s)&&(r=r.add(s))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,n,r){return ri()<=pe.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",ii(n)),this.gs.getDocumentsMatchingQuery(e,n,dr.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kh="LocalStore",GS=3e8;class KS{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new Ve(ce),this.Ms=new Kr(s=>fh(s),mh),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new FS(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function QS(t,e,n,r){return new KS(t,e,n,r)}async function C0(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],u=[];let c=he();for(const h of i){o.push(h.batchId);for(const m of h.mutations)c=c.add(m.key)}for(const h of s){u.push(h.batchId);for(const m of h.mutations)c=c.add(m.key)}return n.localDocuments.getDocuments(r,c).next(h=>({Bs:h,removedBatchIds:o,addedBatchIds:u}))})})}function YS(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return function(u,c,h,m){const y=h.batch,g=y.keys();let w=L.resolve();return g.forEach(A=>{w=w.next(()=>m.getEntry(c,A)).next(P=>{const j=h.docVersions.get(A);xe(j!==null,48541),P.version.compareTo(j)<0&&(y.applyToRemoteDocument(P,h),P.isValidDocument()&&(P.setReadTime(h.commitVersion),m.addEntry(P)))})}),w.next(()=>u.mutationQueue.removeMutationBatch(c,y))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=he();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(c=c.add(u.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function A0(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function XS(t,e){const n=oe(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const u=[];e.targetChanges.forEach((m,y)=>{const g=i.get(y);if(!g)return;u.push(n.hi.removeMatchingKeys(s,m.removedDocuments,y).next(()=>n.hi.addMatchingKeys(s,m.addedDocuments,y)));let w=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(y)!==null?w=w.withResumeToken(ut.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):m.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(m.resumeToken,r)),i=i.insert(y,w),function(P,j,k){return P.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=GS?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(g,w,m)&&u.push(n.hi.updateTargetData(s,w))});let c=Vn(),h=he();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(s,m))}),u.push(JS(s,o,e.documentUpdates).next(m=>{c=m.Ls,h=m.ks})),!r.isEqual(re.min())){const m=n.hi.getLastRemoteSnapshotVersion(s).next(y=>n.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));u.push(m)}return L.waitFor(u).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,h)).next(()=>c)}).then(s=>(n.Fs=i,s))}function JS(t,e,n){let r=he(),i=he();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Vn();return n.forEach((u,c)=>{const h=s.get(u);c.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(u)),c.isNoDocument()&&c.version.isEqual(re.min())?(e.removeEntry(u,c.readTime),o=o.insert(u,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),o=o.insert(u,c)):K(kh,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",c.version)}),{Ls:o,ks:i}})}function ZS(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ch),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function eT(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(s=>s?(i=s,L.resolve(i)):n.hi.allocateTargetId(r).next(o=>(i=new Gn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function sd(t,e,n){const r=oe(t),i=r.Fs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Qi(o))throw o;K(kh,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function Dp(t,e,n){const r=oe(t);let i=re.min(),s=he();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,h,m){const y=oe(c),g=y.Ms.get(m);return g!==void 0?L.resolve(y.Fs.get(g)):y.hi.getTargetData(h,m)}(r,o,gn(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,u.targetId).next(c=>{s=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?i:re.min(),n?s:he())).next(u=>(tT(r,Uk(e),u),{documents:u,qs:s})))}function tT(t,e,n){let r=t.xs.get(e)||re.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.xs.set(e,r)}class Vp{constructor(){this.activeTargetIds=Gk()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nT{constructor(){this.Fo=new Vp,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Vp,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp="ConnectivityMonitor";class Mp{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){K(Fp,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){K(Fp,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ha=null;function od(){return ha===null?ha=function(){return 268435456+Math.round(2147483648*Math.random())}():ha++,"0x"+ha.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gu="RestConnection",iT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sT{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===dl?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,s){const o=od(),u=this.Go(e,n.toUriEncodedString());K(Gu,`Sending RPC '${e}' ${o}:`,u,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,s);const{host:h}=new URL(u),m=sh(h);return this.jo(e,u,c,r,m).then(y=>(K(Gu,`Received RPC '${e}' ${o}: `,y),y),y=>{throw cr(Gu,`RPC '${e}' ${o} failed with error: `,y,"url: ",u,"request:",r),y})}Jo(e,n,r,i,s,o){return this.Wo(e,n,r,i,s)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Gi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,n){const r=iT[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pt="WebChannelConnection";class aT extends sT{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,s){const o=od();return new Promise((u,c)=>{const h=new jv;h.setWithCredentials(!0),h.listenOnce(Rv.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Pa.NO_ERROR:const y=h.getResponseJson();K(pt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(y)),u(y);break;case Pa.TIMEOUT:K(pt,`RPC '${e}' ${o} timed out`),c(new X(z.DEADLINE_EXCEEDED,"Request time out"));break;case Pa.HTTP_ERROR:const g=h.getStatus();if(K(pt,`RPC '${e}' ${o} failed with status:`,g,"response text:",h.getResponseText()),g>0){let w=h.getResponseJson();Array.isArray(w)&&(w=w[0]);const A=w==null?void 0:w.error;if(A&&A.status&&A.message){const P=function(k){const E=k.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(E)>=0?E:z.UNKNOWN}(A.status);c(new X(P,A.message))}else c(new X(z.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new X(z.UNAVAILABLE,"Connection failed."));break;default:te(9055,{c_:e,streamId:o,l_:h.getLastErrorCode(),h_:h.getLastError()})}}finally{K(pt,`RPC '${e}' ${o} completed.`)}});const m=JSON.stringify(i);K(pt,`RPC '${e}' ${o} sending request:`,i),h.send(n,"POST",m,r,15)})}P_(e,n,r){const i=od(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Dv(),u=bv(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const m=s.join("");K(pt,`Creating RPC '${e}' stream ${i}: ${m}`,c);const y=o.createWebChannel(m,c);this.T_(y);let g=!1,w=!1;const A=new oT({Ho:j=>{w?K(pt,`Not sending because RPC '${e}' stream ${i} is closed:`,j):(g||(K(pt,`Opening RPC '${e}' stream ${i} transport.`),y.open(),g=!0),K(pt,`RPC '${e}' stream ${i} sending:`,j),y.send(j))},Yo:()=>y.close()}),P=(j,k,E)=>{j.listen(k,T=>{try{E(T)}catch(b){setTimeout(()=>{throw b},0)}})};return P(y,Is.EventType.OPEN,()=>{w||(K(pt,`RPC '${e}' stream ${i} transport opened.`),A.s_())}),P(y,Is.EventType.CLOSE,()=>{w||(w=!0,K(pt,`RPC '${e}' stream ${i} transport closed`),A.__(),this.I_(y))}),P(y,Is.EventType.ERROR,j=>{w||(w=!0,cr(pt,`RPC '${e}' stream ${i} transport errored. Name:`,j.name,"Message:",j.message),A.__(new X(z.UNAVAILABLE,"The operation could not be completed")))}),P(y,Is.EventType.MESSAGE,j=>{var k;if(!w){const E=j.data[0];xe(!!E,16349);const T=E,b=(T==null?void 0:T.error)||((k=T[0])===null||k===void 0?void 0:k.error);if(b){K(pt,`RPC '${e}' stream ${i} received error:`,b);const D=b.status;let F=function(_){const S=ze[_];if(S!==void 0)return p0(S)}(D),v=b.message;F===void 0&&(F=z.INTERNAL,v="Unknown error status: "+D+" with message "+b.message),w=!0,A.__(new X(F,v)),y.close()}else K(pt,`RPC '${e}' stream ${i} received:`,E),A.a_(E)}}),P(u,Nv.STAT_EVENT,j=>{j.stat===Kc.PROXY?K(pt,`RPC '${e}' stream ${i} detected buffering proxy`):j.stat===Kc.NOPROXY&&K(pt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.o_()},0),A}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Ku(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(t){return new dS(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&K("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op="PersistentStream";class j0{constructor(e,n,r,i,s,o,u,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new P0(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Dn(n.toString()),Dn("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new X(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return K(Op,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(K(Op,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lT extends j0{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=mS(this.serializer,e),r=function(s){if(!("targetChange"in s))return re.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?re.min():o.readTime?yn(o.readTime):re.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=id(this.serializer),n.addTarget=function(s,o){let u;const c=o.target;if(u=Zc(c)?{documents:yS(s,c)}:{query:vS(s,c).Vt},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=v0(s,o.resumeToken);const h=td(s,o.expectedCount);h!==null&&(u.expectedCount=h)}else if(o.snapshotVersion.compareTo(re.min())>0){u.readTime=yl(s,o.snapshotVersion.toTimestamp());const h=td(s,o.expectedCount);h!==null&&(u.expectedCount=h)}return u}(this.serializer,e);const r=xS(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=id(this.serializer),n.removeTarget=e,this.k_(n)}}class uT extends j0{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=gS(e.writeResults,e.commitTime),r=yn(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=id(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>pS(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{}class dT extends cT{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new X(z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,nd(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new X(z.UNKNOWN,s.toString())})}Jo(e,n,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Jo(e,nd(n,r),i,o,u,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new X(z.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class hT{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Dn(n),this._a=!1):K("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r="RemoteStore";class fT{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{Yr(this)&&(K($r,"Restarting streams for network reachability change."),await async function(c){const h=oe(c);h.Ia.add(4),await Io(h),h.Aa.set("Unknown"),h.Ia.delete(4),await Ql(h)}(this))})}),this.Aa=new hT(r,i)}}async function Ql(t){if(Yr(t))for(const e of t.da)await e(!0)}async function Io(t){for(const e of t.da)await e(!1)}function R0(t,e){const n=oe(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Ch(n)?Ih(n):Yi(n).x_()&&Th(n,e))}function Sh(t,e){const n=oe(t),r=Yi(n);n.Ta.delete(e),r.x_()&&N0(n,e),n.Ta.size===0&&(r.x_()?r.B_():Yr(n)&&n.Aa.set("Unknown"))}function Th(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Yi(t).H_(e)}function N0(t,e){t.Ra.$e(e),Yi(t).Y_(e)}function Ih(t){t.Ra=new aS({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Yi(t).start(),t.Aa.aa()}function Ch(t){return Yr(t)&&!Yi(t).M_()&&t.Ta.size>0}function Yr(t){return oe(t).Ia.size===0}function b0(t){t.Ra=void 0}async function mT(t){t.Aa.set("Online")}async function pT(t){t.Ta.forEach((e,n)=>{Th(t,e)})}async function gT(t,e){b0(t),Ch(t)?(t.Aa.la(e),Ih(t)):t.Aa.set("Unknown")}async function yT(t,e,n){if(t.Aa.set("Online"),e instanceof y0&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const u of s.targetIds)i.Ta.has(u)&&(await i.remoteSyncer.rejectListen(u,o),i.Ta.delete(u),i.Ra.removeTarget(u))}(t,e)}catch(r){K($r,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await _l(t,r)}else if(e instanceof ba?t.Ra.Ye(e):e instanceof g0?t.Ra.it(e):t.Ra.et(e),!n.isEqual(re.min()))try{const r=await A0(t.localStore);n.compareTo(r)>=0&&await function(s,o){const u=s.Ra.Pt(o);return u.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const m=s.Ta.get(h);m&&s.Ta.set(h,m.withResumeToken(c.resumeToken,o))}}),u.targetMismatches.forEach((c,h)=>{const m=s.Ta.get(c);if(!m)return;s.Ta.set(c,m.withResumeToken(ut.EMPTY_BYTE_STRING,m.snapshotVersion)),N0(s,c);const y=new Gn(m.target,c,h,m.sequenceNumber);Th(s,y)}),s.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){K($r,"Failed to raise snapshot:",r),await _l(t,r)}}async function _l(t,e,n){if(!Qi(e))throw e;t.Ia.add(1),await Io(t),t.Aa.set("Offline"),n||(n=()=>A0(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K($r,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Ql(t)})}function D0(t,e){return e().catch(n=>_l(t,n,e))}async function Yl(t){const e=oe(t),n=pr(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:ch;for(;vT(e);)try{const i=await ZS(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,_T(e,i)}catch(i){await _l(e,i)}V0(e)&&F0(e)}function vT(t){return Yr(t)&&t.Pa.length<10}function _T(t,e){t.Pa.push(e);const n=pr(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function V0(t){return Yr(t)&&!pr(t).M_()&&t.Pa.length>0}function F0(t){pr(t).start()}async function xT(t){pr(t).na()}async function wT(t){const e=pr(t);for(const n of t.Pa)e.X_(n.mutations)}async function ET(t,e,n){const r=t.Pa.shift(),i=yh.from(r,e,n);await D0(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Yl(t)}async function kT(t,e){e&&pr(t).Z_&&await async function(r,i){if(function(o){return sS(o)&&o!==z.ABORTED}(i.code)){const s=r.Pa.shift();pr(r).N_(),await D0(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Yl(r)}}(t,e),V0(t)&&F0(t)}async function Lp(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),K($r,"RemoteStore received new credentials");const r=Yr(n);n.Ia.add(3),await Io(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Ql(n)}async function ST(t,e){const n=oe(t);e?(n.Ia.delete(2),await Ql(n)):e||(n.Ia.add(2),await Io(n),n.Aa.set("Unknown"))}function Yi(t){return t.Va||(t.Va=function(n,r,i){const s=oe(n);return s.ia(),new lT(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:mT.bind(null,t),e_:pT.bind(null,t),n_:gT.bind(null,t),J_:yT.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Ch(t)?Ih(t):t.Aa.set("Unknown")):(await t.Va.stop(),b0(t))})),t.Va}function pr(t){return t.ma||(t.ma=function(n,r,i){const s=oe(n);return s.ia(),new uT(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:xT.bind(null,t),n_:kT.bind(null,t),ea:wT.bind(null,t),ta:ET.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Yl(t)):(await t.ma.stop(),t.Pa.length>0&&(K($r,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,u=new Ah(e,n,o,i,s);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ph(t,e){if(Dn("AsyncQueue",`${e}: ${t}`),Qi(t))return new X(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{static emptySet(e){return new Ii(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Z.comparator(n.key,r.key):(n,r)=>Z.comparator(n.key,r.key),this.keyedMap=Cs(),this.sortedSet=new Ve(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ii)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ii;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(){this.fa=new Ve(Z.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):te(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ui{constructor(e,n,r,i,s,o,u,c,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(u=>{o.push({type:0,doc:u})}),new Ui(e,n,Ii.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$l(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class IT{constructor(){this.queries=Up(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=oe(n),s=i.queries;i.queries=Up(),s.forEach((o,u)=>{for(const c of u.wa)c.onError(r)})})(this,new X(z.ABORTED,"Firestore shutting down"))}}function Up(){return new Kr(t=>r0(t),$l)}async function CT(t,e){const n=oe(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new TT,r=e.ba()?0:1);try{switch(r){case 0:s.ya=await n.onListen(i,!0);break;case 1:s.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const u=Ph(o,`Initialization of query '${ii(e.query)}' failed`);return void e.onError(u)}n.queries.set(i,s),s.wa.push(e),e.va(n.onlineState),s.ya&&e.Ca(s.ya)&&jh(n)}async function AT(t,e){const n=oe(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function PT(t,e){const n=oe(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const u of o.wa)u.Ca(i)&&(r=!0);o.ya=i}}r&&jh(n)}function jT(t,e,n){const r=oe(t),i=r.queries.get(e);if(i)for(const s of i.wa)s.onError(n);r.queries.delete(e)}function jh(t){t.Da.forEach(e=>{e.next()})}var ad,Bp;(Bp=ad||(ad={})).Fa="default",Bp.Cache="cache";class RT{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ui(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Ui.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==ad.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e){this.key=e}}class O0{constructor(e){this.key=e}}class NT{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=he(),this.mutatedKeys=he(),this.Xa=i0(e),this.eu=new Ii(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new zp,i=n?n.eu:this.eu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,u=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((m,y)=>{const g=i.get(m),w=Hl(this.query,y)?y:null,A=!!g&&this.mutatedKeys.has(g.key),P=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let j=!1;g&&w?g.data.isEqual(w.data)?A!==P&&(r.track({type:3,doc:w}),j=!0):this.iu(g,w)||(r.track({type:2,doc:w}),j=!0,(c&&this.Xa(w,c)>0||h&&this.Xa(w,h)<0)&&(u=!0)):!g&&w?(r.track({type:0,doc:w}),j=!0):g&&!w&&(r.track({type:1,doc:g}),j=!0,(c||h)&&(u=!0)),j&&(w?(o=o.add(w),s=P?s.add(m):s.delete(m)):(o=o.delete(m),s=s.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),s=s.delete(m.key),r.track({type:1,doc:m})}return{eu:o,ru:r,Ds:u,mutatedKeys:s}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((m,y)=>function(w,A){const P=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te(20277,{At:j})}};return P(w)-P(A)}(m.type,y.type)||this.Xa(m.doc,y.doc)),this.su(r),i=i!=null&&i;const u=n&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,h=c!==this.Ya;return this.Ya=c,o.length!==0||h?{snapshot:new Ui(this.query,e.eu,s,o,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:u}:{_u:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new zp,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=he(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new O0(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new M0(r))}),n}uu(e){this.Ha=e.qs,this.Za=he();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Ui.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Rh="SyncEngine";class bT{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class DT{constructor(e){this.key=e,this.lu=!1}}class VT{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Kr(u=>r0(u),$l),this.Tu=new Map,this.Iu=new Set,this.du=new Ve(Z.comparator),this.Eu=new Map,this.Au=new xh,this.Ru={},this.Vu=new Map,this.mu=zi.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function FT(t,e,n=!0){const r=H0(t);let i;const s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await L0(r,e,n,!0),i}async function MT(t,e){const n=H0(t);await L0(n,e,!0,!1)}async function L0(t,e,n,r){const i=await eT(t.localStore,gn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let u;return r&&(u=await OT(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&R0(t.remoteStore,i),u}async function OT(t,e,n,r,i){t.gu=(y,g,w)=>async function(P,j,k,E){let T=j.view.nu(k);T.Ds&&(T=await Dp(P.localStore,j.query,!1).then(({documents:v})=>j.view.nu(v,T)));const b=E&&E.targetChanges.get(j.targetId),D=E&&E.targetMismatches.get(j.targetId)!=null,F=j.view.applyChanges(T,P.isPrimaryClient,b,D);return Hp(P,j.targetId,F._u),F.snapshot}(t,y,g,w);const s=await Dp(t.localStore,e,!0),o=new NT(e,s.qs),u=o.nu(s.documents),c=To.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=o.applyChanges(u,t.isPrimaryClient,c);Hp(t,n,h._u);const m=new bT(e,n,o);return t.Pu.set(e,m),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),h.snapshot}async function LT(t,e,n){const r=oe(t),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(o=>!$l(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await sd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Sh(r.remoteStore,i.targetId),ld(r,i.targetId)}).catch(Ki)):(ld(r,i.targetId),await sd(r.localStore,i.targetId,!0))}async function zT(t,e){const n=oe(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Sh(n.remoteStore,r.targetId))}async function UT(t,e,n){const r=KT(t);try{const i=await function(o,u){const c=oe(o),h=Pe.now(),m=u.reduce((w,A)=>w.add(A.key),he());let y,g;return c.persistence.runTransaction("Locally write mutations","readwrite",w=>{let A=Vn(),P=he();return c.Os.getEntries(w,m).next(j=>{A=j,A.forEach((k,E)=>{E.isValidDocument()||(P=P.add(k))})}).next(()=>c.localDocuments.getOverlayedDocuments(w,A)).next(j=>{y=j;const k=[];for(const E of u){const T=eS(E,y.get(E.key).overlayedDocument);T!=null&&k.push(new Qr(E.key,T,Qv(T.value.mapValue),on.exists(!0)))}return c.mutationQueue.addMutationBatch(w,h,k,u)}).next(j=>{g=j;const k=j.applyToLocalDocumentSet(y,P);return c.documentOverlayCache.saveOverlays(w,j.batchId,k)})}).then(()=>({batchId:g.batchId,changes:o0(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,u,c){let h=o.Ru[o.currentUser.toKey()];h||(h=new Ve(ce)),h=h.insert(u,c),o.Ru[o.currentUser.toKey()]=h}(r,i.batchId,n),await Co(r,i.changes),await Yl(r.remoteStore)}catch(i){const s=Ph(i,"Failed to persist write");n.reject(s)}}async function z0(t,e){const n=oe(t);try{const r=await XS(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Eu.get(s);o&&(xe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?xe(o.lu,14607):i.removedDocuments.size>0&&(xe(o.lu,42227),o.lu=!1))}),await Co(n,r,e)}catch(r){await Ki(r)}}function $p(t,e,n){const r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((s,o)=>{const u=o.view.va(e);u.snapshot&&i.push(u.snapshot)}),function(o,u){const c=oe(o);c.onlineState=u;let h=!1;c.queries.forEach((m,y)=>{for(const g of y.wa)g.va(u)&&(h=!0)}),h&&jh(c)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function BT(t,e,n){const r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),s=i&&i.key;if(s){let o=new Ve(Z.comparator);o=o.insert(s,vt.newNoDocument(s,re.min()));const u=he().add(s),c=new Gl(re.min(),new Map,new Ve(ce),o,u);await z0(r,c),r.du=r.du.remove(s),r.Eu.delete(e),Nh(r)}else await sd(r.localStore,e,!1).then(()=>ld(r,e,n)).catch(Ki)}async function $T(t,e){const n=oe(t),r=e.batch.batchId;try{const i=await YS(n.localStore,e);B0(n,r,null),U0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Co(n,i)}catch(i){await Ki(i)}}async function HT(t,e,n){const r=oe(t);try{const i=await function(o,u){const c=oe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let m;return c.mutationQueue.lookupMutationBatch(h,u).next(y=>(xe(y!==null,37113),m=y.keys(),c.mutationQueue.removeMutationBatch(h,y))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,m,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m)).next(()=>c.localDocuments.getDocuments(h,m))})}(r.localStore,e);B0(r,e,n),U0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Co(r,i)}catch(i){await Ki(i)}}function U0(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function B0(t,e,n){const r=oe(t);let i=r.Ru[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function ld(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||$0(t,r)})}function $0(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Sh(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Nh(t))}function Hp(t,e,n){for(const r of n)r instanceof M0?(t.Au.addReference(r.key,e),qT(t,r)):r instanceof O0?(K(Rh,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||$0(t,r.key)):te(19791,{yu:r})}function qT(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(K(Rh,"New document in limbo: "+n),t.Iu.add(r),Nh(t))}function Nh(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new Z(Ae.fromString(e)),r=t.mu.next();t.Eu.set(r,new DT(n)),t.du=t.du.insert(n,r),R0(t.remoteStore,new Gn(gn(n0(n.path)),r,"TargetPurposeLimboResolution",Ll.ue))}}async function Co(t,e,n){const r=oe(t),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((u,c)=>{o.push(r.gu(c,e,n).then(h=>{var m;if((h||n)&&r.isPrimaryClient){const y=h?!h.fromCache:(m=n==null?void 0:n.targetChanges.get(c.targetId))===null||m===void 0?void 0:m.current;r.sharedClientState.updateQueryState(c.targetId,y?"current":"not-current")}if(h){i.push(h);const y=Eh.Es(c.targetId,h);s.push(y)}}))}),await Promise.all(o),r.hu.J_(i),await async function(c,h){const m=oe(c);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>L.forEach(h,g=>L.forEach(g.Is,w=>m.persistence.referenceDelegate.addReference(y,g.targetId,w)).next(()=>L.forEach(g.ds,w=>m.persistence.referenceDelegate.removeReference(y,g.targetId,w)))))}catch(y){if(!Qi(y))throw y;K(kh,"Failed to update sequence numbers: "+y)}for(const y of h){const g=y.targetId;if(!y.fromCache){const w=m.Fs.get(g),A=w.snapshotVersion,P=w.withLastLimboFreeSnapshotVersion(A);m.Fs=m.Fs.insert(g,P)}}}(r.localStore,s))}async function WT(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){K(Rh,"User change. New user:",e.toKey());const r=await C0(n.localStore,e);n.currentUser=e,function(s,o){s.Vu.forEach(u=>{u.forEach(c=>{c.reject(new X(z.CANCELLED,o))})}),s.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Co(n,r.Bs)}}function GT(t,e){const n=oe(t),r=n.Eu.get(e);if(r&&r.lu)return he().add(r.key);{let i=he();const s=n.Tu.get(e);if(!s)return i;for(const o of s){const u=n.Pu.get(o);i=i.unionWith(u.view.tu)}return i}}function H0(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=z0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=GT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BT.bind(null,e),e.hu.J_=PT.bind(null,e.eventManager),e.hu.pu=jT.bind(null,e.eventManager),e}function KT(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$T.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=HT.bind(null,e),e}class xl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Kl(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return QS(this.persistence,new WS,e.initialUser,this.serializer)}Du(e){return new I0(wh.Vi,this.serializer)}bu(e){return new nT}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xl.provider={build:()=>new xl};class QT extends xl{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){xe(this.persistence.referenceDelegate instanceof vl,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new RS(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Pt.withCacheSize(this.cacheSizeBytes):Pt.DEFAULT;return new I0(r=>vl.Vi(r,n),this.serializer)}}class ud{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>$p(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=WT.bind(null,this.syncEngine),await ST(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new IT}()}createDatastore(e){const n=Kl(e.databaseInfo.databaseId),r=function(s){return new aT(s)}(e.databaseInfo);return function(s,o,u,c){return new dT(s,o,u,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,u){return new fT(r,i,s,o,u)}(this.localStore,this.datastore,e.asyncQueue,n=>$p(this.syncEngine,n,0),function(){return Mp.C()?new Mp:new rT}())}createSyncEngine(e,n){return function(i,s,o,u,c,h,m){const y=new VT(i,s,o,u,c,h);return m&&(y.fu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=oe(i);K($r,"RemoteStore shutting down."),s.Ia.add(5),await Io(s),s.Ea.shutdown(),s.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ud.provider={build:()=>new ud};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Dn("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr="FirestoreClient";class XT{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=gt.UNAUTHENTICATED,this.clientId=lh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{K(gr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(K(gr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ph(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Qu(t,e){t.asyncQueue.verifyOperationInProgress(),K(gr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await C0(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{cr("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{K("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{cr("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function qp(t,e){t.asyncQueue.verifyOperationInProgress();const n=await JT(t);K(gr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Lp(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Lp(e.remoteStore,i)),t._onlineComponents=e}async function JT(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K(gr,"Using user provided OfflineComponentProvider");try{await Qu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===z.FAILED_PRECONDITION||i.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;cr("Error using user provided cache. Falling back to memory cache: "+n),await Qu(t,new xl)}}else K(gr,"Using default OfflineComponentProvider"),await Qu(t,new QT(void 0));return t._offlineComponents}async function q0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K(gr,"Using user provided OnlineComponentProvider"),await qp(t,t._uninitializedComponentsProvider._online)):(K(gr,"Using default OnlineComponentProvider"),await qp(t,new ud))),t._onlineComponents}function ZT(t){return q0(t).then(e=>e.syncEngine)}async function eI(t){const e=await q0(t),n=e.eventManager;return n.onListen=FT.bind(null,e.syncEngine),n.onUnlisten=LT.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=MT.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=zT.bind(null,e.syncEngine),n}function tI(t,e,n={}){const r=new or;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,u,c,h){const m=new YT({next:g=>{m.Ou(),o.enqueueAndForget(()=>AT(s,y)),g.fromCache&&c.source==="server"?h.reject(new X(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(g)},error:g=>h.reject(g)}),y=new RT(u,m,{includeMetadataChanges:!0,ka:!0});return CT(s,y)}(await eI(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0="firestore.googleapis.com",Gp=!0;class Kp{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new X(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=G0,this.ssl=Gp}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Gp;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=T0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<PS)throw new X(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=W0((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new X(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new X(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new X(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xl{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kp(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ik;switch(r.type){case"firstParty":return new lk(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Wp.get(n);r&&(K("ComponentProvider","Removing Datastore"),Wp.delete(n),r.terminate())}(this),Promise.resolve()}}function nI(t,e,n,r={}){var i;t=Br(t,Xl);const s=sh(e),o=t._getSettings(),u=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;s&&(Rw(`https://${c}`),Vw("Firestore",!0)),o.host!==G0&&o.host!==c&&cr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},o),{host:c,ssl:s,emulatorOptions:r});if(!ll(h,u)&&(t._setSettings(h),r.mockUserToken)){let m,y;if(typeof r.mockUserToken=="string")m=r.mockUserToken,y=gt.MOCK_USER;else{m=Nw(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new X(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new gt(g)}t._authCredentials=new sk(new Fv(m,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Jl(this.firestore,e,this._query)}}class tt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ar(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tt(this.firestore,e,this._key)}toJSON(){return{type:tt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ko(n,tt._jsonSchema))return new tt(e,r||null,new Z(Ae.fromString(n.referencePath)))}}tt._jsonSchemaVersion="firestore/documentReference/1.0",tt._jsonSchema={type:Be("string",tt._jsonSchemaVersion),referencePath:Be("string")};class ar extends Jl{constructor(e,n,r){super(e,n,n0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tt(this.firestore,null,new Z(e))}withConverter(e){return new ar(this.firestore,e,this._path)}}function K0(t,e,...n){if(t=ao(t),Ov("collection","path",e),t instanceof Xl){const r=Ae.fromString(e,...n);return lp(r),new ar(t,null,r)}{if(!(t instanceof tt||t instanceof ar))throw new X(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ae.fromString(e,...n));return lp(r),new ar(t.firestore,null,r)}}function Vr(t,e,...n){if(t=ao(t),arguments.length===1&&(e=lh.newId()),Ov("doc","path",e),t instanceof Xl){const r=Ae.fromString(e,...n);return ap(r),new tt(t,null,new Z(r))}{if(!(t instanceof tt||t instanceof ar))throw new X(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ae.fromString(e,...n));return ap(r),new tt(t.firestore,t instanceof ar?t.converter:null,new Z(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp="AsyncQueue";class Yp{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new P0(this,"async_queue_retry"),this.oc=()=>{const r=Ku();r&&K(Qp,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Ku();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Ku();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new or;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Qi(e))throw e;K(Qp,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Dn("INTERNAL UNHANDLED ERROR: ",Xp(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=Ah.createAndSchedule(this,e,n,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&te(47125,{hc:Xp(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function Xp(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Ao extends Xl{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Yp,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Yp(e),this._firestoreClient=void 0,await e}}}function rI(t,e){const n=typeof t=="object"?t:qE(),r=typeof t=="string"?t:dl,i=zE(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Pw("firestore");s&&nI(i,...s)}return i}function Q0(t){if(t._terminated)throw new X(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||iI(t),t._firestoreClient}function iI(t){var e,n,r;const i=t._freezeSettings(),s=function(u,c,h,m){return new Sk(u,c,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,W0(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new XT(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qt(ut.fromBase64String(e))}catch(n){throw new X(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new qt(ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:qt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ko(e,qt._jsonSchema))return qt.fromBase64String(e.bytes)}}qt._jsonSchemaVersion="firestore/bytes/1.0",qt._jsonSchema={type:Be("string",qt._jsonSchemaVersion),bytes:Be("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new X(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:vn._jsonSchemaVersion}}static fromJSON(e){if(ko(e,vn._jsonSchema))return new vn(e.latitude,e.longitude)}}vn._jsonSchemaVersion="firestore/geoPoint/1.0",vn._jsonSchema={type:Be("string",vn._jsonSchemaVersion),latitude:Be("number"),longitude:Be("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:_n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ko(e,_n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new _n(e.vectorValues);throw new X(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_n._jsonSchemaVersion="firestore/vectorValue/1.0",_n._jsonSchema={type:Be("string",_n._jsonSchemaVersion),vectorValues:Be("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI=/^__.*__$/;class oI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Qr(e,this.data,this.fieldMask,n,this.fieldTransforms):new So(e,this.data,n,this.fieldTransforms)}}function X0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te(40011,{Ec:t})}}class Dh{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Dh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return wl(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(X0(this.Ec)&&sI.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class aI{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Kl(e)}Dc(e,n,r,i=!1){return new Dh({Ec:e,methodName:n,bc:r,path:ot.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function J0(t){const e=t._freezeSettings(),n=Kl(t._databaseId);return new aI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Z0(t,e,n,r,i,s={}){const o=t.Dc(s.merge||s.mergeFields?2:0,e,n,i);r_("Data must be an object, but it was:",o,r);const u=t_(r,o);let c,h;if(s.merge)c=new nn(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const m=[];for(const y of s.mergeFields){const g=lI(e,y,n);if(!o.contains(g))throw new X(z.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);cI(m,g)||m.push(g)}c=new nn(m),h=o.fieldTransforms.filter(y=>c.covers(y.field))}else c=null,h=o.fieldTransforms;return new oI(new Ht(u),c,h)}function e_(t,e){if(n_(t=ao(t)))return r_("Unsupported field value:",e,t),t_(t,e);if(t instanceof Y0)return function(r,i){if(!X0(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const u of r){let c=e_(u,i.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ao(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Kk(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Pe.fromDate(r);return{timestampValue:yl(i.serializer,s)}}if(r instanceof Pe){const s=new Pe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:yl(i.serializer,s)}}if(r instanceof vn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qt)return{bytesValue:v0(i.serializer,r._byteString)};if(r instanceof tt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:_h(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof _n)return function(o,u){return{mapValue:{fields:{[Gv]:{stringValue:Kv},[hl]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw u.wc("VectorValues must only contain numeric values.");return ph(u.serializer,h)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${uh(r)}`)}(t,e)}function t_(t,e){const n={};return Uv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gr(t,(r,i)=>{const s=e_(i,e.Vc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function n_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Pe||t instanceof vn||t instanceof qt||t instanceof tt||t instanceof Y0||t instanceof _n)}function r_(t,e,n){if(!n_(n)||!Lv(n)){const r=uh(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function lI(t,e,n){if((e=ao(e))instanceof bh)return e._internalPath;if(typeof e=="string")return i_(t,e);throw wl("Field path arguments must be of type string or ",t,!1,void 0,n)}const uI=new RegExp("[~\\*/\\[\\]]");function i_(t,e,n){if(e.search(uI)>=0)throw wl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new bh(...e.split("."))._internalPath}catch{throw wl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function wl(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new X(z.INVALID_ARGUMENT,u+t+c)}function cI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(o_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class dI extends s_{data(){return super.data()}}function o_(t,e){return typeof e=="string"?i_(t,e):e instanceof bh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new X(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fI{convertValue(e,n="none"){switch(mr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(fr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Gr(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[hl].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Oe(o.doubleValue));return new _n(s)}convertGeoPoint(e){return new vn(Oe(e.latitude),Oe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ul(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(fo(e));default:return null}}convertTimestamp(e){const n=hr(e);return new Pe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ae.fromString(e);xe(S0(r),9688,{name:e});const i=new mo(r.get(1),r.get(3)),s=new Z(r.popFirst(5));return i.isEqual(n)||Dn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a_(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class fa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ci extends s_{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Da(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(o_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new X(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ci._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ci._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ci._jsonSchema={type:Be("string",Ci._jsonSchemaVersion),bundleSource:Be("string","DocumentSnapshot"),bundleName:Be("string"),bundle:Be("string")};class Da extends Ci{data(e={}){return super.data(e)}}class Ai{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new fa(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Da(this._firestore,this._userDataWriter,r.key,r,new fa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(u=>{const c=new Da(i._firestore,i._userDataWriter,u.doc.key,u.doc,new fa(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>s||u.type!==3).map(u=>{const c=new Da(i._firestore,i._userDataWriter,u.doc.key,u.doc,new fa(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,m=-1;return u.type!==0&&(h=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),m=o.indexOf(u.doc.key)),{type:mI(u.type),doc:c,oldIndex:h,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new X(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ai._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=lh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function mI(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te(61501,{type:t})}}Ai._jsonSchemaVersion="firestore/querySnapshot/1.0",Ai._jsonSchema={type:Be("string",Ai._jsonSchemaVersion),bundleSource:Be("string","QuerySnapshot"),bundleName:Be("string"),bundle:Be("string")};class pI extends fI{constructor(e){super(),this.firestore=e}convertBytes(e){return new qt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new tt(this.firestore,null,n)}}function l_(t){t=Br(t,Jl);const e=Br(t.firestore,Ao),n=Q0(e),r=new pI(e);return hI(t._query),tI(n,t._query).then(i=>new Ai(e,r,t,i))}function El(t,e,n){t=Br(t,tt);const r=Br(t.firestore,Ao),i=a_(t.converter,e,n);return Vh(r,[Z0(J0(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,on.none())])}function u_(t){return Vh(Br(t.firestore,Ao),[new gh(t._key,on.none())])}function gI(t,e){const n=Br(t.firestore,Ao),r=Vr(t),i=a_(t.converter,e);return Vh(n,[Z0(J0(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,on.exists(!1))]).then(()=>r)}function Vh(t,e){return function(r,i){const s=new or;return r.asyncQueue.enqueueAndForget(async()=>UT(await ZT(r),i,s)),s.promise}(Q0(t),e)}(function(e,n=!0){(function(i){Gi=i})(HE),ul(new lo("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),u=new Ao(new ok(r.getProvider("auth-internal")),new uk(o,r.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new X(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mo(h.options.projectId,m)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),u._setSettings(s),u},"PUBLIC").setMultipleInstances(!0)),Ti(np,rp,e),Ti(np,rp,"esm2017")})();const Jp={apiKey:"AIzaSyCrjfm9mX_pX_D7puCegTe3tOyoHm-0r9E",authDomain:"soulmate-desserts.firebaseapp.com",projectId:"soulmate-desserts",storageBucket:void 0,messagingSenderId:void 0,appId:"1:135653108318:web:916028ee93df39ec8d22cf"};let Zp=null,Zl=null;Jp.projectId?(Zp=Xm().length?Xm()[0]:Iv(Jp),Zl=rI(Zp)):console.warn("Firebase enabled but config is missing. Check .env settings.");const Kn=()=>{if(!Zl)throw new Error("Firebase is not enabled. Set VITE_USE_FIREBASE=true and provide config.")},xs=()=>K0(Zl,"products"),c_=t=>({id:t.id,...t.data()}),ma={async getProducts(){return Kn(),(await l_(xs())).docs.map(c_)},async createProduct(t){if(Kn(),t.id)return await El(Vr(xs(),t.id),t,{merge:!0}),t;const e=await gI(xs(),t);return{...t,id:e.id}},async updateProduct(t,e){return Kn(),await El(Vr(xs(),t),{...e,id:t},{merge:!0}),{...e,id:t}},async deleteProduct(t){return Kn(),await u_(Vr(xs(),t)),!0}},pa=()=>K0(Zl,"countryContacts"),ga={async getCountryContacts(){return Kn(),(await l_(pa())).docs.map(c_)},async createCountryContact(t){if(Kn(),!t.id)throw new Error("Contact must have an ID (country code).");return await El(Vr(pa(),t.id),t),t},async updateCountryContact(t,e){return Kn(),await El(Vr(pa(),t),e,{merge:!0}),{...e,id:t}},async deleteCountryContact(t){return Kn(),await u_(Vr(pa(),t)),!0}},yI="http://localhost:3002",qe=async(t,e={})=>{try{const n=await fetch(`${yI}/${t}`,{headers:{"Content-Type":"application/json"},...e});if(!n.ok)throw new Error(`API Error: ${n.statusText}`);return await n.json()}catch(n){throw console.error("Request Failed:",n),n}},ae={getProducts:()=>ma.getProducts(),createProduct:t=>ma.createProduct(t),updateProduct:(t,e)=>ma.updateProduct(t,e),deleteProduct:t=>ma.deleteProduct(t),getIngredients:()=>qe("ingredients"),createIngredient:t=>qe("ingredients",{method:"POST",body:JSON.stringify(t)}),updateIngredient:(t,e)=>qe(`ingredients/${t}`,{method:"PUT",body:JSON.stringify(e)}),deleteIngredient:t=>qe(`ingredients/${t}`,{method:"DELETE"}),getOrders:()=>qe("orders"),createOrder:t=>qe("orders",{method:"POST",body:JSON.stringify(t)}),updateOrder:(t,e)=>qe(`orders/${t}`,{method:"PUT",body:JSON.stringify(e)}),getMessages:()=>qe("messages"),createMessage:t=>qe("messages",{method:"POST",body:JSON.stringify(t)}),deleteMessage:t=>qe(`messages/${t}`,{method:"DELETE"}),getUsers:()=>qe("users"),createUser:t=>qe("users",{method:"POST",body:JSON.stringify(t)}),deleteUser:t=>qe(`users/${t}`,{method:"DELETE"}),getInvites:()=>qe("invites"),createInvite:t=>qe("invites",{method:"POST",body:JSON.stringify(t)}),updateInvite:(t,e)=>qe(`invites/${t}`,{method:"PUT",body:JSON.stringify(e)}),deleteInvite:t=>qe(`invites/${t}`,{method:"DELETE"}),getSettings:()=>qe("settings/1"),updateSettings:t=>qe("settings/1",{method:"PUT",body:JSON.stringify({id:1,...t})}),getCountryContacts:()=>ga.getCountryContacts(),createCountryContact:t=>ga.createCountryContact(t),updateCountryContact:(t,e)=>ga.updateCountryContact(t,e),deleteCountryContact:t=>ga.deleteCountryContact(t),getCountryFromIP:async()=>{try{const e=await(await fetch("https://ipapi.co/json/")).json();return{countryCode:e.country_code,countryName:e.country_name}}catch(t){return console.error("Failed to get country from IP:",t),{countryCode:"GENERAL",countryName:"Unknown"}}}},ws={email:"admin@soulmate.com",password:"Admin@2024!",name:"Admin",role:"admin"},d_=B.createContext(),Xr=()=>B.useContext(d_),vI=({children:t})=>{const[e,n]=B.useState(null),[r,i]=B.useState("public"),[s,o]=B.useState([]),[u,c]=B.useState([]),[h,m]=B.useState(0);B.useEffect(()=>{const T=localStorage.getItem("soulmate_user");if(T){const b=JSON.parse(T);n(b),i(b.role)}},[]),B.useEffect(()=>{(async()=>{try{const[b,D]=await Promise.all([ae.getUsers(),ae.getInvites()]);c(b),o(D)}catch(b){console.error("Failed to load auth data:",b)}})()},[h]);const y=(T,b)=>{if(T===ws.email&&b===ws.password){const F={name:ws.name,email:ws.email,role:ws.role};return n(F),i(F.role),localStorage.setItem("soulmate_user",JSON.stringify(F)),!0}const D=u.find(F=>F.email===T&&F.password===b);if(D){const F={name:D.name,email:D.email,role:D.role};return n(F),i(F.role),localStorage.setItem("soulmate_user",JSON.stringify(F)),!0}return!1},g=async(T,b,D,F)=>{const v=s.find(p=>p.token===T&&!p.used);if(v){const p={id:Date.now().toString(),name:b,email:D,password:F,role:v.role,createdAt:new Date().toISOString()};try{await ae.createUser(p);const _={...v,used:!0};await ae.updateInvite(v.id,_),c([...u,p]),o(s.map(I=>I.id===v.id?_:I));const S={name:p.name,email:p.email,role:p.role};return n(S),i(S.role),localStorage.setItem("soulmate_user",JSON.stringify(S)),m(I=>I+1),!0}catch(_){return console.error("Registration failed:",_),!1}}return!1},w=()=>{n(null),i("public"),localStorage.removeItem("soulmate_user")},A=async(T,b="",D=7)=>{const F=Math.random().toString(36).substr(2,8).toUpperCase(),v=new Date;v.setDate(v.getDate()+parseInt(D));const p={id:Date.now().toString(),token:F,role:T,email:b,used:!1,expiresAt:v.toISOString().split("T")[0]};try{const _=await ae.createInvite(p);return o([...s,_]),{success:!0,invite:_}}catch(_){return console.error("Failed to create invite:",_),{success:!1}}},P=async T=>{try{await ae.deleteInvite(T),o(s.filter(b=>b.id!==T))}catch(b){console.error("Failed to delete invite:",b)}},j=async T=>{try{await ae.deleteUser(T),c(u.filter(b=>b.id!==T))}catch(b){console.error("Failed to delete user:",b)}},k=r==="admin",E=r==="dealer"||r==="admin";return l.jsx(d_.Provider,{value:{user:e,role:r,login:y,logout:w,registerWithInvite:g,createInvite:A,deleteInvite:P,deleteUser:j,invites:s,users:u,isDealer:E,isAdmin:k,authVersion:h},children:t})},h_=B.createContext(),Xi=()=>B.useContext(h_),_I=({children:t})=>{const[e,n]=B.useState(()=>{const w=localStorage.getItem("soulmate_cart");return w?JSON.parse(w):[]}),[r,i]=B.useState(!1),[s,o]=B.useState(!1);B.useEffect(()=>{localStorage.setItem("soulmate_cart",JSON.stringify(e))},[e]);const u=(w,A=1)=>{n(P=>P.find(k=>k.id===w.id)?P.map(k=>k.id===w.id?{...k,quantity:k.quantity+A}:k):[...P,{...w,quantity:A}]),i(!0),o(!0),setTimeout(()=>o(!1),300)},c=w=>{n(A=>A.filter(P=>P.id!==w))},h=(w,A)=>{n(P=>P.map(j=>{if(j.id===w){const k=j.quantity+A;return k>0?{...j,quantity:k}:j}return j}))},m=()=>n([]),y=e.reduce((w,A)=>w+A.price*A.quantity,0),g=e.reduce((w,A)=>w+A.quantity,0);return l.jsx(h_.Provider,{value:{cart:e,addToCart:u,removeFromCart:c,updateQuantity:h,clearCart:m,cartTotal:y,itemCount:g,isOpen:r,setIsOpen:i,animation:s},children:t})},Ps={home:{en:"Home",ru:"",tr:"Ana Sayfa",tk:"Ba Sahypa"},ourCakes:{en:"Our Cakes",ru:" ",tr:"Pastalarmz",tk:"Tortlarymyz"},contact:{en:"Contact",ru:"",tr:"letiim",tk:"Habarlamak"},admin:{en:"Admin",ru:"",tr:"Ynetici",tk:"Admin"},login:{en:"Login",ru:"",tr:"Giri Yap",tk:"Girmek"},logout:{en:"Logout",ru:"",tr:"k Yap",tk:"ykmak"},settings:{en:"Settings",ru:"",tr:"Ayarlar",tk:"Sazlamalar"},cart:{en:"Cart",ru:"",tr:"Sepet",tk:"Sebet"},searchProducts:{en:"Search Products",ru:" ",tr:"rn Ara",tk:"nm Gzle"},searchPlaceholder:{en:"Search",ru:"",tr:"Ara",tk:"Gzle"},heroTitle:{en:"Where Every Bite is",ru:"   - ",tr:"Her Lokma",tk:"Her Bir Blek"},heroTitleEmphasis:{en:"Pure Love",ru:" ",tr:"Saf Ak",tk:"Arassa Sgi"},heroDescription:{en:"Handcrafted artisan desserts made with passion and the finest ingredients. From birthdays to weddings, we make every celebration sweeter.",ru:" ,      .     ,     .",tr:"Tutku ve en iyi malzemelerle yaplm el yapm zanaat tatllar. Doum gnlerinden dnlere, her kutlamay daha tatl yapyoruz.",tk:"Yhlasly we i gowy ingredientler bilen elde asalan desertler. Doglan gnlerden tolara enli, her bir baramylygy has sji edris."},exploreCreations:{en:"Explore Our Creations ",ru:"   ",tr:"Yaratmlarmz Kefet ",tk:"Dredijiligimizi Gzden Geiri "},customOrders:{en:"Custom Orders",ru:" ",tr:"zel Sipariler",tk:"rite Sargytlar"},ourCollections:{en:"Our Collections",ru:" ",tr:"Koleksiyonlarmz",tk:"Kolleksialarymyz"},collectionsSubtitle:{en:"From intimate gatherings to grand celebrations",ru:"     ",tr:"Samimi toplantlardan byk kutlamalara",tk:"Kii ygnanyyklardan uly baramylyklara"},featuredCreations:{en:"Featured Creations",ru:" ",tr:"ne kan Yaratmlar",tk:"Salanan Dredijilik"},featuredSubtitle:{en:"Our most loved desserts this season",ru:"    ",tr:"Bu sezonun en sevilen tatllar",tk:"Bu mwsmi i sgli desertleri"},addToCart:{en:"Add to Cart",ru:"  ",tr:"Sepete Ekle",tk:"Sebede Go"},quantity:{en:"Quantity",ru:"",tr:"Miktar",tk:"Mukdar"},dealerPrice:{en:"Dealer Price",ru:" ",tr:"Bayi Fiyat",tk:"Diler Bahasy"},retailPrice:{en:"Retail Price",ru:" ",tr:"Perakende Fiyat",tk:"Blek Satuw Bahasy"},regularSellingPrice:{en:"Regular Selling Price",ru:"  ",tr:"Normal Sat Fiyat",tk:"Adaty Satuw Bahasy"},cost:{en:"Cost",ru:"",tr:"Maliyet",tk:"Bahasy"},profit:{en:"Profit",ru:"",tr:"Kar",tk:"Peda"},margin:{en:"Margin",ru:"",tr:"Marj",tk:"Marja"},editPrice:{en:"Edit Price",ru:" ",tr:"Fiyat Dzenle",tk:"Bahany tget"},save:{en:"Save",ru:"",tr:"Kaydet",tk:"Sakla"},cancel:{en:"Cancel",ru:"",tr:"ptal",tk:"atyr"},edit:{en:"Edit",ru:"",tr:"Dzenle",tk:"tget"},delete:{en:"Delete",ru:"",tr:"Sil",tk:"Poz"},yourCart:{en:"Your Cart",ru:" ",tr:"Sepetiniz",tk:"Sizi Sebediiz"},cartEmpty:{en:"Your cart is empty",ru:"  ",tr:"Sepetiniz bo",tk:"Sebediiz bo"},subtotal:{en:"Subtotal",ru:" ",tr:"Ara Toplam",tk:"Ara Jemi"},proceedToCheckout:{en:"Proceed to Checkout",ru:"  ",tr:"demeye Ge",tk:"Tleg Et"},remove:{en:"Remove",ru:"",tr:"Kaldr",tk:"Ayr"},checkout:{en:"Checkout",ru:" ",tr:"deme",tk:"Tleg"},contactInfo:{en:"Contact Info",ru:" ",tr:"letiim Bilgileri",tk:"Habarlamak Maglumatlary"},firstName:{en:"First Name",ru:"",tr:"Ad",tk:"Ady"},lastName:{en:"Last Name",ru:"",tr:"Soyad",tk:"Familiasy"},email:{en:"Email",ru:" ",tr:"E-posta",tk:"E-pota"},phone:{en:"Phone",ru:"",tr:"Telefon",tk:"Telefon"},delivery:{en:"Delivery",ru:"",tr:"Teslimat",tk:"Eltip Bermek"},address:{en:"Address",ru:"",tr:"Adres",tk:"Salgy"},date:{en:"Date",ru:"",tr:"Tarih",tk:"Sene"},time:{en:"Time",ru:"",tr:"Saat",tk:"Wagt"},morning:{en:"Morning",ru:"",tr:"Sabah",tk:"Irden"},afternoon:{en:"Afternoon",ru:"",tr:"leden Sonra",tk:"Gnortan"},evening:{en:"Evening",ru:"",tr:"Akam",tk:"Agam"},notes:{en:"Notes",ru:"",tr:"Notlar",tk:"Bellikler"},specialInstructions:{en:"Special Instructions",ru:" ",tr:"zel Talimatlar",tk:"rite Grkezmeler"},anyRequests:{en:"Any special requests...",ru:"  ...",tr:"zel istekleriniz...",tk:"rite haylar..."},orderSummary:{en:"Order Summary",ru:" ",tr:"Sipari zeti",tk:"Sargyt Jemi"},tax:{en:"Tax",ru:"",tr:"Vergi",tk:"Salgyt"},total:{en:"Total",ru:"",tr:"Toplam",tk:"Jemi"},placeOrder:{en:"Place Order",ru:" ",tr:"Sipari Ver",tk:"Sargyt Ber"},orderPlaced:{en:"Order Placed!",ru:" !",tr:"Sipari Verildi!",tk:"Sargyt Berildi!"},orderPlacedMessage:{en:"We'll contact you shortly to confirm.",ru:"        .",tr:"Onaylamak iin ksa sre iinde sizinle iletiime geeceiz.",tk:"Tassyklamak in gysga wagtda siz bilen habarlaarys."},continueShopping:{en:"Continue Shopping",ru:" ",tr:"Alverie Devam Et",tk:"Swda Dowam Et"},addDessertsFirst:{en:"Add desserts first!",ru:"  !",tr:"nce tatl ekleyin!",tk:"Ilki desert gou!"},browse:{en:"Browse",ru:"",tr:"Gzat",tk:"Gz at"},qty:{en:"Qty",ru:"-",tr:"Adet",tk:"San"},welcomeBack:{en:"Welcome Back",ru:" ",tr:"Tekrar Hogeldiniz",tk:"Ho Geldiiz"},joinUs:{en:"Join Us",ru:"",tr:"Bize Katln",tk:"Bize Gouly"},signInToAccount:{en:"Sign in to your account",ru:"   ",tr:"Hesabnza giri yapn",tk:"Hasabyyza giri"},registerWithInvite:{en:"Register with invite token",ru:"  ",tr:"Davet koduyla kayt olun",tk:"akylyk bilen hasaba aly"},signIn:{en:"Sign In",ru:"",tr:"Giri Yap",tk:"Gir"},signingIn:{en:"Signing In...",ru:"...",tr:"Giri Yaplyor...",tk:"Girilr..."},register:{en:"Register",ru:"",tr:"Kayt Ol",tk:"Hasaba Al"},password:{en:"Password",ru:"",tr:"ifre",tk:"Aar sz"},createPassword:{en:"Create Password",ru:" ",tr:"ifre Olutur",tk:"Aar sz dredi"},fullName:{en:"Full Name",ru:" ",tr:"Ad Soyad",tk:"Doly Ady"},inviteToken:{en:"Invite Token",ru:" ",tr:"Davet Kodu",tk:"akylyk Kody"},enterInviteToken:{en:"Enter the token from admin",ru:"   ",tr:"Yneticiden aldnz kodu girin",tk:"Admindan alnan kody girizi"},adminLogin:{en:"Admin Login",ru:" ",tr:"Ynetici Girii",tk:"Admin Girii"},testTokens:{en:"Test Tokens",ru:" ",tr:"Test Kodlar",tk:"Synag Kodlary"},username:{en:"Dealer",ru:"",tr:"Bayi",tk:"Diler"},dealer:{en:"Dealer",ru:"",tr:"Bayi",tk:"Diler"},user:{en:"User",ru:"",tr:"Kullanc",tk:"Ulanyjy"},invalidCredentials:{en:"Invalid credentials",ru:" ",tr:"Geersiz kimlik bilgileri",tk:"Ndogry maglumatlar"},loginSuccessful:{en:"Login successful! Redirecting...",ru:" ! ...",tr:"Giri baarl! Ynlendiriliyor...",tk:"stnlikli giri! Ugradylar..."},getInTouch:{en:"Get in Touch",ru:"  ",tr:"letiime Gein",tk:"Habarlay"},contactSubtitle:{en:"Questions? Custom orders? We'd love to hear from you!",ru:"?  ?   !",tr:"Sorularnz m var? zel sipariler? Sizden haber almak isteriz!",tk:"Soraglaryyz barmy? rite sargytlar? Sizden eitmek isleris!"},name:{en:"Name",ru:"",tr:"Ad",tk:"Ady"},message:{en:"Message",ru:"",tr:"Mesaj",tk:"Habar"},sendMessage:{en:"Send Message",ru:" ",tr:"Mesaj Gnder",tk:"Habar Iber"},messageSent:{en:"Message Sent!",ru:" !",tr:"Mesaj Gnderildi!",tk:"Habar Iberildi!"},messageSentConfirm:{en:"We'll reply within 24 hours.",ru:"    24 .",tr:"24 saat iinde yant vereceiz.",tk:"24 sagady iinde jogap bereris."},tellUsAboutDreamDessert:{en:"Tell us about your dream dessert...",ru:"    ...",tr:"Hayalinizdeki tatly bize anlatn...",tk:"Arzuw edn desertiiz barada ady..."},back:{en:"Back",ru:"",tr:"Geri",tk:"Yza"},languageSettings:{en:"Language Settings",ru:" ",tr:"Dil Ayarlar",tk:"Dil Sazlamalary"},selectLanguage:{en:"Select Language",ru:" ",tr:"Dil Sein",tk:"Dil Sala"},currencySettings:{en:"Currency Settings",ru:" ",tr:"Para Birimi Ayarlar",tk:"Pul Birligi Sazlamalary"},selectCurrency:{en:"Select Currency",ru:" ",tr:"Para Birimi Sein",tk:"Pul Birligi Sala"},general:{en:"General",ru:"",tr:"Genel",tk:"Umumy"},currencies:{en:"Currencies",ru:"",tr:"Para Birimleri",tk:"Pul Birlikleri"},addCurrency:{en:"Add Currency",ru:" ",tr:"Para Birimi Ekle",tk:"Pul Birligi Go"},currencyCode:{en:"Currency Code",ru:" ",tr:"Para Birimi Kodu",tk:"Pul Birligi Kody"},currencyName:{en:"Currency Name",ru:" ",tr:"Para Birimi Ad",tk:"Pul Birligi Ady"},symbol:{en:"Symbol",ru:"",tr:"Sembol",tk:"Nyan"},exchangeRate:{en:"Exchange Rate",ru:" ",tr:"Dviz Kuru",tk:"Aly-aly Kursy"},actions:{en:"Actions",ru:"",tr:"lemler",tk:"Hereketler"},defaultCurrency:{en:"Default",ru:" ",tr:"Varsaylan",tk:"Bellenen"},setDefault:{en:"Set as Default",ru:" ",tr:"Varsaylan Yap",tk:"Esasy Et"},adminGeneralSettings:{en:"General Settings",ru:" ",tr:"Genel Ayarlar",tk:"Umumy Sazlamalar"},contactEmail:{en:"Contact Email",ru:" Email",tr:"letiim E-posta",tk:"Habarlamak E-pota"},contactPhone:{en:"Contact Phone",ru:" ",tr:"letiim Telefon",tk:"Habarlamak Telefon"},footerSettingsDescription:{en:"These details will be displayed in the site footer.",ru:"      .",tr:"Bu bilgiler site altbilgisinde grntlenecektir.",tk:"Bu maglumatlar saty aaky bleginde grkeziler."},manageCurrencies:{en:"Manage Currencies",ru:" ",tr:"Para Birimlerini Ynet",tk:"Pul Birliklerini Dolandyr"},addNewCurrency:{en:"Add New Currency",ru:"  ",tr:"Yeni Para Birimi Ekle",tk:"Tze Pul Birligi Go"},editCurrency:{en:"Edit Currency",ru:" ",tr:"Para Birimini Dzenle",tk:"Pul Birligini tget"},updateCurrency:{en:"Update Currency",ru:" ",tr:"Para Birimini Gncelle",tk:"Pul Birligini Tzele"},confirmAddCurrency:{en:"Add Currency",ru:"",tr:"Ekle",tk:"Go"},noCurrenciesAdded:{en:"No currencies added yet.",ru:"   .",tr:"Henz para birimi eklenmedi.",tk:"Entek pul birligi goulmady."},baseCurrencyLabel:{en:"Base",ru:"",tr:"Baz",tk:"Esasy"},currentRate:{en:"Current rate",ru:" ",tr:"Gncel kur",tk:"Hazirki kurs"},cannotDeleteBase:{en:"Cannot delete base currency",ru:"   ",tr:"Baz para birimi silinemez",tk:"Esasy pul birligini pozup bolmaar"},cannotDeleteActive:{en:"Cannot delete active currency. Please switch to another currency first.",ru:"   . ,    .",tr:"Aktif para birimi silinemez. Ltfen nce baka bir para birimine gein.",tk:"Ije pul birligini pozup bolmaar. Ilki bilen baga pul birligine gei."},storeSettings:{en:"Store Settings",ru:" ",tr:"Maaza Ayarlar",tk:"Dkan Sazlamalary"},shippingCost:{en:"Shipping Cost",ru:" ",tr:"Kargo creti",tk:"Eltip Bermek Bahasy"},taxRate:{en:"Tax Rate (%)",ru:"  (%)",tr:"Vergi Oran (%)",tk:"Salgyt Mberi (%)"},shipping:{en:"Shipping",ru:"",tr:"Kargo",tk:"Eltip bermek"},adminDashboard:{en:"Admin Dashboard",ru:" ",tr:"Ynetici Paneli",tk:"Admin Paneli"},overview:{en:"Overview",ru:"",tr:"Genel Bak",tk:"Syn"},orders:{en:"Orders",ru:"",tr:"Sipariler",tk:"Sargytlar"},products:{en:"Products",ru:"",tr:"rnler",tk:"nmler"},ingredients:{en:"Ingredients",ru:"",tr:"Malzemeler",tk:"Ingredientler"},invites:{en:"Invites",ru:"",tr:"Davetiyeler",tk:"akylyklar"},users:{en:"Users",ru:"",tr:"Kullanclar",tk:"Ulanyjylar"},pendingOrders:{en:"Pending Orders",ru:" ",tr:"Bekleyen Sipariler",tk:"Garaylan Sargytlar"},registeredUsers:{en:"Registered Users",ru:" ",tr:"Kaytl Kullanclar",tk:"Hasaba Alnan Ulanyjylar"},totalRevenue:{en:"Total Revenue",ru:" ",tr:"Toplam Gelir",tk:"Jemi Girdeji"},thisWeek:{en:"This Week",ru:" ",tr:"Bu Hafta",tk:"Bu Hepde"},recentOrders:{en:"Recent Orders",ru:" ",tr:"Son Sipariler",tk:"Soky Sargytlar"},allOrders:{en:"All Orders",ru:" ",tr:"Tm Sipariler",tk:"hli Sargytlar"},pending:{en:"Pending",ru:"",tr:"Bekliyor",tk:"Garaylar"},inProgress:{en:"In Progress",ru:" ",tr:"Hazrlanyor",tk:"Taarlanar"},ready:{en:"Ready",ru:"",tr:"Hazr",tk:"Taar"},delivered:{en:"Delivered",ru:"",tr:"Teslim Edildi",tk:"Gowuryldy"},cancelled:{en:"Cancelled",ru:"",tr:"ptal Edildi",tk:"atyryldy"},customer:{en:"Customer",ru:"",tr:"Mteri",tk:"Mderi"},items:{en:"Items",ru:"",tr:"rnler",tk:"Harytlar"},status:{en:"Status",ru:"",tr:"Durum",tk:"agda"},createNewInvite:{en:"Create New Invite",ru:" ",tr:"Yeni Davet Olutur",tk:"Tze akylyk Dret"},emailOptional:{en:"Email (optional - restrict to specific email)",ru:"Email ()",tr:"E-posta (opsiyonel)",tk:"E-pota (hkmany dl)"},leaveBlankForAnyEmail:{en:"Leave blank for any email",ru:"    email",tr:"Herhangi bir e-posta iin bo brakn",tk:"Islendik e-pota in bo gou"},leaveBlankForAnyEmailPlaceholder:{en:"Leave blank for any email",ru:"    email",tr:"Herhangi bir e-posta iin bo brakn",tk:"Islendik e-pota in bo gou"},role:{en:"Role",ru:"",tr:"Rol",tk:"Rol"},regularUser:{en:"Regular User",ru:" ",tr:"Normal Kullanc",tk:"Adaty Ulanyjy"},expiresInDays:{en:"Expires in (days)",ru:"  ()",tr:"Geerlilik (gn)",tk:"Mhleti (gn)"},createInvite:{en:"Create Invite",ru:" ",tr:"Davet Olutur",tk:"akylyk Dret"},allInvites:{en:"All Invites",ru:" ",tr:"Tm Davetler",tk:"hli akylyklar"},noInvitesYet:{en:"No invites yet.",ru:"  .",tr:"Henz davet yok.",tk:"Entek akylyk ok."},token:{en:"Token",ru:"",tr:"Kod",tk:"Kod"},expires:{en:"Expires",ru:"",tr:"Biti",tk:"Mhleti"},active:{en:"Active",ru:"",tr:"Aktif",tk:"Ije"},used:{en:"Used",ru:"",tr:"Kullanld",tk:"Ulanyldy"},expired:{en:"Expired",ru:"",tr:"Sresi Doldu",tk:"Mhleti Gedi"},any:{en:"Any",ru:"",tr:"Herhangi",tk:"Islendik"},noUsersYet:{en:"No users registered yet.",ru:"  .",tr:"Henz kaytl kullanc yok.",tk:"Entek hasaba alnan ulanyjy ok."},registered:{en:"Registered",ru:"",tr:"Kayt Tarihi",tk:"Hasaba Alyndy"},productManagement:{en:"Product Management",ru:" ",tr:"rn Ynetimi",tk:"nm Dolandyryy"},makingPrice:{en:"Making Price",ru:" ",tr:"Yapm creti",tk:"asama Bahasy"},productRegions:{en:"Available Regions",ru:" ",tr:"Mevcut Blgeler",tk:"Eleterli Sebitler"},productRegionsHelp:{en:"Leave empty to show in all regions, or select specific regions to restrict availability.",ru:"        .",tr:"Tm blgelerde gstermek iin bo brakn veya belirli blgeleri sein.",tk:"hli sebitlere grkezmek in bo gou a-da belli sebitleri sala."},allRegions:{en:"All Regions",ru:" ",tr:"Tm Blgeler",tk:"hli Sebitler"},ingredientManagement:{en:"Ingredient Management",ru:" ",tr:"Malzeme Ynetimi",tk:"Ingredient Dolandyryy"},addIngredient:{en:"Add Ingredient",ru:" ",tr:"Malzeme Ekle",tk:"Ingredient Go"},ingredientName:{en:"Ingredient Name",ru:" ",tr:"Malzeme Ad",tk:"Ingredient Ady"},unit:{en:"Unit",ru:"",tr:"Birim",tk:"Birlik"},pricePerUnit:{en:"Price per Unit",ru:"  ",tr:"Birim Fiyat",tk:"Birlik Bahasy"},noIngredientsYet:{en:"No ingredients yet.",ru:"  .",tr:"Henz malzeme yok.",tk:"Entek ingredient ok."},orderManagement:{en:"Order Management",ru:" ",tr:"Sipari Ynetimi",tk:"Sargyt Dolandyryy"},noOrdersYet:{en:"No orders yet.",ru:"  .",tr:"Henz sipari yok.",tk:"Entek sargyt ok."},viewDetails:{en:"View Details",ru:"",tr:"Detaylar",tk:"Jikme-jiklikler"},updateStatus:{en:"Update Status",ru:" ",tr:"Durumu Gncelle",tk:"agday Tzele"},completed:{en:"Completed",ru:"",tr:"Tamamland",tk:"Tamamlandy"},goToLogin:{en:"Go to Login",ru:"  ",tr:"Girie Git",tk:"Girie Git"},backToHome:{en:"Back to Home",ru:"  ",tr:"Ana Sayfaya Dn",tk:"Ba Sahypa"},adminCredentials:{en:"Admin Credentials",ru:"  ",tr:"Ynetici Bilgileri",tk:"Admin Maglumatlary"},pleaseLoginWithAdmin:{en:"Please login with admin credentials.",ru:",     .",tr:"Ltfen ynetici bilgileriyle giri yapn.",tk:"Admin maglumatlary bilen giri."},createdToken:{en:"Created! Token:",ru:"! :",tr:"Oluturuldu! Kod:",tk:"Dredildi! Kod:"},update:{en:"Update",ru:"",tr:"Gncelle",tk:"Tzele"},save:{en:"Save",ru:"",tr:"Kaydet",tk:"Sakla"},add:{en:"Add",ru:"",tr:"Ekle",tk:"Go"},confirmProductName:{en:"Confirm/Edit product name",ru:"/  ",tr:"rn adn onayla/dzenle",tk:"nm adyny tassykla/tget"},createAsNewProduct:{en:"Create {name} as new product",ru:" {name}   ",tr:"{name} rnn yeni olutur",tk:"{name} adynda tze nm dret"},editIngredient:{en:"Edit Ingredient",ru:" ",tr:"Malzemeyi Dzenle",tk:"Ingredienti tget"},addNewIngredient:{en:"Add New Ingredient",ru:"  ",tr:"Yeni Malzeme Ekle",tk:"Tze Ingredient Go"},deleteIngredientConfirm:{en:"Delete this ingredient?",ru:"  ?",tr:"Bu malzemeyi silmek istediinizden emin misiniz?",tk:"Bu ingredienti pozmak islersiizmi?"},ingredientNameRequired:{en:"Ingredient name is required",ru:"  ",tr:"Malzeme ad gereklidir",tk:"Ingredient ady hkmany"},ingredientUsedInProducts:{en:"This ingredient is used in {count} product(s): {products}. Are you sure you want to delete it?",ru:"    {count} (): {products}.  ,    ?",tr:"Bu malzeme {count} rnde kullanlyor: {products}. Silmek istediinizden emin misiniz?",tk:"Bu ingredient {count} nmde ulanylyar: {products}. Pozmak islersiizmi?"},productName:{en:"Product Name",ru:" ",tr:"rn Ad",tk:"nm Ady"},productNotFound:{en:"Product not found",ru:"  ",tr:"rn bulunamad",tk:"nm tapylmady"},productBadge:{en:"Product Badge",ru:" ",tr:"rn Rozeti",tk:"nm Nyany"},noneNoBadge:{en:"None (No Badge)",ru:" ( )",tr:"Yok (Rozet Yok)",tk:"ok (Nyan ok)"},showInLanguages:{en:"Show in Languages",ru:"  ",tr:"Dillerde Gster",tk:"Dillerde Grkez"},selectLanguagesProduct:{en:"Select which languages this product will be visible in. At least one language required.",ru:" ,      .    .",tr:"Bu rnn hangi dillerde grneceini sein. En az bir dil gereklidir.",tk:"Bu nmi hasy dillerde grnjekdigini sala. I az bir dil zerur."},createProduct:{en:"Create Product",ru:" ",tr:"rn Olutur",tk:"nm Dret"},create:{en:"Create",ru:"",tr:"Olutur",tk:"Dret"},createEditProduct:{en:"Create / Edit Product",ru:" /  ",tr:"rn Olutur / Dzenle",tk:"nm Dret / tget"},saveChanges:{en:"Save Changes",ru:" ",tr:"Deiiklikleri Kaydet",tk:"tgemeleri Sakla"},visibleIn:{en:"Visible in:",ru:" :",tr:"Grnr:",tk:"Grnr:"},imageSizeLimit:{en:"Image size must be less than 5MB",ru:"     5 ",tr:"Grsel boyutu 5MB'dan kk olmaldr",tk:"Surat legi 5MB-dan kii bolmaly"},imageResolutionLimit:{en:"Image resolution too large",ru:"   ",tr:"Grsel znrl ok byk",tk:"Suraty zgdi gaty uly"},selectImageFile:{en:"Please select an image file",ru:" ",tr:"Dosya Se",tk:"Fal Sala"},imageUploadedSuccess:{en:"Image uploaded successfully!",ru:"  !",tr:"Grsel baaryla yklendi!",tk:"Surat stnlikli klendi!"},imageURL:{en:"Image URL",ru:"URL ",tr:"Grsel URL",tk:"Surat URL"},uploadImage:{en:"Upload Image",ru:" ",tr:"Grsel Ykle",tk:"Surat kle"},description:{en:"Description",ru:"",tr:"Aklama",tk:"Dndiri"},costAnalysis:{en:"Cost Analysis",ru:" ",tr:"Maliyet Analizi",tk:"Baha Derewi"},pricingBreakdown:{en:"Pricing Breakdown",ru:" ",tr:"Fiyat Ayrnts",tk:"Bahany Detallary"},showCostAnalysis:{en:"Show Cost Analysis",ru:" ",tr:"Analizi Gster",tk:"Derewi Grkez"},hideCostAnalysis:{en:"Hide Cost Analysis",ru:" ",tr:"Analizi Gizle",tk:"Derewi Gizle"},totalCost:{en:"Total Cost",ru:" ",tr:"Toplam Maliyet",tk:"Jemi Baha"},sellingPrice:{en:"Selling Price",ru:" ",tr:"Sat Fiyat",tk:"Satuw Bahasy"},profitMargin:{en:"Markup",ru:"",tr:"Kar Oran",tk:"stne goma"},confirmDelete:{en:"Confirm Delete",ru:" ",tr:"Silmeyi Onayla",tk:"Pozmagy Tassykla"},confirmDeleteDetail:{en:"Delete the selected product from your catalog.",ru:"    .",tr:"Seili rn katalounuzdan silin.",tk:"Salanan nmi katalogdan poz."},selectFaceImage:{en:"Select Face Image",ru:"  ",tr:"Kapak Grselini Se",tk:"Grkeziljek suraty sala"},noIngredientsListed:{en:"No ingredients listed",ru:"  ",tr:"Malzeme listesi yok",tk:"Ingredient sanawda ok"},makingPriceLabor:{en:"Making Price (Labor)",ru:" ",tr:"ilik creti",tk:"Zhmet Bahasy"},footerDescription:{en:"Handcrafted with love. Premium ingredients for unforgettable celebrations.",ru:"  .     .",tr:"Sevgiyle yapld. Unutulmaz kutlamalar iin premium malzemeler.",tk:"Sgi bilen asaldy. atdan ykmajak baramylyklar in premium ingredientler."},quickLinks:{en:"Quick Links",ru:" ",tr:"Hzl Balantlar",tk:"alt Baglanyyklar"},collections:{en:"Collections",ru:"",tr:"Koleksiyonlar",tk:"Kolleksialar"},birthdayCakes:{en:"Birthday Cakes",ru:"   ",tr:"Doum Gn Pastalar",tk:"Doglan Gn Tortlary"},weddingCakes:{en:"Wedding Cakes",ru:" ",tr:"Dn Pastalar",tk:"To Tortlary"},cupcakes:{en:"Cupcakes",ru:"",tr:"Cupcake'ler",tk:"Kapkekler"},madeWithLove:{en:"Made with ",ru:"  ",tr:" ile yapld",tk:" bilen asaldy"},dataManagement:{en:"Data Management",ru:" ",tr:"Veri Ynetimi",tk:"Maglumat Dolandyryy"},resetData:{en:"Reset",ru:"",tr:"Sfrla",tk:"Aslyna Getir"},countryContacts:{en:"Country Contacts",ru:"  ",tr:"lke letiimleri",tk:"urt Aragatnayklary"},countryContactsDescription:{en:"Manage contact info for different countries. Visitors will see contact info based on their location.",ru:"    .     .",tr:"Farkl lkeler iin iletiim bilgilerini ynetin. Ziyaretiler konumlarna gre iletiim bilgilerini grecektir.",tk:"Drli urtlar in aragatnayk maglumatlaryny dolandyry. Myhmanlar z erlen erine gr aragatnayk maglumatlaryny grerler."},addCountryContact:{en:"Add Country Contact",ru:"  ",tr:"lke letiimi Ekle",tk:"urt Aragatnaygyny Go"},editCountryContact:{en:"Edit Country Contact",ru:" ",tr:"letiimi Dzenle",tk:"Aragatnaygy tget"},countryName:{en:"Country Name",ru:" ",tr:"lke Ad",tk:"urt Ady"},countryCode:{en:"Country Code",ru:" ",tr:"lke Kodu",tk:"urt Kody"},countryCodeHelp:{en:"ISO 2-letter code (e.g., US, TM, DE) or GENERAL for default",ru:"ISO 2-  (., US, TM, DE)  GENERAL  ",tr:"ISO 2 harfli kod (rn: US, TM, DE) veya varsaylan iin GENERAL",tk:"ISO 2 harpli kod (meselem, US, TM, DE) a-da deslapky in GENERAL"},setAsDefault:{en:"Set as Default",ru:"  ",tr:"Varsaylan Yap",tk:"Deslapky edip Bellemek"},defaultContact:{en:"Default",ru:" ",tr:"Varsaylan",tk:"Deslapky"},noCountryContacts:{en:"No country contacts yet. Add one to get started.",ru:"    .  .",tr:"Henz lke iletiimi yok. Balamak iin bir tane ekleyin.",tk:"Entek urt aragatnaygy ok. Balamak in gou."},deleteCountryContact:{en:"Delete this country contact?",ru:"   ?",tr:"Bu lke iletiimini silmek istiyor musunuz?",tk:"Bu urt aragatnaygyny pozmak islersiizmi?"},cannotDeleteDefault:{en:"Cannot delete the default contact. Set another contact as default first.",ru:"    .      .",tr:"Varsaylan iletiim silinemez. nce baka bir iletiimi varsaylan yapn.",tk:"Deslapky aragatnaygy pozmak bolmaar. Ilki baga aragatnaygy deslapky edip bell."},yourLocation:{en:"Your Location",ru:" ",tr:"Konumunuz",tk:"Sizi erlen eriiz"},contactInfoForYourRegion:{en:"Contact info for your region",ru:"   ",tr:"Blgeniz iin iletiim bilgileri",tk:"Sizi sebitiiz in aragatnayk maglumatlary"},messages:{en:"Messages",ru:"",tr:"Mesajlar",tk:"Habarlar"},sender:{en:"Sender",ru:"",tr:"Gnderen",tk:"Ugradyjy"},date:{en:"Date",ru:"",tr:"Tarih",tk:"Sene"},noMessagesYet:{en:"No messages yet",ru:"  ",tr:"Henz mesaj yok",tk:"Heniz habar ok"},viewMessage:{en:"View Message",ru:"",tr:"Mesaj Gr",tk:"Habary Gr"},messageCreateSuccess:{en:"Message sent successfully!",ru:"  !",tr:"Mesaj baaryla gnderildi!",tk:"Habar stnlikli ugradyldy!"},accessDenied:{en:"Access Denied",ru:" ",tr:"Eriim Engellendi",tk:"Giri Gadagan"},adminOnly:{en:"Admin only.",ru:"  .",tr:"Sadece ynetici.",tk:"Die admin in."},loading:{en:"Loading...",ru:"...",tr:"Ykleniyor...",tk:"klenr..."},error:{en:"Error",ru:"",tr:"Hata",tk:"alylyk"},success:{en:"Success",ru:"",tr:"Baarl",tk:"stnlik"},hi:{en:"Hi",ru:"",tr:"Merhaba",tk:"Salam"},required:{en:"Required",ru:"",tr:"Zorunlu",tk:"Hkmany"},fieldRequired:{en:"Please fill out this field.",ru:",   .",tr:"Ltfen bu alan doldurun.",tk:"Bu medanany doldury."},notUsed:{en:"Not Used",ru:" ",tr:"Kullanlmyor",tk:"Ulanylmadyk"},badges:{en:{none:"None",bestseller:"Bestseller",popular:"Popular",premium:"Premium",signature:"Signature",rustic:"Rustic",classic:"Classic",seasonal:"Seasonal",new:"New",limited:"Limited",vegan:"Vegan",glutenFree:"Gluten Free",chefChoice:"Chef's Choice",organic:"Organic",sugarFree:"Sugar Free",hypoallergenic:"Hypoallergenic",dairyFree:"Dairy Free",nutFree:"Nut-free",halal:"Halal",keto:"Keto"},ru:{none:"",bestseller:" ",popular:"",premium:"",signature:"",rustic:"",classic:"",seasonal:"",new:"",limited:"",vegan:"",glutenFree:" ",chefChoice:" ",organic:"",sugarFree:" ",hypoallergenic:"",dairyFree:" ",nutFree:" ",halal:"",keto:""},tr:{none:"Yok",bestseller:"ok Satan",popular:"Popler",premium:"Premium",signature:"mza",rustic:"Rustik",classic:"Klasik",seasonal:"Mevsimlik",new:"Yeni",limited:"Snrl",vegan:"Vegan",glutenFree:"Glutensiz",chefChoice:"efin Seimi",organic:"Organik",sugarFree:"ekersiz",hypoallergenic:"Hipoalerjenik",dairyFree:"St ermez",nutFree:"Kuruyemisiz",halal:"Helal",keto:"Keto"},tk:{none:"ok",bestseller:"I Kp Satylan",popular:"Mehur",premium:"Premium",signature:"rite",rustic:"Rustik",classic:"Klassik",seasonal:"Mwsmlein",new:"Tze",limited:"kli",vegan:"Vegan",glutenFree:"Glutensiz",chefChoice:"Apez Salawy",organic:"Organik",sugarFree:"ekersiz",hypoallergenic:"Allergiasyz",dairyFree:"St Siz",nutFree:"erfyndyksyz",halal:"Halal",keto:"Keto"}}},xI=()=>{const t=["en","ru","tr","tk"],e={};return t.forEach(n=>e[n]={}),Object.keys(Ps).forEach(n=>{n==="badges"?t.forEach(r=>{e[r].badges=Ps.badges[r]}):t.forEach(r=>{e[r][n]=Ps[n][r]||Ps[n].en})}),e},eg=xI();Object.keys(Ps).reduce((t,e)=>(t[e]=e,t),{});const f_=B.createContext(),Ye=()=>B.useContext(f_),wI=({children:t,language:e})=>{const n=r=>{const i=e||"en",s=r.split(".");let o=eg[i];for(const u of s)o=o==null?void 0:o[u];if(!o){o=eg.en;for(const u of s)o=o==null?void 0:o[u]}return o||r};return l.jsx(f_.Provider,{value:{t:n,language:e||"en"},children:t})},EI=({isOpen:t,onClose:e,onNavigate:n})=>{const{login:r,registerWithInvite:i}=Xr(),[s,o]=B.useState("login"),[u,c]=B.useState({name:"",email:"",password:"",token:"",phone:""}),[h,m]=B.useState(""),[y,g]=B.useState("");B.useEffect(()=>{t&&(c({name:"",email:"",password:"",token:"",phone:""}),m(""),g(""),o("login"))},[t]);const w=P=>{if(P.preventDefault(),m(""),r(u.email,u.password)){g("Login successful!");const k=localStorage.getItem("soulmate_user"),E=k&&JSON.parse(k).role==="admin";e(),setTimeout(()=>{n(E?"admin":"home")},100)}else m("Invalid credentials")},A=P=>{if(P.preventDefault(),m(""),!u.token.trim())return m("Enter invite token");if(!u.name.trim())return m("Enter your name");i(u.token.trim().toUpperCase(),u.name,u.email,u.password,u.phone)?(g("Welcome! You're registered."),e(),setTimeout(()=>{n("home")},100)):m("Invalid token or token already used")};return t?l.jsx("div",{className:"modal-overlay open",onClick:e,children:l.jsxs("div",{className:"modal",style:{maxWidth:"500px",gridTemplateColumns:"1fr"},onClick:P=>P.stopPropagation(),children:[l.jsx("button",{className:"modal-close",onClick:e,children:""}),l.jsxs("div",{className:"modal-content",children:[l.jsx("h2",{className:"modal-title",style:{textAlign:"center",marginBottom:"0.5rem"},children:s==="login"?"Welcome Back":"Join Us"}),l.jsx("p",{style:{textAlign:"center",color:"var(--chocolate)",opacity:.7,marginBottom:"2rem"},children:s==="login"?"Sign in to your account":"Register with invite token"}),l.jsxs("div",{className:"tabs",style:{marginBottom:"1.5rem"},children:[l.jsx("button",{className:`tab ${s==="login"?"active":""}`,onClick:()=>{o("login"),m(""),g("")},children:"Login"}),l.jsx("button",{className:`tab ${s==="invite"?"active":""}`,onClick:()=>{o("invite"),m(""),g("")},children:"Register"})]}),s==="login"?l.jsxs("form",{onSubmit:w,children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Email *"}),l.jsx("input",{type:"email",value:u.email,onChange:P=>c({...u,email:P.target.value}),required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Password *"}),l.jsx("input",{type:"password",value:u.password,onChange:P=>c({...u,password:P.target.value}),required:!0})]}),h&&l.jsx("p",{className:"form-error",children:h}),l.jsx("button",{type:"submit",className:"form-submit",children:"Sign In"}),l.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"var(--blush)",borderRadius:"12px",fontSize:"0.85rem"},children:[l.jsx("strong",{children:" Admin:"})," admin@soulmate.com / Admin@2024!"]})]}):l.jsxs("form",{onSubmit:A,children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Invite Token *"}),l.jsx("input",{type:"text",value:u.token,onChange:P=>c({...u,token:P.target.value.toUpperCase()}),placeholder:"XXXXXXXX",style:{textTransform:"uppercase",fontFamily:"monospace"},required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Full Name *"}),l.jsx("input",{type:"text",value:u.name,onChange:P=>c({...u,name:P.target.value}),required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Email *"}),l.jsx("input",{type:"email",value:u.email,onChange:P=>c({...u,email:P.target.value}),required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Phone Number"}),l.jsx("input",{type:"tel",value:u.phone,onChange:P=>c({...u,phone:P.target.value}),placeholder:"+1 (555) 123-4567"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Create Password *"}),l.jsx("input",{type:"password",value:u.password,onChange:P=>c({...u,password:P.target.value}),required:!0})]}),h&&l.jsx("p",{className:"form-error",children:h}),y&&l.jsx("p",{className:"form-success",children:y}),l.jsx("button",{type:"submit",className:"form-submit",children:"Register"})]})]})]})}):null};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kI=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),SI=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),tg=t=>{const e=SI(t);return e.charAt(0).toUpperCase()+e.slice(1)},m_=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),TI=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var II={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CI=B.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...u},c)=>B.createElement("svg",{ref:c,...II,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:m_("lucide",i),...!s&&!TI(u)&&{"aria-hidden":"true"},...u},[...o.map(([h,m])=>B.createElement(h,m)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=(t,e)=>{const n=B.forwardRef(({className:r,...i},s)=>B.createElement(CI,{ref:s,iconNode:e,className:m_(`lucide-${kI(tg(t))}`,`lucide-${t}`,r),...i}));return n.displayName=tg(t),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AI=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],PI=Xe("arrow-left",AI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jI=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],p_=Xe("check",jI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RI=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],NI=Xe("chevron-left",RI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bI=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],DI=Xe("chevron-right",bI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Pi=Xe("globe",VI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],ng=Xe("log-out",FI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MI=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],rg=Xe("mail",MI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OI=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ig=Xe("map-pin",OI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LI=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],zI=Xe("menu",LI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Fh=Xe("pen",UI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BI=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],sg=Xe("phone",BI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],HI=Xe("plus",$I);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Va=Xe("search",qI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],GI=Xe("settings",WI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],QI=Xe("shopping-bag",KI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],XI=Xe("shopping-cart",YI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],g_=Xe("star",JI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZI=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Bi=Xe("trash-2",ZI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Hr=Xe("x",eC),tC=({isOpen:t,onClose:e,products:n,formatCurrency:r})=>{const{t:i}=Ye(),{addToCart:s}=Xi(),[o,u]=B.useState(""),c=B.useRef(null),h=r||(g=>`USD ${Number(g).toFixed(2)}`);if(B.useEffect(()=>{t&&c.current&&setTimeout(()=>c.current.focus(),100)},[t]),!t)return null;const m=o.trim()===""?[]:n.filter(g=>g.name.toLowerCase().includes(o.toLowerCase())),y=g=>{s(g),e()};return l.jsx("div",{className:"modal-overlay open",style:{zIndex:1e3,background:"rgba(44, 24, 16, 0.8)"},onClick:e,children:l.jsxs("div",{className:"form-card",style:{width:"600px",maxWidth:"90%",padding:"2rem",position:"relative",maxHeight:"80vh",display:"flex",flexDirection:"column"},onClick:g=>g.stopPropagation(),children:[l.jsx("button",{onClick:e,style:{position:"absolute",top:"1rem",right:"1rem",background:"none",border:"none",cursor:"pointer",zIndex:10},children:l.jsx(Hr,{size:24,color:"var(--espresso)"})}),l.jsxs("h3",{style:{fontFamily:"'Playfair Display', serif",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[l.jsx(Va,{size:24,color:"var(--terracotta)"}),i("searchProducts")||"Search Products"]}),l.jsxs("div",{style:{position:"relative",marginBottom:"1.5rem"},children:[l.jsx("input",{ref:c,type:"text",value:o,onChange:g=>u(g.target.value),placeholder:i("searchPlaceholder")||"Type to find cakes, cupcakes...",style:{width:"100%",padding:"1rem 1rem 1rem 3rem",borderRadius:"50px",border:"2px solid var(--terracotta)",fontSize:"1.1rem",outline:"none",boxShadow:"0 4px 15px rgba(212, 133, 106, 0.15)"}}),l.jsx(Va,{size:20,color:"var(--terracotta)",style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)"}})]}),l.jsx("div",{style:{height:"400px",overflowY:"auto",paddingRight:"0.5rem"},children:o.trim()===""?l.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"var(--chocolate)",opacity:.7},children:[l.jsx(Va,{size:48,style:{opacity:.3,marginBottom:"1rem",display:"block",margin:"0 auto 1rem"}}),l.jsx("p",{children:i("startTyping")||"Start typing to see results..."})]}):m.length===0?l.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"var(--chocolate)",opacity:.7},children:l.jsx("p",{children:i("noResults")||"No products found."})}):l.jsx("div",{style:{display:"grid",gap:"1rem"},children:m.map(g=>l.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"1rem",background:"var(--blush)",borderRadius:"16px",transition:"transform 0.2s",cursor:"pointer"},className:"search-result-item",onClick:()=>y(g),children:[l.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"12px",overflow:"hidden",marginRight:"1rem",background:"white"},children:g.thumbnail||g.image||g.images&&g.images[0]?l.jsx("img",{src:g.thumbnail||g.image||g.images&&g.images[0],alt:g.name,style:{width:"100%",height:"100%",objectFit:"cover"}}):l.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.5rem"},children:""})}),l.jsxs("div",{style:{flex:1},children:[l.jsx("h4",{style:{fontFamily:"'Playfair Display', serif",fontSize:"1.1rem",color:"var(--espresso)",marginBottom:"0.25rem"},children:g.name}),l.jsx("span",{style:{color:"var(--terracotta)",fontWeight:600},children:h(g.price)})]}),l.jsx("button",{style:{background:"white",border:"none",width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"var(--terracotta)",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:l.jsx(QI,{size:20})})]},g.id))})})]})})},nC=({onNavigate:t,products:e,formatCurrency:n})=>{var k,E;const{itemCount:r,setIsOpen:i}=Xi(),{user:s,logout:o,isAdmin:u,isDealer:c}=Xr(),{t:h}=Ye(),[m,y]=B.useState(!1),[g,w]=B.useState(!1),[A,P]=B.useState(!1),j=T=>{t(T),P(!1)};return l.jsxs(l.Fragment,{children:[l.jsx("header",{className:"header",children:l.jsxs("div",{className:"header-inner",children:[l.jsxs("div",{className:"logo",onClick:()=>j("home"),children:[l.jsx("img",{src:"/logo2.png",alt:"Soulmate Desserts Characters"}),l.jsx("img",{src:"/Soulmate.png",alt:"Soulmate Desserts"})]}),l.jsxs("nav",{className:`nav ${A?"mobile-open":""}`,children:[l.jsxs("div",{className:"mobile-nav-header",children:[l.jsx("span",{className:"mobile-nav-title",children:"Menu"}),l.jsx("button",{className:"close-menu-btn",onClick:()=>P(!1),children:l.jsx(Hr,{size:24})})]}),l.jsx("span",{className:"nav-link",onClick:()=>j("home"),children:h("home")}),l.jsx("span",{className:"nav-link",onClick:()=>j("catalog"),children:h("ourCakes")}),l.jsx("span",{className:"nav-link",onClick:()=>j("contact"),children:h("contact")}),u&&l.jsx("span",{className:"nav-link",onClick:()=>j("admin"),style:{color:"var(--terracotta)",fontWeight:600},children:h("admin")}),l.jsx("div",{className:"mobile-nav-actions",children:s?l.jsxs("span",{className:"nav-link",onClick:()=>{o(),t("home"),P(!1)},children:[l.jsx(ng,{size:18,style:{marginRight:"8px",verticalAlign:"text-bottom"}}),h("logout")]}):l.jsx("span",{className:"nav-link",onClick:()=>{y(!0),P(!1)},children:h("login")})})]}),l.jsxs("div",{className:"nav-actions",children:[s?l.jsxs("div",{className:"user-info",children:[h("hi"),", ",l.jsx("strong",{children:(k=s.name)==null?void 0:k.split(" ")[0]}),u&&((E=s.name)==null?void 0:E.toLowerCase())!=="admin"&&l.jsx("span",{className:"badge admin",children:h("admin")}),c&&!u&&l.jsx("span",{className:"badge dealer",children:h("dealer")})]}):l.jsx("button",{className:"btn btn-primary btn-small desktop-only",onClick:()=>y(!0),children:h("login")}),l.jsxs("div",{className:"icon-btn-group",children:[s&&l.jsx("button",{className:"cart-btn",onClick:()=>{o(),t("home")},title:h("logout"),children:l.jsx(ng,{size:20})}),l.jsx("button",{className:"cart-btn",onClick:()=>w(!0),title:h("search")||"Search",children:l.jsx(Va,{size:20})}),l.jsx("button",{className:"cart-btn",onClick:()=>t("settings"),title:h("settings"),children:l.jsx(GI,{size:20})}),l.jsxs("button",{className:"cart-btn",onClick:()=>i(!0),children:[l.jsx(XI,{size:20}),r>0&&l.jsx("span",{className:"cart-badge",children:r})]}),l.jsx("button",{className:"mobile-menu-btn",onClick:()=>P(!0),children:l.jsx(zI,{size:24})})]})]})]})}),l.jsx(EI,{isOpen:m,onClose:()=>y(!1),onNavigate:t}),l.jsx(tC,{isOpen:g,onClose:()=>w(!1),products:e||[],formatCurrency:n})]})},rC=({onNavigate:t,contactInfo:e})=>{const{t:n}=Ye(),[r,i]=B.useState(e);B.useEffect(()=>{(async()=>{try{const c=await ae.getSettings();c!=null&&c.contactInfo&&i(c.contactInfo)}catch(c){console.error("Failed to fetch settings for footer:",c)}})()},[]),B.useEffect(()=>{e&&i(e)},[e]);const s=(r==null?void 0:r.phone)||"(512) 555-CAKE",o=(r==null?void 0:r.email)||"hello@soulmatedesserts.com";return l.jsxs("footer",{className:"footer",children:[l.jsxs("div",{className:"footer-content",children:[l.jsxs("div",{className:"footer-brand",children:[l.jsx("img",{src:"/Soulmate.png",alt:"Soulmate Desserts",style:{height:"60px",width:"auto",objectFit:"contain",maxWidth:"300px",display:"block",marginBottom:"0.5rem"}}),l.jsx("p",{children:n("footerDescription")})]}),l.jsxs("div",{className:"footer-section",children:[l.jsx("h4",{children:n("quickLinks")}),l.jsxs("ul",{children:[l.jsx("li",{children:l.jsx("a",{onClick:()=>t("home"),children:n("home")})}),l.jsx("li",{children:l.jsx("a",{onClick:()=>t("catalog"),children:n("ourCakes")})}),l.jsx("li",{children:l.jsx("a",{onClick:()=>t("contact"),children:n("contact")})})]})]}),l.jsxs("div",{className:"footer-section",children:[l.jsx("h4",{children:n("contact")}),l.jsxs("ul",{children:[l.jsx("li",{children:s}),l.jsx("li",{children:o})]})]})]}),l.jsx("div",{className:"footer-bottom",children:l.jsxs("p",{children:[" 2025 Soulmate Desserts. ",n("madeWithLove")]})})]})},iC=({onNavigate:t,formatCurrency:e,settings:n})=>{var T,b,D;const{cart:r,isOpen:i,setIsOpen:s,updateQuantity:o,removeFromCart:u,cartTotal:c}=Xi(),{t:h}=Ye(),m=e||(F=>`USD ${Number(F).toFixed(2)}`),y=(T=n==null?void 0:n.currencies)==null?void 0:T.find(F=>F.code===(n==null?void 0:n.currency)),g=(y==null?void 0:y.rate)||1,A=(((b=n==null?void 0:n.store)==null?void 0:b.shipping)||0)*g,P=((D=n==null?void 0:n.store)==null?void 0:D.taxRate)||0,j=c*(P/100),k=c+A+j,E=()=>{s(!1),t("catalog")};return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:`cart-overlay ${i?"open":""}`,onClick:()=>s(!1)}),l.jsxs("div",{className:`cart-drawer ${i?"open":""}`,children:[l.jsxs("div",{className:"cart-header",children:[l.jsxs("div",{className:"cart-header-title-group",children:[l.jsx("button",{className:"cart-back-btn",onClick:()=>s(!1),children:l.jsx(PI,{size:24})}),l.jsx("h3",{children:h("yourCart")})]}),l.jsx("button",{className:"cart-close",onClick:()=>s(!1),children:l.jsx(Hr,{size:24})})]}),l.jsx("div",{className:"cart-items",children:r.length===0?l.jsxs("div",{className:"cart-empty",children:[l.jsx("div",{className:"cart-empty-icon",children:""}),l.jsx("p",{children:h("cartEmpty")})]}):r.map(F=>l.jsxs("div",{className:"cart-item",children:[l.jsx("div",{className:"cart-item-img",onClick:E,style:{cursor:"pointer"},children:l.jsx("img",{src:F.images[0],alt:F.name})}),l.jsxs("div",{className:"cart-item-details",children:[l.jsx("div",{className:"cart-item-name",onClick:E,style:{cursor:"pointer"},children:F.name}),l.jsx("div",{className:"cart-item-price",children:m(F.price*F.quantity)}),l.jsxs("div",{className:"cart-item-qty",children:[l.jsx("button",{className:"qty-btn",onClick:()=>o(F.id,-1),children:""}),l.jsx("span",{children:F.quantity}),l.jsx("button",{className:"qty-btn",onClick:()=>o(F.id,1),children:"+"})]}),l.jsx("button",{className:"cart-item-remove",onClick:()=>u(F.id),children:h("remove")})]})]},F.id))}),r.length>0&&l.jsxs("div",{className:"cart-footer",children:[l.jsxs("div",{className:"cart-subtotal",children:[l.jsx("span",{children:h("subtotal")}),l.jsx("strong",{children:m(c)})]}),A>0&&l.jsxs("div",{className:"cart-subtotal",style:{fontSize:"0.9em",opacity:.8},children:[l.jsx("span",{children:h("shipping")}),l.jsx("strong",{children:m(A)})]}),j>0&&l.jsxs("div",{className:"cart-subtotal",style:{fontSize:"0.9em",opacity:.8},children:[l.jsxs("span",{children:[h("tax")," (",P,"%)"]}),l.jsx("strong",{children:m(j)})]}),l.jsxs("div",{className:"cart-total",style:{marginTop:"10px",paddingTop:"10px",borderTop:"1px solid #eee",display:"flex",justifyContent:"space-between",fontWeight:"bold",fontSize:"1.2em"},children:[l.jsx("span",{children:h("total")}),l.jsx("strong",{children:m(k)})]}),l.jsx("button",{className:"checkout-btn",onClick:()=>{s(!1),t("checkout")},children:h("proceedToCheckout")})]})]})]})},sC=({onNavigate:t})=>{const{t:e}=Ye();return l.jsx("section",{className:"hero",children:l.jsxs("div",{className:"hero-content",children:[l.jsxs("div",{className:"hero-text",children:[l.jsxs("h1",{children:[e("heroTitle")," ",l.jsx("em",{children:e("heroTitleEmphasis")})]}),l.jsx("p",{children:e("heroDescription")}),l.jsxs("div",{className:"hero-cta",children:[l.jsx("button",{className:"btn btn-primary",onClick:()=>t("catalog"),children:e("exploreCreations")}),l.jsx("button",{className:"btn btn-secondary",onClick:()=>t("contact"),children:e("customOrders")})]})]}),l.jsx("div",{className:"hero-image",children:l.jsx("div",{className:"hero-image-wrapper",children:l.jsx("img",{src:"https://images.unsplash.com/photo-1578985545062-69928b1d9587?w=800",alt:"Cake"})})})]})})},Fa=(t,e)=>{var r;return(((r=t.ingredients)==null?void 0:r.reduce((i,s)=>{const o=e.find(u=>u.id===s.id);return i+((o==null?void 0:o.price)||0)*(s.quantity||0)},0))||0)+(t.making_price||0)},y_=({product:t,onClick:e,onAdd:n,ingredients:r,formatCurrency:i})=>{var g;const{isAdmin:s}=Xr(),{t:o}=Ye(),u=t.price,c=Fa(t,r),h=u-c,m=c?(h/u*100).toFixed(1):0,y=i||(w=>`USD ${Number(w).toFixed(2)}`);return l.jsxs("div",{className:"product-card",onClick:e,children:[l.jsxs("div",{className:"product-image",children:[l.jsx("img",{src:t.images[0],alt:t.name}),((g=t.tags)==null?void 0:g[0])&&l.jsx("span",{className:`product-tag ${t.tags[0]}`,children:o(`badges.${t.tags[0]}`)||t.tags[0]})]}),l.jsxs("div",{className:"product-content",children:[l.jsx("h3",{className:"product-name",children:t.name}),l.jsx("p",{className:"product-description",children:t.description}),s&&l.jsxs("div",{style:{padding:"0.75rem",background:"var(--blush)",borderRadius:"10px",marginBottom:"1rem",fontSize:"0.85rem"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[l.jsxs("span",{style:{opacity:.7},children:[o("cost"),":"]}),l.jsx("strong",{children:y(c)})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[l.jsxs("span",{style:{opacity:.7},children:[o("profit"),":"]}),l.jsx("strong",{style:{color:"#28a745"},children:y(h)})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[l.jsxs("span",{style:{opacity:.7},children:[o("margin"),":"]}),l.jsxs("strong",{style:{color:"#28a745"},children:[m,"%"]})]})]}),l.jsxs("div",{className:"product-footer",children:[l.jsx("div",{className:"product-price",style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:l.jsx("div",{children:l.jsx("span",{style:{fontSize:"1.4rem",fontWeight:600,color:"var(--terracotta)"},children:y(u)})})}),l.jsx("button",{className:"add-btn",onClick:w=>{w.stopPropagation(),n(t)},children:"+"})]})]})]})},v_=({product:t,onClose:e,onAdd:n,ingredients:r,onUpdateProduct:i,formatCurrency:s,settings:o})=>{var v,p,_,S;const{t:u}=Ye(),[c,h]=B.useState(1),[m,y]=B.useState(0);if(!t)return null;const g=t.price,w=((v=o==null?void 0:o.currencies)==null?void 0:v.find(I=>I.rate===1))||{code:"USD",symbol:"$",rate:1},A=((p=o==null?void 0:o.currencies)==null?void 0:p.find(I=>I.code===(o==null?void 0:o.currency)))||w,P=(A==null?void 0:A.rate)||1,j=A!=null&&A.symbol&&A.symbol.trim()?A.symbol:(A==null?void 0:A.code)||"USD",k=I=>`${j} ${(I*P).toFixed(2)}`,E=t.images&&Array.isArray(t.images)?t.images:[t.images[0]],T=E.length,b=()=>{y(I=>I===0?T-1:I-1)},D=()=>{y(I=>I===T-1?0:I+1)},F=I=>{y(I)};return l.jsx("div",{className:`modal-overlay ${t?"open":""}`,onClick:e,children:l.jsxs("div",{className:"modal",onClick:I=>I.stopPropagation(),children:[l.jsx("button",{className:"modal-close",onClick:e,children:""}),l.jsxs("div",{className:"modal-img",children:[l.jsxs("div",{className:"modal-image-container",children:[l.jsx("img",{src:E[m],alt:t.name}),T>1&&l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"modal-nav-btn modal-nav-prev",onClick:b,children:l.jsx(NI,{size:24})}),l.jsx("button",{className:"modal-nav-btn modal-nav-next",onClick:D,children:l.jsx(DI,{size:24})})]})]}),T>1&&l.jsx("div",{className:"modal-image-thumbnails",children:E.map((I,R)=>l.jsx("div",{className:`modal-thumbnail ${R===m?"active":""}`,onClick:()=>F(R),children:l.jsx("img",{src:I,alt:`${t.name} ${R+1}`})},R))}),T>1&&l.jsxs("div",{className:"modal-image-counter",children:[m+1," / ",T]})]}),l.jsxs("div",{className:"modal-content",children:[l.jsx("h2",{className:"modal-title",title:t.name,children:t.name}),((_=t.tags)==null?void 0:_[0])&&l.jsx("div",{style:{marginBottom:"0.75rem"},children:l.jsx("span",{style:{display:"inline-block",padding:"0.25rem 0.6rem",borderRadius:"12px",background:"var(--blush)",border:"1px solid var(--terracotta)",fontSize:"0.85rem",fontWeight:600,color:"var(--chocolate)"},children:t.tags[0]})}),l.jsx("p",{className:"modal-desc",style:{whiteSpace:"pre-wrap"},children:t.description}),l.jsx("div",{className:"modal-price",children:k(t.price)}),l.jsxs("div",{className:"modal-qty",children:[l.jsx("label",{children:u("quantity")}),l.jsxs("div",{className:"modal-qty-controls",children:[l.jsx("button",{className:"modal-qty-btn",onClick:()=>h(Math.max(1,c-1)),children:""}),l.jsx("div",{className:"modal-qty-value",children:c}),l.jsx("button",{className:"modal-qty-btn",onClick:()=>h(c+1),children:"+"})]})]}),((S=t.ingredients)==null?void 0:S.length)>0&&l.jsxs("div",{style:{marginBottom:"1rem"},children:[l.jsx("div",{style:{fontWeight:600,color:"var(--chocolate)",marginBottom:"0.5rem"},children:u("ingredients")}),l.jsx("ul",{style:{listStyle:"none",padding:0,margin:0,display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(180px,1fr))",gap:"0.25rem 1rem"},children:t.ingredients.map((I,R)=>{const C=r==null?void 0:r.find(H=>H.id===I.id);return C?l.jsxs("li",{style:{color:"var(--espresso)",opacity:.85},children:[C.name," ",I.quantity?` ${I.quantity} ${C.unit}`:""]},`${I.id}-${R}`):null})})]}),l.jsxs("button",{className:"modal-add-btn",onClick:()=>{n(t,c),e(),h(1)},children:[u("addToCart")," - ",k(g*c)]})]})]})})},og=({onNavigate:t,products:e,ingredients:n,onUpdateProduct:r,formatCurrency:i,userCountry:s,settings:o})=>{const[u,c]=B.useState(null),{addToCart:h}=Xi(),{t:m,language:y}=Ye(),g=e.filter(A=>{const j=(A.languages||["en","ru","tr","tk"]).includes(y),k=A.regions||[],E=k.length===0||k.includes(s)||k.includes("GENERAL");return j&&E}),w=g.find(A=>A.id===u);return l.jsxs(l.Fragment,{children:[l.jsx(sC,{onNavigate:t}),l.jsxs("section",{className:"section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h2",{children:m("ourCollections")}),l.jsx("p",{children:m("collectionsSubtitle")})]}),l.jsx("div",{className:"products-grid",children:g.map(A=>l.jsx(y_,{product:A,onClick:()=>c(A.id),onAdd:P=>h(P,1),ingredients:n,formatCurrency:i},A.id))})]}),w&&l.jsx(v_,{product:w,onClose:()=>c(null),onAdd:h,ingredients:n,onUpdateProduct:r,formatCurrency:i,settings:o})]})},oC=({products:t,ingredients:e,onUpdateProduct:n,formatCurrency:r,userCountry:i,settings:s})=>{const[o,u]=B.useState(null),{addToCart:c}=Xi(),{language:h}=Ye(),{t:m}=Ye(),y=t.filter(w=>{const P=(w.languages||["en","ru","tr","tk"]).includes(h),j=w.regions||[],k=j.length===0||j.includes(i)||j.includes("GENERAL");return P&&k}),g=y.find(w=>w.id===o);return l.jsxs(l.Fragment,{children:[l.jsxs("section",{className:"section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h2",{children:m("ourCollections")}),l.jsx("p",{children:m("collectionsSubtitle")})]}),l.jsx("div",{className:"products-grid",children:y.map(w=>l.jsx(y_,{product:w,onClick:()=>u(w.id),onAdd:A=>c(A,1),ingredients:e,formatCurrency:r},w.id))})]}),g&&l.jsx(v_,{product:g,onClose:()=>u(null),onAdd:c,ingredients:e,onUpdateProduct:n,formatCurrency:r,settings:s})]})},aC=({onNavigate:t,onCreateOrder:e,formatCurrency:n})=>{var A,P;const{cart:r,cartTotal:i,clearCart:s}=Xi(),{user:o}=Xr(),{t:u}=Ye(),[c,h]=B.useState(!1),m=i*.0825,y=i+m,g=n||(j=>`USD ${Number(j).toFixed(2)}`);if(c)return l.jsx("div",{className:"page",children:l.jsxs("div",{className:"success-msg",children:[l.jsx("div",{className:"success-icon",children:""}),l.jsx("h2",{children:u("orderPlaced")}),l.jsx("p",{children:u("orderPlacedMessage")}),l.jsx("button",{className:"btn btn-primary",onClick:()=>t("home"),children:u("continueShopping")})]})});if(r.length===0)return l.jsx("div",{className:"page",children:l.jsxs("div",{className:"success-msg",children:[l.jsx("div",{className:"success-icon",children:""}),l.jsx("h2",{children:u("cartEmpty")}),l.jsx("p",{children:"Add desserts first!"}),l.jsx("button",{className:"btn btn-primary",onClick:()=>t("catalog"),children:"Browse"})]})});const w=j=>{j.preventDefault();const k=new FormData(j.target),E={customerName:k.get("firstName")+" "+k.get("lastName"),email:k.get("email")||(o==null?void 0:o.email)||"",phone:k.get("phone"),address:k.get("address"),date:k.get("date"),time:k.get("time"),notes:k.get("notes"),items:r,subtotal:i,tax:m,total:y};e&&e(E),h(!0),s()};return l.jsxs("div",{className:"page",style:{maxWidth:"1100px"},children:[l.jsx("div",{className:"page-header",children:l.jsx("h1",{children:u("checkout")})}),l.jsxs("div",{className:"checkout-grid",children:[l.jsxs("form",{className:"form-card",onSubmit:w,children:[l.jsxs("div",{className:"form-section",children:[l.jsx("h3",{children:u("contactInfo")}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[u("firstName")," *"]}),l.jsx("input",{type:"text",name:"firstName",defaultValue:(A=o==null?void 0:o.name)==null?void 0:A.split(" ")[0],required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[u("lastName")," *"]}),l.jsx("input",{type:"text",name:"lastName",defaultValue:(P=o==null?void 0:o.name)==null?void 0:P.split(" ")[1],required:!0})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:u("email")}),l.jsx("input",{type:"email",name:"email",defaultValue:o==null?void 0:o.email})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[u("phone")," *"]}),l.jsx("input",{type:"tel",name:"phone",required:!0})]})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsx("h3",{children:u("delivery")}),l.jsxs("div",{className:"form-group full",children:[l.jsxs("label",{children:[u("address")," *"]}),l.jsx("input",{type:"text",name:"address",required:!0})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[u("date")," *"]}),l.jsx("input",{type:"date",name:"date",required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:u("time")}),l.jsxs("select",{name:"time",children:[l.jsx("option",{children:"Morning"}),l.jsx("option",{children:"Afternoon"}),l.jsx("option",{children:"Evening"})]})]})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsx("h3",{children:u("notes")}),l.jsxs("div",{className:"form-group full",children:[l.jsx("label",{children:u("specialInstructions")}),l.jsx("textarea",{name:"notes",placeholder:"Any requests..."})]})]}),l.jsxs("button",{type:"submit",className:"form-submit",children:[u("placeOrder"),"  ",g(y)]})]}),l.jsxs("div",{className:"checkout-summary",children:[l.jsx("h3",{children:u("orderSummary")}),r.map(j=>l.jsxs("div",{className:"summary-item",children:[l.jsx("div",{className:"summary-item-img",children:l.jsx("img",{src:j.images[0],alt:""})}),l.jsxs("div",{className:"summary-item-details",children:[l.jsx("div",{className:"summary-item-name",children:j.name}),l.jsxs("div",{className:"summary-item-qty",children:[u("quantity"),": ",j.quantity]})]}),l.jsx("div",{className:"summary-item-price",children:g(j.price*j.quantity)})]},j.id)),l.jsxs("div",{className:"summary-totals",children:[l.jsxs("div",{className:"summary-row",children:[l.jsx("span",{children:u("subtotal")}),l.jsx("span",{children:g(i)})]}),l.jsxs("div",{className:"summary-row",children:[l.jsx("span",{children:u("tax")}),l.jsx("span",{children:g(m)})]}),l.jsxs("div",{className:"summary-row total",children:[l.jsx("span",{children:u("total")}),l.jsx("span",{children:g(y)})]})]})]})]})]})},lC=({onNavigate:t})=>{const{t:e}=Ye(),[n,r]=B.useState({name:"",phone:"",email:"",message:""}),[i,s]=B.useState("idle"),[o,u]=B.useState({countryCode:null,countryName:null}),[c,h]=B.useState(null),[m,y]=B.useState(!0);B.useEffect(()=>{(async()=>{try{y(!0);const A=await ae.getCountryFromIP();u(A);const P=await ae.getCountryContacts();let j=P.find(k=>k.countryCode===A.countryCode);j||(j=P.find(k=>k.isDefault)||P[0]),h(j)}catch(A){console.error("Failed to load contact info:",A)}finally{y(!1)}})()},[]);const g=w=>{w.preventDefault(),s("submitting"),setTimeout(()=>{const A={id:Date.now(),...n,date:new Date().toISOString(),read:!1},P=JSON.parse(localStorage.getItem("soulmate_messages")||"[]");localStorage.setItem("soulmate_messages",JSON.stringify([A,...P])),s("success")},1500)};return i==="success"?l.jsx("div",{className:"page",children:l.jsxs("div",{className:"success-msg",children:[l.jsx("div",{className:"success-icon",children:""}),l.jsx("h2",{children:e("messageSent")}),l.jsx("p",{children:e("messageCreateSuccess")||e("messageSentConfirm")}),l.jsx("button",{className:"btn btn-primary",onClick:()=>t("home"),children:e("back")}),l.jsx("button",{className:"btn btn-secondary",style:{marginTop:"1rem",marginLeft:"1rem"},onClick:()=>{s("idle"),r({name:"",phone:"",email:"",message:""})},children:e("sendAnother")||"Send Another"})]})}):l.jsxs("div",{className:"page",style:{maxWidth:"600px"},children:[l.jsxs("div",{className:"page-header",children:[l.jsx("h1",{children:e("getInTouch")}),l.jsx("p",{children:e("contactSubtitle")})]}),l.jsx("div",{className:"form-card",children:l.jsxs("form",{onSubmit:g,children:[l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[e("name")," *"]}),l.jsx("input",{type:"text",required:!0,value:n.name,onChange:w=>r({...n,name:w.target.value})})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[e("phone")," *"]}),l.jsx("input",{type:"tel",required:!0,value:n.phone,onChange:w=>r({...n,phone:w.target.value})})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:e("email")}),l.jsx("input",{type:"email",value:n.email,onChange:w=>r({...n,email:w.target.value})})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[e("message")," *"]}),l.jsx("textarea",{required:!0,placeholder:e("tellUsAboutDreamDessert"),value:n.message,onChange:w=>r({...n,message:w.target.value})})]}),l.jsx("button",{type:"submit",className:"form-submit",disabled:i==="submitting",style:{opacity:i==="submitting"?.7:1},children:e(i==="submitting"?"loading":"sendMessage")})]})})]})},uC=({onNavigate:t})=>{const{login:e,registerWithInvite:n}=Xr(),{t:r}=Ye(),[i,s]=B.useState("login"),[o,u]=B.useState({name:"",email:"",password:"",token:"",phone:""}),[c,h]=B.useState(""),[m,y]=B.useState(""),[g,w]=B.useState(!1),A=j=>{if(j.preventDefault(),h(""),y(""),w(!0),e(o.email,o.password)===!0){y(r("loginSuccessful"));const E=localStorage.getItem("soulmate_user"),T=E&&JSON.parse(E).role==="admin";setTimeout(()=>{w(!1),t(T?"admin":"home")},500)}else w(!1),h(r("invalidCredentials"))},P=j=>{if(j.preventDefault(),h(""),y(""),!o.token.trim()){h(r("inviteToken")+" "+r("required"));return}if(!o.name.trim()){h(r("fullName")+" "+r("required"));return}if(!o.email.trim()){h(r("email")+" "+r("required"));return}if(!o.password.trim()){h(r("password")+" "+r("required"));return}n(o.token.trim().toUpperCase(),o.name,o.email,o.password,o.phone)===!0?(y(r("success")+"!"),setTimeout(()=>t("home"),500)):h(r("error"))};return l.jsxs("div",{className:"page",style:{maxWidth:"480px"},children:[l.jsxs("div",{className:"page-header",children:[l.jsx("h1",{children:r(i==="login"?"welcomeBack":"joinUs")}),l.jsx("p",{children:r(i==="login"?"signInToAccount":"registerWithInvite")})]}),l.jsxs("div",{className:"form-card",children:[l.jsxs("div",{className:"tabs",children:[l.jsx("button",{className:`tab ${i==="login"?"active":""}`,onClick:()=>{s("login"),h(""),y("")},children:r("login")}),l.jsx("button",{className:`tab ${i==="invite"?"active":""}`,onClick:()=>{s("invite"),h(""),y("")},children:r("register")})]}),i==="login"?l.jsxs("form",{onSubmit:A,children:[l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[r("email")," *"]}),l.jsx("input",{type:"email",value:o.email,onChange:j=>u({...o,email:j.target.value}),placeholder:"admin@soulmate.com",required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[r("password")," *"]}),l.jsx("input",{type:"password",value:o.password,onChange:j=>u({...o,password:j.target.value}),required:!0})]}),c&&l.jsx("p",{className:"form-error",children:c}),m&&l.jsx("p",{className:"form-success",children:m}),l.jsx("button",{type:"submit",className:"form-submit",disabled:g,children:r(g?"signingIn":"signIn")}),l.jsxs("div",{style:{marginTop:"2rem",padding:"1.25rem",background:"var(--blush)",borderRadius:"12px",fontSize:"0.9rem"},children:[l.jsxs("strong",{children:[" ",r("adminLogin"),":"]}),l.jsx("br",{}),l.jsx("span",{style:{fontFamily:"monospace"},children:"admin@soulmate.com"}),l.jsx("br",{}),l.jsx("span",{style:{fontFamily:"monospace"},children:"Admin@2024!"})]})]}):l.jsxs("form",{onSubmit:P,children:[l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[r("inviteToken")," *"]}),l.jsx("input",{type:"text",value:o.token,onChange:j=>u({...o,token:j.target.value.toUpperCase()}),placeholder:"XXXXXXXX",style:{textTransform:"uppercase",fontFamily:"monospace"},required:!0}),l.jsx("small",{style:{color:"var(--chocolate)",opacity:.7,display:"block",marginTop:"0.5rem"},children:r("enterInviteToken")})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[r("fullName")," *"]}),l.jsx("input",{type:"text",value:o.name,onChange:j=>u({...o,name:j.target.value}),required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[r("email")," *"]}),l.jsx("input",{type:"email",value:o.email,onChange:j=>u({...o,email:j.target.value}),required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[r("phone")," (",r("optional"),")"]}),l.jsx("input",{type:"tel",value:o.phone,onChange:j=>u({...o,phone:j.target.value})})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[r("createPassword")," *"]}),l.jsx("input",{type:"password",value:o.password,onChange:j=>u({...o,password:j.target.value}),required:!0})]}),c&&l.jsx("p",{className:"form-error",children:c}),m&&l.jsx("p",{className:"form-success",children:m}),l.jsx("button",{type:"submit",className:"form-submit",children:r("register")})]})]})]})},cC=({onNavigate:t,settings:e,setSettings:n,onBaseCurrencyChange:r})=>{var R,C;const{user:i,isAdmin:s}=Xr(),{t:o}=Ye(),[u,c]=B.useState("general"),[h,m]=B.useState(!1),[y,g]=B.useState(null);B.useEffect(()=>{!s&&(u==="currencies"||u==="store")&&c("general")},[s,u]);const[w,A]=B.useState({code:"",name:"",symbol:"",rate:1}),[P,j]=B.useState(null),[k,E]=B.useState(""),T=useMemo(()=>e.currencies.find(H=>H.rate===1)||{code:"USD",name:"US Dollar",symbol:"$",rate:1},[e.currencies]);B.useEffect(()=>{var fe,ue;const H=((fe=e.currencies.find(U=>U.code===e.currency))==null?void 0:fe.rate)||1,ie=((ue=e.store)==null?void 0:ue.shipping)||0;E((ie*H).toFixed(2))},[(R=e.store)==null?void 0:R.shipping,e.currency,e.currencies]);const b=[{code:"en",name:"English"},{code:"ru",name:"Russian"},{code:"tr",name:"Turkish"},{code:"tk",name:"Turkmen"}],D=async H=>{m(!0),g(null);const ie={...e,language:H};n(ie);try{await ae.updateSettings(ie)}catch(fe){g(o("failedToSaveLanguage")),console.error("Failed to save language:",fe)}finally{m(!1)}},F=async H=>{m(!0),g(null);const ie={...e,currency:H};n(ie);try{await ae.updateSettings(ie)}catch(fe){g(o("failedToSaveDefaultCurrency")),console.error("Failed to save default currency:",fe)}finally{m(!1)}},v=async H=>{H.preventDefault(),m(!0),g(null);let ie;if(P){const fe=P.rate!==1&&w.rate!==0?parseFloat((1/w.rate).toFixed(6)):w.rate;ie={...e,currencies:e.currencies.map(ue=>ue.code===P.code?{...w,code:w.code.toUpperCase(),rate:fe}:ue)}}else ie={...e,currencies:[...e.currencies,{...w,code:w.code.toUpperCase()}]};n(ie),j(null),A({code:"",name:"",symbol:"",rate:1});try{await ae.updateSettings(ie)}catch(fe){g(o("failedToSaveChanges")),console.error("Failed to save currency changes:",fe)}finally{m(!1)}},p=H=>{j(H);const ie=H.rate!==0&&H.rate!==1?parseFloat((1/H.rate).toFixed(6)):H.rate;A({...H,rate:ie})},_=async H=>{m(!0),g(null);const ie=e.currencies.find(ue=>ue.rate===1);if(H===ie.code){g(o("cannotDeleteBase")),m(!1);return}if(e.currency===H){g(o("cannotDeleteActive")),m(!1);return}const fe={...e,currencies:e.currencies.filter(ue=>ue.code!==H)};n(fe);try{await ae.updateSettings(fe)}catch(ue){g(o("failedToDeleteCurrency")),console.error("Failed to delete currency:",ue)}finally{m(!1)}},S=async(H,ie)=>{m(!0),g(null);const fe={...e,currencies:e.currencies.map(ue=>ue.code===H?{...ue,rate:parseFloat(ie)||1}:ue)};n(fe);try{await ae.updateSettings(fe)}catch(ue){g(o("failedToUpdateExchangeRate")),console.error("Failed to update exchange rate:",ue)}finally{m(!1)}},I=e.currencies.find(H=>H.code===e.currency)||T;return l.jsxs("div",{className:"page",style:{maxWidth:"1200px"},children:[l.jsxs("div",{className:"page-header",children:[l.jsx("h1",{children:o("settings")}),l.jsx("p",{style:{color:"var(--chocolate)",opacity:.7,marginTop:"0.5rem"},children:"Manage your language and currency preferences"})]}),l.jsxs("div",{className:"tabs",style:{marginBottom:"2rem"},children:[l.jsx("button",{className:`tab ${u==="general"?"active":""}`,onClick:()=>c("general"),children:o("general")}),s&&l.jsx("button",{className:`tab ${u==="currencies"?"active":""}`,onClick:()=>c("currencies"),children:o("currencies")}),s&&l.jsx("button",{className:`tab ${u==="store"?"active":""}`,onClick:()=>c("store"),children:o("storeSettings")})]}),u==="general"&&l.jsxs("div",{className:"form-card",children:[l.jsx("h3",{style:{fontFamily:"'Playfair Display',serif",marginBottom:"1.5rem"},children:o("languageSettings")}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:o("selectLanguage")}),l.jsx("select",{value:e.language,onChange:H=>D(H.target.value),style:{width:"100%",padding:"1rem",border:"2px solid var(--blush)",borderRadius:"12px",background:"rgba(255,255,255,0.8)"},children:b.map(H=>l.jsx("option",{value:H.code,children:H.name},H.code))})]})]}),u==="currencies"&&s&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"form-card",style:{marginBottom:"2rem"},children:[l.jsx("h3",{style:{fontFamily:"'Playfair Display',serif",marginBottom:"1.5rem"},children:o(P?"editCurrency":"addNewCurrency")}),l.jsxs("form",{onSubmit:v,children:[l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[o("currencyCode")," *"]}),l.jsx("input",{type:"text",value:w.code,onChange:H=>A({...w,code:H.target.value.toUpperCase()}),placeholder:"EUR, GBP, JPY, etc.",maxLength:"3",required:!0,disabled:P&&P.rate===1})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[o("currencyName")," *"]}),l.jsx("input",{type:"text",value:w.name,onChange:H=>A({...w,name:H.target.value}),placeholder:"Euro, British Pound, etc.",required:!0})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:o("symbol")}),l.jsx("input",{type:"text",value:w.symbol,onChange:H=>A({...w,symbol:H.target.value}),placeholder:", ,  (optional)"}),l.jsx("small",{style:{color:"var(--chocolate)",opacity:.7,display:"block",marginTop:"0.25rem"},children:o("symbolOptionalNote")||"Leave blank to use currency code as symbol"})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[o("exchangeRate")," ",P&&P.rate!==1?`(1 ${w.code} = ?)`:`(1 ${T.code} = ?)`," *"]}),l.jsx("input",{type:"number",step:"0.0001",value:w.rate,onChange:H=>A({...w,rate:parseFloat(H.target.value)||1}),placeholder:"1.0",min:"0.0001",required:!0}),l.jsx("small",{style:{color:"var(--chocolate)",opacity:.7,display:"block",marginTop:"0.25rem"},children:P&&P.rate!==1?`1 ${w.code||"XXX"} = ${w.rate} ${T.code}`:`1 ${T.code} = ${w.rate} ${w.code||"XXX"}`})]})]}),l.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[l.jsx("button",{type:"submit",className:"btn btn-primary",children:o(P?"updateCurrency":"confirmAddCurrency")}),P&&l.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{j(null),A({code:"",name:"",symbol:"",rate:1})},children:o("cancel")})]})]})]}),l.jsxs("div",{className:"form-card",children:[l.jsx("h3",{style:{fontFamily:"'Playfair Display',serif",marginBottom:"1.5rem"},children:o("manageCurrencies")}),h&&l.jsxs("p",{children:[o("loading"),"..."]}),y&&l.jsx("p",{style:{color:"red"},children:y}),e.currencies.length===0?l.jsx("p",{style:{color:"var(--chocolate)",opacity:.7},children:o("noCurrenciesAdded")}):l.jsx("div",{style:{overflowX:"auto"},children:l.jsxs("table",{className:"admin-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{style:{width:"40px"},children:o("defaultCurrency")}),l.jsx("th",{children:o("currencyCode")}),l.jsx("th",{children:o("currencyName")}),l.jsx("th",{children:o("symbol")}),l.jsx("th",{children:o("exchangeRate")}),l.jsx("th",{style:{textAlign:"center"},children:o("actions")})]})}),l.jsx("tbody",{children:e.currencies.map(H=>l.jsxs("tr",{children:[l.jsx("td",{style:{textAlign:"center"},children:l.jsx("button",{onClick:()=>{H.rate!==1&&r?r(H.code):F(H.code)},title:o("setDefault"),style:{background:"none",border:"none",cursor:"pointer",padding:"4px"},disabled:h,children:l.jsx(g_,{size:20,fill:e.currency===H.code?"#d4af37":"none",color:e.currency===H.code?"#d4af37":"#ccc"})})}),l.jsx("td",{children:l.jsx("strong",{children:H.code})}),l.jsx("td",{children:H.name}),l.jsx("td",{children:H.symbol}),l.jsx("td",{children:H.rate===1?l.jsxs("span",{children:["1 (",o("baseCurrencyLabel"),")"]}):l.jsx("input",{type:"number",step:"0.0001",value:H.rate!==0?parseFloat((1/H.rate).toFixed(6)):1,onChange:ie=>{const fe=parseFloat(ie.target.value)||1,ue=fe!==0?parseFloat((1/fe).toFixed(6)):1;S(H.code,ue)},style:{width:"120px",padding:"0.5rem",border:"2px solid var(--blush)",borderRadius:"8px",background:"rgba(255,255,255,0.8)"},disabled:h})}),l.jsx("td",{style:{textAlign:"center"},children:H.rate!==1&&l.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center"},children:[l.jsx("button",{className:"btn btn-small btn-secondary icon-btn",onClick:()=>p(H),title:o("edit"),style:{padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},disabled:h,children:l.jsx(Fh,{size:16})}),l.jsx("button",{className:"btn btn-small btn-danger icon-btn",onClick:()=>_(H.code),title:o("delete"),style:{padding:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},disabled:h,children:l.jsx(Bi,{size:16})})]})})]},H.code))})]})})]})]}),u==="store"&&s&&l.jsxs("div",{className:"form-card",children:[l.jsx("h3",{style:{fontFamily:"'Playfair Display',serif",marginBottom:"1.5rem"},children:o("storeSettings")}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[o("shippingCost")," (",I.symbol||I.code,")"]}),l.jsx("input",{type:"number",value:k,onChange:H=>E(H.target.value),onBlur:()=>{const H=parseFloat(k);if(isNaN(H))n(ie=>({...ie,store:{...ie.store,shipping:0}})),E("0.00");else{const ie=H/I.rate;n(fe=>({...fe,store:{...fe.store,shipping:ie}})),E(H.toFixed(2))}},style:{width:"100%",padding:"1rem",border:"2px solid var(--blush)",borderRadius:"12px",background:"rgba(255,255,255,0.8)"}})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:o("taxRate")}),l.jsx("input",{type:"number",value:((C=e.store)==null?void 0:C.taxRate)||0,onChange:H=>n(ie=>({...ie,store:{...ie.store,taxRate:parseFloat(H.target.value)||0}})),style:{width:"100%",padding:"1rem",border:"2px solid var(--blush)",borderRadius:"12px",background:"rgba(255,255,255,0.8)"}})]}),l.jsx("button",{className:"btn btn-primary",style:{marginTop:"1rem"},onClick:async()=>{m(!0),g(null);try{await ae.updateSettings(e),console.log(o("success"))}catch(H){g(o("failedToSaveChanges")),console.error(H),console.log(o("error"))}finally{m(!1)}},disabled:h,children:o(h?"saving":"saveChanges")}),y&&l.jsx("p",{style:{color:"red",marginTop:"1rem"},children:y})]})]})},dC=(t,e=100)=>new Promise(n=>{const r=new Image;r.src=t,r.onload=()=>{const i=e/r.width,s=e,o=r.height*i,u=document.createElement("canvas");u.width=s,u.height=o,u.getContext("2d").drawImage(r,0,0,s,o),n(u.toDataURL("image/jpeg",.7))}}),hC=({products:t,setProducts:e,ingredients:n,formatCurrency:r,currentCurrency:i})=>{const{t:s}=Ye(),o=(i==null?void 0:i.code)||"USD",u=N=>`${o} ${Number(N).toFixed(2)}`,[c,h]=B.useState(null),[m,y]=B.useState(""),[g,w]=B.useState(""),[A,P]=B.useState(0),[j,k]=B.useState(!1),[E,T]=B.useState([]);B.useEffect(()=>{(async()=>{try{const O=await ae.getCountryContacts();T(O)}catch(O){console.error("Failed to load country contacts:",O)}})()},[]);const b=N=>{const O=(N||"").trim();h("new"),_({name:O,description:"",price:"",making_price:"",profit:"",profit_margin:"",images:[],uploadedImages:[],ingredients:[],tag:"none",languages:["en","ru","tr","tk"],regions:[],faceImageIndex:0}),w(""),y("")},[D,F]=B.useState(null),v=async()=>{if(D)try{await ae.deleteProduct(D),e(N=>N.filter(O=>O.id!==D)),c&&c!=="new"&&c===D&&h(null)}catch(N){console.error("Failed to delete product:",N),console.log(s("error")||"Error")}finally{F(null)}},[p,_]=B.useState({name:"",description:"",price:"",making_price:"",profit:"",profit_margin:"",images:[],uploadedImages:[],ingredients:[],tag:"none",languages:["en","ru","tr","tk"],regions:[],faceImageIndex:0}),S=(i==null?void 0:i.rate)||1,I=i!=null&&i.symbol&&i.symbol.trim()?i.symbol:(i==null?void 0:i.code)||"$",R=(i==null?void 0:i.code)||"USD",C=[{value:"none",label:s("badges.none")},{value:"bestseller",label:" "+s("badges.bestseller")},{value:"popular",label:" "+s("badges.popular")},{value:"premium",label:" "+s("badges.premium")},{value:"signature",label:" "+s("badges.signature")},{value:"rustic",label:" "+s("badges.rustic")},{value:"classic",label:" "+s("badges.classic")},{value:"seasonal",label:" "+s("badges.seasonal")},{value:"new",label:" "+s("badges.new")},{value:"limited",label:" "+s("badges.limited")},{value:"vegan",label:" "+s("badges.vegan")},{value:"glutenFree",label:" "+s("badges.glutenFree")},{value:"chefChoice",label:" "+s("badges.chefChoice")},{value:"organic",label:" "+s("badges.organic")},{value:"sugarFree",label:" "+s("badges.sugarFree")},{value:"hypoallergenic",label:" "+s("badges.hypoallergenic")},{value:"dairyFree",label:" "+s("badges.dairyFree")},{value:"nutFree",label:" "+s("badges.nutFree")},{value:"halal",label:" "+s("badges.halal")},{value:"keto",label:" "+s("badges.keto")}],H=[{code:"en",name:"English",flag:""},{code:"ru",name:"Russian",flag:""},{code:"tr",name:"Turkish",flag:""},{code:"tk",name:"Turkmen",flag:""}],ie=N=>{_(O=>{const W=O.languages||[];return W.includes(N)?W.length<=1?O:{...O,languages:W.filter(ee=>ee!==N)}:{...O,languages:[...W,N]}})},fe=N=>{const Y=Array.from(N.target.files||[]);Y.length&&Y.forEach((ne,le)=>{if(ne.size>5242880){console.log(`${ne.name}: ${s("imageSizeLimit")}`);return}const $e=new FileReader;$e.onloadend=async()=>{const Je=$e.result,Yt=new Image;Yt.onload=async()=>{if(Yt.width>1600||Yt.height>1600){console.log(`${ne.name}: ${s("imageResolutionLimit")||"Image resolution must be  1600x1600"} `);return}try{const He=await dC(Je);_(wt=>({...wt,uploadedImages:[...wt.uploadedImages,{id:`upload-${Date.now()}-${le}`,data:Je,thumbnail:He}]}))}catch{_(He=>({...He,uploadedImages:[...He.uploadedImages,{id:`upload-${Date.now()}-${le}`,data:Je,thumbnail:Je}]}))}},Yt.src=Je},$e.readAsDataURL(ne)})},ue=N=>{_(O=>{var le;const W=O.uploadedImages.findIndex($e=>$e.id===N),ee=O.uploadedImages.filter($e=>$e.id!==N);let Y=O.faceImageIndex;W!==-1&&(O.faceImageIndex===W?Y=0:O.faceImageIndex>W&&(Y=Math.max(0,O.faceImageIndex-1)));const ne=ee.length+(((le=O.images)==null?void 0:le.length)||0);return Y>=ne&&(Y=Math.max(0,ne-1)),{...O,uploadedImages:ee,faceImageIndex:Y}})},U=N=>{_(O=>{const W=(O.images||[]).filter(($e,Je)=>Je!==N),Y=O.uploadedImages.length+N;let ne=O.faceImageIndex;O.faceImageIndex===Y?ne=0:O.faceImageIndex>Y&&(ne=Math.max(0,O.faceImageIndex-1));const le=O.uploadedImages.length+W.length;return ne>=le&&(ne=Math.max(0,le-1)),{...O,images:W,faceImageIndex:ne}})},J=N=>{var wr;const O=N.price*S,W=(N.making_price||0)*S,Y=Fa(N,n)*S,ne=O-Y,le=Y>0?ne/Y*100:0;h(N.id);const $e=N.images||[],Je=$e.filter(un=>!un.startsWith("data:image")),Yt=$e.filter(un=>un.startsWith("data:image")).map((un,Ji)=>({id:`data-${Ji}`,data:un,thumbnail:un})),He=((wr=N.tags)==null?void 0:wr[0])||"none",wt=N.languages||["en","ru","tr","tk"],ln=N.regions||[];_({name:N.name,description:N.description,price:O.toFixed(2),making_price:W.toFixed(2),profit:ne.toFixed(2),profit_margin:le.toFixed(1),images:Je,uploadedImages:Yt,ingredients:N.ingredients||[],tag:He,languages:wt,regions:ln,faceImageIndex:0})},se=N=>{_(O=>{const W=O.regions||[];return W.includes(N)?{...O,regions:W.filter(ee=>ee!==N)}:{...O,regions:[...W,N]}})},we=()=>{const N=(p.ingredients||[]).reduce((W,ee)=>{const Y=n.find(le=>le.id===ee.id),ne=(Y==null?void 0:Y.price)||0;return W+ne*S*(ee.quantity||0)},0),O=parseFloat(p.making_price)||0;return N+O},ve=N=>{if(N===""){_(ne=>({...ne,price:N}));return}const O=parseFloat(N),W=we(),ee=isNaN(O)?0:O-W,Y=W>0?ee/W*100:0;_(ne=>({...ne,price:N,profit:ee.toFixed(2),profit_margin:Y.toFixed(1)}))},Se=(N,O)=>{const W=we();let ee,Y,ne;if(O==="amount"){if(N===""||N==="-"){_(le=>({...le,profit:N}));return}Y=parseFloat(N),ee=W+(isNaN(Y)?0:Y),ne=W>0?Y/W*100:0,_(le=>({...le,price:ee.toFixed(2),profit:N,profit_margin:ne.toFixed(1)}))}else if(O==="margin"){if(N===""||N==="-"){_(le=>({...le,profit_margin:N}));return}ne=parseFloat(N),isNaN(ne)?_(le=>({...le,profit_margin:N})):(ee=W*(1+ne/100),Y=ee-W,_(le=>({...le,price:ee.toFixed(2),profit:Y.toFixed(2),profit_margin:N})))}},At=N=>{N.preventDefault();const O=[...p.uploadedImages.map(He=>He.data),...p.images];if(p.faceImageIndex>0&&p.faceImageIndex<O.length){const wt=[O[p.faceImageIndex],...O.slice(0,p.faceImageIndex),...O.slice(p.faceImageIndex+1)];O.splice(0,O.length,...wt)}if(O.length===0){console.log(s("errorAddAtLeastOneImage")||"Please add at least one image.");return}const W=p.tag&&p.tag!=="none"?[p.tag]:[],ee=p.languages&&p.languages.length>0?p.languages:["en","ru","tr","tk"],Y=we();if((parseFloat(p.price)||0)<Y){console.log(s("errorPriceTooLow")||"Selling Price cannot be lower than Total Cost!");return}const le=parseFloat(p.price)/S,$e=(parseFloat(p.making_price)||0)/S,Je={name:p.name,description:p.description,price:le,making_price:$e,images:O,category_id:"4",ingredients:p.ingredients,tags:W,languages:ee,regions:p.regions||[]};(async()=>{try{if(c&&c!=="new"){const wt={...t.find(ln=>ln.id===c),...Je};await ae.updateProduct(c,wt),e(ln=>ln.map(wr=>wr.id===c?wt:wr))}else{const He={...Je,id:(t.length+1).toString()},wt=await ae.createProduct(He);e(ln=>[...ln,wt])}h(null)}catch(He){console.error("Failed to save product:",He),console.log(s("errorSavingProduct")||"Failed to save product. Please try again.")}})()},xt=N=>{const W=N.ingredients.reduce((le,$e)=>{const Je=n.find(He=>He.id===$e.id),Yt=(Je==null?void 0:Je.price)||0;return le+Yt*S*($e.quantity||0)},0)+(parseFloat(N.making_price)||0),Y=(parseFloat(N.price)||0)-W,ne=W>0?Y/W*100:0;return{...N,profit:Y.toFixed(2),profit_margin:ne.toFixed(1)}},q=N=>{_(O=>{const W={...O,making_price:N};return xt(W)})},ge=(N,O)=>{_(W=>{const ee=W.ingredients.find(le=>le.id===N);let Y;ee?O<=0?Y=W.ingredients.filter(le=>le.id!==N):Y=W.ingredients.map(le=>le.id===N?{...le,quantity:O}:le):O>0?Y=[...W.ingredients,{id:N,quantity:O}]:Y=W.ingredients;const ne={...W,ingredients:Y};return xt(ne)})},xr=N=>{var O;return((O=p.ingredients.find(W=>W.id===N))==null?void 0:O.quantity)||0};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"form-card",style:{marginBottom:"2rem"},children:[l.jsx("h3",{style:{fontFamily:"'Playfair Display',serif",marginBottom:"1rem"},children:s("createEditProduct")||"Create / Edit Product"}),c?l.jsxs("form",{onSubmit:At,children:[l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[s("productName")," *"]}),l.jsx("input",{type:"text",value:p.name,onChange:N=>_({...p,name:N.target.value}),required:!0,onInvalid:N=>N.target.setCustomValidity(s("fieldRequired")),onInput:N=>N.target.setCustomValidity("")})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[s("pricePerUnit")," (",I,") *"]}),l.jsx("input",{type:"number",step:"0.01",value:p.price,onChange:N=>ve(N.target.value),required:!0,onInvalid:N=>N.target.setCustomValidity(s("fieldRequired")),onInput:N=>N.target.setCustomValidity(""),onWheel:N=>N.target.blur()})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[s("description")," *"]}),l.jsx("textarea",{value:p.description,onChange:N=>_({...p,description:N.target.value}),required:!0,onInvalid:N=>N.target.setCustomValidity(s("fieldRequired")),onInput:N=>N.target.setCustomValidity("")})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[s("productImages")," (Upload Multiple) *"]}),l.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[l.jsx("input",{type:"file",accept:"image/*",onChange:fe,style:{padding:"0.5rem"},id:"img-upload",multiple:!0,hidden:!0}),l.jsx("label",{htmlFor:"img-upload",className:"btn btn-secondary btn-small",style:{width:"100%",justifyContent:"center",cursor:"pointer"},children:s("selectImageFile")})]}),p.uploadedImages.length>0&&l.jsxs("div",{style:{marginBottom:"1rem"},children:[l.jsxs("p",{style:{fontSize:"0.9rem",fontWeight:500,marginBottom:"0.5rem"},children:["Uploaded Images (",p.uploadedImages.length,"):"]}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(100px,1fr))",gap:"0.5rem"},children:p.uploadedImages.map((N,O)=>l.jsxs("div",{style:{position:"relative",borderRadius:"8px",overflow:"hidden",border:"2px solid var(--blush)"},children:[l.jsx("img",{src:N.thumbnail,alt:`Upload ${O+1}`,style:{width:"100%",height:"100px",objectFit:"cover"}}),l.jsx("button",{type:"button",onClick:()=>ue(N.id),style:{position:"absolute",top:0,right:0,background:"rgba(255,0,0,0.7)",color:"white",border:"none",width:"24px",height:"24px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(Hr,{size:16})})]},N.id))})]}),l.jsxs("div",{style:{marginTop:"1rem",padding:"1rem",background:"var(--blush)",borderRadius:"12px"},children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:"Add Image URLs:"}),l.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:[l.jsx("input",{type:"text",placeholder:"https://...",onKeyPress:N=>{if(N.key==="Enter"){const O=N.target.value.trim();O&&(_(W=>({...W,images:[...W.images,O]})),N.target.value="")}},style:{flex:1,padding:"0.5rem",borderRadius:"6px",border:"1px solid var(--chocolate)"}}),l.jsxs("button",{type:"button",className:"form-submit btn-small",onClick:N=>{N.preventDefault();const O=N.target.previousElementSibling,W=O.value.trim();W&&(_(ee=>({...ee,images:[...ee.images,W]})),O.value="")},children:[s("add")||"Add"," URL"]})]}),p.images.length>0&&l.jsxs("div",{children:[l.jsxs("p",{style:{fontSize:"0.9rem",fontWeight:500,marginBottom:"0.5rem"},children:["Image URLs (",p.images.length,"):"]}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(100px,1fr))",gap:"0.5rem"},children:p.images.map((N,O)=>l.jsxs("div",{style:{position:"relative",borderRadius:"8px",overflow:"hidden",border:"2px solid var(--terracotta)"},children:[l.jsx("img",{src:N,alt:`URL ${O+1}`,style:{width:"100%",height:"100px",objectFit:"cover"}}),l.jsx("button",{type:"button",onClick:()=>U(O),style:{position:"absolute",top:0,right:0,background:"rgba(255,0,0,0.7)",color:"white",border:"none",width:"24px",height:"24px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(Hr,{size:16})})]},O))})]})]})]}),(p.uploadedImages.length>0||p.images.length>0)&&l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{style:{display:"block",marginBottom:"1rem",fontWeight:600},children:[" ",s("selectFaceImage")||"Select Face Image"]}),l.jsx("p",{style:{fontSize:"0.85rem",color:"var(--chocolate)",opacity:.7,marginBottom:"1rem"},children:"Choose which photo will be shown in product collections"}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(120px,1fr))",gap:"1rem",padding:"1.5rem",background:"var(--blush)",borderRadius:"12px"},children:[...p.uploadedImages,...p.images.map((N,O)=>({id:`url-${O}`,data:N}))].map((N,O)=>l.jsxs("div",{onClick:()=>_(W=>({...W,faceImageIndex:O})),style:{position:"relative",borderRadius:"12px",overflow:"hidden",cursor:"pointer",border:p.faceImageIndex===O?"3px solid var(--terracotta)":"2px solid transparent",transition:"all 0.2s",boxShadow:p.faceImageIndex===O?"0 0 0 3px white, 0 0 10px rgba(212,133,106,0.4)":"0 2px 8px rgba(0,0,0,0.1)",transform:p.faceImageIndex===O?"scale(1.05)":"scale(1)"},children:[l.jsx("img",{src:N.thumbnail||N.data,alt:`Face option ${O+1}`,style:{width:"100%",height:"120px",objectFit:"cover"}}),p.faceImageIndex===O&&l.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(212,133,106,0.3)",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx("div",{style:{background:"var(--terracotta)",color:"white",width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.2rem",fontWeight:"bold"},children:""})})]},N.id))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:s("productBadge")}),l.jsx("select",{value:p.tag,onChange:N=>_({...p,tag:N.target.value}),style:{padding:"1rem",width:"100%",borderRadius:"12px",border:"2px solid var(--blush)"},children:C.map(N=>l.jsx("option",{value:N.value,children:N.label},N.value))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:s("showInLanguages")}),l.jsx("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",padding:"1rem",background:"var(--blush)",borderRadius:"12px"},children:H.map(N=>{var O,W;return l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",background:"white",padding:"0.5rem 1rem",borderRadius:"50px",border:(O=p.languages)!=null&&O.includes(N.code)?"2px solid var(--terracotta)":"2px solid transparent"},children:[l.jsx("input",{type:"checkbox",checked:(W=p.languages)==null?void 0:W.includes(N.code),onChange:()=>ie(N.code),style:{width:"auto",margin:0}}),l.jsxs("span",{children:[N.flag," ",N.name]})]},N.code)})}),l.jsx("p",{style:{fontSize:"0.8rem",color:"var(--chocolate)",marginTop:"0.5rem",opacity:.7},children:s("selectLanguagesProduct")})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Pi,{size:18})," ",s("productRegions")||"Available Regions"]}),l.jsx("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap",padding:"1rem",background:"var(--blush)",borderRadius:"12px"},children:E.length===0?l.jsx("p",{style:{color:"var(--chocolate)",opacity:.7,fontSize:"0.9rem"},children:s("noCountryContacts")||"No regions configured"}):E.map(N=>{var O,W;return l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",background:"white",padding:"0.5rem 1rem",borderRadius:"50px",border:(O=p.regions)!=null&&O.includes(N.countryCode)?"2px solid var(--terracotta)":"2px solid transparent",transition:"all 0.2s"},children:[l.jsx("input",{type:"checkbox",checked:(W=p.regions)==null?void 0:W.includes(N.countryCode),onChange:()=>se(N.countryCode),style:{width:"auto",margin:0}}),l.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"28px",height:"28px",background:N.countryCode==="GENERAL"?"var(--espresso)":"var(--terracotta)",color:"white",borderRadius:"50%",fontSize:"0.65rem",fontWeight:700},children:N.countryCode==="GENERAL"?l.jsx(Pi,{size:14}):N.countryCode}),l.jsx("span",{children:N.country})]},N.id)})}),l.jsx("p",{style:{fontSize:"0.8rem",color:"var(--chocolate)",marginTop:"0.5rem",opacity:.7},children:s("productRegionsHelp")||"Leave empty to show in all regions, or select specific regions to restrict availability."})]}),l.jsxs("div",{style:{margin:"2rem 0",padding:"1.5rem",background:"var(--blush)",borderRadius:"16px"},children:[l.jsx("h4",{style:{marginBottom:"1rem"},children:s("costAnalysis")}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[s("makingPriceLabor")," (",I,")"]}),l.jsx("input",{type:"number",step:"0.01",value:p.making_price,onChange:N=>q(N.target.value),placeholder:"0.00",onWheel:N=>N.target.blur()})]}),l.jsxs("div",{style:{marginBottom:"1rem"},children:[l.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:500},children:s("ingredients")}),l.jsx("div",{style:{background:"white",borderRadius:"12px",border:"1px solid var(--blush)"},children:l.jsxs("table",{className:"admin-table",style:{marginBottom:0},children:[l.jsx("thead",{style:{position:"sticky",top:0,zIndex:10,background:"white",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:l.jsxs("tr",{children:[l.jsx("th",{style:{padding:"1rem"},children:s("ingredientName")}),l.jsx("th",{style:{padding:"1rem"},children:s("cost")}),l.jsx("th",{style:{padding:"1rem"},children:s("quantity")})]})}),l.jsx("tbody",{children:n.map(N=>{const O=xr(N.id);return l.jsxs("tr",{style:{background:O>0?"var(--blush)":"transparent",transition:"background 0.2s"},children:[l.jsx("td",{style:{padding:"0.75rem 1rem"},children:l.jsx("div",{style:{fontWeight:500},children:N.name})}),l.jsxs("td",{style:{padding:"0.75rem 1rem",color:"var(--chocolate)",opacity:.8},children:[I," ",(N.price*S).toFixed(2)," / ",N.unit]}),l.jsx("td",{style:{padding:"0.75rem 1rem"},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx("input",{type:"number",min:"0",step:"0.01",style:{width:"80px",padding:"0.5rem",fontSize:"0.9rem",border:O>0?"2px solid var(--terracotta)":"1px solid #ddd",borderRadius:"6px",textAlign:"center"},value:O,onChange:W=>ge(N.id,parseFloat(W.target.value)||0),onFocus:W=>W.target.select(),onWheel:W=>W.target.blur()}),l.jsx("span",{style:{fontSize:"0.85rem",color:"var(--chocolate)",minWidth:"40px"},children:N.unit})]})})]},N.id)})})]})})]}),l.jsxs("div",{style:{marginTop:"1.5rem",background:"linear-gradient(135deg,rgba(255,240,240,0.5),rgba(245,228,220,0.5))",padding:"2rem",borderRadius:"16px",border:"1px solid var(--blush)"},children:[l.jsx("h5",{style:{fontSize:"0.95rem",fontWeight:600,color:"var(--chocolate)",marginBottom:"1.5rem",textTransform:"uppercase",letterSpacing:"0.5px",opacity:.8},children:s("pricingBreakdown")}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(200px,1fr))",gap:"1.5rem"},children:[l.jsxs("div",{style:{background:"white",padding:"1.25rem",borderRadius:"12px",border:"2px solid var(--blush)"},children:[l.jsx("label",{style:{display:"block",fontSize:"0.85rem",color:"var(--chocolate)",marginBottom:"0.5rem",fontWeight:500,opacity:.7,textTransform:"uppercase",letterSpacing:"0.3px"},children:s("totalCost")}),l.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"0.5rem"},children:[l.jsx("span",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--chocolate)",opacity:.9},children:R}),l.jsx("span",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--chocolate)"},children:we().toFixed(2)})]})]}),l.jsxs("div",{style:{background:"white",padding:"1.25rem",borderRadius:"12px",border:"2px solid var(--terracotta)"},children:[l.jsx("label",{style:{display:"block",fontSize:"0.85rem",color:"var(--chocolate)",marginBottom:"0.5rem",fontWeight:500,opacity:.7,textTransform:"uppercase",letterSpacing:"0.3px"},children:s("sellingPrice")}),l.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"0.5rem"},children:[l.jsx("span",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--chocolate)",opacity:.9},children:R}),l.jsx("input",{type:"number",step:"0.01",value:p.price,onChange:N=>ve(N.target.value),style:{flex:1,fontSize:"1.5rem",fontWeight:700,border:"none",background:"transparent",color:"var(--chocolate)",outline:"none",padding:"0",cursor:"pointer"},onWheel:N=>N.target.blur()})]})]}),l.jsxs("div",{style:{background:"white",padding:"1.25rem",borderRadius:"12px",border:"2px solid var(--sage)"},children:[l.jsx("label",{style:{display:"block",fontSize:"0.85rem",color:"var(--chocolate)",marginBottom:"0.5rem",fontWeight:500,opacity:.7,textTransform:"uppercase",letterSpacing:"0.3px"},children:s("profit")}),l.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"0.5rem"},children:[l.jsx("span",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--chocolate)",opacity:.9},children:R}),l.jsx("input",{type:"number",step:"0.01",min:"-100",max:"1000",value:p.profit,onChange:N=>Se(N.target.value,"amount"),style:{flex:1,fontSize:"1.5rem",fontWeight:700,border:"none",background:"transparent",color:"var(--chocolate)",outline:"none",padding:"0",cursor:"pointer"},onWheel:N=>N.target.blur()})]})]}),l.jsxs("div",{style:{background:"white",padding:"1.25rem",borderRadius:"12px",border:"2px solid var(--mauve)"},children:[l.jsx("label",{style:{display:"block",fontSize:"0.85rem",color:"var(--chocolate)",marginBottom:"0.5rem",fontWeight:500,opacity:.7,textTransform:"uppercase",letterSpacing:"0.3px"},children:s("profitMargin")}),l.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"0.5rem"},children:[l.jsx("span",{style:{fontSize:"1.5rem",fontWeight:700,color:"var(--chocolate)"},children:"%"}),l.jsx("input",{type:"number",step:"0.1",value:p.profit_margin,onChange:N=>Se(N.target.value,"margin"),style:{flex:1,fontSize:"1.5rem",fontWeight:700,border:"none",background:"transparent",color:"var(--chocolate)",outline:"none",padding:"0",cursor:"pointer"},onWheel:N=>N.target.blur()})]})]})]})]})]}),l.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem"},children:[l.jsx("button",{type:"submit",className:"form-submit",style:{width:"auto",padding:"0.8rem 2rem",marginTop:0},children:s("save")||"Save"}),l.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>h(null),children:s("cancel")}),c&&c!=="new"&&l.jsx("button",{type:"button",className:"btn",style:{background:"#dc3545",color:"#fff"},onClick:()=>F(c),children:s("delete")})]})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"form-row",style:{alignItems:"flex-end",gap:"0.75rem"},children:l.jsxs("div",{className:"form-group",style:{flex:1,position:"relative"},children:[l.jsx("label",{children:s("productName")}),l.jsx("input",{type:"text",value:m,onChange:N=>{y(N.target.value),g&&w(""),P(0),k(!0)},onKeyDown:N=>{const O=(m||"").trim();if(!O)return;const W=O.toLowerCase(),ee=t.filter(Y=>{var ne;return(ne=Y.name)==null?void 0:ne.toLowerCase().startsWith(W)}).slice(0,8);if(N.key==="Enter"){const Y=t.find(ne=>{var le;return((le=ne.name)==null?void 0:le.toLowerCase())===W});if(Y)J(Y),w(""),k(!1);else if(ee.length>0){const ne=ee[Math.max(0,Math.min(A,ee.length-1))];y(ne.name),J(ne),w(""),k(!1)}else b(O)}else N.key==="Tab"?ee.length>0&&y(ee[0].name):N.key==="ArrowDown"?(N.preventDefault(),P(Y=>Math.min(Y+1,Math.max(0,ee.length-1)))):N.key==="ArrowUp"?(N.preventDefault(),P(Y=>Math.max(Y-1,0))):N.key==="Escape"&&k(!1)},onFocus:()=>k(!!(m&&m.trim())),onBlur:()=>setTimeout(()=>k(!1),150),placeholder:s("productName"),style:{borderColor:g?"#dc3545":void 0}}),g&&l.jsx("div",{style:{color:"#dc3545",marginTop:"0.35rem",fontSize:"0.9rem"},children:g}),j&&(m==null?void 0:m.trim())&&(()=>{const N=m.trim().toLowerCase(),O=t.filter(ee=>{var Y;return(Y=ee.name)==null?void 0:Y.toLowerCase().startsWith(N)}).slice(0,8),W=t.find(ee=>{var Y;return((Y=ee.name)==null?void 0:Y.toLowerCase())===N});return l.jsxs("div",{style:{position:"absolute",left:0,right:0,top:"calc(100% + 6px)",zIndex:1e3,background:"white",border:"2px solid var(--blush)",borderRadius:"14px",padding:"0.5rem",boxShadow:"0 10px 30px rgba(0,0,0,0.12)"},children:[O.length>0?O.map((ee,Y)=>l.jsx("button",{onMouseDown:()=>{y(ee.name),J(ee),P(0),w(""),k(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"0.6rem 0.75rem",border:"none",background:Y===A?"linear-gradient(135deg,rgba(245,228,220,0.6),rgba(212,133,106,0.15))":"transparent",cursor:"pointer",color:"var(--chocolate)",borderRadius:"10px",fontWeight:Y===A?700:500},role:"option","aria-selected":Y===A,children:ee.name},ee.id)):l.jsx("div",{style:{padding:"0.6rem 0.75rem",color:"var(--chocolate)",opacity:.7},children:"No matches"}),!W&&l.jsx("button",{onMouseDown:()=>{b(m.trim()),k(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"0.6rem 0.75rem",border:"none",cursor:"pointer",color:"var(--terracotta)",fontWeight:700,background:"transparent",borderTop:"1px dashed var(--blush)",marginTop:"0.25rem"},children:(s("createAsNewProduct")||"Create {name} as new product").replace("{name}",m.trim())})]})})()]})}),l.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"0.75rem"},children:[l.jsx("button",{className:"form-submit",style:{width:"auto",padding:"0.8rem 2rem",marginTop:0},onClick:()=>{b(m||"")},children:s("create")||"Create"}),l.jsx("button",{className:"form-submit",style:{width:"auto",padding:"0.8rem 2rem",marginTop:0},onClick:()=>{const N=(m||"").trim().toLowerCase();if(!N)return;const O=t.find(W=>{var ee;return((ee=W.name)==null?void 0:ee.toLowerCase())===N});O?(J(O),w("")):w(s("productNotFound")||"Product not found")},children:s("edit")})]})]})]}),l.jsxs("div",{className:"form-card",children:[l.jsx("h3",{style:{fontFamily:"'Playfair Display',serif",marginBottom:"1.5rem"},children:s("productManagement")}),l.jsx("div",{className:"products-grid",children:t.map(N=>{var O;return l.jsxs("div",{className:"product-card",onClick:()=>J(N),children:[l.jsxs("div",{className:"product-image",style:{height:"200px",position:"relative"},children:[l.jsx("img",{src:N.images[0],alt:N.name}),((O=N.tags)==null?void 0:O[0])&&l.jsx("span",{className:`product-tag ${N.tags[0]}`,children:N.tags[0]}),l.jsx("button",{type:"button",title:s("delete"),onClick:W=>{W.stopPropagation(),F(N.id)},style:{position:"absolute",top:"0.5rem",right:"0.5rem",background:"rgba(220,53,69,0.9)",color:"white",border:"none",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsx(Bi,{size:16})})]}),l.jsxs("div",{className:"product-content",style:{padding:"1rem"},children:[l.jsx("h4",{style:{marginBottom:"0.5rem"},children:N.name}),l.jsx("div",{className:"product-price",children:u(N.price)}),l.jsx("div",{style:{fontSize:"0.85rem",marginTop:"0.5rem",color:"var(--chocolate)",opacity:.7},children:Fa(N,n)>0?`Margin: ${((N.price-Fa(N,n))/N.price*100).toFixed(0)}%`:"No cost data"}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.25rem",marginTop:"0.5rem"},children:!N.regions||N.regions.length===0?l.jsxs("span",{style:{fontSize:"0.7rem",padding:"0.2rem 0.5rem",background:"var(--sage)",color:"white",borderRadius:"10px",display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[l.jsx(Pi,{size:10})," ",s("allRegions")||"All"]}):N.regions.map(W=>l.jsx("span",{style:{fontSize:"0.7rem",padding:"0.2rem 0.5rem",background:"var(--terracotta)",color:"white",borderRadius:"10px",fontWeight:600},children:W},W))})]})]},N.id)})})]}),D!==null&&l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.35)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:l.jsxs("div",{style:{background:"linear-gradient(135deg,rgba(255,240,240,0.95),rgba(245,228,220,0.95))",border:"1px solid var(--blush)",borderRadius:"16px",padding:"1.5rem",width:"min(420px,90vw)",boxShadow:"0 10px 30px rgba(0,0,0,0.2)"},children:[l.jsx("h4",{style:{margin:"0 0 1rem",color:"var(--chocolate)"},children:s("confirmDelete")||"Delete this product?"}),l.jsx("p",{style:{margin:"0 0 1.25rem",color:"var(--chocolate)",opacity:.8},children:s("confirmDeleteDetail")||"This action cannot be undone."}),l.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[l.jsx("button",{className:"btn btn-secondary",onClick:()=>F(null),children:s("cancel")}),l.jsx("button",{className:"btn",style:{background:"#dc3545",color:"#fff"},onClick:v,children:s("delete")})]})]})})]})},fC=({ingredients:t,setIngredients:e,products:n,currentCurrency:r})=>{const{t:i}=Ye(),[s,o]=B.useState({name:"",unit:"",price:""}),[u,c]=B.useState(null),h=(r==null?void 0:r.rate)||1,m=r!=null&&r.symbol&&r.symbol.trim()?r.symbol:(r==null?void 0:r.code)||"$";B.useEffect(()=>{t&&localStorage.setItem("soulmate_ingredients",JSON.stringify(t))},[t]);const y=j=>{j&&j.preventDefault();const k=u?u.name:s.name;if(!k||!k.trim()){console.log(i("ingredientNameRequired"));return}const E=b=>(parseFloat(b)||0)/h;(async()=>{try{if(u){const b={...u,price:E(u.price)};await ae.updateIngredient(u.id,b),e(D=>D.map(F=>F.id===u.id?b:F)),c(null)}else{const D={id:"ing"+Date.now(),name:s.name,unit:s.unit,price:E(s.price)},F=await ae.createIngredient(D);e(v=>[...v,F]),o({name:"",unit:"",price:""})}}catch(b){console.error("Failed to save ingredient:",b),console.log(i("errorSavingIngredient")||"Failed to save ingredient.")}})()},g=j=>{c({...j,price:(j.price*h).toFixed(2)}),o({name:"",unit:"",price:""})},w=j=>n?n.some(k=>{var E;return(E=k.ingredients)==null?void 0:E.some(T=>T.id===j)}):!1,A=j=>n?n.filter(k=>{var E;return(E=k.ingredients)==null?void 0:E.some(T=>T.id===j)}):[],P=j=>{const k=A(j),E=k.length>0?i("ingredientUsedInProducts").replace("{count}",k.length).replace("{products}",k.map(T=>T.name).join(", ")):i("deleteIngredientConfirm");window.confirm(E)&&ae.deleteIngredient(j).then(()=>{e(T=>T.filter(b=>b.id!==j))}).catch(T=>{console.error("Failed to delete ingredient:",T),console.log("Failed to delete ingredient")})};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"form-card",style:{marginBottom:"2rem"},children:[l.jsx("h3",{style:{fontFamily:"'Playfair Display',serif",marginBottom:"1.5rem"},children:i(u?"editIngredient":"addNewIngredient")}),l.jsxs("form",{onSubmit:y,children:[l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[i("ingredientName")," *"]}),l.jsx("input",{type:"text",value:(u==null?void 0:u.name)||s.name,onChange:j=>u?c({...u,name:j.target.value}):o({...s,name:j.target.value}),required:!0,onInvalid:j=>j.target.setCustomValidity(i("fieldRequired")),onInput:j=>j.target.setCustomValidity("")})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[i("unit")," *"]}),l.jsx("input",{type:"text",value:(u==null?void 0:u.unit)||s.unit,onChange:j=>u?c({...u,unit:j.target.value}):o({...s,unit:j.target.value}),placeholder:"lb, oz, qt, etc.",required:!0,onInvalid:j=>j.target.setCustomValidity(i("fieldRequired")),onInput:j=>j.target.setCustomValidity("")})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[i("pricePerUnit")," (",m,") *"]}),l.jsx("input",{type:"number",step:"0.01",min:"0",value:(u==null?void 0:u.price)||s.price,onChange:j=>u?c({...u,price:j.target.value}):o({...s,price:j.target.value}),required:!0,onInvalid:j=>j.target.setCustomValidity(i("fieldRequired")),onInput:j=>j.target.setCustomValidity("")})]})]}),l.jsxs("button",{type:"submit",className:"form-submit",style:{width:"auto",padding:"0.8rem 2rem",marginTop:0},children:[i(u?"update":"add")," ",i("ingredients")]}),u&&l.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>c(null),style:{marginLeft:"0.5rem"},children:i("cancel")})]})]}),l.jsxs("div",{className:"form-card",children:[l.jsx("h3",{style:{fontFamily:"'Playfair Display',serif",marginBottom:"1.5rem"},children:i("ingredientManagement")}),t.length===0?l.jsx("p",{style:{color:"var(--chocolate)",opacity:.7},children:i("noIngredientsYet")}):l.jsxs("table",{className:"admin-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{style:{width:"35%"},children:i("ingredientName")}),l.jsx("th",{style:{width:"15%"},children:i("unit")}),l.jsxs("th",{style:{width:"20%"},children:[i("pricePerUnit")," (",m,")"]}),l.jsx("th",{style:{width:"15%"},children:i("status")}),l.jsx("th",{style:{width:"15%"},children:i("actions")})]})}),l.jsx("tbody",{children:t.map(j=>{const k=w(j.id),E=A(j.id),T=(u==null?void 0:u.id)===j.id;return l.jsxs("tr",{children:[l.jsx("td",{children:T?l.jsx("input",{type:"text",value:u.name,onChange:b=>c({...u,name:b.target.value}),style:{padding:"0.5rem 0.75rem",border:"1px solid var(--terracotta)",borderRadius:"8px",width:"100%",background:"white",boxShadow:"0 2px 5px rgba(0,0,0,0.05)",outline:"none",color:"var(--espresso)",fontSize:"0.95rem"},placeholder:i("ingredientName"),autoFocus:!0,required:!0,onInvalid:b=>b.target.setCustomValidity(i("fieldRequired")),onInput:b=>b.target.setCustomValidity("")}):l.jsx("strong",{style:{color:"var(--espresso)",fontSize:"0.95rem"},children:j.name})}),l.jsx("td",{children:T?l.jsx("input",{type:"text",value:u.unit,onChange:b=>c({...u,unit:b.target.value}),style:{padding:"0.5rem 0.75rem",border:"1px solid var(--terracotta)",borderRadius:"8px",width:"100%",background:"white",boxShadow:"0 2px 5px rgba(0,0,0,0.05)",outline:"none",color:"var(--espresso)"},placeholder:i("unit"),required:!0,onInvalid:b=>b.target.setCustomValidity(i("fieldRequired")),onInput:b=>b.target.setCustomValidity("")}):l.jsx("span",{style:{color:"var(--chocolate)"},children:j.unit})}),l.jsx("td",{children:T?l.jsx("input",{type:"number",step:"0.01",min:"0",value:u.price,onChange:b=>c({...u,price:b.target.value}),style:{padding:"0.5rem 0.75rem",border:"1px solid var(--terracotta)",borderRadius:"8px",width:"100%",background:"white",boxShadow:"0 2px 5px rgba(0,0,0,0.05)",outline:"none",color:"var(--espresso)"},placeholder:"0.00",onWheel:b=>b.target.blur(),required:!0,onInvalid:b=>b.target.setCustomValidity(i("fieldRequired")),onInput:b=>b.target.setCustomValidity("")}):l.jsxs("span",{children:[m," ",(j.price*h).toFixed(2)]})}),l.jsx("td",{children:k?l.jsxs("span",{className:"status used",title:`Used in: ${E.map(b=>b.name).join(", ")}`,children:[i("used")," (",E.length,")"]}):l.jsx("span",{className:"status active",children:i("notUsed")})}),l.jsx("td",{children:l.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:T?l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>y(),title:i("save")||"Save",style:{background:"none",border:"none",cursor:"pointer",padding:"4px"},children:l.jsx(p_,{size:18,color:"#28a745"})}),l.jsx("button",{onClick:()=>c(null),title:i("cancel"),style:{background:"none",border:"none",cursor:"pointer",padding:"4px"},children:l.jsx(Hr,{size:18,color:"#DC3545"})})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>g(j),title:i("edit"),style:{background:"none",border:"none",cursor:"pointer",padding:"4px"},children:l.jsx(Fh,{size:18,color:"#5C4033"})}),!k&&l.jsx("button",{onClick:()=>P(j.id),title:i("delete"),style:{background:"none",border:"none",cursor:"pointer",padding:"4px"},children:l.jsx(Bi,{size:18,color:"#DC3545"})})]})})})]},j.id)})})]})]})]})},mC=({orders:t,setOrders:e,formatCurrency:n})=>{const{t:r}=Ye(),i=n||(g=>`USD ${Number(g).toFixed(2)}`),s=(g,w)=>{e(A=>A.map(P=>P.id===g?{...P,status:w}:P))},o=g=>{const w={[r("pending")]:"Pending",[r("inProgress")]:"In Progress",[r("ready")]:"Ready",[r("completed")]:"Completed",[r("cancelled")]:"Cancelled"},A=Object.keys(w).find(j=>w[j]===g)||g,P={Pending:"#FFF3CD","In Progress":"#D1ECF1",Ready:"#D4EDDA",Completed:"#D4EDDA",Cancelled:"#F8D7DA"};return P[A]||P[g]||"#E2E3E5"},u=g=>{const w={[r("pending")]:"Pending",[r("inProgress")]:"In Progress",[r("ready")]:"Ready",[r("completed")]:"Completed",[r("cancelled")]:"Cancelled"},A=Object.keys(w).find(j=>w[j]===g)||g,P={Pending:"#856404","In Progress":"#0C5460",Ready:"#155724",Completed:"#155724",Cancelled:"#721C24"};return P[A]||P[g]||"#383D41"},c=g=>({Pending:r("pending"),"In Progress":r("inProgress"),Ready:r("ready"),Completed:r("completed"),Cancelled:r("cancelled")})[g]||g,h=t.filter(g=>g.status==="Pending").length,m=t.filter(g=>g.status==="In Progress").length,y=t.filter(g=>g.status==="Ready").length;return l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3,1fr)",gap:"1.5rem",marginBottom:"2rem"},children:[l.jsxs("div",{className:"form-card",style:{textAlign:"center",padding:"2rem"},children:[l.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.5rem"},children:""}),l.jsx("div",{style:{fontSize:"2rem",fontWeight:"600",color:"var(--terracotta)"},children:h}),l.jsx("div",{style:{color:"var(--chocolate)",opacity:.7},children:r("pendingOrders")})]}),l.jsxs("div",{className:"form-card",style:{textAlign:"center",padding:"2rem"},children:[l.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.5rem"},children:""}),l.jsx("div",{style:{fontSize:"2rem",fontWeight:"600",color:"var(--terracotta)"},children:m}),l.jsx("div",{style:{color:"var(--chocolate)",opacity:.7},children:r("inProgress")})]}),l.jsxs("div",{className:"form-card",style:{textAlign:"center",padding:"2rem"},children:[l.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.5rem"},children:""}),l.jsx("div",{style:{fontSize:"2rem",fontWeight:"600",color:"var(--terracotta)"},children:y}),l.jsx("div",{style:{color:"var(--chocolate)",opacity:.7},children:r("ready")})]})]}),l.jsxs("div",{className:"form-card",children:[l.jsx("h3",{style:{fontFamily:"'Playfair Display',serif",marginBottom:"1.5rem"},children:r("allOrders")}),t.length===0?l.jsx("p",{style:{color:"var(--chocolate)",opacity:.7},children:r("noOrdersYet")}):l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:t.map(g=>l.jsxs("div",{style:{padding:"1.5rem",background:"var(--blush)",borderRadius:"16px",border:"1px solid rgba(0,0,0,0.1)"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"1rem",flexWrap:"wrap",gap:"1rem"},children:[l.jsxs("div",{style:{flex:1},children:[l.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",marginBottom:"0.5rem"},children:[l.jsx("strong",{style:{fontSize:"1.1rem",color:"var(--espresso)"},children:g.id}),l.jsx("span",{style:{fontSize:"0.8rem",padding:"0.25rem 0.75rem",background:o(g.status),color:u(g.status),borderRadius:"50px",fontWeight:600},children:c(g.status)})]}),l.jsxs("div",{style:{fontSize:"0.9rem",color:"var(--chocolate)",marginBottom:"0.5rem"},children:[l.jsxs("strong",{children:[r("customer"),":"]})," ",g.customerName]}),g.email&&l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--chocolate)",opacity:.7,marginBottom:"0.25rem"},children:g.email}),g.phone&&l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--chocolate)",opacity:.7,marginBottom:"0.5rem"},children:g.phone}),l.jsxs("div",{style:{fontSize:"0.9rem",color:"var(--chocolate)",marginTop:"0.5rem"},children:[l.jsxs("strong",{children:[r("address"),":"]})," ",g.address]}),l.jsxs("div",{style:{fontSize:"0.9rem",color:"var(--chocolate)",marginTop:"0.5rem"},children:[l.jsxs("strong",{children:[r("delivery"),":"]})," ",g.date," @ ",g.time," (",r(g.timeOfDay),")"]})]}),l.jsxs("div",{style:{textAlign:"right"},children:[l.jsx("div",{style:{fontWeight:"600",color:"var(--terracotta)",fontSize:"1.2rem"},children:i(g.total)}),l.jsxs("div",{style:{fontSize:"0.9rem",marginTop:"0.5rem"},children:[l.jsx("div",{children:l.jsxs("strong",{children:[r("items"),":"]})}),g.items.map(w=>l.jsxs("div",{style:{fontSize:"0.85rem",opacity:.8},children:[w.name," x",w.quantity]},`${g.id}-${w.id}`))]})]})]}),g.notes&&l.jsxs("div",{style:{marginBottom:"1rem",padding:"0.75rem",background:"white",borderRadius:"8px",fontSize:"0.85rem"},children:[l.jsxs("strong",{children:[r("notes"),":"]})," ",g.notes]}),l.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center",flexWrap:"wrap"},children:[l.jsxs("label",{style:{fontSize:"0.9rem",fontWeight:500},children:[r("updateStatus"),":"]}),l.jsxs("select",{value:g.status,onChange:w=>s(g.id,w.target.value),style:{padding:"0.5rem 1rem",border:"2px solid var(--terracotta)",borderRadius:"8px",fontSize:"0.9rem",fontWeight:500,background:"white",cursor:"pointer"},children:[l.jsx("option",{value:"Pending",children:r("pending")}),l.jsx("option",{value:"In Progress",children:r("inProgress")}),l.jsx("option",{value:"Ready",children:r("ready")}),l.jsx("option",{value:"Completed",children:r("completed")}),l.jsx("option",{value:"Cancelled",children:r("cancelled")})]}),l.jsxs("span",{style:{fontSize:"0.8rem",opacity:.7,marginLeft:"auto"},children:[r("recentOrders"),": ",new Date(g.createdAt).toLocaleString()]})]})]},g.id))})]})]})},pC=({onDefaultChange:t,userCountry:e})=>{const{t:n}=Ye(),[r,i]=B.useState([]),[s,o]=B.useState(!1),[u,c]=B.useState(null),[h,m]=B.useState(null),[y,g]=B.useState({country:"",countryCode:"",email:"",phone:"",isDefault:!1});B.useEffect(()=>{P(),w()},[]),B.useEffect(()=>{r.length>0&&h&&A()},[r,h]);const w=async()=>{try{if(e)m(e);else{const v=await ae.getCountryFromIP();m(v.country_code)}}catch(v){console.error("Failed to detect country:",v),m("GENERAL")}},A=()=>{const v=r.find(_=>_.isDefault);if(v){j(v);return}const p=r.find(_=>{var S;return _.countryCode===h||((S=_.countryCode)==null?void 0:S.toUpperCase())===(h==null?void 0:h.toUpperCase())});if(p)j(p);else{const _=r.find(S=>{var I,R;return((I=S.countryCode)==null?void 0:I.toUpperCase())==="GENERAL"||((R=S.country)==null?void 0:R.toLowerCase())==="general"});_&&j(_)}},P=async()=>{try{const v=await ae.getCountryContacts();i(v)}catch(v){console.error("Failed to load country contacts:",v)}},j=async v=>{t&&t({email:v.email,phone:v.phone})},k=()=>{g({country:"",countryCode:"",email:"",phone:"",isDefault:!1}),c(null),o(!1)},E=v=>{g({country:v.country,countryCode:v.countryCode,email:v.email,phone:v.phone,isDefault:v.isDefault}),c(v),o(!0)},T=async v=>{v.preventDefault();try{if(y.isDefault&&!(u!=null&&u.isDefault)){const _=r.find(S=>S.isDefault);_&&await ae.updateCountryContact(_.id,{..._,isDefault:!1})}let p;u?(p={...u,...y},await ae.updateCountryContact(u.id,p)):(p={id:y.countryCode.toLowerCase(),...y},await ae.createCountryContact(p)),p.isDefault&&await j(p),await P(),k()}catch(p){console.error("Failed to save contact:",p)}},b=async v=>{if(v.isDefault){console.log(n("cannotDeleteDefault"));return}if(window.confirm(n("deleteCountryContact")))try{await ae.deleteCountryContact(v.id),await P()}catch(p){console.error("Failed to delete contact:",p)}},D=async v=>{try{const p=r.find(S=>S.isDefault);p&&await ae.updateCountryContact(p.id,{...p,isDefault:!1});const _={...v,isDefault:!0};await ae.updateCountryContact(v.id,_),await j(_),await P()}catch(p){console.error("Failed to set default:",p)}},F=[{code:"GENERAL",name:"General (Default)"},{code:"US",name:"United States"},{code:"TM",name:"Turkmenistan"},{code:"TR",name:"Turkey"},{code:"RU",name:"Russia"},{code:"DE",name:"Germany"},{code:"GB",name:"United Kingdom"},{code:"FR",name:"France"},{code:"AE",name:"UAE"},{code:"KZ",name:"Kazakhstan"},{code:"UZ",name:"Uzbekistan"}];return l.jsxs("div",{style:{marginTop:"2rem",paddingTop:"2rem",borderTop:"2px solid var(--blush)"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[l.jsxs("div",{children:[l.jsxs("h4",{style:{fontFamily:"'Playfair Display', serif",color:"var(--espresso)",marginBottom:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(Pi,{size:20})," ",n("countryContacts")]}),l.jsx("p",{style:{color:"var(--chocolate)",opacity:.7,fontSize:"0.9rem"},children:n("countryContactsDescription")}),h&&l.jsxs("p",{style:{color:"var(--sage)",fontSize:"0.85rem",marginTop:"0.5rem",display:"flex",alignItems:"center",gap:"0.25rem"},children:[l.jsx(ig,{size:14})," ",n("yourLocation")||"Your location",": ",l.jsx("strong",{children:h})]})]}),!s&&l.jsxs("button",{className:"btn btn-primary btn-small",onClick:()=>o(!0),style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[l.jsx(HI,{size:16})," ",n("addCountryContact")]})]}),s&&l.jsxs("div",{style:{background:"var(--blush)",padding:"1.5rem",borderRadius:"16px",marginBottom:"1.5rem"},children:[l.jsx("h5",{style:{marginBottom:"1rem",fontFamily:"'Playfair Display', serif"},children:n(u?"editCountryContact":"addCountryContact")}),l.jsxs("form",{onSubmit:T,children:[l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[n("countryName")," *"]}),l.jsx("input",{type:"text",required:!0,value:y.country,onChange:v=>g({...y,country:v.target.value}),placeholder:"e.g., United States"})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[n("countryCode")," *"]}),l.jsxs("select",{value:y.countryCode,onChange:v=>{const p=F.find(_=>_.code===v.target.value);g({...y,countryCode:v.target.value,country:p&&v.target.value!=="custom"?p.name:y.country})},style:{marginBottom:y.countryCode==="custom"?"0.5rem":0},children:[l.jsxs("option",{value:"",children:["-- ",n("selectLanguage")," --"]}),F.map(v=>l.jsxs("option",{value:v.code,children:[v.code," - ",v.name]},v.code)),l.jsx("option",{value:"custom",children:"Other (Custom)"})]}),y.countryCode==="custom"&&l.jsx("input",{type:"text",maxLength:2,placeholder:"XX",style:{marginTop:"0.5rem",textTransform:"uppercase"},onChange:v=>g({...y,countryCode:v.target.value.toUpperCase()})}),l.jsx("small",{style:{color:"var(--chocolate)",opacity:.6,fontSize:"0.8rem"},children:n("countryCodeHelp")})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[l.jsx(rg,{size:14,style:{marginRight:"0.25rem"}}),n("email")," *"]}),l.jsx("input",{type:"email",required:!0,value:y.email,onChange:v=>g({...y,email:v.target.value}),placeholder:"contact@example.com"})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[l.jsx(sg,{size:14,style:{marginRight:"0.25rem"}}),n("phone")," *"]}),l.jsx("input",{type:"text",required:!0,value:y.phone,onChange:v=>g({...y,phone:v.target.value}),placeholder:"+1 (555) 123-4567"})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[l.jsx("input",{type:"checkbox",id:"isDefault",checked:y.isDefault,onChange:v=>g({...y,isDefault:v.target.checked}),style:{width:"auto"}}),l.jsxs("label",{htmlFor:"isDefault",style:{cursor:"pointer",marginBottom:0},children:[n("setAsDefault")," (",n("countryContactsDescription").split(".")[0],")"]})]}),l.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[l.jsxs("button",{type:"submit",className:"btn btn-primary btn-small",children:[l.jsx(p_,{size:16})," ",n(u?"save":"add")]}),l.jsxs("button",{type:"button",className:"btn btn-secondary btn-small",onClick:k,children:[l.jsx(Hr,{size:16})," ",n("cancel")]})]})]})]}),r.length===0?l.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"var(--chocolate)",opacity:.7},children:[l.jsx(Pi,{size:48,style:{opacity:.3,marginBottom:"1rem"}}),l.jsx("p",{children:n("noCountryContacts")})]}):l.jsx("div",{style:{display:"grid",gap:"1rem"},children:r.map(v=>{var I,R;const p=((I=v.countryCode)==null?void 0:I.toUpperCase())===(h==null?void 0:h.toUpperCase()),_=((R=v.countryCode)==null?void 0:R.toUpperCase())==="GENERAL"&&!r.some(C=>{var H;return((H=C.countryCode)==null?void 0:H.toUpperCase())===(h==null?void 0:h.toUpperCase())}),S=p||_;return l.jsxs("div",{style:{background:v.isDefault?"linear-gradient(135deg, rgba(212,133,106,0.1), rgba(248,232,224,0.5))":"white",border:v.isDefault?"2px solid var(--terracotta)":S?"2px solid var(--sage)":"1px solid var(--blush)",borderRadius:"12px",padding:"1rem 1.5rem",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"1rem"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flex:1},children:[l.jsx("div",{style:{width:"45px",height:"45px",borderRadius:"50%",background:v.isDefault?"var(--terracotta)":S?"var(--sage)":"var(--blush)",color:v.isDefault||S?"white":"var(--chocolate)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"0.8rem"},children:v.countryCode==="GENERAL"?l.jsx(Pi,{size:20}):v.countryCode}),l.jsxs("div",{style:{flex:1},children:[l.jsxs("div",{style:{fontWeight:600,color:"var(--espresso)",display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[v.country,v.isDefault&&l.jsx("span",{style:{background:"var(--terracotta)",color:"white",fontSize:"0.7rem",padding:"0.2rem 0.5rem",borderRadius:"20px",fontWeight:500},children:n("defaultContact")}),S&&!v.isDefault&&l.jsxs("span",{style:{background:"var(--sage)",color:"white",fontSize:"0.7rem",padding:"0.2rem 0.5rem",borderRadius:"20px",fontWeight:500,display:"flex",alignItems:"center",gap:"0.25rem"},children:[l.jsx(ig,{size:10})," ",n("yourLocation")||"Your Location"]})]}),l.jsxs("div",{style:{display:"flex",gap:"1.5rem",marginTop:"0.25rem",fontSize:"0.9rem",color:"var(--chocolate)",opacity:.8},children:[l.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.35rem"},children:[l.jsx(rg,{size:14})," ",v.email]}),l.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.35rem"},children:[l.jsx(sg,{size:14})," ",v.phone]})]})]})]}),l.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[l.jsx("button",{onClick:()=>!v.isDefault&&D(v),title:v.isDefault?n("defaultContact"):n("setAsDefault"),style:{background:"none",border:"none",cursor:v.isDefault?"default":"pointer",padding:"0.5rem",color:v.isDefault?"#F5A623":"var(--rose)",transition:"all 0.2s"},children:l.jsx(g_,{size:20,fill:v.isDefault?"#F5A623":"none"})}),l.jsx("button",{onClick:()=>E(v),title:n("edit"),style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",color:"var(--chocolate)"},children:l.jsx(Fh,{size:18})}),l.jsx("button",{onClick:()=>b(v),title:n("delete"),style:{background:"none",border:"none",cursor:v.isDefault?"not-allowed":"pointer",padding:"0.5rem",color:v.isDefault?"var(--rose)":"#DC3545",opacity:v.isDefault?.4:1},disabled:v.isDefault,children:l.jsx(Bi,{size:18})})]})]},v.id)})})]})},gC=({onNavigate:t,ingredients:e,setIngredients:n,products:r,setProducts:i,orders:s,setOrders:o,formatCurrency:u,settings:c,setSettings:h,currentCurrency:m,onResetData:y,userCountry:g})=>{var At,xt;const{isAdmin:w,invites:A,users:P,createInvite:j,deleteInvite:k,deleteUser:E,user:T,role:b}=Xr(),{t:D}=Ye(),[F,v]=B.useState("dashboard"),[p,_]=B.useState({email:"",role:"dealer",days:7}),[S,I]=B.useState(""),[R,C]=B.useState([]),H=m!=null&&m.symbol&&m.symbol.trim()?m.symbol:(m==null?void 0:m.code)||"USD",ie=q=>`${H} ${Number(q).toFixed(2)}`,fe=async q=>{const ge={...c,contactInfo:{...c.contactInfo,email:q.email,phone:q.phone}};h(ge);try{await ae.updateSettings(ge)}catch(xr){console.error("Failed to save contact settings:",xr)}};B.useEffect(()=>{F==="messages"&&ae.getMessages().then(C).catch(q=>console.error("Failed to load messages:",q))},[F]);const ue=Array.isArray(s)?s:[],U=Array.isArray(r)?r:[],J=Array.isArray(e)?e:[];if(!(()=>{if(w||T&&b==="admin")return!0;try{const q=localStorage.getItem("soulmate_user");if(q){const ge=JSON.parse(q);return ge&&ge.role==="admin"}}catch(q){console.error("Error checking admin status:",q)}return!1})())return l.jsx("div",{className:"page",children:l.jsxs("div",{className:"success-msg",children:[l.jsx("div",{className:"success-icon",children:""}),l.jsx("h2",{children:D("accessDenied")}),l.jsxs("p",{children:[D("adminOnly")," ",D("pleaseLoginWithAdmin")]}),l.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"var(--blush)",borderRadius:"12px",textAlign:"left",maxWidth:"400px",margin:"1.5rem auto"},children:[l.jsxs("p",{style:{fontSize:"0.9rem",marginBottom:"0.5rem",fontWeight:600},children:[D("adminCredentials"),":"]}),l.jsxs("p",{style:{fontSize:"0.85rem",fontFamily:"monospace"},children:[D("email"),": admin@soulmate.com",l.jsx("br",{}),D("password"),": Admin@2024!"]})]}),l.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[l.jsx("button",{className:"btn btn-primary",onClick:()=>t("login"),children:D("goToLogin")}),l.jsx("button",{className:"btn btn-secondary",onClick:()=>t("home"),children:D("backToHome")})]})]})});const ve=q=>{q.preventDefault();const ge=j(p.email,p.role,parseInt(p.days));ge.success&&(I(`${D("createdToken")} ${ge.invite.token}`),_({email:"",role:"dealer",days:7}),setTimeout(()=>I(""),5e3))},Se=q=>q.used?"used":new Date(q.expiresAt)<new Date?"expired":"active";return l.jsxs("div",{className:"page",style:{maxWidth:"1200px"},children:[l.jsx("div",{className:"page-header",children:l.jsx("h1",{children:D("adminDashboard")})}),l.jsxs("div",{className:"tabs",children:[l.jsx("button",{className:`tab ${F==="dashboard"?"active":""}`,onClick:()=>v("dashboard"),children:D("overview")}),l.jsx("button",{className:`tab ${F==="orders"?"active":""}`,onClick:()=>v("orders"),children:D("orders")}),l.jsx("button",{className:`tab ${F==="products"?"active":""}`,onClick:()=>v("products"),children:D("products")}),l.jsx("button",{className:`tab ${F==="ingredients"?"active":""}`,onClick:()=>v("ingredients"),children:D("ingredients")}),l.jsx("button",{className:`tab ${F==="invites"?"active":""}`,onClick:()=>v("invites"),children:D("invites")}),l.jsx("button",{className:`tab ${F==="users"?"active":""}`,onClick:()=>v("users"),children:D("users")}),l.jsx("button",{className:`tab ${F==="messages"?"active":""}`,onClick:()=>v("messages"),children:D("messages")}),l.jsx("button",{className:`tab ${F==="settings"?"active":""}`,onClick:()=>v("settings"),children:D("settings")})]}),F==="dashboard"&&l.jsxs("div",{className:"admin-tab-content",children:[l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3,1fr)",gap:"1.5rem",marginBottom:"2rem"},children:[l.jsxs("div",{className:"form-card",style:{textAlign:"center",padding:"2rem"},children:[l.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.5rem"},children:""}),l.jsx("div",{style:{fontSize:"2rem",fontWeight:"600",color:"var(--terracotta)"},children:ue.filter(q=>q.status==="Pending").length}),l.jsx("div",{style:{color:"var(--chocolate)",opacity:.7},children:D("pendingOrders")})]}),l.jsxs("div",{className:"form-card",style:{textAlign:"center",padding:"2rem"},children:[l.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.5rem"},children:""}),l.jsx("div",{style:{fontSize:"2rem",fontWeight:"600",color:"var(--terracotta)"},children:Array.isArray(P)?P.length:0}),l.jsx("div",{style:{color:"var(--chocolate)",opacity:.7},children:D("registeredUsers")})]}),l.jsxs("div",{className:"form-card",style:{textAlign:"center",padding:"2rem"},children:[l.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.5rem"},children:""}),l.jsx("div",{style:{fontSize:"2rem",fontWeight:"600",color:"var(--terracotta)"},children:ie(ue.filter(q=>q.status!=="Cancelled").reduce((q,ge)=>q+(ge.total||0),0))}),l.jsx("div",{style:{color:"var(--chocolate)",opacity:.7},children:D("totalRevenue")})]})]}),l.jsxs("div",{className:"form-card",children:[l.jsx("h3",{style:{fontFamily:"'Playfair Display',serif",marginBottom:"1.5rem"},children:D("recentOrders")}),ue.length===0?l.jsx("p",{style:{color:"var(--chocolate)",opacity:.7},children:D("noOrdersYet")}):ue.slice(0,5).map(q=>l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",background:"var(--blush)",borderRadius:"12px",marginBottom:"0.75rem"},children:[l.jsxs("div",{children:[l.jsx("strong",{children:q.id}),"  ",q.customerName,l.jsx("div",{style:{fontSize:"0.9rem",color:"var(--chocolate)",opacity:.7},children:q.items.map(ge=>`${ge.name} ${ge.quantity}`).join(", ")})]}),l.jsxs("div",{style:{textAlign:"right"},children:[l.jsx("div",{style:{fontWeight:"600",color:"var(--terracotta)"},children:ie(q.total)}),l.jsx("div",{style:{fontSize:"0.8rem",padding:"0.25rem 0.75rem",background:q.status==="Pending"?"#FFF3CD":q.status==="Ready"?"#D4EDDA":q.status==="Cancelled"?"#F8D7DA":"#D1ECF1",borderRadius:"50px",display:"inline-block",marginTop:"0.25rem"},children:D(q.status==="Pending"?"pending":q.status==="Ready"?"ready":q.status==="Cancelled"?"cancelled":q.status==="In Progress"?"inProgress":q.status==="Completed"?"completed":q.status)})]})]},q.id))]})]}),F==="invites"&&l.jsx("div",{className:"admin-tab-content",children:l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"form-card",style:{marginBottom:"2rem"},children:[l.jsx("h3",{style:{fontFamily:"'Playfair Display',serif",marginBottom:"1.5rem"},children:D("createNewInvite")}),l.jsxs("form",{onSubmit:ve,children:[l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:D("emailOptional")}),l.jsx("input",{type:"email",value:p.email,onChange:q=>_({...p,email:q.target.value}),placeholder:D("leaveBlankForAnyEmail")})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("label",{children:[D("role")," *"]}),l.jsxs("select",{value:p.role,onChange:q=>_({...p,role:q.target.value}),children:[l.jsx("option",{value:"dealer",children:D("dealer")}),l.jsx("option",{value:"public",children:D("regularUser")})]})]})]}),l.jsxs("div",{className:"form-group",style:{maxWidth:"200px"},children:[l.jsx("label",{children:D("expiresInDays")}),l.jsx("input",{type:"number",value:p.days,onChange:q=>_({...p,days:q.target.value}),min:"1",max:"90"})]}),S&&l.jsx("p",{className:"form-success",children:S}),l.jsx("button",{type:"submit",className:"form-submit",style:{width:"auto",padding:"0.8rem 2rem"},children:D("createInvite")})]})]}),l.jsxs("div",{className:"form-card",children:[l.jsx("h3",{style:{fontFamily:"'Playfair Display',serif",marginBottom:"1.5rem"},children:D("allInvites")}),A.length===0?l.jsx("p",{style:{color:"var(--chocolate)",opacity:.7},children:D("noInvitesYet")}):l.jsxs("table",{className:"admin-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:D("token")}),l.jsx("th",{children:D("email")}),l.jsx("th",{children:D("role")}),l.jsx("th",{children:D("status")}),l.jsx("th",{children:D("expires")}),l.jsx("th",{children:D("actions")})]})}),l.jsx("tbody",{children:A.map(q=>{const ge=Se(q);return l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("span",{className:"token",children:q.token})}),l.jsx("td",{children:q.email||l.jsx("em",{style:{opacity:.5},children:D("any")})}),l.jsx("td",{style:{textTransform:"capitalize"},children:q.role==="dealer"?D("dealer"):D("regularUser")}),l.jsx("td",{children:l.jsx("span",{className:`status ${ge}`,children:D(ge)})}),l.jsx("td",{children:new Date(q.expiresAt).toLocaleDateString()}),l.jsx("td",{children:ge==="active"&&l.jsx("button",{onClick:()=>k(q.id),title:D("delete"),style:{background:"none",border:"none",cursor:"pointer",padding:"4px"},children:l.jsx(Bi,{size:18,color:"#DC3545"})})})]},q.id)})})]})]})]})}),F==="messages"&&l.jsx("div",{className:"admin-tab-content",children:l.jsxs("div",{className:"form-card",children:[l.jsx("h3",{style:{fontFamily:"'Playfair Display',serif",marginBottom:"1.5rem"},children:D("messages")}),R.length===0?l.jsx("p",{style:{color:"var(--chocolate)",opacity:.7},children:D("noMessagesYet")}):l.jsxs("table",{className:"admin-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:D("date")}),l.jsx("th",{children:D("sender")}),l.jsx("th",{children:D("phone")}),l.jsx("th",{children:D("message")}),l.jsx("th",{children:D("actions")})]})}),l.jsx("tbody",{children:R.map(q=>l.jsxs("tr",{children:[l.jsxs("td",{style:{whiteSpace:"nowrap",fontSize:"0.9rem"},children:[new Date(q.date).toLocaleDateString()," ",new Date(q.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),l.jsxs("td",{children:[l.jsx("div",{style:{fontWeight:600},children:q.name}),l.jsx("div",{style:{fontSize:"0.85rem",opacity:.8},children:q.email})]}),l.jsx("td",{children:q.phone}),l.jsx("td",{style:{maxWidth:"300px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:q.message,children:q.message}),l.jsx("td",{children:l.jsx("button",{onClick:()=>{window.confirm(D("confirmDelete")||"Are you sure?")&&ae.deleteMessage(q.id).then(()=>{C(ge=>ge.filter(xr=>xr.id!==q.id))}).catch(ge=>console.error("Failed to delete message",ge))},title:D("delete"),style:{background:"none",border:"none",cursor:"pointer",padding:"4px"},children:l.jsx(Bi,{size:18,color:"#DC3545"})})})]},q.id))})]})]})}),F==="orders"&&l.jsx("div",{className:"admin-tab-content",children:l.jsx(mC,{orders:ue,setOrders:o,formatCurrency:u})}),F==="products"&&l.jsx("div",{className:"admin-tab-content",children:l.jsx(hC,{products:U,setProducts:i,ingredients:J,formatCurrency:u,currentCurrency:m})}),F==="ingredients"&&l.jsx("div",{className:"admin-tab-content",children:l.jsx(fC,{ingredients:J,setIngredients:n,products:U,currentCurrency:m})}),F==="users"&&l.jsx("div",{className:"admin-tab-content",children:l.jsxs("div",{className:"form-card",children:[l.jsx("h3",{style:{fontFamily:"'Playfair Display',serif",marginBottom:"1.5rem"},children:D("registeredUsers")}),!P||P.length===0?l.jsx("p",{style:{color:"var(--chocolate)",opacity:.7},children:D("noUsersYet")}):l.jsxs("table",{className:"admin-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:D("name")}),l.jsx("th",{children:D("email")}),l.jsx("th",{children:D("phone")}),l.jsx("th",{children:D("role")}),l.jsx("th",{children:D("registered")}),l.jsx("th",{children:D("actions")})]})}),l.jsx("tbody",{children:P.map(q=>l.jsxs("tr",{children:[l.jsx("td",{children:q.name}),l.jsx("td",{children:q.email}),l.jsx("td",{children:q.phone||"-"}),l.jsx("td",{children:l.jsx("span",{className:`status ${q.role==="dealer"?"active":""}`,style:{background:q.role==="dealer"?"#D4EDDA":"#E2E3E5"},children:q.role==="dealer"?D("dealer"):D("regularUser")})}),l.jsx("td",{children:new Date(q.createdAt).toLocaleDateString()}),l.jsx("td",{children:l.jsx("button",{className:"btn btn-small btn-danger",onClick:()=>E(q.id),children:D("remove")})})]},q.id))})]})]})}),F==="settings"&&l.jsx("div",{className:"admin-tab-content",children:l.jsxs("div",{className:"form-card",children:[l.jsx("h3",{style:{fontFamily:"'Playfair Display',serif",marginBottom:"1.5rem"},children:D("adminGeneralSettings")}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:D("contactEmail")}),l.jsx("input",{type:"email",value:((At=c==null?void 0:c.contactInfo)==null?void 0:At.email)||"",onChange:q=>h({...c,contactInfo:{...c.contactInfo,email:q.target.value}}),placeholder:"hello@soulmatedesserts.com",readOnly:!0,style:{background:"var(--blush)",cursor:"not-allowed",opacity:.8},title:"Synced from default country contact"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:D("contactPhone")}),l.jsx("input",{type:"text",value:((xt=c==null?void 0:c.contactInfo)==null?void 0:xt.phone)||"",onChange:q=>h({...c,contactInfo:{...c.contactInfo,phone:q.target.value}}),placeholder:"(512) 555-CAKE",readOnly:!0,style:{background:"var(--blush)",cursor:"not-allowed",opacity:.8},title:"Synced from default country contact"})]})]}),l.jsxs("p",{style:{color:"var(--chocolate)",opacity:.7,fontSize:"0.9rem",marginBottom:"2rem"},children:[D("footerSettingsDescription")," ",l.jsxs("span",{style:{fontStyle:"italic"},children:["(",D("defaultContact")," )"]})]}),l.jsx(pC,{onDefaultChange:fe,userCountry:g}),l.jsxs("div",{style:{paddingTop:"2rem",borderTop:"2px solid var(--blush)",marginTop:"2rem"},children:[l.jsx("h4",{style:{fontFamily:"'Playfair Display',serif",marginBottom:"1rem",color:"var(--espresso)"},children:D("dataManagement")}),l.jsx("button",{className:"btn btn-danger",onClick:y,children:D("resetData")})]})]})})]})};function yC(){const[t,e]=B.useState("home"),[n,r]=B.useState(!0),[i,s]=B.useState(null),o=p=>{p&&typeof p=="string"&&(e(p),window.scrollTo(0,0))},[u,c]=B.useState([]),[h,m]=B.useState([]),[y,g]=B.useState([]),[w,A]=B.useState({language:"en",currency:"USD",currencies:[{code:"TMT",name:"Turkmen Manat",symbol:"TMT",rate:3.5},{code:"USD",name:"US Dollar",symbol:"$",rate:1}],contactInfo:{phone:"(512) 555-CAKE",email:"hello@soulmatedesserts.com"}}),P=async()=>{r(!0);try{const p=await Promise.allSettled([ae.getProducts(),ae.getIngredients(),ae.getOrders(),ae.getSettings()]),[_,S,I,R]=p;if(_.status==="fulfilled"?c(_.value):console.error("Failed to load products:",_.reason),S.status==="fulfilled"?m(S.value):console.error("Failed to load ingredients:",S.reason),I.status==="fulfilled"?g(I.value):console.error("Failed to load orders:",I.reason),R.status==="fulfilled"){const C=R.value;C&&C.currencies&&A(C)}else console.error("Failed to load settings:",R.reason)}catch(p){console.error("Unexpected error in fetchData:",p)}finally{r(!1)}};B.useEffect(()=>{P(),(async()=>{try{const _=await ae.getCountryFromIP();s(_.countryCode)}catch(_){console.error("Failed to detect country:",_),s("GENERAL")}})()},[]);const j=(p,_)=>{c(S=>S.map(R=>R.id===p?{...R,..._}:R))},k=p=>{const _=w.currencies.find(S=>S.code===w.currency);return!_||w.currency==="USD"?Number(p):Number(p)*_.rate},E=p=>{const _=w.currencies.find(R=>R.code===w.currency)||w.currencies[0],S=k(p);return`${_!=null&&_.symbol&&_.symbol.trim()?_.symbol:(_==null?void 0:_.code)||"USD"} ${Number(S).toFixed(2)}`},T=async p=>{const _=w.currencies.find(I=>I.rate===1)||w.currencies.find(I=>I.code==="USD")||w.currencies[0],S=w.currencies.find(I=>I.code===p);if(!(!S||S.code===_.code)){r(!0);try{const I=S.rate,R=w.currencies.map(U=>({...U,rate:parseFloat((U.rate/I).toFixed(6))})),C={...w,currencies:R,currency:p,store:w.store?{...w.store,shipping:parseFloat((w.store.shipping*I).toFixed(2))}:w.store},H=u.map(U=>({...U,price:parseFloat((U.price*I).toFixed(2)),makingPrice:U.makingPrice?parseFloat((U.makingPrice*I).toFixed(2)):0})),ie=h.map(U=>({...U,pricePerUnit:parseFloat((U.pricePerUnit*I).toFixed(2))}));await ae.updateSettings(C);const fe=H.filter(U=>U.id),ue=ie.filter(U=>U.id);(fe.length>0||ue.length>0)&&await Promise.allSettled([...fe.map(U=>ae.updateProduct(U.id,U)),...ue.map(U=>ae.updateIngredient(U.id,U))]),A(C),c(H),m(ie)}catch(I){console.error("Failed to rotate base currency:",I),console.log("Failed to update base currency. Please try again.")}finally{r(!1)}}},b=async p=>{try{const _={id:`#${Date.now()}`,...p,status:"Pending",createdAt:new Date().toISOString()};await ae.createOrder(_),g(S=>[_,...S]),o("home"),console.log(`Order Placed Successfully! Order ID: ${_.id}`)}catch(_){console.log("Failed to place order"),console.error(_)}},D=()=>{console.log("Reset not fully supported in DB mode. Please edit db.json directly.")},F=w.currencies.find(p=>p.code===w.currency)||w.currencies[0],v=()=>{const p=t||"home",_={onNavigate:o,formatCurrency:E,settings:w};switch(p){case"home":return l.jsx(og,{..._,products:u,ingredients:h,onUpdateProduct:j,userCountry:i});case"catalog":return l.jsx(oC,{..._,products:u,ingredients:h,onUpdateProduct:j,userCountry:i});case"checkout":return l.jsx(aC,{..._,onCreateOrder:b});case"contact":return l.jsx(lC,{..._});case"login":return l.jsx(uC,{..._});case"settings":return l.jsx(cC,{..._,settings:w,setSettings:A,onBaseCurrencyChange:T});case"admin":return l.jsx(gC,{..._,ingredients:h,setIngredients:m,products:u,setProducts:c,orders:y,setOrders:g,settings:w,setSettings:A,currentCurrency:F,onResetData:D,refreshData:P,userCountry:i});default:return l.jsx(og,{..._,products:u,ingredients:h,onUpdateProduct:j})}};return l.jsx(vI,{children:l.jsx(_I,{children:l.jsx(wI,{language:(w==null?void 0:w.language)||"en",children:l.jsxs("div",{className:"app",children:[l.jsx(nC,{onNavigate:o,products:u,formatCurrency:E}),l.jsx("div",{className:"page-container",children:v()},t),l.jsx(iC,{onNavigate:o,formatCurrency:E,settings:w}),l.jsx(rC,{onNavigate:o,contactInfo:w==null?void 0:w.contactInfo})]})})})})}Yu.createRoot(document.getElementById("root")).render(l.jsx(a1.StrictMode,{children:l.jsx(yC,{})}));
